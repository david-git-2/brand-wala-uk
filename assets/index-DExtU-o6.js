function uI(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(t,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function Ly(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jg={exports:{}},Xc={};var s0;function dI(){if(s0)return Xc;s0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,c){var d=null;if(c!==void 0&&(d=""+c),a.key!==void 0&&(d=""+a.key),"key"in a){c={};for(var f in a)f!=="key"&&(c[f]=a[f])}else c=a;return a=c.ref,{$$typeof:t,type:i,key:d,ref:a!==void 0?a:null,props:c}}return Xc.Fragment=e,Xc.jsx=n,Xc.jsxs=n,Xc}var a0;function fI(){return a0||(a0=1,Jg.exports=dI()),Jg.exports}var l=fI(),e_={exports:{}},We={};var o0;function hI(){if(o0)return We;o0=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function N(F){return F===null||typeof F!="object"?null:(F=b&&F[b]||F["@@iterator"],typeof F=="function"?F:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,j={};function L(F,re,he){this.props=F,this.context=re,this.refs=j,this.updater=he||T}L.prototype.isReactComponent={},L.prototype.setState=function(F,re){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,re,"setState")},L.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function M(){}M.prototype=L.prototype;function P(F,re,he){this.props=F,this.context=re,this.refs=j,this.updater=he||T}var V=P.prototype=new M;V.constructor=P,E(V,L.prototype),V.isPureReactComponent=!0;var z=Array.isArray;function G(){}var C={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function S(F,re,he){var pe=he.ref;return{$$typeof:t,type:F,key:re,ref:pe!==void 0?pe:null,props:he}}function A(F,re){return S(F.type,re,F.props)}function D(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function k(F){var re={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(he){return re[he]})}var I=/\/+/g;function K(F,re){return typeof F=="object"&&F!==null&&F.key!=null?k(""+F.key):re.toString(36)}function q(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(G,G):(F.status="pending",F.then(function(re){F.status==="pending"&&(F.status="fulfilled",F.value=re)},function(re){F.status==="pending"&&(F.status="rejected",F.reason=re)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function R(F,re,he,pe,ye){var we=typeof F;(we==="undefined"||we==="boolean")&&(F=null);var me=!1;if(F===null)me=!0;else switch(we){case"bigint":case"string":case"number":me=!0;break;case"object":switch(F.$$typeof){case t:case e:me=!0;break;case y:return me=F._init,R(me(F._payload),re,he,pe,ye)}}if(me)return ye=ye(F),me=pe===""?"."+K(F,0):pe,z(ye)?(he="",me!=null&&(he=me.replace(I,"$&/")+"/"),R(ye,re,he,"",function(Be){return Be})):ye!=null&&(D(ye)&&(ye=A(ye,he+(ye.key==null||F&&F.key===ye.key?"":(""+ye.key).replace(I,"$&/")+"/")+me)),re.push(ye)),1;me=0;var Fe=pe===""?".":pe+":";if(z(F))for(var Ne=0;Ne<F.length;Ne++)pe=F[Ne],we=Fe+K(pe,Ne),me+=R(pe,re,he,we,ye);else if(Ne=N(F),typeof Ne=="function")for(F=Ne.call(F),Ne=0;!(pe=F.next()).done;)pe=pe.value,we=Fe+K(pe,Ne++),me+=R(pe,re,he,we,ye);else if(we==="object"){if(typeof F.then=="function")return R(q(F),re,he,pe,ye);throw re=String(F),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return me}function B(F,re,he){if(F==null)return F;var pe=[],ye=0;return R(F,pe,"","",function(we){return re.call(he,we,ye++)}),pe}function Y(F){if(F._status===-1){var re=F._result;re=re(),re.then(function(he){(F._status===0||F._status===-1)&&(F._status=1,F._result=he)},function(he){(F._status===0||F._status===-1)&&(F._status=2,F._result=he)}),F._status===-1&&(F._status=0,F._result=re)}if(F._status===1)return F._result.default;throw F._result}var Z=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},se={map:B,forEach:function(F,re,he){B(F,function(){re.apply(this,arguments)},he)},count:function(F){var re=0;return B(F,function(){re++}),re},toArray:function(F){return B(F,function(re){return re})||[]},only:function(F){if(!D(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return We.Activity=v,We.Children=se,We.Component=L,We.Fragment=n,We.Profiler=a,We.PureComponent=P,We.StrictMode=i,We.Suspense=h,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,We.__COMPILER_RUNTIME={__proto__:null,c:function(F){return C.H.useMemoCache(F)}},We.cache=function(F){return function(){return F.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(F,re,he){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var pe=E({},F.props),ye=F.key;if(re!=null)for(we in re.key!==void 0&&(ye=""+re.key),re)!w.call(re,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&re.ref===void 0||(pe[we]=re[we]);var we=arguments.length-2;if(we===1)pe.children=he;else if(1<we){for(var me=Array(we),Fe=0;Fe<we;Fe++)me[Fe]=arguments[Fe+2];pe.children=me}return S(F.type,ye,pe)},We.createContext=function(F){return F={$$typeof:d,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:c,_context:F},F},We.createElement=function(F,re,he){var pe,ye={},we=null;if(re!=null)for(pe in re.key!==void 0&&(we=""+re.key),re)w.call(re,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(ye[pe]=re[pe]);var me=arguments.length-2;if(me===1)ye.children=he;else if(1<me){for(var Fe=Array(me),Ne=0;Ne<me;Ne++)Fe[Ne]=arguments[Ne+2];ye.children=Fe}if(F&&F.defaultProps)for(pe in me=F.defaultProps,me)ye[pe]===void 0&&(ye[pe]=me[pe]);return S(F,we,ye)},We.createRef=function(){return{current:null}},We.forwardRef=function(F){return{$$typeof:f,render:F}},We.isValidElement=D,We.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:Y}},We.memo=function(F,re){return{$$typeof:g,type:F,compare:re===void 0?null:re}},We.startTransition=function(F){var re=C.T,he={};C.T=he;try{var pe=F(),ye=C.S;ye!==null&&ye(he,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(G,Z)}catch(we){Z(we)}finally{re!==null&&he.types!==null&&(re.types=he.types),C.T=re}},We.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},We.use=function(F){return C.H.use(F)},We.useActionState=function(F,re,he){return C.H.useActionState(F,re,he)},We.useCallback=function(F,re){return C.H.useCallback(F,re)},We.useContext=function(F){return C.H.useContext(F)},We.useDebugValue=function(){},We.useDeferredValue=function(F,re){return C.H.useDeferredValue(F,re)},We.useEffect=function(F,re){return C.H.useEffect(F,re)},We.useEffectEvent=function(F){return C.H.useEffectEvent(F)},We.useId=function(){return C.H.useId()},We.useImperativeHandle=function(F,re,he){return C.H.useImperativeHandle(F,re,he)},We.useInsertionEffect=function(F,re){return C.H.useInsertionEffect(F,re)},We.useLayoutEffect=function(F,re){return C.H.useLayoutEffect(F,re)},We.useMemo=function(F,re){return C.H.useMemo(F,re)},We.useOptimistic=function(F,re){return C.H.useOptimistic(F,re)},We.useReducer=function(F,re,he){return C.H.useReducer(F,re,he)},We.useRef=function(F){return C.H.useRef(F)},We.useState=function(F){return C.H.useState(F)},We.useSyncExternalStore=function(F,re,he){return C.H.useSyncExternalStore(F,re,he)},We.useTransition=function(){return C.H.useTransition()},We.version="19.2.4",We}var l0;function Wh(){return l0||(l0=1,e_.exports=hI()),e_.exports}var p=Wh();const pa=Ly(p),Uy=uI({__proto__:null,default:pa},[p]);var t_={exports:{}},Zc={},n_={exports:{}},r_={};var c0;function mI(){return c0||(c0=1,(function(t){function e(R,B){var Y=R.length;R.push(B);e:for(;0<Y;){var Z=Y-1>>>1,se=R[Z];if(0<a(se,B))R[Z]=B,R[Y]=se,Y=Z;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var B=R[0],Y=R.pop();if(Y!==B){R[0]=Y;e:for(var Z=0,se=R.length,F=se>>>1;Z<F;){var re=2*(Z+1)-1,he=R[re],pe=re+1,ye=R[pe];if(0>a(he,Y))pe<se&&0>a(ye,he)?(R[Z]=ye,R[pe]=Y,Z=pe):(R[Z]=he,R[re]=Y,Z=re);else if(pe<se&&0>a(ye,Y))R[Z]=ye,R[pe]=Y,Z=pe;else break e}}return B}function a(R,B){var Y=R.sortIndex-B.sortIndex;return Y!==0?Y:R.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var d=Date,f=d.now();t.unstable_now=function(){return d.now()-f}}var h=[],g=[],y=1,v=null,b=3,N=!1,T=!1,E=!1,j=!1,L=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function V(R){for(var B=n(g);B!==null;){if(B.callback===null)i(g);else if(B.startTime<=R)i(g),B.sortIndex=B.expirationTime,e(h,B);else break;B=n(g)}}function z(R){if(E=!1,V(R),!T)if(n(h)!==null)T=!0,G||(G=!0,k());else{var B=n(g);B!==null&&q(z,B.startTime-R)}}var G=!1,C=-1,w=5,S=-1;function A(){return j?!0:!(t.unstable_now()-S<w)}function D(){if(j=!1,G){var R=t.unstable_now();S=R;var B=!0;try{e:{T=!1,E&&(E=!1,M(C),C=-1),N=!0;var Y=b;try{t:{for(V(R),v=n(h);v!==null&&!(v.expirationTime>R&&A());){var Z=v.callback;if(typeof Z=="function"){v.callback=null,b=v.priorityLevel;var se=Z(v.expirationTime<=R);if(R=t.unstable_now(),typeof se=="function"){v.callback=se,V(R),B=!0;break t}v===n(h)&&i(h),V(R)}else i(h);v=n(h)}if(v!==null)B=!0;else{var F=n(g);F!==null&&q(z,F.startTime-R),B=!1}}break e}finally{v=null,b=Y,N=!1}B=void 0}}finally{B?k():G=!1}}}var k;if(typeof P=="function")k=function(){P(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,K=I.port2;I.port1.onmessage=D,k=function(){K.postMessage(null)}}else k=function(){L(D,0)};function q(R,B){C=L(function(){R(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(R){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var Y=b;b=B;try{return R()}finally{b=Y}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Y=b;b=R;try{return B()}finally{b=Y}},t.unstable_scheduleCallback=function(R,B,Y){var Z=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,R){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Y+se,R={id:y++,callback:B,priorityLevel:R,startTime:Y,expirationTime:se,sortIndex:-1},Y>Z?(R.sortIndex=Y,e(g,R),n(h)===null&&R===n(g)&&(E?(M(C),C=-1):E=!0,q(z,Y-Z))):(R.sortIndex=se,e(h,R),T||N||(T=!0,G||(G=!0,k()))),R},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(R){var B=b;return function(){var Y=b;b=B;try{return R.apply(this,arguments)}finally{b=Y}}}})(r_)),r_}var u0;function pI(){return u0||(u0=1,n_.exports=mI()),n_.exports}var i_={exports:{}},Hn={};var d0;function gI(){if(d0)return Hn;d0=1;var t=Wh();function e(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(h,g,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:h,containerInfo:g,implementation:y}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hn.createPortal=function(h,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(h,g,null,y)},Hn.flushSync=function(h){var g=d.T,y=i.p;try{if(d.T=null,i.p=2,h)return h()}finally{d.T=g,i.p=y,i.d.f()}},Hn.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(h,g))},Hn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Hn.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var y=g.as,v=f(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:N}):y==="script"&&i.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Hn.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=f(g.as,g.crossOrigin);i.d.M(h,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(h)},Hn.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,v=f(y,g.crossOrigin);i.d.L(h,y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Hn.preloadModule=function(h,g){if(typeof h=="string")if(g){var y=f(g.as,g.crossOrigin);i.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(h)},Hn.requestFormReset=function(h){i.d.r(h)},Hn.unstable_batchedUpdates=function(h,g){return h(g)},Hn.useFormState=function(h,g,y){return d.H.useFormState(h,g,y)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var f0;function WE(){if(f0)return i_.exports;f0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),i_.exports=gI(),i_.exports}var h0;function _I(){if(h0)return Zc;h0=1;var t=pI(),e=Wh(),n=WE();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function c(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function d(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(c(r)!==r)throw Error(i(188))}function g(r){var s=r.alternate;if(!s){if(s=c(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var m=o.return;if(m===null)break;var _=m.alternate;if(_===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===o)return h(m),r;if(_===u)return h(m),s;_=_.sibling}throw Error(i(188))}if(o.return!==u.return)o=m,u=_;else{for(var x=!1,O=m.child;O;){if(O===o){x=!0,o=m,u=_;break}if(O===u){x=!0,u=m,o=_;break}O=O.sibling}if(!x){for(O=_.child;O;){if(O===o){x=!0,o=_,u=m;break}if(O===u){x=!0,u=_,o=m;break}O=O.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),P=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),A=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(r){return r===null||typeof r!="object"?null:(r=D&&r[D]||r["@@iterator"],typeof r=="function"?r:null)}var I=Symbol.for("react.client.reference");function K(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===I?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case L:return"Profiler";case j:return"StrictMode";case z:return"Suspense";case G:return"SuspenseList";case S:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case T:return"Portal";case P:return r.displayName||"Context";case M:return(r._context.displayName||"Context")+".Consumer";case V:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return s=r.displayName||null,s!==null?s:K(r.type)||"Memo";case w:s=r._payload,r=r._init;try{return K(r(s))}catch{}}return null}var q=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Z=[],se=-1;function F(r){return{current:r}}function re(r){0>se||(r.current=Z[se],Z[se]=null,se--)}function he(r,s){se++,Z[se]=r.current,r.current=s}var pe=F(null),ye=F(null),we=F(null),me=F(null);function Fe(r,s){switch(he(we,s),he(ye,r),he(pe,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?TS(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=TS(s),r=AS(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(pe),he(pe,r)}function Ne(){re(pe),re(ye),re(we)}function Be(r){r.memoizedState!==null&&he(me,r);var s=pe.current,o=AS(s,r.type);s!==o&&(he(ye,r),he(pe,o))}function et(r){ye.current===r&&(re(pe),re(ye)),me.current===r&&(re(me),Qc._currentValue=Y)}var Ze,it;function Mt(r){if(Ze===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ze=s&&s[1]||"",it=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ze+r+it}var Ir=!1;function hr(r,s){if(!r||Ir)return"";Ir=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ie){var ne=ie}Reflect.construct(r,[],ue)}else{try{ue.call()}catch(ie){ne=ie}r.call(ue.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(ue=r())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),x=_[0],O=_[1];if(x&&O){var H=x.split(`
`),ee=O.split(`
`);for(m=u=0;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;for(;m<ee.length&&!ee[m].includes("DetermineComponentFrameRoot");)m++;if(u===H.length||m===ee.length)for(u=H.length-1,m=ee.length-1;1<=u&&0<=m&&H[u]!==ee[m];)m--;for(;1<=u&&0<=m;u--,m--)if(H[u]!==ee[m]){if(u!==1||m!==1)do if(u--,m--,0>m||H[u]!==ee[m]){var oe=`
`+H[u].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=u&&0<=m);break}}}finally{Ir=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Mt(o):""}function mr(r,s){switch(r.tag){case 26:case 27:case 5:return Mt(r.type);case 16:return Mt("Lazy");case 13:return r.child!==s&&s!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return hr(r.type,!1);case 11:return hr(r.type.render,!1);case 1:return hr(r.type,!0);case 31:return Mt("Activity");default:return""}}function js(r){try{var s="",o=null;do s+=mr(r,o),o=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var wi=Object.prototype.hasOwnProperty,Si=t.unstable_scheduleCallback,Ts=t.unstable_cancelCallback,Ao=t.unstable_shouldYield,ic=t.unstable_requestPaint,te=t.unstable_now,ce=t.unstable_getCurrentPriorityLevel,_e=t.unstable_ImmediatePriority,Ve=t.unstable_UserBlockingPriority,Me=t.unstable_NormalPriority,Cn=t.unstable_LowPriority,Fn=t.unstable_IdlePriority,vn=t.log,Qn=t.unstable_setDisableYieldValue,Ht=null,yt=null;function cn(r){if(typeof vn=="function"&&Qn(r),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(Ht,r)}catch{}}var bn=Math.clz32?Math.clz32:Qm,dd=Math.log,Gm=Math.LN2;function Qm(r){return r>>>=0,r===0?32:31-(dd(r)/Gm|0)|0}var Lt=256,As=262144,ni=4194304;function Hi(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ro(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,_=r.suspendedLanes,x=r.pingedLanes;r=r.warmLanes;var O=u&134217727;return O!==0?(u=O&~_,u!==0?m=Hi(u):(x&=O,x!==0?m=Hi(x):o||(o=O&~r,o!==0&&(m=Hi(o))))):(O=u&~_,O!==0?m=Hi(O):x!==0?m=Hi(x):o||(o=u&~r,o!==0&&(m=Hi(o)))),m===0?0:s!==0&&s!==m&&(s&_)===0&&(_=m&-m,o=s&-s,_>=o||_===32&&(o&4194048)!==0)?s:m}function Da(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Wm(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fd(){var r=ni;return ni<<=1,(ni&62914560)===0&&(ni=4194304),r}function sc(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Oo(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ac(r,s,o,u,m,_){var x=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var O=r.entanglements,H=r.expirationTimes,ee=r.hiddenUpdates;for(o=x&~o;0<o;){var oe=31-bn(o),ue=1<<oe;O[oe]=0,H[oe]=-1;var ne=ee[oe];if(ne!==null)for(ee[oe]=null,oe=0;oe<ne.length;oe++){var ie=ne[oe];ie!==null&&(ie.lane&=-536870913)}o&=~ue}u!==0&&wt(r,u,0),_!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=_&~(x&~s))}function wt(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-bn(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function Dt(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-bn(o),m=1<<u;m&s|r[u]&s&&(r[u]|=s),o&=~m}}function Mr(r,s){var o=s&-s;return o=(o&42)!==0?1:Rs(o),(o&(r.suspendedLanes|s))!==0?0:o}function Rs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function oc(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function pr(){var r=B.p;return r!==0?r:(r=window.event,r===void 0?32:ZS(r.type))}function Gt(r,s){var o=B.p;try{return B.p=r,s()}finally{B.p=o}}var Jn=Math.random().toString(36).slice(2),xn="__reactFiber$"+Jn,Ut="__reactProps$"+Jn,qn="__reactContainer$"+Jn,gr="__reactEvents$"+Jn,Gi="__reactListeners$"+Jn,Os="__reactHandles$"+Jn,hd="__reactResources$"+Jn,ka="__reactMarker$"+Jn;function lc(r){delete r[xn],delete r[Ut],delete r[gr],delete r[Gi],delete r[Os]}function Is(r){var s=r[xn];if(s)return s;for(var o=r.parentNode;o;){if(s=o[qn]||o[xn]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=PS(r);r!==null;){if(o=r[xn])return o;r=PS(r)}return s}r=o,o=r.parentNode}return null}function Ms(r){if(r=r[xn]||r[qn]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Pa(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Ds(r){var s=r[hd];return s||(s=r[hd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function tn(r){r[ka]=!0}var cc=new Set,ks={};function Ni(r,s){Dr(r,s),Dr(r+"Capture",s)}function Dr(r,s){for(ks[r]=s,r=0;r<s.length;r++)cc.add(s[r])}var U=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$={},W={};function ae(r){return wi.call(W,r)?!0:wi.call($,r)?!1:U.test(r)?W[r]=!0:($[r]=!0,!1)}function de(r,s,o){if(ae(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function ve(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function De(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}function Se(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Nt(r,s,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return m.call(this)},set:function(x){o=""+x,_.call(this,x)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ot(r){if(!r._valueTracker){var s=qe(r)?"checked":"value";r._valueTracker=Nt(r,s,""+r[s])}}function er(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=qe(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function $n(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var kr=/[\n"\\]/g;function jn(r){return r.replace(kr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ps(r,s,o,u,m,_,x,O){r.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?r.type=x:r.removeAttribute("type"),s!=null?x==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+Se(s)):r.value!==""+Se(s)&&(r.value=""+Se(s)):x!=="submit"&&x!=="reset"||r.removeAttribute("value"),s!=null?La(r,x,Se(s)):o!=null?La(r,x,Se(o)):u!=null&&r.removeAttribute("value"),m==null&&_!=null&&(r.defaultChecked=!!_),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.name=""+Se(O):r.removeAttribute("name")}function Io(r,s,o,u,m,_,x,O){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),s!=null||o!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Ot(r);return}o=o!=null?""+Se(o):"",s=s!=null?""+Se(s):o,O||s===r.value||(r.value=s),r.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=O?r.checked:!!u,r.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.name=x),Ot(r)}function La(r,s,o){s==="number"&&$n(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Mo(r,s,o,u){if(r=r.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=s.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Se(o),s=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}s!==null||r[m].disabled||(s=r[m])}s!==null&&(s.selected=!0)}}function Sb(r,s,o){if(s!=null&&(s=""+Se(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+Se(o):""}function Nb(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(q(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Se(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Ot(r)}function Do(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var sR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eb(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||sR.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Cb(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&o[m]!==u&&Eb(r,m,u)}else for(var _ in s)s.hasOwnProperty(_)&&Eb(r,_,s[_])}function Km(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function md(r){return oR.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Qi(){}var Ym=null;function Xm(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ko=null,Po=null;function jb(r){var s=Ms(r);if(s&&(r=s.stateNode)){var o=r[Ut]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ps(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var m=u[Ut]||null;if(!m)throw Error(i(90));Ps(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&er(u)}break e;case"textarea":Sb(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Mo(r,!!o.multiple,s,!1)}}}var Zm=!1;function Tb(r,s,o){if(Zm)return r(s,o);Zm=!0;try{var u=r(s);return u}finally{if(Zm=!1,(ko!==null||Po!==null)&&(tf(),ko&&(s=ko,r=Po,Po=ko=null,jb(s),r)))for(s=0;s<r.length;s++)jb(r[s])}}function uc(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Ut]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jm=!1;if(Wi)try{var dc={};Object.defineProperty(dc,"passive",{get:function(){Jm=!0}}),window.addEventListener("test",dc,dc),window.removeEventListener("test",dc,dc)}catch{Jm=!1}var Ls=null,ep=null,pd=null;function Ab(){if(pd)return pd;var r,s=ep,o=s.length,u,m="value"in Ls?Ls.value:Ls.textContent,_=m.length;for(r=0;r<o&&s[r]===m[r];r++);var x=o-r;for(u=1;u<=x&&s[o-u]===m[_-u];u++);return pd=m.slice(r,1<u?1-u:void 0)}function gd(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function _d(){return!0}function Rb(){return!1}function tr(r){function s(o,u,m,_,x){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var O in r)r.hasOwnProperty(O)&&(o=r[O],this[O]=o?o(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_d:Rb,this.isPropagationStopped=Rb,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=_d)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=_d)},persist:function(){},isPersistent:_d}),s}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yd=tr(Ua),fc=v({},Ua,{view:0,detail:0}),lR=tr(fc),tp,np,hc,vd=v({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ip,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==hc&&(hc&&r.type==="mousemove"?(tp=r.screenX-hc.screenX,np=r.screenY-hc.screenY):np=tp=0,hc=r),tp)},movementY:function(r){return"movementY"in r?r.movementY:np}}),Ob=tr(vd),cR=v({},vd,{dataTransfer:0}),uR=tr(cR),dR=v({},fc,{relatedTarget:0}),rp=tr(dR),fR=v({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),hR=tr(fR),mR=v({},Ua,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),pR=tr(mR),gR=v({},Ua,{data:0}),Ib=tr(gR),_R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bR(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=vR[r])?!!s[r]:!1}function ip(){return bR}var xR=v({},fc,{key:function(r){if(r.key){var s=_R[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=gd(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?yR[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ip,charCode:function(r){return r.type==="keypress"?gd(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gd(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),wR=tr(xR),SR=v({},vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mb=tr(SR),NR=v({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ip}),ER=tr(NR),CR=v({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),jR=tr(CR),TR=v({},vd,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),AR=tr(TR),RR=v({},Ua,{newState:0,oldState:0}),OR=tr(RR),IR=[9,13,27,32],sp=Wi&&"CompositionEvent"in window,mc=null;Wi&&"documentMode"in document&&(mc=document.documentMode);var MR=Wi&&"TextEvent"in window&&!mc,Db=Wi&&(!sp||mc&&8<mc&&11>=mc),kb=" ",Pb=!1;function Lb(r,s){switch(r){case"keyup":return IR.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ub(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Lo=!1;function DR(r,s){switch(r){case"compositionend":return Ub(s);case"keypress":return s.which!==32?null:(Pb=!0,kb);case"textInput":return r=s.data,r===kb&&Pb?null:r;default:return null}}function kR(r,s){if(Lo)return r==="compositionend"||!sp&&Lb(r,s)?(r=Ab(),pd=ep=Ls=null,Lo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Db&&s.locale!=="ko"?null:s.data;default:return null}}var PR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vb(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!PR[r.type]:s==="textarea"}function zb(r,s,o,u){ko?Po?Po.push(u):Po=[u]:ko=u,s=cf(s,"onChange"),0<s.length&&(o=new yd("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var pc=null,gc=null;function LR(r){wS(r,0)}function bd(r){var s=Pa(r);if(er(s))return r}function Bb(r,s){if(r==="change")return s}var Fb=!1;if(Wi){var ap;if(Wi){var op="oninput"in document;if(!op){var qb=document.createElement("div");qb.setAttribute("oninput","return;"),op=typeof qb.oninput=="function"}ap=op}else ap=!1;Fb=ap&&(!document.documentMode||9<document.documentMode)}function $b(){pc&&(pc.detachEvent("onpropertychange",Hb),gc=pc=null)}function Hb(r){if(r.propertyName==="value"&&bd(gc)){var s=[];zb(s,gc,r,Xm(r)),Tb(LR,s)}}function UR(r,s,o){r==="focusin"?($b(),pc=s,gc=o,pc.attachEvent("onpropertychange",Hb)):r==="focusout"&&$b()}function VR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return bd(gc)}function zR(r,s){if(r==="click")return bd(s)}function BR(r,s){if(r==="input"||r==="change")return bd(s)}function FR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var _r=typeof Object.is=="function"?Object.is:FR;function _c(r,s){if(_r(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!wi.call(s,m)||!_r(r[m],s[m]))return!1}return!0}function Gb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Qb(r,s){var o=Gb(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Gb(o)}}function Wb(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Wb(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Kb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=$n(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=$n(r.document)}return s}function lp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var qR=Wi&&"documentMode"in document&&11>=document.documentMode,Uo=null,cp=null,yc=null,up=!1;function Yb(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;up||Uo==null||Uo!==$n(u)||(u=Uo,"selectionStart"in u&&lp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),yc&&_c(yc,u)||(yc=u,u=cf(cp,"onSelect"),0<u.length&&(s=new yd("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Uo)))}function Va(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Vo={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionrun:Va("Transition","TransitionRun"),transitionstart:Va("Transition","TransitionStart"),transitioncancel:Va("Transition","TransitionCancel"),transitionend:Va("Transition","TransitionEnd")},dp={},Xb={};Wi&&(Xb=document.createElement("div").style,"AnimationEvent"in window||(delete Vo.animationend.animation,delete Vo.animationiteration.animation,delete Vo.animationstart.animation),"TransitionEvent"in window||delete Vo.transitionend.transition);function za(r){if(dp[r])return dp[r];if(!Vo[r])return r;var s=Vo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Xb)return dp[r]=s[o];return r}var Zb=za("animationend"),Jb=za("animationiteration"),ex=za("animationstart"),$R=za("transitionrun"),HR=za("transitionstart"),GR=za("transitioncancel"),tx=za("transitionend"),nx=new Map,fp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fp.push("scrollEnd");function ri(r,s){nx.set(r,s),Ni(s,[r])}var xd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Pr=[],zo=0,hp=0;function wd(){for(var r=zo,s=hp=zo=0;s<r;){var o=Pr[s];Pr[s++]=null;var u=Pr[s];Pr[s++]=null;var m=Pr[s];Pr[s++]=null;var _=Pr[s];if(Pr[s++]=null,u!==null&&m!==null){var x=u.pending;x===null?m.next=m:(m.next=x.next,x.next=m),u.pending=m}_!==0&&rx(o,m,_)}}function Sd(r,s,o,u){Pr[zo++]=r,Pr[zo++]=s,Pr[zo++]=o,Pr[zo++]=u,hp|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function mp(r,s,o,u){return Sd(r,s,o,u),Nd(r)}function Ba(r,s){return Sd(r,null,null,s),Nd(r)}function rx(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,_=r.return;_!==null;)_.childLanes|=o,u=_.alternate,u!==null&&(u.childLanes|=o),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(m=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,m&&s!==null&&(m=31-bn(o),r=_.hiddenUpdates,u=r[m],u===null?r[m]=[s]:u.push(s),s.lane=o|536870912),_):null}function Nd(r){if(50<zc)throw zc=0,Sg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Bo={};function QR(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(r,s,o,u){return new QR(r,s,o,u)}function pp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ki(r,s){var o=r.alternate;return o===null?(o=yr(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function ix(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Ed(r,s,o,u,m,_){var x=0;if(u=r,typeof r=="function")pp(r)&&(x=1);else if(typeof r=="string")x=ZO(r,o,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case S:return r=yr(31,o,s,m),r.elementType=S,r.lanes=_,r;case E:return Fa(o.children,m,_,s);case j:x=8,m|=24;break;case L:return r=yr(12,o,s,m|2),r.elementType=L,r.lanes=_,r;case z:return r=yr(13,o,s,m),r.elementType=z,r.lanes=_,r;case G:return r=yr(19,o,s,m),r.elementType=G,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:x=10;break e;case M:x=9;break e;case V:x=11;break e;case C:x=14;break e;case w:x=16,u=null;break e}x=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=yr(x,o,s,m),s.elementType=r,s.type=u,s.lanes=_,s}function Fa(r,s,o,u){return r=yr(7,r,u,s),r.lanes=o,r}function gp(r,s,o){return r=yr(6,r,null,s),r.lanes=o,r}function sx(r){var s=yr(18,null,null,0);return s.stateNode=r,s}function _p(r,s,o){return s=yr(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var ax=new WeakMap;function Lr(r,s){if(typeof r=="object"&&r!==null){var o=ax.get(r);return o!==void 0?o:(s={value:r,source:s,stack:js(s)},ax.set(r,s),s)}return{value:r,source:s,stack:js(s)}}var Fo=[],qo=0,Cd=null,vc=0,Ur=[],Vr=0,Us=null,Ei=1,Ci="";function Yi(r,s){Fo[qo++]=vc,Fo[qo++]=Cd,Cd=r,vc=s}function ox(r,s,o){Ur[Vr++]=Ei,Ur[Vr++]=Ci,Ur[Vr++]=Us,Us=r;var u=Ei;r=Ci;var m=32-bn(u)-1;u&=~(1<<m),o+=1;var _=32-bn(s)+m;if(30<_){var x=m-m%5;_=(u&(1<<x)-1).toString(32),u>>=x,m-=x,Ei=1<<32-bn(s)+m|o<<m|u,Ci=_+r}else Ei=1<<_|o<<m|u,Ci=r}function yp(r){r.return!==null&&(Yi(r,1),ox(r,1,0))}function vp(r){for(;r===Cd;)Cd=Fo[--qo],Fo[qo]=null,vc=Fo[--qo],Fo[qo]=null;for(;r===Us;)Us=Ur[--Vr],Ur[Vr]=null,Ci=Ur[--Vr],Ur[Vr]=null,Ei=Ur[--Vr],Ur[Vr]=null}function lx(r,s){Ur[Vr++]=Ei,Ur[Vr++]=Ci,Ur[Vr++]=Us,Ei=s.id,Ci=s.overflow,Us=r}var In=null,kt=null,ht=!1,Vs=null,zr=!1,bp=Error(i(519));function zs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bc(Lr(s,r)),bp}function cx(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[xn]=r,s[Ut]=u,o){case"dialog":at("cancel",s),at("close",s);break;case"iframe":case"object":case"embed":at("load",s);break;case"video":case"audio":for(o=0;o<Fc.length;o++)at(Fc[o],s);break;case"source":at("error",s);break;case"img":case"image":case"link":at("error",s),at("load",s);break;case"details":at("toggle",s);break;case"input":at("invalid",s),Io(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":at("invalid",s);break;case"textarea":at("invalid",s),Nb(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||CS(s.textContent,o)?(u.popover!=null&&(at("beforetoggle",s),at("toggle",s)),u.onScroll!=null&&at("scroll",s),u.onScrollEnd!=null&&at("scrollend",s),u.onClick!=null&&(s.onclick=Qi),s=!0):s=!1,s||zs(r,!0)}function ux(r){for(In=r.return;In;)switch(In.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:In=In.return}}function $o(r){if(r!==In)return!1;if(!ht)return ux(r),ht=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Ug(r.type,r.memoizedProps)),o=!o),o&&kt&&zs(r),ux(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));kt=kS(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));kt=kS(r)}else s===27?(s=kt,ea(r.type)?(r=qg,qg=null,kt=r):kt=s):kt=In?Fr(r.stateNode.nextSibling):null;return!0}function qa(){kt=In=null,ht=!1}function xp(){var r=Vs;return r!==null&&(sr===null?sr=r:sr.push.apply(sr,r),Vs=null),r}function bc(r){Vs===null?Vs=[r]:Vs.push(r)}var wp=F(null),$a=null,Xi=null;function Bs(r,s,o){he(wp,s._currentValue),s._currentValue=o}function Zi(r){r._currentValue=wp.current,re(wp)}function Sp(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Np(r,s,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var _=m.dependencies;if(_!==null){var x=m.child;_=_.firstContext;e:for(;_!==null;){var O=_;_=m;for(var H=0;H<s.length;H++)if(O.context===s[H]){_.lanes|=o,O=_.alternate,O!==null&&(O.lanes|=o),Sp(_.return,o,r),u||(x=null);break e}_=O.next}}else if(m.tag===18){if(x=m.return,x===null)throw Error(i(341));x.lanes|=o,_=x.alternate,_!==null&&(_.lanes|=o),Sp(x,o,r),x=null}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===r){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}}function Ho(r,s,o,u){r=null;for(var m=s,_=!1;m!==null;){if(!_){if((m.flags&524288)!==0)_=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var x=m.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var O=m.type;_r(m.pendingProps.value,x.value)||(r!==null?r.push(O):r=[O])}}else if(m===me.current){if(x=m.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Qc):r=[Qc])}m=m.return}r!==null&&Np(s,r,o,u),s.flags|=262144}function jd(r){for(r=r.firstContext;r!==null;){if(!_r(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ha(r){$a=r,Xi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Mn(r){return dx($a,r)}function Td(r,s){return $a===null&&Ha(r),dx(r,s)}function dx(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Xi===null){if(r===null)throw Error(i(308));Xi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Xi=Xi.next=s;return o}var WR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},KR=t.unstable_scheduleCallback,YR=t.unstable_NormalPriority,un={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ep(){return{controller:new WR,data:new Map,refCount:0}}function xc(r){r.refCount--,r.refCount===0&&KR(YR,function(){r.controller.abort()})}var wc=null,Cp=0,Go=0,Qo=null;function XR(r,s){if(wc===null){var o=wc=[];Cp=0,Go=Ag(),Qo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Cp++,s.then(fx,fx),s}function fx(){if(--Cp===0&&wc!==null){Qo!==null&&(Qo.status="fulfilled");var r=wc;wc=null,Go=0,Qo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function ZR(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var hx=R.S;R.S=function(r,s){Yw=te(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&XR(r,s),hx!==null&&hx(r,s)};var Ga=F(null);function jp(){var r=Ga.current;return r!==null?r:Rt.pooledCache}function Ad(r,s){s===null?he(Ga,Ga.current):he(Ga,s.pool)}function mx(){var r=jp();return r===null?null:{parent:un._currentValue,pool:r}}var Wo=Error(i(460)),Tp=Error(i(474)),Rd=Error(i(542)),Od={then:function(){}};function px(r){return r=r.status,r==="fulfilled"||r==="rejected"}function gx(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(Qi,Qi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,yx(r),r;default:if(typeof s.status=="string")s.then(Qi,Qi);else{if(r=Rt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,yx(r),r}throw Wa=s,Wo}}function Qa(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Wa=o,Wo):o}}var Wa=null;function _x(){if(Wa===null)throw Error(i(459));var r=Wa;return Wa=null,r}function yx(r){if(r===Wo||r===Rd)throw Error(i(483))}var Ko=null,Sc=0;function Id(r){var s=Sc;return Sc+=1,Ko===null&&(Ko=[]),gx(Ko,r,s)}function Nc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Md(r,s){throw s.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function vx(r){function s(X,Q){if(r){var J=X.deletions;J===null?(X.deletions=[Q],X.flags|=16):J.push(Q)}}function o(X,Q){if(!r)return null;for(;Q!==null;)s(X,Q),Q=Q.sibling;return null}function u(X){for(var Q=new Map;X!==null;)X.key!==null?Q.set(X.key,X):Q.set(X.index,X),X=X.sibling;return Q}function m(X,Q){return X=Ki(X,Q),X.index=0,X.sibling=null,X}function _(X,Q,J){return X.index=J,r?(J=X.alternate,J!==null?(J=J.index,J<Q?(X.flags|=67108866,Q):J):(X.flags|=67108866,Q)):(X.flags|=1048576,Q)}function x(X){return r&&X.alternate===null&&(X.flags|=67108866),X}function O(X,Q,J,le){return Q===null||Q.tag!==6?(Q=gp(J,X.mode,le),Q.return=X,Q):(Q=m(Q,J),Q.return=X,Q)}function H(X,Q,J,le){var ke=J.type;return ke===E?oe(X,Q,J.props.children,le,J.key):Q!==null&&(Q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===w&&Qa(ke)===Q.type)?(Q=m(Q,J.props),Nc(Q,J),Q.return=X,Q):(Q=Ed(J.type,J.key,J.props,null,X.mode,le),Nc(Q,J),Q.return=X,Q)}function ee(X,Q,J,le){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==J.containerInfo||Q.stateNode.implementation!==J.implementation?(Q=_p(J,X.mode,le),Q.return=X,Q):(Q=m(Q,J.children||[]),Q.return=X,Q)}function oe(X,Q,J,le,ke){return Q===null||Q.tag!==7?(Q=Fa(J,X.mode,le,ke),Q.return=X,Q):(Q=m(Q,J),Q.return=X,Q)}function ue(X,Q,J){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=gp(""+Q,X.mode,J),Q.return=X,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case N:return J=Ed(Q.type,Q.key,Q.props,null,X.mode,J),Nc(J,Q),J.return=X,J;case T:return Q=_p(Q,X.mode,J),Q.return=X,Q;case w:return Q=Qa(Q),ue(X,Q,J)}if(q(Q)||k(Q))return Q=Fa(Q,X.mode,J,null),Q.return=X,Q;if(typeof Q.then=="function")return ue(X,Id(Q),J);if(Q.$$typeof===P)return ue(X,Td(X,Q),J);Md(X,Q)}return null}function ne(X,Q,J,le){var ke=Q!==null?Q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ke!==null?null:O(X,Q,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case N:return J.key===ke?H(X,Q,J,le):null;case T:return J.key===ke?ee(X,Q,J,le):null;case w:return J=Qa(J),ne(X,Q,J,le)}if(q(J)||k(J))return ke!==null?null:oe(X,Q,J,le,null);if(typeof J.then=="function")return ne(X,Q,Id(J),le);if(J.$$typeof===P)return ne(X,Q,Td(X,J),le);Md(X,J)}return null}function ie(X,Q,J,le,ke){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return X=X.get(J)||null,O(Q,X,""+le,ke);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case N:return X=X.get(le.key===null?J:le.key)||null,H(Q,X,le,ke);case T:return X=X.get(le.key===null?J:le.key)||null,ee(Q,X,le,ke);case w:return le=Qa(le),ie(X,Q,J,le,ke)}if(q(le)||k(le))return X=X.get(J)||null,oe(Q,X,le,ke,null);if(typeof le.then=="function")return ie(X,Q,J,Id(le),ke);if(le.$$typeof===P)return ie(X,Q,J,Td(Q,le),ke);Md(Q,le)}return null}function Ee(X,Q,J,le){for(var ke=null,gt=null,Ae=Q,Je=Q=0,ct=null;Ae!==null&&Je<J.length;Je++){Ae.index>Je?(ct=Ae,Ae=null):ct=Ae.sibling;var _t=ne(X,Ae,J[Je],le);if(_t===null){Ae===null&&(Ae=ct);break}r&&Ae&&_t.alternate===null&&s(X,Ae),Q=_(_t,Q,Je),gt===null?ke=_t:gt.sibling=_t,gt=_t,Ae=ct}if(Je===J.length)return o(X,Ae),ht&&Yi(X,Je),ke;if(Ae===null){for(;Je<J.length;Je++)Ae=ue(X,J[Je],le),Ae!==null&&(Q=_(Ae,Q,Je),gt===null?ke=Ae:gt.sibling=Ae,gt=Ae);return ht&&Yi(X,Je),ke}for(Ae=u(Ae);Je<J.length;Je++)ct=ie(Ae,X,Je,J[Je],le),ct!==null&&(r&&ct.alternate!==null&&Ae.delete(ct.key===null?Je:ct.key),Q=_(ct,Q,Je),gt===null?ke=ct:gt.sibling=ct,gt=ct);return r&&Ae.forEach(function(sa){return s(X,sa)}),ht&&Yi(X,Je),ke}function $e(X,Q,J,le){if(J==null)throw Error(i(151));for(var ke=null,gt=null,Ae=Q,Je=Q=0,ct=null,_t=J.next();Ae!==null&&!_t.done;Je++,_t=J.next()){Ae.index>Je?(ct=Ae,Ae=null):ct=Ae.sibling;var sa=ne(X,Ae,_t.value,le);if(sa===null){Ae===null&&(Ae=ct);break}r&&Ae&&sa.alternate===null&&s(X,Ae),Q=_(sa,Q,Je),gt===null?ke=sa:gt.sibling=sa,gt=sa,Ae=ct}if(_t.done)return o(X,Ae),ht&&Yi(X,Je),ke;if(Ae===null){for(;!_t.done;Je++,_t=J.next())_t=ue(X,_t.value,le),_t!==null&&(Q=_(_t,Q,Je),gt===null?ke=_t:gt.sibling=_t,gt=_t);return ht&&Yi(X,Je),ke}for(Ae=u(Ae);!_t.done;Je++,_t=J.next())_t=ie(Ae,X,Je,_t.value,le),_t!==null&&(r&&_t.alternate!==null&&Ae.delete(_t.key===null?Je:_t.key),Q=_(_t,Q,Je),gt===null?ke=_t:gt.sibling=_t,gt=_t);return r&&Ae.forEach(function(cI){return s(X,cI)}),ht&&Yi(X,Je),ke}function At(X,Q,J,le){if(typeof J=="object"&&J!==null&&J.type===E&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case N:e:{for(var ke=J.key;Q!==null;){if(Q.key===ke){if(ke=J.type,ke===E){if(Q.tag===7){o(X,Q.sibling),le=m(Q,J.props.children),le.return=X,X=le;break e}}else if(Q.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===w&&Qa(ke)===Q.type){o(X,Q.sibling),le=m(Q,J.props),Nc(le,J),le.return=X,X=le;break e}o(X,Q);break}else s(X,Q);Q=Q.sibling}J.type===E?(le=Fa(J.props.children,X.mode,le,J.key),le.return=X,X=le):(le=Ed(J.type,J.key,J.props,null,X.mode,le),Nc(le,J),le.return=X,X=le)}return x(X);case T:e:{for(ke=J.key;Q!==null;){if(Q.key===ke)if(Q.tag===4&&Q.stateNode.containerInfo===J.containerInfo&&Q.stateNode.implementation===J.implementation){o(X,Q.sibling),le=m(Q,J.children||[]),le.return=X,X=le;break e}else{o(X,Q);break}else s(X,Q);Q=Q.sibling}le=_p(J,X.mode,le),le.return=X,X=le}return x(X);case w:return J=Qa(J),At(X,Q,J,le)}if(q(J))return Ee(X,Q,J,le);if(k(J)){if(ke=k(J),typeof ke!="function")throw Error(i(150));return J=ke.call(J),$e(X,Q,J,le)}if(typeof J.then=="function")return At(X,Q,Id(J),le);if(J.$$typeof===P)return At(X,Q,Td(X,J),le);Md(X,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,Q!==null&&Q.tag===6?(o(X,Q.sibling),le=m(Q,J),le.return=X,X=le):(o(X,Q),le=gp(J,X.mode,le),le.return=X,X=le),x(X)):o(X,Q)}return function(X,Q,J,le){try{Sc=0;var ke=At(X,Q,J,le);return Ko=null,ke}catch(Ae){if(Ae===Wo||Ae===Rd)throw Ae;var gt=yr(29,Ae,null,X.mode);return gt.lanes=le,gt.return=X,gt}}}var Ka=vx(!0),bx=vx(!1),Fs=!1;function Ap(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function qs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function $s(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(vt&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=Nd(r),rx(r,null,o),s}return Sd(r,u,s,o),Nd(r)}function Ec(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Dt(r,o)}}function Op(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,_=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};_===null?m=_=x:_=_.next=x,o=o.next}while(o!==null);_===null?m=_=s:_=_.next=s}else m=_=s;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Ip=!1;function Cc(){if(Ip){var r=Qo;if(r!==null)throw r}}function jc(r,s,o,u){Ip=!1;var m=r.updateQueue;Fs=!1;var _=m.firstBaseUpdate,x=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var H=O,ee=H.next;H.next=null,x===null?_=ee:x.next=ee,x=H;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,O=oe.lastBaseUpdate,O!==x&&(O===null?oe.firstBaseUpdate=ee:O.next=ee,oe.lastBaseUpdate=H))}if(_!==null){var ue=m.baseState;x=0,oe=ee=H=null,O=_;do{var ne=O.lane&-536870913,ie=ne!==O.lane;if(ie?(lt&ne)===ne:(u&ne)===ne){ne!==0&&ne===Go&&(Ip=!0),oe!==null&&(oe=oe.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ee=r,$e=O;ne=s;var At=o;switch($e.tag){case 1:if(Ee=$e.payload,typeof Ee=="function"){ue=Ee.call(At,ue,ne);break e}ue=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=$e.payload,ne=typeof Ee=="function"?Ee.call(At,ue,ne):Ee,ne==null)break e;ue=v({},ue,ne);break e;case 2:Fs=!0}}ne=O.callback,ne!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=m.callbacks,ie===null?m.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},oe===null?(ee=oe=ie,H=ue):oe=oe.next=ie,x|=ne;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;ie=O,O=ie.next,ie.next=null,m.lastBaseUpdate=ie,m.shared.pending=null}}while(!0);oe===null&&(H=ue),m.baseState=H,m.firstBaseUpdate=ee,m.lastBaseUpdate=oe,_===null&&(m.shared.lanes=0),Ks|=x,r.lanes=x,r.memoizedState=ue}}function xx(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function wx(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)xx(o[r],s)}var Yo=F(null),Dd=F(0);function Sx(r,s){r=os,he(Dd,r),he(Yo,s),os=r|s.baseLanes}function Mp(){he(Dd,os),he(Yo,Yo.current)}function Dp(){os=Dd.current,re(Yo),re(Dd)}var vr=F(null),Br=null;function Hs(r){var s=r.alternate;he(nn,nn.current&1),he(vr,r),Br===null&&(s===null||Yo.current!==null||s.memoizedState!==null)&&(Br=r)}function kp(r){he(nn,nn.current),he(vr,r),Br===null&&(Br=r)}function Nx(r){r.tag===22?(he(nn,nn.current),he(vr,r),Br===null&&(Br=r)):Gs()}function Gs(){he(nn,nn.current),he(vr,vr.current)}function br(r){re(vr),Br===r&&(Br=null),re(nn)}var nn=F(0);function kd(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Bg(o)||Fg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ji=0,Ye=null,jt=null,dn=null,Pd=!1,Xo=!1,Ya=!1,Ld=0,Tc=0,Zo=null,JR=0;function Qt(){throw Error(i(321))}function Pp(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!_r(r[o],s[o]))return!1;return!0}function Lp(r,s,o,u,m,_){return Ji=_,Ye=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,R.H=r===null||r.memoizedState===null?ow:Zp,Ya=!1,_=o(u,m),Ya=!1,Xo&&(_=Cx(s,o,u,m)),Ex(r),_}function Ex(r){R.H=Oc;var s=jt!==null&&jt.next!==null;if(Ji=0,dn=jt=Ye=null,Pd=!1,Tc=0,Zo=null,s)throw Error(i(300));r===null||fn||(r=r.dependencies,r!==null&&jd(r)&&(fn=!0))}function Cx(r,s,o,u){Ye=r;var m=0;do{if(Xo&&(Zo=null),Tc=0,Xo=!1,25<=m)throw Error(i(301));if(m+=1,dn=jt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}R.H=lw,_=s(o,u)}while(Xo);return _}function eO(){var r=R.H,s=r.useState()[0];return s=typeof s.then=="function"?Ac(s):s,r=r.useState()[0],(jt!==null?jt.memoizedState:null)!==r&&(Ye.flags|=1024),s}function Up(){var r=Ld!==0;return Ld=0,r}function Vp(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function zp(r){if(Pd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pd=!1}Ji=0,dn=jt=Ye=null,Xo=!1,Tc=Ld=0,Zo=null}function Wn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ye.memoizedState=dn=r:dn=dn.next=r,dn}function rn(){if(jt===null){var r=Ye.alternate;r=r!==null?r.memoizedState:null}else r=jt.next;var s=dn===null?Ye.memoizedState:dn.next;if(s!==null)dn=s,jt=r;else{if(r===null)throw Ye.alternate===null?Error(i(467)):Error(i(310));jt=r,r={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},dn===null?Ye.memoizedState=dn=r:dn=dn.next=r}return dn}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(r){var s=Tc;return Tc+=1,Zo===null&&(Zo=[]),r=gx(Zo,r,s),s=Ye,(dn===null?s.memoizedState:dn.next)===null&&(s=s.alternate,R.H=s===null||s.memoizedState===null?ow:Zp),r}function Vd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Ac(r);if(r.$$typeof===P)return Mn(r)}throw Error(i(438,String(r)))}function Bp(r){var s=null,o=Ye.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ye.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Ud(),Ye.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=A;return s.index++,o}function es(r,s){return typeof s=="function"?s(r):s}function zd(r){var s=rn();return Fp(s,jt,r)}function Fp(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var m=r.baseQueue,_=u.pending;if(_!==null){if(m!==null){var x=m.next;m.next=_.next,_.next=x}s.baseQueue=m=_,u.pending=null}if(_=r.baseState,m===null)r.memoizedState=_;else{s=m.next;var O=x=null,H=null,ee=s,oe=!1;do{var ue=ee.lane&-536870913;if(ue!==ee.lane?(lt&ue)===ue:(Ji&ue)===ue){var ne=ee.revertLane;if(ne===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ue===Go&&(oe=!0);else if((Ji&ne)===ne){ee=ee.next,ne===Go&&(oe=!0);continue}else ue={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(O=H=ue,x=_):H=H.next=ue,Ye.lanes|=ne,Ks|=ne;ue=ee.action,Ya&&o(_,ue),_=ee.hasEagerState?ee.eagerState:o(_,ue)}else ne={lane:ue,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(O=H=ne,x=_):H=H.next=ne,Ye.lanes|=ue,Ks|=ue;ee=ee.next}while(ee!==null&&ee!==s);if(H===null?x=_:H.next=O,!_r(_,r.memoizedState)&&(fn=!0,oe&&(o=Qo,o!==null)))throw o;r.memoizedState=_,r.baseState=x,r.baseQueue=H,u.lastRenderedState=_}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function qp(r){var s=rn(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,_=s.memoizedState;if(m!==null){o.pending=null;var x=m=m.next;do _=r(_,x.action),x=x.next;while(x!==m);_r(_,s.memoizedState)||(fn=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),o.lastRenderedState=_}return[_,u]}function jx(r,s,o){var u=Ye,m=rn(),_=ht;if(_){if(o===void 0)throw Error(i(407));o=o()}else o=s();var x=!_r((jt||m).memoizedState,o);if(x&&(m.memoizedState=o,fn=!0),m=m.queue,Gp(Rx.bind(null,u,m,r),[r]),m.getSnapshot!==s||x||dn!==null&&dn.memoizedState.tag&1){if(u.flags|=2048,Jo(9,{destroy:void 0},Ax.bind(null,u,m,o,s),null),Rt===null)throw Error(i(349));_||(Ji&127)!==0||Tx(u,s,o)}return o}function Tx(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Ye.updateQueue,s===null?(s=Ud(),Ye.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function Ax(r,s,o,u){s.value=o,s.getSnapshot=u,Ox(s)&&Ix(r)}function Rx(r,s,o){return o(function(){Ox(s)&&Ix(r)})}function Ox(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!_r(r,o)}catch{return!0}}function Ix(r){var s=Ba(r,2);s!==null&&ar(s,r,2)}function $p(r){var s=Wn();if(typeof r=="function"){var o=r;if(r=o(),Ya){cn(!0);try{o()}finally{cn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:r},s}function Mx(r,s,o,u){return r.baseState=o,Fp(r,jt,typeof u=="function"?u:es)}function tO(r,s,o,u,m){if(qd(r))throw Error(i(485));if(r=s.action,r!==null){var _={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){_.listeners.push(x)}};R.T!==null?o(!0):_.isTransition=!1,u(_),o=s.pending,o===null?(_.next=s.pending=_,Dx(s,_)):(_.next=o.next,s.pending=o.next=_)}}function Dx(r,s){var o=s.action,u=s.payload,m=r.state;if(s.isTransition){var _=R.T,x={};R.T=x;try{var O=o(m,u),H=R.S;H!==null&&H(x,O),kx(r,s,O)}catch(ee){Hp(r,s,ee)}finally{_!==null&&x.types!==null&&(_.types=x.types),R.T=_}}else try{_=o(m,u),kx(r,s,_)}catch(ee){Hp(r,s,ee)}}function kx(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Px(r,s,u)},function(u){return Hp(r,s,u)}):Px(r,s,o)}function Px(r,s,o){s.status="fulfilled",s.value=o,Lx(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Dx(r,o)))}function Hp(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Lx(s),s=s.next;while(s!==u)}r.action=null}function Lx(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Ux(r,s){return s}function Vx(r,s){if(ht){var o=Rt.formState;if(o!==null){e:{var u=Ye;if(ht){if(kt){t:{for(var m=kt,_=zr;m.nodeType!==8;){if(!_){m=null;break t}if(m=Fr(m.nextSibling),m===null){m=null;break t}}_=m.data,m=_==="F!"||_==="F"?m:null}if(m){kt=Fr(m.nextSibling),u=m.data==="F!";break e}}zs(u)}u=!1}u&&(s=o[0])}}return o=Wn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ux,lastRenderedState:s},o.queue=u,o=iw.bind(null,Ye,u),u.dispatch=o,u=$p(!1),_=Xp.bind(null,Ye,!1,u.queue),u=Wn(),m={state:s,dispatch:null,action:r,pending:null},u.queue=m,o=tO.bind(null,Ye,m,_,o),m.dispatch=o,u.memoizedState=r,[s,o,!1]}function zx(r){var s=rn();return Bx(s,jt,r)}function Bx(r,s,o){if(s=Fp(r,s,Ux)[0],r=zd(es)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ac(s)}catch(x){throw x===Wo?Rd:x}else u=s;s=rn();var m=s.queue,_=m.dispatch;return o!==s.memoizedState&&(Ye.flags|=2048,Jo(9,{destroy:void 0},nO.bind(null,m,o),null)),[u,_,r]}function nO(r,s){r.action=s}function Fx(r){var s=rn(),o=jt;if(o!==null)return Bx(s,o,r);rn(),s=s.memoizedState,o=rn();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Jo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Ye.updateQueue,s===null&&(s=Ud(),Ye.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function qx(){return rn().memoizedState}function Bd(r,s,o,u){var m=Wn();Ye.flags|=r,m.memoizedState=Jo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Fd(r,s,o,u){var m=rn();u=u===void 0?null:u;var _=m.memoizedState.inst;jt!==null&&u!==null&&Pp(u,jt.memoizedState.deps)?m.memoizedState=Jo(s,_,o,u):(Ye.flags|=r,m.memoizedState=Jo(1|s,_,o,u))}function $x(r,s){Bd(8390656,8,r,s)}function Gp(r,s){Fd(2048,8,r,s)}function rO(r){Ye.flags|=4;var s=Ye.updateQueue;if(s===null)s=Ud(),Ye.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function Hx(r){var s=rn().memoizedState;return rO({ref:s,nextImpl:r}),function(){if((vt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Gx(r,s){return Fd(4,2,r,s)}function Qx(r,s){return Fd(4,4,r,s)}function Wx(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Kx(r,s,o){o=o!=null?o.concat([r]):null,Fd(4,4,Wx.bind(null,s,r),o)}function Qp(){}function Yx(r,s){var o=rn();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Pp(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Xx(r,s){var o=rn();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Pp(s,u[1]))return u[0];if(u=r(),Ya){cn(!0);try{r()}finally{cn(!1)}}return o.memoizedState=[u,s],u}function Wp(r,s,o){return o===void 0||(Ji&1073741824)!==0&&(lt&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=Zw(),Ye.lanes|=r,Ks|=r,o)}function Zx(r,s,o,u){return _r(o,s)?o:Yo.current!==null?(r=Wp(r,o,u),_r(r,s)||(fn=!0),r):(Ji&42)===0||(Ji&1073741824)!==0&&(lt&261930)===0?(fn=!0,r.memoizedState=o):(r=Zw(),Ye.lanes|=r,Ks|=r,s)}function Jx(r,s,o,u,m){var _=B.p;B.p=_!==0&&8>_?_:8;var x=R.T,O={};R.T=O,Xp(r,!1,s,o);try{var H=m(),ee=R.S;if(ee!==null&&ee(O,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var oe=ZR(H,u);Rc(r,s,oe,Sr(r))}else Rc(r,s,u,Sr(r))}catch(ue){Rc(r,s,{then:function(){},status:"rejected",reason:ue},Sr())}finally{B.p=_,x!==null&&O.types!==null&&(x.types=O.types),R.T=x}}function iO(){}function Kp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var m=ew(r).queue;Jx(r,m,s,Y,o===null?iO:function(){return tw(r),o(u)})}function ew(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:Y},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function tw(r){var s=ew(r);s.next===null&&(s=r.alternate.memoizedState),Rc(r,s.next.queue,{},Sr())}function Yp(){return Mn(Qc)}function nw(){return rn().memoizedState}function rw(){return rn().memoizedState}function sO(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Sr();r=qs(o);var u=$s(s,r,o);u!==null&&(ar(u,s,o),Ec(u,s,o)),s={cache:Ep()},r.payload=s;return}s=s.return}}function aO(r,s,o){var u=Sr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},qd(r)?sw(s,o):(o=mp(r,s,o,u),o!==null&&(ar(o,r,u),aw(o,s,u)))}function iw(r,s,o){var u=Sr();Rc(r,s,o,u)}function Rc(r,s,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(qd(r))sw(s,m);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var x=s.lastRenderedState,O=_(x,o);if(m.hasEagerState=!0,m.eagerState=O,_r(O,x))return Sd(r,s,m,0),Rt===null&&wd(),!1}catch{}if(o=mp(r,s,m,u),o!==null)return ar(o,r,u),aw(o,s,u),!0}return!1}function Xp(r,s,o,u){if(u={lane:2,revertLane:Ag(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qd(r)){if(s)throw Error(i(479))}else s=mp(r,o,u,2),s!==null&&ar(s,r,2)}function qd(r){var s=r.alternate;return r===Ye||s!==null&&s===Ye}function sw(r,s){Xo=Pd=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function aw(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Dt(r,o)}}var Oc={readContext:Mn,use:Vd,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Oc.useEffectEvent=Qt;var ow={readContext:Mn,use:Vd,useCallback:function(r,s){return Wn().memoizedState=[r,s===void 0?null:s],r},useContext:Mn,useEffect:$x,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Bd(4194308,4,Wx.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Bd(4194308,4,r,s)},useInsertionEffect:function(r,s){Bd(4,2,r,s)},useMemo:function(r,s){var o=Wn();s=s===void 0?null:s;var u=r();if(Ya){cn(!0);try{r()}finally{cn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=Wn();if(o!==void 0){var m=o(s);if(Ya){cn(!0);try{o(s)}finally{cn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=aO.bind(null,Ye,r),[u.memoizedState,r]},useRef:function(r){var s=Wn();return r={current:r},s.memoizedState=r},useState:function(r){r=$p(r);var s=r.queue,o=iw.bind(null,Ye,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Qp,useDeferredValue:function(r,s){var o=Wn();return Wp(o,r,s)},useTransition:function(){var r=$p(!1);return r=Jx.bind(null,Ye,r.queue,!0,!1),Wn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Ye,m=Wn();if(ht){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Rt===null)throw Error(i(349));(lt&127)!==0||Tx(u,s,o)}m.memoizedState=o;var _={value:o,getSnapshot:s};return m.queue=_,$x(Rx.bind(null,u,_,r),[r]),u.flags|=2048,Jo(9,{destroy:void 0},Ax.bind(null,u,_,o,s),null),o},useId:function(){var r=Wn(),s=Rt.identifierPrefix;if(ht){var o=Ci,u=Ei;o=(u&~(1<<32-bn(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Ld++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=JR++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Yp,useFormState:Vx,useActionState:Vx,useOptimistic:function(r){var s=Wn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Xp.bind(null,Ye,!0,o),o.dispatch=s,[r,s]},useMemoCache:Bp,useCacheRefresh:function(){return Wn().memoizedState=sO.bind(null,Ye)},useEffectEvent:function(r){var s=Wn(),o={impl:r};return s.memoizedState=o,function(){if((vt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Zp={readContext:Mn,use:Vd,useCallback:Yx,useContext:Mn,useEffect:Gp,useImperativeHandle:Kx,useInsertionEffect:Gx,useLayoutEffect:Qx,useMemo:Xx,useReducer:zd,useRef:qx,useState:function(){return zd(es)},useDebugValue:Qp,useDeferredValue:function(r,s){var o=rn();return Zx(o,jt.memoizedState,r,s)},useTransition:function(){var r=zd(es)[0],s=rn().memoizedState;return[typeof r=="boolean"?r:Ac(r),s]},useSyncExternalStore:jx,useId:nw,useHostTransitionStatus:Yp,useFormState:zx,useActionState:zx,useOptimistic:function(r,s){var o=rn();return Mx(o,jt,r,s)},useMemoCache:Bp,useCacheRefresh:rw};Zp.useEffectEvent=Hx;var lw={readContext:Mn,use:Vd,useCallback:Yx,useContext:Mn,useEffect:Gp,useImperativeHandle:Kx,useInsertionEffect:Gx,useLayoutEffect:Qx,useMemo:Xx,useReducer:qp,useRef:qx,useState:function(){return qp(es)},useDebugValue:Qp,useDeferredValue:function(r,s){var o=rn();return jt===null?Wp(o,r,s):Zx(o,jt.memoizedState,r,s)},useTransition:function(){var r=qp(es)[0],s=rn().memoizedState;return[typeof r=="boolean"?r:Ac(r),s]},useSyncExternalStore:jx,useId:nw,useHostTransitionStatus:Yp,useFormState:Fx,useActionState:Fx,useOptimistic:function(r,s){var o=rn();return jt!==null?Mx(o,jt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Bp,useCacheRefresh:rw};lw.useEffectEvent=Hx;function Jp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var eg={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Sr(),m=qs(u);m.payload=s,o!=null&&(m.callback=o),s=$s(r,m,u),s!==null&&(ar(s,r,u),Ec(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Sr(),m=qs(u);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=$s(r,m,u),s!==null&&(ar(s,r,u),Ec(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Sr(),u=qs(o);u.tag=2,s!=null&&(u.callback=s),s=$s(r,u,o),s!==null&&(ar(s,r,o),Ec(s,r,o))}};function cw(r,s,o,u,m,_,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,_,x):s.prototype&&s.prototype.isPureReactComponent?!_c(o,u)||!_c(m,_):!0}function uw(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&eg.enqueueReplaceState(s,s.state,null)}function Xa(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function dw(r){xd(r)}function fw(r){console.error(r)}function hw(r){xd(r)}function $d(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function mw(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function tg(r,s,o){return o=qs(o),o.tag=3,o.payload={element:null},o.callback=function(){$d(r,s)},o}function pw(r){return r=qs(r),r.tag=3,r}function gw(r,s,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var _=u.value;r.payload=function(){return m(_)},r.callback=function(){mw(s,o,u)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(r.callback=function(){mw(s,o,u),typeof m!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var O=u.stack;this.componentDidCatch(u.value,{componentStack:O!==null?O:""})})}function oO(r,s,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Ho(s,o,m,!0),o=vr.current,o!==null){switch(o.tag){case 31:case 13:return Br===null?nf():o.alternate===null&&Wt===0&&(Wt=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Od?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Cg(r,u,m)),!1;case 22:return o.flags|=65536,u===Od?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Cg(r,u,m)),!1}throw Error(i(435,o.tag))}return Cg(r,u,m),nf(),!1}if(ht)return s=vr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==bp&&(r=Error(i(422),{cause:u}),bc(Lr(r,o)))):(u!==bp&&(s=Error(i(423),{cause:u}),bc(Lr(s,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Lr(u,o),m=tg(r.stateNode,u,m),Op(r,m),Wt!==4&&(Wt=2)),!1;var _=Error(i(520),{cause:u});if(_=Lr(_,o),Vc===null?Vc=[_]:Vc.push(_),Wt!==4&&(Wt=2),s===null)return!0;u=Lr(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=tg(o.stateNode,u,r),Op(o,r),!1;case 1:if(s=o.type,_=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ys===null||!Ys.has(_))))return o.flags|=65536,m&=-m,o.lanes|=m,m=pw(m),gw(m,r,o,u),Op(o,m),!1}o=o.return}while(o!==null);return!1}var ng=Error(i(461)),fn=!1;function Dn(r,s,o,u){s.child=r===null?bx(s,null,o,u):Ka(s,r.child,o,u)}function _w(r,s,o,u,m){o=o.render;var _=s.ref;if("ref"in u){var x={};for(var O in u)O!=="ref"&&(x[O]=u[O])}else x=u;return Ha(s),u=Lp(r,s,o,x,_,m),O=Up(),r!==null&&!fn?(Vp(r,s,m),ts(r,s,m)):(ht&&O&&yp(s),s.flags|=1,Dn(r,s,u,m),s.child)}function yw(r,s,o,u,m){if(r===null){var _=o.type;return typeof _=="function"&&!pp(_)&&_.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=_,vw(r,s,_,u,m)):(r=Ed(o.type,null,u,s,s.mode,m),r.ref=s.ref,r.return=s,s.child=r)}if(_=r.child,!ug(r,m)){var x=_.memoizedProps;if(o=o.compare,o=o!==null?o:_c,o(x,u)&&r.ref===s.ref)return ts(r,s,m)}return s.flags|=1,r=Ki(_,u),r.ref=s.ref,r.return=s,s.child=r}function vw(r,s,o,u,m){if(r!==null){var _=r.memoizedProps;if(_c(_,u)&&r.ref===s.ref)if(fn=!1,s.pendingProps=u=_,ug(r,m))(r.flags&131072)!==0&&(fn=!0);else return s.lanes=r.lanes,ts(r,s,m)}return rg(r,s,o,u,m)}function bw(r,s,o,u){var m=u.children,_=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|o:o,r!==null){for(u=s.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~_}else u=0,s.child=null;return xw(r,s,_,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ad(s,_!==null?_.cachePool:null),_!==null?Sx(s,_):Mp(),Nx(s);else return u=s.lanes=536870912,xw(r,s,_!==null?_.baseLanes|o:o,o,u)}else _!==null?(Ad(s,_.cachePool),Sx(s,_),Gs(),s.memoizedState=null):(r!==null&&Ad(s,null),Mp(),Gs());return Dn(r,s,m,o),s.child}function Ic(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function xw(r,s,o,u,m){var _=jp();return _=_===null?null:{parent:un._currentValue,pool:_},s.memoizedState={baseLanes:o,cachePool:_},r!==null&&Ad(s,null),Mp(),Nx(s),r!==null&&Ho(r,s,u,!0),s.childLanes=m,null}function Hd(r,s){return s=Qd({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function ww(r,s,o){return Ka(s,r.child,null,o),r=Hd(s,s.pendingProps),r.flags|=2,br(s),s.memoizedState=null,r}function lO(r,s,o){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(ht){if(u.mode==="hidden")return r=Hd(s,u),s.lanes=536870912,Ic(null,r);if(kp(s),(r=kt)?(r=DS(r,zr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Us!==null?{id:Ei,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},o=sx(r),o.return=s,s.child=o,In=s,kt=null)):r=null,r===null)throw zs(s);return s.lanes=536870912,null}return Hd(s,u)}var _=r.memoizedState;if(_!==null){var x=_.dehydrated;if(kp(s),m)if(s.flags&256)s.flags&=-257,s=ww(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(fn||Ho(r,s,o,!1),m=(o&r.childLanes)!==0,fn||m){if(u=Rt,u!==null&&(x=Mr(u,o),x!==0&&x!==_.retryLane))throw _.retryLane=x,Ba(r,x),ar(u,r,x),ng;nf(),s=ww(r,s,o)}else r=_.treeContext,kt=Fr(x.nextSibling),In=s,ht=!0,Vs=null,zr=!1,r!==null&&lx(s,r),s=Hd(s,u),s.flags|=4096;return s}return r=Ki(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Gd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function rg(r,s,o,u,m){return Ha(s),o=Lp(r,s,o,u,void 0,m),u=Up(),r!==null&&!fn?(Vp(r,s,m),ts(r,s,m)):(ht&&u&&yp(s),s.flags|=1,Dn(r,s,o,m),s.child)}function Sw(r,s,o,u,m,_){return Ha(s),s.updateQueue=null,o=Cx(s,u,o,m),Ex(r),u=Up(),r!==null&&!fn?(Vp(r,s,_),ts(r,s,_)):(ht&&u&&yp(s),s.flags|=1,Dn(r,s,o,_),s.child)}function Nw(r,s,o,u,m){if(Ha(s),s.stateNode===null){var _=Bo,x=o.contextType;typeof x=="object"&&x!==null&&(_=Mn(x)),_=new o(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=eg,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},Ap(s),x=o.contextType,_.context=typeof x=="object"&&x!==null?Mn(x):Bo,_.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(Jp(s,o,x,u),_.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(x=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),x!==_.state&&eg.enqueueReplaceState(_,_.state,null),jc(s,u,_,m),Cc(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){_=s.stateNode;var O=s.memoizedProps,H=Xa(o,O);_.props=H;var ee=_.context,oe=o.contextType;x=Bo,typeof oe=="object"&&oe!==null&&(x=Mn(oe));var ue=o.getDerivedStateFromProps;oe=typeof ue=="function"||typeof _.getSnapshotBeforeUpdate=="function",O=s.pendingProps!==O,oe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O||ee!==x)&&uw(s,_,u,x),Fs=!1;var ne=s.memoizedState;_.state=ne,jc(s,u,_,m),Cc(),ee=s.memoizedState,O||ne!==ee||Fs?(typeof ue=="function"&&(Jp(s,o,ue,u),ee=s.memoizedState),(H=Fs||cw(s,o,H,u,ne,ee,x))?(oe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=ee),_.props=u,_.state=ee,_.context=x,u=H):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,Rp(r,s),x=s.memoizedProps,oe=Xa(o,x),_.props=oe,ue=s.pendingProps,ne=_.context,ee=o.contextType,H=Bo,typeof ee=="object"&&ee!==null&&(H=Mn(ee)),O=o.getDerivedStateFromProps,(ee=typeof O=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x!==ue||ne!==H)&&uw(s,_,u,H),Fs=!1,ne=s.memoizedState,_.state=ne,jc(s,u,_,m),Cc();var ie=s.memoizedState;x!==ue||ne!==ie||Fs||r!==null&&r.dependencies!==null&&jd(r.dependencies)?(typeof O=="function"&&(Jp(s,o,O,u),ie=s.memoizedState),(oe=Fs||cw(s,o,oe,u,ne,ie,H)||r!==null&&r.dependencies!==null&&jd(r.dependencies))?(ee||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ie,H),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ie,H)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||x===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=ie),_.props=u,_.state=ie,_.context=H,u=oe):(typeof _.componentDidUpdate!="function"||x===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||x===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),u=!1)}return _=u,Gd(r,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,r!==null&&u?(s.child=Ka(s,r.child,null,m),s.child=Ka(s,null,o,m)):Dn(r,s,o,m),s.memoizedState=_.state,r=s.child):r=ts(r,s,m),r}function Ew(r,s,o,u){return qa(),s.flags|=256,Dn(r,s,o,u),s.child}var ig={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sg(r){return{baseLanes:r,cachePool:mx()}}function ag(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=wr),r}function Cw(r,s,o){var u=s.pendingProps,m=!1,_=(s.flags&128)!==0,x;if((x=_)||(x=r!==null&&r.memoizedState===null?!1:(nn.current&2)!==0),x&&(m=!0,s.flags&=-129),x=(s.flags&32)!==0,s.flags&=-33,r===null){if(ht){if(m?Hs(s):Gs(),(r=kt)?(r=DS(r,zr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Us!==null?{id:Ei,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},o=sx(r),o.return=s,s.child=o,In=s,kt=null)):r=null,r===null)throw zs(s);return Fg(r)?s.lanes=32:s.lanes=536870912,null}var O=u.children;return u=u.fallback,m?(Gs(),m=s.mode,O=Qd({mode:"hidden",children:O},m),u=Fa(u,m,o,null),O.return=s,u.return=s,O.sibling=u,s.child=O,u=s.child,u.memoizedState=sg(o),u.childLanes=ag(r,x,o),s.memoizedState=ig,Ic(null,u)):(Hs(s),og(s,O))}var H=r.memoizedState;if(H!==null&&(O=H.dehydrated,O!==null)){if(_)s.flags&256?(Hs(s),s.flags&=-257,s=lg(r,s,o)):s.memoizedState!==null?(Gs(),s.child=r.child,s.flags|=128,s=null):(Gs(),O=u.fallback,m=s.mode,u=Qd({mode:"visible",children:u.children},m),O=Fa(O,m,o,null),O.flags|=2,u.return=s,O.return=s,u.sibling=O,s.child=u,Ka(s,r.child,null,o),u=s.child,u.memoizedState=sg(o),u.childLanes=ag(r,x,o),s.memoizedState=ig,s=Ic(null,u));else if(Hs(s),Fg(O)){if(x=O.nextSibling&&O.nextSibling.dataset,x)var ee=x.dgst;x=ee,u=Error(i(419)),u.stack="",u.digest=x,bc({value:u,source:null,stack:null}),s=lg(r,s,o)}else if(fn||Ho(r,s,o,!1),x=(o&r.childLanes)!==0,fn||x){if(x=Rt,x!==null&&(u=Mr(x,o),u!==0&&u!==H.retryLane))throw H.retryLane=u,Ba(r,u),ar(x,r,u),ng;Bg(O)||nf(),s=lg(r,s,o)}else Bg(O)?(s.flags|=192,s.child=r.child,s=null):(r=H.treeContext,kt=Fr(O.nextSibling),In=s,ht=!0,Vs=null,zr=!1,r!==null&&lx(s,r),s=og(s,u.children),s.flags|=4096);return s}return m?(Gs(),O=u.fallback,m=s.mode,H=r.child,ee=H.sibling,u=Ki(H,{mode:"hidden",children:u.children}),u.subtreeFlags=H.subtreeFlags&65011712,ee!==null?O=Ki(ee,O):(O=Fa(O,m,o,null),O.flags|=2),O.return=s,u.return=s,u.sibling=O,s.child=u,Ic(null,u),u=s.child,O=r.child.memoizedState,O===null?O=sg(o):(m=O.cachePool,m!==null?(H=un._currentValue,m=m.parent!==H?{parent:H,pool:H}:m):m=mx(),O={baseLanes:O.baseLanes|o,cachePool:m}),u.memoizedState=O,u.childLanes=ag(r,x,o),s.memoizedState=ig,Ic(r.child,u)):(Hs(s),o=r.child,r=o.sibling,o=Ki(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(x=s.deletions,x===null?(s.deletions=[r],s.flags|=16):x.push(r)),s.child=o,s.memoizedState=null,o)}function og(r,s){return s=Qd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Qd(r,s){return r=yr(22,r,null,s),r.lanes=0,r}function lg(r,s,o){return Ka(s,r.child,null,o),r=og(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function jw(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Sp(r.return,s,o)}function cg(r,s,o,u,m,_){var x=r.memoizedState;x===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:_}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=o,x.tailMode=m,x.treeForkCount=_)}function Tw(r,s,o){var u=s.pendingProps,m=u.revealOrder,_=u.tail;u=u.children;var x=nn.current,O=(x&2)!==0;if(O?(x=x&1|2,s.flags|=128):x&=1,he(nn,x),Dn(r,s,u,o),u=ht?vc:0,!O&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&jw(r,o,s);else if(r.tag===19)jw(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)r=o.alternate,r!==null&&kd(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),cg(s,!1,m,o,_,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(r=m.alternate,r!==null&&kd(r)===null){s.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}cg(s,!0,o,null,_,u);break;case"together":cg(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ts(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Ks|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Ho(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Ki(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Ki(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function ug(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&jd(r)))}function cO(r,s,o){switch(s.tag){case 3:Fe(s,s.stateNode.containerInfo),Bs(s,un,r.memoizedState.cache),qa();break;case 27:case 5:Be(s);break;case 4:Fe(s,s.stateNode.containerInfo);break;case 10:Bs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,kp(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Hs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Cw(r,s,o):(Hs(s),r=ts(r,s,o),r!==null?r.sibling:null);Hs(s);break;case 19:var m=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Ho(r,s,o,!1),u=(o&s.childLanes)!==0),m){if(u)return Tw(r,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),he(nn,nn.current),u)break;return null;case 22:return s.lanes=0,bw(r,s,o,s.pendingProps);case 24:Bs(s,un,r.memoizedState.cache)}return ts(r,s,o)}function Aw(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)fn=!0;else{if(!ug(r,o)&&(s.flags&128)===0)return fn=!1,cO(r,s,o);fn=(r.flags&131072)!==0}else fn=!1,ht&&(s.flags&1048576)!==0&&ox(s,vc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=Qa(s.elementType),s.type=r,typeof r=="function")pp(r)?(u=Xa(r,u),s.tag=1,s=Nw(null,s,r,u,o)):(s.tag=0,s=rg(null,s,r,u,o));else{if(r!=null){var m=r.$$typeof;if(m===V){s.tag=11,s=_w(null,s,r,u,o);break e}else if(m===C){s.tag=14,s=yw(null,s,r,u,o);break e}}throw s=K(r)||r,Error(i(306,s,""))}}return s;case 0:return rg(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,m=Xa(u,s.pendingProps),Nw(r,s,u,m,o);case 3:e:{if(Fe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var _=s.memoizedState;m=_.element,Rp(r,s),jc(s,u,null,o);var x=s.memoizedState;if(u=x.cache,Bs(s,un,u),u!==_.cache&&Np(s,[un],o,!0),Cc(),u=x.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:x.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=Ew(r,s,u,o);break e}else if(u!==m){m=Lr(Error(i(424)),s),bc(m),s=Ew(r,s,u,o);break e}else for(r=s.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,kt=Fr(r.firstChild),In=s,ht=!0,Vs=null,zr=!0,o=bx(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(qa(),u===m){s=ts(r,s,o);break e}Dn(r,s,u,o)}s=s.child}return s;case 26:return Gd(r,s),r===null?(o=zS(s.type,null,s.pendingProps,null))?s.memoizedState=o:ht||(o=s.type,r=s.pendingProps,u=uf(we.current).createElement(o),u[xn]=s,u[Ut]=r,kn(u,o,r),tn(u),s.stateNode=u):s.memoizedState=zS(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Be(s),r===null&&ht&&(u=s.stateNode=LS(s.type,s.pendingProps,we.current),In=s,zr=!0,m=kt,ea(s.type)?(qg=m,kt=Fr(u.firstChild)):kt=m),Dn(r,s,s.pendingProps.children,o),Gd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&ht&&((m=u=kt)&&(u=VO(u,s.type,s.pendingProps,zr),u!==null?(s.stateNode=u,In=s,kt=Fr(u.firstChild),zr=!1,m=!0):m=!1),m||zs(s)),Be(s),m=s.type,_=s.pendingProps,x=r!==null?r.memoizedProps:null,u=_.children,Ug(m,_)?u=null:x!==null&&Ug(m,x)&&(s.flags|=32),s.memoizedState!==null&&(m=Lp(r,s,eO,null,null,o),Qc._currentValue=m),Gd(r,s),Dn(r,s,u,o),s.child;case 6:return r===null&&ht&&((r=o=kt)&&(o=zO(o,s.pendingProps,zr),o!==null?(s.stateNode=o,In=s,kt=null,r=!0):r=!1),r||zs(s)),null;case 13:return Cw(r,s,o);case 4:return Fe(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Ka(s,null,u,o):Dn(r,s,u,o),s.child;case 11:return _w(r,s,s.type,s.pendingProps,o);case 7:return Dn(r,s,s.pendingProps,o),s.child;case 8:return Dn(r,s,s.pendingProps.children,o),s.child;case 12:return Dn(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Bs(s,s.type,u.value),Dn(r,s,u.children,o),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,Ha(s),m=Mn(m),u=u(m),s.flags|=1,Dn(r,s,u,o),s.child;case 14:return yw(r,s,s.type,s.pendingProps,o);case 15:return vw(r,s,s.type,s.pendingProps,o);case 19:return Tw(r,s,o);case 31:return lO(r,s,o);case 22:return bw(r,s,o,s.pendingProps);case 24:return Ha(s),u=Mn(un),r===null?(m=jp(),m===null&&(m=Rt,_=Ep(),m.pooledCache=_,_.refCount++,_!==null&&(m.pooledCacheLanes|=o),m=_),s.memoizedState={parent:u,cache:m},Ap(s),Bs(s,un,m)):((r.lanes&o)!==0&&(Rp(r,s),jc(s,null,null,o),Cc()),m=r.memoizedState,_=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Bs(s,un,u)):(u=_.cache,Bs(s,un,u),u!==m.cache&&Np(s,[un],o,!0))),Dn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ns(r){r.flags|=4}function dg(r,s,o,u,m){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(nS())r.flags|=8192;else throw Wa=Od,Tp}else r.flags&=-16777217}function Rw(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!HS(s))if(nS())r.flags|=8192;else throw Wa=Od,Tp}function Wd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?fd():536870912,r.lanes|=s,rl|=s)}function Mc(r,s){if(!ht)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Pt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function uO(r,s,o){var u=s.pendingProps;switch(vp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(s),null;case 1:return Pt(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Zi(un),Ne(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&($o(s)?ns(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,xp())),Pt(s),null;case 26:var m=s.type,_=s.memoizedState;return r===null?(ns(s),_!==null?(Pt(s),Rw(s,_)):(Pt(s),dg(s,m,null,u,o))):_?_!==r.memoizedState?(ns(s),Pt(s),Rw(s,_)):(Pt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&ns(s),Pt(s),dg(s,m,r,u,o)),null;case 27:if(et(s),o=we.current,m=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ns(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Pt(s),null}r=pe.current,$o(s)?cx(s):(r=LS(m,u,o),s.stateNode=r,ns(s))}return Pt(s),null;case 5:if(et(s),m=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&ns(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return Pt(s),null}if(_=pe.current,$o(s))cx(s);else{var x=uf(we.current);switch(_){case 1:_=x.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:_=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":_=x.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":_=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":_=x.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?x.createElement("select",{is:u.is}):x.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?x.createElement(m,{is:u.is}):x.createElement(m)}}_[xn]=s,_[Ut]=u;e:for(x=s.child;x!==null;){if(x.tag===5||x.tag===6)_.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===s)break e;for(;x.sibling===null;){if(x.return===null||x.return===s)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}s.stateNode=_;e:switch(kn(_,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ns(s)}}return Pt(s),dg(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&ns(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=we.current,$o(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,m=In,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[xn]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||CS(r.nodeValue,o)),r||zs(s,!0)}else r=uf(r).createTextNode(u),r[xn]=s,s.stateNode=r}return Pt(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(u=$o(s),o!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[xn]=s}else qa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pt(s),r=!1}else o=xp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(br(s),s):(br(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Pt(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=$o(s),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[xn]=s}else qa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pt(s),m=!1}else m=xp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(br(s),s):(br(s),null)}return br(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==m&&(u.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),Wd(s,s.updateQueue),Pt(s),null);case 4:return Ne(),r===null&&Mg(s.stateNode.containerInfo),Pt(s),null;case 10:return Zi(s.type),Pt(s),null;case 19:if(re(nn),u=s.memoizedState,u===null)return Pt(s),null;if(m=(s.flags&128)!==0,_=u.rendering,_===null)if(m)Mc(u,!1);else{if(Wt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(_=kd(r),_!==null){for(s.flags|=128,Mc(u,!1),r=_.updateQueue,s.updateQueue=r,Wd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)ix(o,r),o=o.sibling;return he(nn,nn.current&1|2),ht&&Yi(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&te()>Jd&&(s.flags|=128,m=!0,Mc(u,!1),s.lanes=4194304)}else{if(!m)if(r=kd(_),r!==null){if(s.flags|=128,m=!0,r=r.updateQueue,s.updateQueue=r,Wd(s,r),Mc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!ht)return Pt(s),null}else 2*te()-u.renderingStartTime>Jd&&o!==536870912&&(s.flags|=128,m=!0,Mc(u,!1),s.lanes=4194304);u.isBackwards?(_.sibling=s.child,s.child=_):(r=u.last,r!==null?r.sibling=_:s.child=_,u.last=_)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=te(),r.sibling=null,o=nn.current,he(nn,m?o&1|2:o&1),ht&&Yi(s,u.treeForkCount),r):(Pt(s),null);case 22:case 23:return br(s),Dp(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Pt(s),s.subtreeFlags&6&&(s.flags|=8192)):Pt(s),o=s.updateQueue,o!==null&&Wd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&re(Ga),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Zi(un),Pt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function dO(r,s){switch(vp(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Zi(un),Ne(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return et(s),null;case 31:if(s.memoizedState!==null){if(br(s),s.alternate===null)throw Error(i(340));qa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(br(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));qa()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return re(nn),null;case 4:return Ne(),null;case 10:return Zi(s.type),null;case 22:case 23:return br(s),Dp(),r!==null&&re(Ga),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Zi(un),null;case 25:return null;default:return null}}function Ow(r,s){switch(vp(s),s.tag){case 3:Zi(un),Ne();break;case 26:case 27:case 5:et(s);break;case 4:Ne();break;case 31:s.memoizedState!==null&&br(s);break;case 13:br(s);break;case 19:re(nn);break;case 10:Zi(s.type);break;case 22:case 23:br(s),Dp(),r!==null&&re(Ga);break;case 24:Zi(un)}}function Dc(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var _=o.create,x=o.inst;u=_(),x.destroy=u}o=o.next}while(o!==m)}}catch(O){Ct(s,s.return,O)}}function Qs(r,s,o){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var _=m.next;u=_;do{if((u.tag&r)===r){var x=u.inst,O=x.destroy;if(O!==void 0){x.destroy=void 0,m=s;var H=o,ee=O;try{ee()}catch(oe){Ct(m,H,oe)}}}u=u.next}while(u!==_)}}catch(oe){Ct(s,s.return,oe)}}function Iw(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{wx(s,o)}catch(u){Ct(r,r.return,u)}}}function Mw(r,s,o){o.props=Xa(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Ct(r,s,u)}}function kc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){Ct(r,s,m)}}function ji(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Ct(r,s,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Ct(r,s,m)}else o.current=null}function Dw(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Ct(r,r.return,m)}}function fg(r,s,o){try{var u=r.stateNode;MO(u,r.type,o,s),u[Ut]=s}catch(m){Ct(r,r.return,m)}}function kw(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ea(r.type)||r.tag===4}function hg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||kw(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ea(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function mg(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Qi));else if(u!==4&&(u===27&&ea(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(mg(r,s,o),r=r.sibling;r!==null;)mg(r,s,o),r=r.sibling}function Kd(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&ea(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Kd(r,s,o),r=r.sibling;r!==null;)Kd(r,s,o),r=r.sibling}function Pw(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);kn(s,u,o),s[xn]=r,s[Ut]=o}catch(_){Ct(r,r.return,_)}}var rs=!1,hn=!1,pg=!1,Lw=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function fO(r,s){if(r=r.containerInfo,Pg=_f,r=Kb(r),lp(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{o.nodeType,_.nodeType}catch{o=null;break e}var x=0,O=-1,H=-1,ee=0,oe=0,ue=r,ne=null;t:for(;;){for(var ie;ue!==o||m!==0&&ue.nodeType!==3||(O=x+m),ue!==_||u!==0&&ue.nodeType!==3||(H=x+u),ue.nodeType===3&&(x+=ue.nodeValue.length),(ie=ue.firstChild)!==null;)ne=ue,ue=ie;for(;;){if(ue===r)break t;if(ne===o&&++ee===m&&(O=x),ne===_&&++oe===u&&(H=x),(ie=ue.nextSibling)!==null)break;ue=ne,ne=ue.parentNode}ue=ie}o=O===-1||H===-1?null:{start:O,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lg={focusedElem:r,selectionRange:o},_f=!1,Tn=s;Tn!==null;)if(s=Tn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Tn=r;else for(;Tn!==null;){switch(s=Tn,_=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,o=s,m=_.memoizedProps,_=_.memoizedState,u=o.stateNode;try{var Ee=Xa(o.type,m);r=u.getSnapshotBeforeUpdate(Ee,_),u.__reactInternalSnapshotBeforeUpdate=r}catch($e){Ct(o,o.return,$e)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)zg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":zg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Tn=r;break}Tn=s.return}}function Uw(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ss(r,o),u&4&&Dc(5,o);break;case 1:if(ss(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(x){Ct(o,o.return,x)}else{var m=Xa(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(m,s,r.__reactInternalSnapshotBeforeUpdate)}catch(x){Ct(o,o.return,x)}}u&64&&Iw(o),u&512&&kc(o,o.return);break;case 3:if(ss(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{wx(r,s)}catch(x){Ct(o,o.return,x)}}break;case 27:s===null&&u&4&&Pw(o);case 26:case 5:ss(r,o),s===null&&u&4&&Dw(o),u&512&&kc(o,o.return);break;case 12:ss(r,o);break;case 31:ss(r,o),u&4&&Bw(r,o);break;case 13:ss(r,o),u&4&&Fw(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=xO.bind(null,o),BO(r,o))));break;case 22:if(u=o.memoizedState!==null||rs,!u){s=s!==null&&s.memoizedState!==null||hn,m=rs;var _=hn;rs=u,(hn=s)&&!_?as(r,o,(o.subtreeFlags&8772)!==0):ss(r,o),rs=m,hn=_}break;case 30:break;default:ss(r,o)}}function Vw(r){var s=r.alternate;s!==null&&(r.alternate=null,Vw(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&lc(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Vt=null,nr=!1;function is(r,s,o){for(o=o.child;o!==null;)zw(r,s,o),o=o.sibling}function zw(r,s,o){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(Ht,o)}catch{}switch(o.tag){case 26:hn||ji(o,s),is(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:hn||ji(o,s);var u=Vt,m=nr;ea(o.type)&&(Vt=o.stateNode,nr=!1),is(r,s,o),$c(o.stateNode),Vt=u,nr=m;break;case 5:hn||ji(o,s);case 6:if(u=Vt,m=nr,Vt=null,is(r,s,o),Vt=u,nr=m,Vt!==null)if(nr)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(o.stateNode)}catch(_){Ct(o,s,_)}else try{Vt.removeChild(o.stateNode)}catch(_){Ct(o,s,_)}break;case 18:Vt!==null&&(nr?(r=Vt,IS(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),dl(r)):IS(Vt,o.stateNode));break;case 4:u=Vt,m=nr,Vt=o.stateNode.containerInfo,nr=!0,is(r,s,o),Vt=u,nr=m;break;case 0:case 11:case 14:case 15:Qs(2,o,s),hn||Qs(4,o,s),is(r,s,o);break;case 1:hn||(ji(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Mw(o,s,u)),is(r,s,o);break;case 21:is(r,s,o);break;case 22:hn=(u=hn)||o.memoizedState!==null,is(r,s,o),hn=u;break;default:is(r,s,o)}}function Bw(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{dl(r)}catch(o){Ct(s,s.return,o)}}}function Fw(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{dl(r)}catch(o){Ct(s,s.return,o)}}function hO(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new Lw),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new Lw),s;default:throw Error(i(435,r.tag))}}function Yd(r,s){var o=hO(r);s.forEach(function(u){if(!o.has(u)){o.add(u);var m=wO.bind(null,r,u);u.then(m,m)}})}function rr(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],_=r,x=s,O=x;e:for(;O!==null;){switch(O.tag){case 27:if(ea(O.type)){Vt=O.stateNode,nr=!1;break e}break;case 5:Vt=O.stateNode,nr=!1;break e;case 3:case 4:Vt=O.stateNode.containerInfo,nr=!0;break e}O=O.return}if(Vt===null)throw Error(i(160));zw(_,x,m),Vt=null,nr=!1,_=m.alternate,_!==null&&(_.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)qw(s,r),s=s.sibling}var ii=null;function qw(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:rr(s,r),ir(r),u&4&&(Qs(3,r,r.return),Dc(3,r),Qs(5,r,r.return));break;case 1:rr(s,r),ir(r),u&512&&(hn||o===null||ji(o,o.return)),u&64&&rs&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=ii;if(rr(s,r),ir(r),u&512&&(hn||o===null||ji(o,o.return)),u&4){var _=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":_=m.getElementsByTagName("title")[0],(!_||_[ka]||_[xn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=m.createElement(u),m.head.insertBefore(_,m.querySelector("head > title"))),kn(_,u,o),_[xn]=r,tn(_),u=_;break e;case"link":var x=qS("link","href",m).get(u+(o.href||""));if(x){for(var O=0;O<x.length;O++)if(_=x[O],_.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&_.getAttribute("rel")===(o.rel==null?null:o.rel)&&_.getAttribute("title")===(o.title==null?null:o.title)&&_.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(O,1);break t}}_=m.createElement(u),kn(_,u,o),m.head.appendChild(_);break;case"meta":if(x=qS("meta","content",m).get(u+(o.content||""))){for(O=0;O<x.length;O++)if(_=x[O],_.getAttribute("content")===(o.content==null?null:""+o.content)&&_.getAttribute("name")===(o.name==null?null:o.name)&&_.getAttribute("property")===(o.property==null?null:o.property)&&_.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&_.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(O,1);break t}}_=m.createElement(u),kn(_,u,o),m.head.appendChild(_);break;default:throw Error(i(468,u))}_[xn]=r,tn(_),u=_}r.stateNode=u}else $S(m,r.type,r.stateNode);else r.stateNode=FS(m,u,r.memoizedProps);else _!==u?(_===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):_.count--,u===null?$S(m,r.type,r.stateNode):FS(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&fg(r,r.memoizedProps,o.memoizedProps)}break;case 27:rr(s,r),ir(r),u&512&&(hn||o===null||ji(o,o.return)),o!==null&&u&4&&fg(r,r.memoizedProps,o.memoizedProps);break;case 5:if(rr(s,r),ir(r),u&512&&(hn||o===null||ji(o,o.return)),r.flags&32){m=r.stateNode;try{Do(m,"")}catch(Ee){Ct(r,r.return,Ee)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,fg(r,m,o!==null?o.memoizedProps:m)),u&1024&&(pg=!0);break;case 6:if(rr(s,r),ir(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ee){Ct(r,r.return,Ee)}}break;case 3:if(hf=null,m=ii,ii=df(s.containerInfo),rr(s,r),ii=m,ir(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{dl(s.containerInfo)}catch(Ee){Ct(r,r.return,Ee)}pg&&(pg=!1,$w(r));break;case 4:u=ii,ii=df(r.stateNode.containerInfo),rr(s,r),ir(r),ii=u;break;case 12:rr(s,r),ir(r);break;case 31:rr(s,r),ir(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yd(r,u)));break;case 13:rr(s,r),ir(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Zd=te()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yd(r,u)));break;case 22:m=r.memoizedState!==null;var H=o!==null&&o.memoizedState!==null,ee=rs,oe=hn;if(rs=ee||m,hn=oe||H,rr(s,r),hn=oe,rs=ee,ir(r),u&8192)e:for(s=r.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||H||rs||hn||Za(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){H=o=s;try{if(_=H.stateNode,m)x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{O=H.stateNode;var ue=H.memoizedProps.style,ne=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;O.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ee){Ct(H,H.return,Ee)}}}else if(s.tag===6){if(o===null){H=s;try{H.stateNode.nodeValue=m?"":H.memoizedProps}catch(Ee){Ct(H,H.return,Ee)}}}else if(s.tag===18){if(o===null){H=s;try{var ie=H.stateNode;m?MS(ie,!0):MS(H.stateNode,!1)}catch(Ee){Ct(H,H.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Yd(r,o))));break;case 19:rr(s,r),ir(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yd(r,u)));break;case 30:break;case 21:break;default:rr(s,r),ir(r)}}function ir(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(kw(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var m=o.stateNode,_=hg(r);Kd(r,_,m);break;case 5:var x=o.stateNode;o.flags&32&&(Do(x,""),o.flags&=-33);var O=hg(r);Kd(r,O,x);break;case 3:case 4:var H=o.stateNode.containerInfo,ee=hg(r);mg(r,ee,H);break;default:throw Error(i(161))}}catch(oe){Ct(r,r.return,oe)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function $w(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;$w(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function ss(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Uw(r,s.alternate,s),s=s.sibling}function Za(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Qs(4,s,s.return),Za(s);break;case 1:ji(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Mw(s,s.return,o),Za(s);break;case 27:$c(s.stateNode);case 26:case 5:ji(s,s.return),Za(s);break;case 22:s.memoizedState===null&&Za(s);break;case 30:Za(s);break;default:Za(s)}r=r.sibling}}function as(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=r,_=s,x=_.flags;switch(_.tag){case 0:case 11:case 15:as(m,_,o),Dc(4,_);break;case 1:if(as(m,_,o),u=_,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ee){Ct(u,u.return,ee)}if(u=_,m=u.updateQueue,m!==null){var O=u.stateNode;try{var H=m.shared.hiddenCallbacks;if(H!==null)for(m.shared.hiddenCallbacks=null,m=0;m<H.length;m++)xx(H[m],O)}catch(ee){Ct(u,u.return,ee)}}o&&x&64&&Iw(_),kc(_,_.return);break;case 27:Pw(_);case 26:case 5:as(m,_,o),o&&u===null&&x&4&&Dw(_),kc(_,_.return);break;case 12:as(m,_,o);break;case 31:as(m,_,o),o&&x&4&&Bw(m,_);break;case 13:as(m,_,o),o&&x&4&&Fw(m,_);break;case 22:_.memoizedState===null&&as(m,_,o),kc(_,_.return);break;case 30:break;default:as(m,_,o)}s=s.sibling}}function gg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&xc(o))}function _g(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xc(r))}function si(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Hw(r,s,o,u),s=s.sibling}function Hw(r,s,o,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:si(r,s,o,u),m&2048&&Dc(9,s);break;case 1:si(r,s,o,u);break;case 3:si(r,s,o,u),m&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&xc(r)));break;case 12:if(m&2048){si(r,s,o,u),r=s.stateNode;try{var _=s.memoizedProps,x=_.id,O=_.onPostCommit;typeof O=="function"&&O(x,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(H){Ct(s,s.return,H)}}else si(r,s,o,u);break;case 31:si(r,s,o,u);break;case 13:si(r,s,o,u);break;case 23:break;case 22:_=s.stateNode,x=s.alternate,s.memoizedState!==null?_._visibility&2?si(r,s,o,u):Pc(r,s):_._visibility&2?si(r,s,o,u):(_._visibility|=2,el(r,s,o,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&gg(x,s);break;case 24:si(r,s,o,u),m&2048&&_g(s.alternate,s);break;default:si(r,s,o,u)}}function el(r,s,o,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=r,x=s,O=o,H=u,ee=x.flags;switch(x.tag){case 0:case 11:case 15:el(_,x,O,H,m),Dc(8,x);break;case 23:break;case 22:var oe=x.stateNode;x.memoizedState!==null?oe._visibility&2?el(_,x,O,H,m):Pc(_,x):(oe._visibility|=2,el(_,x,O,H,m)),m&&ee&2048&&gg(x.alternate,x);break;case 24:el(_,x,O,H,m),m&&ee&2048&&_g(x.alternate,x);break;default:el(_,x,O,H,m)}s=s.sibling}}function Pc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,m=u.flags;switch(u.tag){case 22:Pc(o,u),m&2048&&gg(u.alternate,u);break;case 24:Pc(o,u),m&2048&&_g(u.alternate,u);break;default:Pc(o,u)}s=s.sibling}}var Lc=8192;function tl(r,s,o){if(r.subtreeFlags&Lc)for(r=r.child;r!==null;)Gw(r,s,o),r=r.sibling}function Gw(r,s,o){switch(r.tag){case 26:tl(r,s,o),r.flags&Lc&&r.memoizedState!==null&&JO(o,ii,r.memoizedState,r.memoizedProps);break;case 5:tl(r,s,o);break;case 3:case 4:var u=ii;ii=df(r.stateNode.containerInfo),tl(r,s,o),ii=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Lc,Lc=16777216,tl(r,s,o),Lc=u):tl(r,s,o));break;default:tl(r,s,o)}}function Qw(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Uc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Tn=u,Kw(u,r)}Qw(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ww(r),r=r.sibling}function Ww(r){switch(r.tag){case 0:case 11:case 15:Uc(r),r.flags&2048&&Qs(9,r,r.return);break;case 3:Uc(r);break;case 12:Uc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Xd(r)):Uc(r);break;default:Uc(r)}}function Xd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Tn=u,Kw(u,r)}Qw(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Qs(8,s,s.return),Xd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Xd(s));break;default:Xd(s)}r=r.sibling}}function Kw(r,s){for(;Tn!==null;){var o=Tn;switch(o.tag){case 0:case 11:case 15:Qs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Tn=u;else e:for(o=r;Tn!==null;){u=Tn;var m=u.sibling,_=u.return;if(Vw(u),u===o){Tn=null;break e}if(m!==null){m.return=_,Tn=m;break e}Tn=_}}}var mO={getCacheForType:function(r){var s=Mn(un),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return Mn(un).controller.signal}},pO=typeof WeakMap=="function"?WeakMap:Map,vt=0,Rt=null,st=null,lt=0,Et=0,xr=null,Ws=!1,nl=!1,yg=!1,os=0,Wt=0,Ks=0,Ja=0,vg=0,wr=0,rl=0,Vc=null,sr=null,bg=!1,Zd=0,Yw=0,Jd=1/0,ef=null,Ys=null,wn=0,Xs=null,il=null,ls=0,xg=0,wg=null,Xw=null,zc=0,Sg=null;function Sr(){return(vt&2)!==0&&lt!==0?lt&-lt:R.T!==null?Ag():pr()}function Zw(){if(wr===0)if((lt&536870912)===0||ht){var r=As;As<<=1,(As&3932160)===0&&(As=262144),wr=r}else wr=536870912;return r=vr.current,r!==null&&(r.flags|=32),wr}function ar(r,s,o){(r===Rt&&(Et===2||Et===9)||r.cancelPendingCommit!==null)&&(sl(r,0),Zs(r,lt,wr,!1)),Oo(r,o),((vt&2)===0||r!==Rt)&&(r===Rt&&((vt&2)===0&&(Ja|=o),Wt===4&&Zs(r,lt,wr,!1)),Ti(r))}function Jw(r,s,o){if((vt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Da(r,s),m=u?yO(r,s):Eg(r,s,!0),_=u;do{if(m===0){nl&&!u&&Zs(r,s,0,!1);break}else{if(o=r.current.alternate,_&&!gO(o)){m=Eg(r,s,!1),_=!1;continue}if(m===2){if(_=s,r.errorRecoveryDisabledLanes&_)var x=0;else x=r.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){s=x;e:{var O=r;m=Vc;var H=O.current.memoizedState.isDehydrated;if(H&&(sl(O,x).flags|=256),x=Eg(O,x,!1),x!==2){if(yg&&!H){O.errorRecoveryDisabledLanes|=_,Ja|=_,m=4;break e}_=sr,sr=m,_!==null&&(sr===null?sr=_:sr.push.apply(sr,_))}m=x}if(_=!1,m!==2)continue}}if(m===1){sl(r,0),Zs(r,s,0,!0);break}e:{switch(u=r,_=m,_){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Zs(u,s,wr,!Ws);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=Zd+300-te(),10<m)){if(Zs(u,s,wr,!Ws),Ro(u,0,!0)!==0)break e;ls=s,u.timeoutHandle=RS(eS.bind(null,u,o,sr,ef,bg,s,wr,Ja,rl,Ws,_,"Throttled",-0,0),m);break e}eS(u,o,sr,ef,bg,s,wr,Ja,rl,Ws,_,null,-0,0)}}break}while(!0);Ti(r)}function eS(r,s,o,u,m,_,x,O,H,ee,oe,ue,ne,ie){if(r.timeoutHandle=-1,ue=s.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},Gw(s,_,ue);var Ee=(_&62914560)===_?Zd-te():(_&4194048)===_?Yw-te():0;if(Ee=eI(ue,Ee),Ee!==null){ls=_,r.cancelPendingCommit=Ee(lS.bind(null,r,s,_,o,u,m,x,O,H,oe,ue,null,ne,ie)),Zs(r,_,x,!ee);return}}lS(r,s,_,o,u,m,x,O,H)}function gO(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],_=m.getSnapshot;m=m.value;try{if(!_r(_(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Zs(r,s,o,u){s&=~vg,s&=~Ja,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var m=s;0<m;){var _=31-bn(m),x=1<<_;u[_]=-1,m&=~x}o!==0&&wt(r,o,s)}function tf(){return(vt&6)===0?(Bc(0),!1):!0}function Ng(){if(st!==null){if(Et===0)var r=st.return;else r=st,Xi=$a=null,zp(r),Ko=null,Sc=0,r=st;for(;r!==null;)Ow(r.alternate,r),r=r.return;st=null}}function sl(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,PO(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),ls=0,Ng(),Rt=r,st=o=Ki(r.current,null),lt=s,Et=0,xr=null,Ws=!1,nl=Da(r,s),yg=!1,rl=wr=vg=Ja=Ks=Wt=0,sr=Vc=null,bg=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var m=31-bn(u),_=1<<m;s|=r[m],u&=~_}return os=s,wd(),o}function tS(r,s){Ye=null,R.H=Oc,s===Wo||s===Rd?(s=_x(),Et=3):s===Tp?(s=_x(),Et=4):Et=s===ng?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,xr=s,st===null&&(Wt=1,$d(r,Lr(s,r.current)))}function nS(){var r=vr.current;return r===null?!0:(lt&4194048)===lt?Br===null:(lt&62914560)===lt||(lt&536870912)!==0?r===Br:!1}function rS(){var r=R.H;return R.H=Oc,r===null?Oc:r}function iS(){var r=R.A;return R.A=mO,r}function nf(){Wt=4,Ws||(lt&4194048)!==lt&&vr.current!==null||(nl=!0),(Ks&134217727)===0&&(Ja&134217727)===0||Rt===null||Zs(Rt,lt,wr,!1)}function Eg(r,s,o){var u=vt;vt|=2;var m=rS(),_=iS();(Rt!==r||lt!==s)&&(ef=null,sl(r,s)),s=!1;var x=Wt;e:do try{if(Et!==0&&st!==null){var O=st,H=xr;switch(Et){case 8:Ng(),x=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(s=!0);var ee=Et;if(Et=0,xr=null,al(r,O,H,ee),o&&nl){x=0;break e}break;default:ee=Et,Et=0,xr=null,al(r,O,H,ee)}}_O(),x=Wt;break}catch(oe){tS(r,oe)}while(!0);return s&&r.shellSuspendCounter++,Xi=$a=null,vt=u,R.H=m,R.A=_,st===null&&(Rt=null,lt=0,wd()),x}function _O(){for(;st!==null;)sS(st)}function yO(r,s){var o=vt;vt|=2;var u=rS(),m=iS();Rt!==r||lt!==s?(ef=null,Jd=te()+500,sl(r,s)):nl=Da(r,s);e:do try{if(Et!==0&&st!==null){s=st;var _=xr;t:switch(Et){case 1:Et=0,xr=null,al(r,s,_,1);break;case 2:case 9:if(px(_)){Et=0,xr=null,aS(s);break}s=function(){Et!==2&&Et!==9||Rt!==r||(Et=7),Ti(r)},_.then(s,s);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:px(_)?(Et=0,xr=null,aS(s)):(Et=0,xr=null,al(r,s,_,7));break;case 5:var x=null;switch(st.tag){case 26:x=st.memoizedState;case 5:case 27:var O=st;if(x?HS(x):O.stateNode.complete){Et=0,xr=null;var H=O.sibling;if(H!==null)st=H;else{var ee=O.return;ee!==null?(st=ee,rf(ee)):st=null}break t}}Et=0,xr=null,al(r,s,_,5);break;case 6:Et=0,xr=null,al(r,s,_,6);break;case 8:Ng(),Wt=6;break e;default:throw Error(i(462))}}vO();break}catch(oe){tS(r,oe)}while(!0);return Xi=$a=null,R.H=u,R.A=m,vt=o,st!==null?0:(Rt=null,lt=0,wd(),Wt)}function vO(){for(;st!==null&&!Ao();)sS(st)}function sS(r){var s=Aw(r.alternate,r,os);r.memoizedProps=r.pendingProps,s===null?rf(r):st=s}function aS(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=Sw(o,s,s.pendingProps,s.type,void 0,lt);break;case 11:s=Sw(o,s,s.pendingProps,s.type.render,s.ref,lt);break;case 5:zp(s);default:Ow(o,s),s=st=ix(s,os),s=Aw(o,s,os)}r.memoizedProps=r.pendingProps,s===null?rf(r):st=s}function al(r,s,o,u){Xi=$a=null,zp(s),Ko=null,Sc=0;var m=s.return;try{if(oO(r,m,s,o,lt)){Wt=1,$d(r,Lr(o,r.current)),st=null;return}}catch(_){if(m!==null)throw st=m,_;Wt=1,$d(r,Lr(o,r.current)),st=null;return}s.flags&32768?(ht||u===1?r=!0:nl||(lt&536870912)!==0?r=!1:(Ws=r=!0,(u===2||u===9||u===3||u===6)&&(u=vr.current,u!==null&&u.tag===13&&(u.flags|=16384))),oS(s,r)):rf(s)}function rf(r){var s=r;do{if((s.flags&32768)!==0){oS(s,Ws);return}r=s.return;var o=uO(s.alternate,s,os);if(o!==null){st=o;return}if(s=s.sibling,s!==null){st=s;return}st=s=r}while(s!==null);Wt===0&&(Wt=5)}function oS(r,s){do{var o=dO(r.alternate,r);if(o!==null){o.flags&=32767,st=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){st=r;return}st=r=o}while(r!==null);Wt=6,st=null}function lS(r,s,o,u,m,_,x,O,H){r.cancelPendingCommit=null;do sf();while(wn!==0);if((vt&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(_=s.lanes|s.childLanes,_|=hp,ac(r,o,_,x,O,H),r===Rt&&(st=Rt=null,lt=0),il=s,Xs=r,ls=o,xg=_,wg=m,Xw=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,SO(Me,function(){return hS(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=R.T,R.T=null,m=B.p,B.p=2,x=vt,vt|=4;try{fO(r,s,o)}finally{vt=x,B.p=m,R.T=u}}wn=1,cS(),uS(),dS()}}function cS(){if(wn===1){wn=0;var r=Xs,s=il,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=R.T,R.T=null;var u=B.p;B.p=2;var m=vt;vt|=4;try{qw(s,r);var _=Lg,x=Kb(r.containerInfo),O=_.focusedElem,H=_.selectionRange;if(x!==O&&O&&O.ownerDocument&&Wb(O.ownerDocument.documentElement,O)){if(H!==null&&lp(O)){var ee=H.start,oe=H.end;if(oe===void 0&&(oe=ee),"selectionStart"in O)O.selectionStart=ee,O.selectionEnd=Math.min(oe,O.value.length);else{var ue=O.ownerDocument||document,ne=ue&&ue.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),Ee=O.textContent.length,$e=Math.min(H.start,Ee),At=H.end===void 0?$e:Math.min(H.end,Ee);!ie.extend&&$e>At&&(x=At,At=$e,$e=x);var X=Qb(O,$e),Q=Qb(O,At);if(X&&Q&&(ie.rangeCount!==1||ie.anchorNode!==X.node||ie.anchorOffset!==X.offset||ie.focusNode!==Q.node||ie.focusOffset!==Q.offset)){var J=ue.createRange();J.setStart(X.node,X.offset),ie.removeAllRanges(),$e>At?(ie.addRange(J),ie.extend(Q.node,Q.offset)):(J.setEnd(Q.node,Q.offset),ie.addRange(J))}}}}for(ue=[],ie=O;ie=ie.parentNode;)ie.nodeType===1&&ue.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ue.length;O++){var le=ue[O];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}_f=!!Pg,Lg=Pg=null}finally{vt=m,B.p=u,R.T=o}}r.current=s,wn=2}}function uS(){if(wn===2){wn=0;var r=Xs,s=il,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=R.T,R.T=null;var u=B.p;B.p=2;var m=vt;vt|=4;try{Uw(r,s.alternate,s)}finally{vt=m,B.p=u,R.T=o}}wn=3}}function dS(){if(wn===4||wn===3){wn=0,ic();var r=Xs,s=il,o=ls,u=Xw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?wn=5:(wn=0,il=Xs=null,fS(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Ys=null),oc(o),s=s.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(Ht,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=R.T,m=B.p,B.p=2,R.T=null;try{for(var _=r.onRecoverableError,x=0;x<u.length;x++){var O=u[x];_(O.value,{componentStack:O.stack})}}finally{R.T=s,B.p=m}}(ls&3)!==0&&sf(),Ti(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===Sg?zc++:(zc=0,Sg=r):zc=0,Bc(0)}}function fS(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,xc(s)))}function sf(){return cS(),uS(),dS(),hS()}function hS(){if(wn!==5)return!1;var r=Xs,s=xg;xg=0;var o=oc(ls),u=R.T,m=B.p;try{B.p=32>o?32:o,R.T=null,o=wg,wg=null;var _=Xs,x=ls;if(wn=0,il=Xs=null,ls=0,(vt&6)!==0)throw Error(i(331));var O=vt;if(vt|=4,Ww(_.current),Hw(_,_.current,x,o),vt=O,Bc(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(Ht,_)}catch{}return!0}finally{B.p=m,R.T=u,fS(r,s)}}function mS(r,s,o){s=Lr(o,s),s=tg(r.stateNode,s,2),r=$s(r,s,2),r!==null&&(Oo(r,2),Ti(r))}function Ct(r,s,o){if(r.tag===3)mS(r,r,o);else for(;s!==null;){if(s.tag===3){mS(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ys===null||!Ys.has(u))){r=Lr(o,r),o=pw(2),u=$s(s,o,2),u!==null&&(gw(o,u,s,r),Oo(u,2),Ti(u));break}}s=s.return}}function Cg(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new pO;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(o)||(yg=!0,m.add(o),r=bO.bind(null,r,s,o),s.then(r,r))}function bO(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Rt===r&&(lt&o)===o&&(Wt===4||Wt===3&&(lt&62914560)===lt&&300>te()-Zd?(vt&2)===0&&sl(r,0):vg|=o,rl===lt&&(rl=0)),Ti(r)}function pS(r,s){s===0&&(s=fd()),r=Ba(r,s),r!==null&&(Oo(r,s),Ti(r))}function xO(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),pS(r,o)}function wO(r,s){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),pS(r,o)}function SO(r,s){return Si(r,s)}var af=null,ol=null,jg=!1,of=!1,Tg=!1,Js=0;function Ti(r){r!==ol&&r.next===null&&(ol===null?af=ol=r:ol=ol.next=r),of=!0,jg||(jg=!0,EO())}function Bc(r,s){if(!Tg&&of){Tg=!0;do for(var o=!1,u=af;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var _=0;else{var x=u.suspendedLanes,O=u.pingedLanes;_=(1<<31-bn(42|r)+1)-1,_&=m&~(x&~O),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(o=!0,vS(u,_))}else _=lt,_=Ro(u,u===Rt?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Da(u,_)||(o=!0,vS(u,_));u=u.next}while(o);Tg=!1}}function NO(){gS()}function gS(){of=jg=!1;var r=0;Js!==0&&kO()&&(r=Js);for(var s=te(),o=null,u=af;u!==null;){var m=u.next,_=_S(u,s);_===0?(u.next=null,o===null?af=m:o.next=m,m===null&&(ol=o)):(o=u,(r!==0||(_&3)!==0)&&(of=!0)),u=m}wn!==0&&wn!==5||Bc(r),Js!==0&&(Js=0)}function _S(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var x=31-bn(_),O=1<<x,H=m[x];H===-1?((O&o)===0||(O&u)!==0)&&(m[x]=Wm(O,s)):H<=s&&(r.expiredLanes|=O),_&=~O}if(s=Rt,o=lt,o=Ro(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Et===2||Et===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Ts(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Da(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Ts(u),oc(o)){case 2:case 8:o=Ve;break;case 32:o=Me;break;case 268435456:o=Fn;break;default:o=Me}return u=yS.bind(null,r),o=Si(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Ts(u),r.callbackPriority=2,r.callbackNode=null,2}function yS(r,s){if(wn!==0&&wn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(sf()&&r.callbackNode!==o)return null;var u=lt;return u=Ro(r,r===Rt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(Jw(r,u,s),_S(r,te()),r.callbackNode!=null&&r.callbackNode===o?yS.bind(null,r):null)}function vS(r,s){if(sf())return null;Jw(r,s,!0)}function EO(){LO(function(){(vt&6)!==0?Si(_e,NO):gS()})}function Ag(){if(Js===0){var r=Go;r===0&&(r=Lt,Lt<<=1,(Lt&261888)===0&&(Lt=256)),Js=r}return Js}function bS(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:md(""+r)}function xS(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function CO(r,s,o,u,m){if(s==="submit"&&o&&o.stateNode===m){var _=bS((m[Ut]||null).action),x=u.submitter;x&&(s=(s=x[Ut]||null)?bS(s.formAction):x.getAttribute("formAction"),s!==null&&(_=s,x=null));var O=new yd("action","action",null,u,m);r.push({event:O,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Js!==0){var H=x?xS(m,x):new FormData(m);Kp(o,{pending:!0,data:H,method:m.method,action:_},null,H)}}else typeof _=="function"&&(O.preventDefault(),H=x?xS(m,x):new FormData(m),Kp(o,{pending:!0,data:H,method:m.method,action:_},_,H))},currentTarget:m}]})}}for(var Rg=0;Rg<fp.length;Rg++){var Og=fp[Rg],jO=Og.toLowerCase(),TO=Og[0].toUpperCase()+Og.slice(1);ri(jO,"on"+TO)}ri(Zb,"onAnimationEnd"),ri(Jb,"onAnimationIteration"),ri(ex,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri($R,"onTransitionRun"),ri(HR,"onTransitionStart"),ri(GR,"onTransitionCancel"),ri(tx,"onTransitionEnd"),Dr("onMouseEnter",["mouseout","mouseover"]),Dr("onMouseLeave",["mouseout","mouseover"]),Dr("onPointerEnter",["pointerout","pointerover"]),Dr("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fc));function wS(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var _=void 0;if(s)for(var x=u.length-1;0<=x;x--){var O=u[x],H=O.instance,ee=O.currentTarget;if(O=O.listener,H!==_&&m.isPropagationStopped())break e;_=O,m.currentTarget=ee;try{_(m)}catch(oe){xd(oe)}m.currentTarget=null,_=H}else for(x=0;x<u.length;x++){if(O=u[x],H=O.instance,ee=O.currentTarget,O=O.listener,H!==_&&m.isPropagationStopped())break e;_=O,m.currentTarget=ee;try{_(m)}catch(oe){xd(oe)}m.currentTarget=null,_=H}}}}function at(r,s){var o=s[gr];o===void 0&&(o=s[gr]=new Set);var u=r+"__bubble";o.has(u)||(SS(s,r,2,!1),o.add(u))}function Ig(r,s,o){var u=0;s&&(u|=4),SS(o,r,u,s)}var lf="_reactListening"+Math.random().toString(36).slice(2);function Mg(r){if(!r[lf]){r[lf]=!0,cc.forEach(function(o){o!=="selectionchange"&&(AO.has(o)||Ig(o,!1,r),Ig(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[lf]||(s[lf]=!0,Ig("selectionchange",!1,s))}}function SS(r,s,o,u){switch(ZS(s)){case 2:var m=rI;break;case 8:m=iI;break;default:m=Wg}o=m.bind(null,s,o,r),m=void 0,!Jm||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(s,o,{capture:!0,passive:m}):r.addEventListener(s,o,!0):m!==void 0?r.addEventListener(s,o,{passive:m}):r.addEventListener(s,o,!1)}function Dg(r,s,o,u,m){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var O=u.stateNode.containerInfo;if(O===m)break;if(x===4)for(x=u.return;x!==null;){var H=x.tag;if((H===3||H===4)&&x.stateNode.containerInfo===m)return;x=x.return}for(;O!==null;){if(x=Is(O),x===null)return;if(H=x.tag,H===5||H===6||H===26||H===27){u=_=x;continue e}O=O.parentNode}}u=u.return}Tb(function(){var ee=_,oe=Xm(o),ue=[];e:{var ne=nx.get(r);if(ne!==void 0){var ie=yd,Ee=r;switch(r){case"keypress":if(gd(o)===0)break e;case"keydown":case"keyup":ie=wR;break;case"focusin":Ee="focus",ie=rp;break;case"focusout":Ee="blur",ie=rp;break;case"beforeblur":case"afterblur":ie=rp;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=uR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=ER;break;case Zb:case Jb:case ex:ie=hR;break;case tx:ie=jR;break;case"scroll":case"scrollend":ie=lR;break;case"wheel":ie=AR;break;case"copy":case"cut":case"paste":ie=pR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Mb;break;case"toggle":case"beforetoggle":ie=OR}var $e=(s&4)!==0,At=!$e&&(r==="scroll"||r==="scrollend"),X=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var Q=ee,J;Q!==null;){var le=Q;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||X===null||(le=uc(Q,X),le!=null&&$e.push(qc(Q,le,J))),At)break;Q=Q.return}0<$e.length&&(ne=new ie(ne,Ee,null,o,oe),ue.push({event:ne,listeners:$e}))}}if((s&7)===0){e:{if(ne=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",ne&&o!==Ym&&(Ee=o.relatedTarget||o.fromElement)&&(Is(Ee)||Ee[qn]))break e;if((ie||ne)&&(ne=oe.window===oe?oe:(ne=oe.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(Ee=o.relatedTarget||o.toElement,ie=ee,Ee=Ee?Is(Ee):null,Ee!==null&&(At=c(Ee),$e=Ee.tag,Ee!==At||$e!==5&&$e!==27&&$e!==6)&&(Ee=null)):(ie=null,Ee=ee),ie!==Ee)){if($e=Ob,le="onMouseLeave",X="onMouseEnter",Q="mouse",(r==="pointerout"||r==="pointerover")&&($e=Mb,le="onPointerLeave",X="onPointerEnter",Q="pointer"),At=ie==null?ne:Pa(ie),J=Ee==null?ne:Pa(Ee),ne=new $e(le,Q+"leave",ie,o,oe),ne.target=At,ne.relatedTarget=J,le=null,Is(oe)===ee&&($e=new $e(X,Q+"enter",Ee,o,oe),$e.target=J,$e.relatedTarget=At,le=$e),At=le,ie&&Ee)t:{for($e=RO,X=ie,Q=Ee,J=0,le=X;le;le=$e(le))J++;le=0;for(var ke=Q;ke;ke=$e(ke))le++;for(;0<J-le;)X=$e(X),J--;for(;0<le-J;)Q=$e(Q),le--;for(;J--;){if(X===Q||Q!==null&&X===Q.alternate){$e=X;break t}X=$e(X),Q=$e(Q)}$e=null}else $e=null;ie!==null&&NS(ue,ne,ie,$e,!1),Ee!==null&&At!==null&&NS(ue,At,Ee,$e,!0)}}e:{if(ne=ee?Pa(ee):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var gt=Bb;else if(Vb(ne))if(Fb)gt=BR;else{gt=VR;var Ae=UR}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Km(ee.elementType)&&(gt=Bb):gt=zR;if(gt&&(gt=gt(r,ee))){zb(ue,gt,o,oe);break e}Ae&&Ae(r,ne,ee),r==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&La(ne,"number",ne.value)}switch(Ae=ee?Pa(ee):window,r){case"focusin":(Vb(Ae)||Ae.contentEditable==="true")&&(Uo=Ae,cp=ee,yc=null);break;case"focusout":yc=cp=Uo=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,Yb(ue,o,oe);break;case"selectionchange":if(qR)break;case"keydown":case"keyup":Yb(ue,o,oe)}var Je;if(sp)e:{switch(r){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else Lo?Lb(r,o)&&(ct="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ct="onCompositionStart");ct&&(Db&&o.locale!=="ko"&&(Lo||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&Lo&&(Je=Ab()):(Ls=oe,ep="value"in Ls?Ls.value:Ls.textContent,Lo=!0)),Ae=cf(ee,ct),0<Ae.length&&(ct=new Ib(ct,r,null,o,oe),ue.push({event:ct,listeners:Ae}),Je?ct.data=Je:(Je=Ub(o),Je!==null&&(ct.data=Je)))),(Je=MR?DR(r,o):kR(r,o))&&(ct=cf(ee,"onBeforeInput"),0<ct.length&&(Ae=new Ib("onBeforeInput","beforeinput",null,o,oe),ue.push({event:Ae,listeners:ct}),Ae.data=Je)),CO(ue,r,ee,o,oe)}wS(ue,s)})}function qc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function cf(r,s){for(var o=s+"Capture",u=[];r!==null;){var m=r,_=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||_===null||(m=uc(r,o),m!=null&&u.unshift(qc(r,m,_)),m=uc(r,s),m!=null&&u.push(qc(r,m,_))),r.tag===3)return u;r=r.return}return[]}function RO(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function NS(r,s,o,u,m){for(var _=s._reactName,x=[];o!==null&&o!==u;){var O=o,H=O.alternate,ee=O.stateNode;if(O=O.tag,H!==null&&H===u)break;O!==5&&O!==26&&O!==27||ee===null||(H=ee,m?(ee=uc(o,_),ee!=null&&x.unshift(qc(o,ee,H))):m||(ee=uc(o,_),ee!=null&&x.push(qc(o,ee,H)))),o=o.return}x.length!==0&&r.push({event:s,listeners:x})}var OO=/\r\n?/g,IO=/\u0000|\uFFFD/g;function ES(r){return(typeof r=="string"?r:""+r).replace(OO,`
`).replace(IO,"")}function CS(r,s){return s=ES(s),ES(r)===s}function Tt(r,s,o,u,m,_){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Do(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Do(r,""+u);break;case"className":ve(r,"class",u);break;case"tabIndex":ve(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ve(r,o,u);break;case"style":Cb(r,u,_);break;case"data":if(s!=="object"){ve(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=md(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(o==="formAction"?(s!=="input"&&Tt(r,s,"name",m.name,m,null),Tt(r,s,"formEncType",m.formEncType,m,null),Tt(r,s,"formMethod",m.formMethod,m,null),Tt(r,s,"formTarget",m.formTarget,m,null)):(Tt(r,s,"encType",m.encType,m,null),Tt(r,s,"method",m.method,m,null),Tt(r,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=md(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Qi);break;case"onScroll":u!=null&&at("scroll",r);break;case"onScrollEnd":u!=null&&at("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=md(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":at("beforetoggle",r),at("toggle",r),de(r,"popover",u);break;case"xlinkActuate":De(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":De(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":De(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":De(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":De(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":De(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":De(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":De(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":De(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":de(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=aR.get(o)||o,de(r,o,u))}}function kg(r,s,o,u,m,_){switch(o){case"style":Cb(r,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?Do(r,u):(typeof u=="number"||typeof u=="bigint")&&Do(r,""+u);break;case"onScroll":u!=null&&at("scroll",r);break;case"onScrollEnd":u!=null&&at("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ks.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),_=r[Ut]||null,_=_!=null?_[o]:null,typeof _=="function"&&r.removeEventListener(s,_,m),typeof u=="function")){typeof _!="function"&&_!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):de(r,o,u)}}}function kn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",r),at("load",r);var u=!1,m=!1,_;for(_ in o)if(o.hasOwnProperty(_)){var x=o[_];if(x!=null)switch(_){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Tt(r,s,_,x,o,null)}}m&&Tt(r,s,"srcSet",o.srcSet,o,null),u&&Tt(r,s,"src",o.src,o,null);return;case"input":at("invalid",r);var O=_=x=m=null,H=null,ee=null;for(u in o)if(o.hasOwnProperty(u)){var oe=o[u];if(oe!=null)switch(u){case"name":m=oe;break;case"type":x=oe;break;case"checked":H=oe;break;case"defaultChecked":ee=oe;break;case"value":_=oe;break;case"defaultValue":O=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,s));break;default:Tt(r,s,u,oe,o,null)}}Io(r,_,O,H,ee,x,m,!1);return;case"select":at("invalid",r),u=x=_=null;for(m in o)if(o.hasOwnProperty(m)&&(O=o[m],O!=null))switch(m){case"value":_=O;break;case"defaultValue":x=O;break;case"multiple":u=O;default:Tt(r,s,m,O,o,null)}s=_,o=x,r.multiple=!!u,s!=null?Mo(r,!!u,s,!1):o!=null&&Mo(r,!!u,o,!0);return;case"textarea":at("invalid",r),_=m=u=null;for(x in o)if(o.hasOwnProperty(x)&&(O=o[x],O!=null))switch(x){case"value":u=O;break;case"defaultValue":m=O;break;case"children":_=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:Tt(r,s,x,O,o,null)}Nb(r,u,m,_);return;case"option":for(H in o)o.hasOwnProperty(H)&&(u=o[H],u!=null)&&(H==="selected"?r.selected=u&&typeof u!="function"&&typeof u!="symbol":Tt(r,s,H,u,o,null));return;case"dialog":at("beforetoggle",r),at("toggle",r),at("cancel",r),at("close",r);break;case"iframe":case"object":at("load",r);break;case"video":case"audio":for(u=0;u<Fc.length;u++)at(Fc[u],r);break;case"image":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"embed":case"source":case"link":at("error",r),at("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(u=o[ee],u!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Tt(r,s,ee,u,o,null)}return;default:if(Km(s)){for(oe in o)o.hasOwnProperty(oe)&&(u=o[oe],u!==void 0&&kg(r,s,oe,u,o,void 0));return}}for(O in o)o.hasOwnProperty(O)&&(u=o[O],u!=null&&Tt(r,s,O,u,o,null))}function MO(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,_=null,x=null,O=null,H=null,ee=null,oe=null;for(ie in o){var ue=o[ie];if(o.hasOwnProperty(ie)&&ue!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=ue;default:u.hasOwnProperty(ie)||Tt(r,s,ie,null,u,ue)}}for(var ne in u){var ie=u[ne];if(ue=o[ne],u.hasOwnProperty(ne)&&(ie!=null||ue!=null))switch(ne){case"type":_=ie;break;case"name":m=ie;break;case"checked":ee=ie;break;case"defaultChecked":oe=ie;break;case"value":x=ie;break;case"defaultValue":O=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,s));break;default:ie!==ue&&Tt(r,s,ne,ie,u,ue)}}Ps(r,x,O,H,ee,oe,_,m);return;case"select":ie=x=O=ne=null;for(_ in o)if(H=o[_],o.hasOwnProperty(_)&&H!=null)switch(_){case"value":break;case"multiple":ie=H;default:u.hasOwnProperty(_)||Tt(r,s,_,null,u,H)}for(m in u)if(_=u[m],H=o[m],u.hasOwnProperty(m)&&(_!=null||H!=null))switch(m){case"value":ne=_;break;case"defaultValue":O=_;break;case"multiple":x=_;default:_!==H&&Tt(r,s,m,_,u,H)}s=O,o=x,u=ie,ne!=null?Mo(r,!!o,ne,!1):!!u!=!!o&&(s!=null?Mo(r,!!o,s,!0):Mo(r,!!o,o?[]:"",!1));return;case"textarea":ie=ne=null;for(O in o)if(m=o[O],o.hasOwnProperty(O)&&m!=null&&!u.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Tt(r,s,O,null,u,m)}for(x in u)if(m=u[x],_=o[x],u.hasOwnProperty(x)&&(m!=null||_!=null))switch(x){case"value":ne=m;break;case"defaultValue":ie=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==_&&Tt(r,s,x,m,u,_)}Sb(r,ne,ie);return;case"option":for(var Ee in o)ne=o[Ee],o.hasOwnProperty(Ee)&&ne!=null&&!u.hasOwnProperty(Ee)&&(Ee==="selected"?r.selected=!1:Tt(r,s,Ee,null,u,ne));for(H in u)ne=u[H],ie=o[H],u.hasOwnProperty(H)&&ne!==ie&&(ne!=null||ie!=null)&&(H==="selected"?r.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":Tt(r,s,H,ne,u,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in o)ne=o[$e],o.hasOwnProperty($e)&&ne!=null&&!u.hasOwnProperty($e)&&Tt(r,s,$e,null,u,ne);for(ee in u)if(ne=u[ee],ie=o[ee],u.hasOwnProperty(ee)&&ne!==ie&&(ne!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,s));break;default:Tt(r,s,ee,ne,u,ie)}return;default:if(Km(s)){for(var At in o)ne=o[At],o.hasOwnProperty(At)&&ne!==void 0&&!u.hasOwnProperty(At)&&kg(r,s,At,void 0,u,ne);for(oe in u)ne=u[oe],ie=o[oe],!u.hasOwnProperty(oe)||ne===ie||ne===void 0&&ie===void 0||kg(r,s,oe,ne,u,ie);return}}for(var X in o)ne=o[X],o.hasOwnProperty(X)&&ne!=null&&!u.hasOwnProperty(X)&&Tt(r,s,X,null,u,ne);for(ue in u)ne=u[ue],ie=o[ue],!u.hasOwnProperty(ue)||ne===ie||ne==null&&ie==null||Tt(r,s,ue,ne,u,ie)}function jS(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function DO(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],_=m.transferSize,x=m.initiatorType,O=m.duration;if(_&&O&&jS(x)){for(x=0,O=m.responseEnd,u+=1;u<o.length;u++){var H=o[u],ee=H.startTime;if(ee>O)break;var oe=H.transferSize,ue=H.initiatorType;oe&&jS(ue)&&(H=H.responseEnd,x+=oe*(H<O?1:(O-ee)/(H-ee)))}if(--u,s+=8*(_+x)/(m.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Pg=null,Lg=null;function uf(r){return r.nodeType===9?r:r.ownerDocument}function TS(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function AS(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Ug(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Vg=null;function kO(){var r=window.event;return r&&r.type==="popstate"?r===Vg?!1:(Vg=r,!0):(Vg=null,!1)}var RS=typeof setTimeout=="function"?setTimeout:void 0,PO=typeof clearTimeout=="function"?clearTimeout:void 0,OS=typeof Promise=="function"?Promise:void 0,LO=typeof queueMicrotask=="function"?queueMicrotask:typeof OS<"u"?function(r){return OS.resolve(null).then(r).catch(UO)}:RS;function UO(r){setTimeout(function(){throw r})}function ea(r){return r==="head"}function IS(r,s){var o=s,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(m),dl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")$c(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,$c(o);for(var _=o.firstChild;_;){var x=_.nextSibling,O=_.nodeName;_[ka]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&_.rel.toLowerCase()==="stylesheet"||o.removeChild(_),_=x}}else o==="body"&&$c(r.ownerDocument.body);o=m}while(o);dl(s)}function MS(r,s){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function zg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":zg(o),lc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function VO(r,s,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[ka])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var _=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=Fr(r.nextSibling),r===null)break}return null}function zO(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Fr(r.nextSibling),r===null))return null;return r}function DS(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Fr(r.nextSibling),r===null))return null;return r}function Bg(r){return r.data==="$?"||r.data==="$~"}function Fg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function BO(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Fr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var qg=null;function kS(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return Fr(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function PS(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function LS(r,s,o){switch(s=uf(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function $c(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);lc(r)}var qr=new Map,US=new Set;function df(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var cs=B.d;B.d={f:FO,r:qO,D:$O,C:HO,L:GO,m:QO,X:KO,S:WO,M:YO};function FO(){var r=cs.f(),s=tf();return r||s}function qO(r){var s=Ms(r);s!==null&&s.tag===5&&s.type==="form"?tw(s):cs.r(r)}var ll=typeof document>"u"?null:document;function VS(r,s,o){var u=ll;if(u&&typeof s=="string"&&s){var m=jn(s);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),US.has(m)||(US.add(m),r={rel:r,crossOrigin:o,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),kn(s,"link",r),tn(s),u.head.appendChild(s)))}}function $O(r){cs.D(r),VS("dns-prefetch",r,null)}function HO(r,s){cs.C(r,s),VS("preconnect",r,s)}function GO(r,s,o){cs.L(r,s,o);var u=ll;if(u&&r&&s){var m='link[rel="preload"][as="'+jn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+jn(o.imageSizes)+'"]')):m+='[href="'+jn(r)+'"]';var _=m;switch(s){case"style":_=cl(r);break;case"script":_=ul(r)}qr.has(_)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),qr.set(_,r),u.querySelector(m)!==null||s==="style"&&u.querySelector(Hc(_))||s==="script"&&u.querySelector(Gc(_))||(s=u.createElement("link"),kn(s,"link",r),tn(s),u.head.appendChild(s)))}}function QO(r,s){cs.m(r,s);var o=ll;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(r)+'"]',_=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ul(r)}if(!qr.has(_)&&(r=v({rel:"modulepreload",href:r},s),qr.set(_,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gc(_)))return}u=o.createElement("link"),kn(u,"link",r),tn(u),o.head.appendChild(u)}}}function WO(r,s,o){cs.S(r,s,o);var u=ll;if(u&&r){var m=Ds(u).hoistableStyles,_=cl(r);s=s||"default";var x=m.get(_);if(!x){var O={loading:0,preload:null};if(x=u.querySelector(Hc(_)))O.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=qr.get(_))&&$g(r,o);var H=x=u.createElement("link");tn(H),kn(H,"link",r),H._p=new Promise(function(ee,oe){H.onload=ee,H.onerror=oe}),H.addEventListener("load",function(){O.loading|=1}),H.addEventListener("error",function(){O.loading|=2}),O.loading|=4,ff(x,s,u)}x={type:"stylesheet",instance:x,count:1,state:O},m.set(_,x)}}}function KO(r,s){cs.X(r,s);var o=ll;if(o&&r){var u=Ds(o).hoistableScripts,m=ul(r),_=u.get(m);_||(_=o.querySelector(Gc(m)),_||(r=v({src:r,async:!0},s),(s=qr.get(m))&&Hg(r,s),_=o.createElement("script"),tn(_),kn(_,"link",r),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(m,_))}}function YO(r,s){cs.M(r,s);var o=ll;if(o&&r){var u=Ds(o).hoistableScripts,m=ul(r),_=u.get(m);_||(_=o.querySelector(Gc(m)),_||(r=v({src:r,async:!0,type:"module"},s),(s=qr.get(m))&&Hg(r,s),_=o.createElement("script"),tn(_),kn(_,"link",r),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(m,_))}}function zS(r,s,o,u){var m=(m=we.current)?df(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=cl(o.href),o=Ds(m).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=cl(o.href);var _=Ds(m).hoistableStyles,x=_.get(r);if(x||(m=m.ownerDocument||m,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,x),(_=m.querySelector(Hc(r)))&&!_._p&&(x.instance=_,x.state.loading=5),qr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},qr.set(r,o),_||XO(m,r,o,x.state))),s&&u===null)throw Error(i(528,""));return x}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ul(o),o=Ds(m).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function cl(r){return'href="'+jn(r)+'"'}function Hc(r){return'link[rel="stylesheet"]['+r+"]"}function BS(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function XO(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),kn(s,"link",o),tn(s),r.head.appendChild(s))}function ul(r){return'[src="'+jn(r)+'"]'}function Gc(r){return"script[async]"+r}function FS(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+jn(o.href)+'"]');if(u)return s.instance=u,tn(u),u;var m=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),tn(u),kn(u,"style",m),ff(u,o.precedence,r),s.instance=u;case"stylesheet":m=cl(o.href);var _=r.querySelector(Hc(m));if(_)return s.state.loading|=4,s.instance=_,tn(_),_;u=BS(o),(m=qr.get(m))&&$g(u,m),_=(r.ownerDocument||r).createElement("link"),tn(_);var x=_;return x._p=new Promise(function(O,H){x.onload=O,x.onerror=H}),kn(_,"link",u),s.state.loading|=4,ff(_,o.precedence,r),s.instance=_;case"script":return _=ul(o.src),(m=r.querySelector(Gc(_)))?(s.instance=m,tn(m),m):(u=o,(m=qr.get(_))&&(u=v({},o),Hg(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),tn(m),kn(m,"link",u),r.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ff(u,o.precedence,r));return s.instance}function ff(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,_=m,x=0;x<u.length;x++){var O=u[x];if(O.dataset.precedence===s)_=O;else if(_!==m)break}_?_.parentNode.insertBefore(r,_.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function $g(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Hg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var hf=null;function qS(r,s,o){if(hf===null){var u=new Map,m=hf=new Map;m.set(o,u)}else m=hf,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var _=o[m];if(!(_[ka]||_[xn]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var x=_.getAttribute(s)||"";x=r+x;var O=u.get(x);O?O.push(_):u.set(x,[_])}}return u}function $S(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function ZO(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(r=s.disabled,typeof s.precedence=="string"&&r==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function HS(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function JO(r,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=cl(u.href),_=s.querySelector(Hc(m));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=mf.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=_,tn(_);return}_=s.ownerDocument||s,u=BS(u),(m=qr.get(m))&&$g(u,m),_=_.createElement("link"),tn(_);var x=_;x._p=new Promise(function(O,H){x.onload=O,x.onerror=H}),kn(_,"link",u),o.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=mf.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var Gg=0;function eI(r,s){return r.stylesheets&&r.count===0&&gf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&gf(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+s);0<r.imgBytes&&Gg===0&&(Gg=62500*DO());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&gf(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Gg?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function mf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var pf=null;function gf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,pf=new Map,s.forEach(tI,r),pf=null,mf.call(r))}function tI(r,s){if(!(s.state.loading&4)){var o=pf.get(r);if(o)var u=o.get(null);else{o=new Map,pf.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<m.length;_++){var x=m[_];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),u=x)}u&&o.set(null,u)}m=s.instance,x=m.getAttribute("data-precedence"),_=o.get(x)||u,_===u&&o.set(null,m),o.set(x,m),this.count++,u=mf.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),_?_.parentNode.insertBefore(m,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),s.state.loading|=4}}var Qc={$$typeof:P,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function nI(r,s,o,u,m,_,x,O,H){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sc(0),this.hiddenUpdates=sc(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=_,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function GS(r,s,o,u,m,_,x,O,H,ee,oe,ue){return r=new nI(r,s,o,x,H,ee,oe,ue,O),s=1,_===!0&&(s|=24),_=yr(3,null,null,s),r.current=_,_.stateNode=r,s=Ep(),s.refCount++,r.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:o,cache:s},Ap(_),r}function QS(r){return r?(r=Bo,r):Bo}function WS(r,s,o,u,m,_){m=QS(m),u.context===null?u.context=m:u.pendingContext=m,u=qs(s),u.payload={element:o},_=_===void 0?null:_,_!==null&&(u.callback=_),o=$s(r,u,s),o!==null&&(ar(o,r,s),Ec(o,r,s))}function KS(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Qg(r,s){KS(r,s),(r=r.alternate)&&KS(r,s)}function YS(r){if(r.tag===13||r.tag===31){var s=Ba(r,67108864);s!==null&&ar(s,r,67108864),Qg(r,67108864)}}function XS(r){if(r.tag===13||r.tag===31){var s=Sr();s=Rs(s);var o=Ba(r,s);o!==null&&ar(o,r,s),Qg(r,s)}}var _f=!0;function rI(r,s,o,u){var m=R.T;R.T=null;var _=B.p;try{B.p=2,Wg(r,s,o,u)}finally{B.p=_,R.T=m}}function iI(r,s,o,u){var m=R.T;R.T=null;var _=B.p;try{B.p=8,Wg(r,s,o,u)}finally{B.p=_,R.T=m}}function Wg(r,s,o,u){if(_f){var m=Kg(u);if(m===null)Dg(r,s,u,yf,o),JS(r,u);else if(aI(m,r,s,o,u))u.stopPropagation();else if(JS(r,u),s&4&&-1<sI.indexOf(r)){for(;m!==null;){var _=Ms(m);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var x=Hi(_.pendingLanes);if(x!==0){var O=_;for(O.pendingLanes|=2,O.entangledLanes|=2;x;){var H=1<<31-bn(x);O.entanglements[1]|=H,x&=~H}Ti(_),(vt&6)===0&&(Jd=te()+500,Bc(0))}}break;case 31:case 13:O=Ba(_,2),O!==null&&ar(O,_,2),tf(),Qg(_,2)}if(_=Kg(u),_===null&&Dg(r,s,u,yf,o),_===m)break;m=_}m!==null&&u.stopPropagation()}else Dg(r,s,u,null,o)}}function Kg(r){return r=Xm(r),Yg(r)}var yf=null;function Yg(r){if(yf=null,r=Is(r),r!==null){var s=c(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=d(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return yf=r,null}function ZS(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case _e:return 2;case Ve:return 8;case Me:case Cn:return 32;case Fn:return 268435456;default:return 32}default:return 32}}var Xg=!1,ta=null,na=null,ra=null,Wc=new Map,Kc=new Map,ia=[],sI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JS(r,s){switch(r){case"focusin":case"focusout":ta=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":Wc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kc.delete(s.pointerId)}}function Yc(r,s,o,u,m,_){return r===null||r.nativeEvent!==_?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:_,targetContainers:[m]},s!==null&&(s=Ms(s),s!==null&&YS(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),r)}function aI(r,s,o,u,m){switch(s){case"focusin":return ta=Yc(ta,r,s,o,u,m),!0;case"dragenter":return na=Yc(na,r,s,o,u,m),!0;case"mouseover":return ra=Yc(ra,r,s,o,u,m),!0;case"pointerover":var _=m.pointerId;return Wc.set(_,Yc(Wc.get(_)||null,r,s,o,u,m)),!0;case"gotpointercapture":return _=m.pointerId,Kc.set(_,Yc(Kc.get(_)||null,r,s,o,u,m)),!0}return!1}function e0(r){var s=Is(r.target);if(s!==null){var o=c(s);if(o!==null){if(s=o.tag,s===13){if(s=d(o),s!==null){r.blockedOn=s,Gt(r.priority,function(){XS(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,Gt(r.priority,function(){XS(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Kg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Ym=u,o.target.dispatchEvent(u),Ym=null}else return s=Ms(o),s!==null&&YS(s),r.blockedOn=o,!1;s.shift()}return!0}function t0(r,s,o){vf(r)&&o.delete(s)}function oI(){Xg=!1,ta!==null&&vf(ta)&&(ta=null),na!==null&&vf(na)&&(na=null),ra!==null&&vf(ra)&&(ra=null),Wc.forEach(t0),Kc.forEach(t0)}function bf(r,s){r.blockedOn===s&&(r.blockedOn=null,Xg||(Xg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oI)))}var xf=null;function n0(r){xf!==r&&(xf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){xf===r&&(xf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],m=r[s+2];if(typeof u!="function"){if(Yg(u||o)===null)continue;break}var _=Ms(o);_!==null&&(r.splice(s,3),s-=3,Kp(_,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function dl(r){function s(H){return bf(H,r)}ta!==null&&bf(ta,r),na!==null&&bf(na,r),ra!==null&&bf(ra,r),Wc.forEach(s),Kc.forEach(s);for(var o=0;o<ia.length;o++){var u=ia[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ia.length&&(o=ia[0],o.blockedOn===null);)e0(o),o.blockedOn===null&&ia.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],_=o[u+1],x=m[Ut]||null;if(typeof _=="function")x||n0(o);else if(x){var O=null;if(_&&_.hasAttribute("formAction")){if(m=_,x=_[Ut]||null)O=x.formAction;else if(Yg(m)!==null)continue}else O=x.action;typeof O=="function"?o[u+1]=O:(o.splice(u,3),u-=3),n0(o)}}}function r0(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(x){return m=x})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function Zg(r){this._internalRoot=r}wf.prototype.render=Zg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Sr();WS(o,u,r,s,null,null)},wf.prototype.unmount=Zg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;WS(r.current,2,null,r,null,null),tf(),s[qn]=null}};function wf(r){this._internalRoot=r}wf.prototype.unstable_scheduleHydration=function(r){if(r){var s=pr();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ia.length&&s!==0&&s<ia[o].priority;o++);ia.splice(o,0,r),o===0&&e0(r)}};var i0=e.version;if(i0!=="19.2.4")throw Error(i(527,i0,"19.2.4"));B.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=g(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var lI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{Ht=Sf.inject(lI),yt=Sf}catch{}}return Zc.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",m=dw,_=fw,x=hw;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),s=GS(r,1,!1,null,null,o,u,null,m,_,x,r0),r[qn]=s.current,Mg(r),new Zg(s)},Zc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,m="",_=dw,x=fw,O=hw,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError),o.formState!==void 0&&(H=o.formState)),s=GS(r,1,!0,s,o??null,u,m,H,_,x,O,r0),s.context=QS(null),o=s.current,u=Sr(),u=Rs(u),m=qs(u),m.callback=null,$s(o,m,u),o=u,s.current.lanes=o,Oo(s,o),Ti(s),r[qn]=s.current,Mg(r),new wf(s)},Zc.version="19.2.4",Zc}var m0;function yI(){if(m0)return t_.exports;m0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),t_.exports=_I(),t_.exports}var vI=yI();const bI=Ly(vI);var p0="popstate";function xI(t={}){function e(a,c){let{pathname:d="/",search:f="",hash:h=""}=So(a.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),V_("",{pathname:d,search:f,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(a,c){let d=a.document.querySelector("base"),f="";if(d&&d.getAttribute("href")){let h=a.location.href,g=h.indexOf("#");f=g===-1?h:h.slice(0,g)}return f+"#"+(typeof c=="string"?c:_u(c))}function i(a,c){Zr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return SI(e,n,i,t)}function Bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wI(){return Math.random().toString(36).substring(2,10)}function g0(t,e){return{usr:t.state,key:t.key,idx:e}}function V_(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?So(e):e,state:n,key:e&&e.key||i||wI()}}function _u({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function So(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function SI(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:c=!1}=i,d=a.history,f="POP",h=null,g=y();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function y(){return(d.state||{idx:null}).idx}function v(){f="POP";let j=y(),L=j==null?null:j-g;g=j,h&&h({action:f,location:E.location,delta:L})}function b(j,L){f="PUSH";let M=V_(E.location,j,L);n&&n(M,j),g=y()+1;let P=g0(M,g),V=E.createHref(M);try{d.pushState(P,"",V)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;a.location.assign(V)}c&&h&&h({action:f,location:E.location,delta:1})}function N(j,L){f="REPLACE";let M=V_(E.location,j,L);n&&n(M,j),g=y();let P=g0(M,g),V=E.createHref(M);d.replaceState(P,"",V),c&&h&&h({action:f,location:E.location,delta:0})}function T(j){return NI(j)}let E={get action(){return f},get location(){return t(a,d)},listen(j){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(p0,v),h=j,()=>{a.removeEventListener(p0,v),h=null}},createHref(j){return e(a,j)},createURL:T,encodeLocation(j){let L=T(j);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:b,replace:N,go(j){return d.go(j)}};return E}function NI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Bt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:_u(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function KE(t,e,n="/"){return EI(t,e,n,!1)}function EI(t,e,n,i){let a=typeof e=="string"?So(e):e,c=bs(a.pathname||"/",n);if(c==null)return null;let d=YE(t);CI(d);let f=null;for(let h=0;f==null&&h<d.length;++h){let g=LI(c);f=kI(d[h],g,i)}return f}function YE(t,e=[],n=[],i="",a=!1){let c=(d,f,h=a,g)=>{let y={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&h)return;Bt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=_s([i,y.relativePath]),b=n.concat(y);d.children&&d.children.length>0&&(Bt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),YE(d.children,e,b,v,h)),!(d.path==null&&!d.index)&&e.push({path:v,score:MI(v,d.index),routesMeta:b})};return t.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))c(d,f);else for(let h of XE(d.path))c(d,f,!0,h)}),e}function XE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let d=XE(i.join("/")),f=[];return f.push(...d.map(h=>h===""?c:[c,h].join("/"))),a&&f.push(...d),f.map(h=>t.startsWith("/")&&h===""?"/":h)}function CI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var jI=/^:[\w-]+$/,TI=3,AI=2,RI=1,OI=10,II=-2,_0=t=>t==="*";function MI(t,e){let n=t.split("/"),i=n.length;return n.some(_0)&&(i+=II),e&&(i+=AI),n.filter(a=>!_0(a)).reduce((a,c)=>a+(jI.test(c)?TI:c===""?RI:OI),i)}function DI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function kI(t,e,n=!1){let{routesMeta:i}=t,a={},c="/",d=[];for(let f=0;f<i.length;++f){let h=i[f],g=f===i.length-1,y=c==="/"?e:e.slice(c.length)||"/",v=rh({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},y),b=h.route;if(!v&&g&&n&&!i[i.length-1].route.index&&(v=rh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),d.push({params:a,pathname:_s([c,v.pathname]),pathnameBase:BI(_s([c,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(c=_s([c,v.pathnameBase]))}return d}function rh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=PI(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:v},b)=>{if(y==="*"){let T=f[b]||"";d=c.slice(0,c.length-T.length).replace(/(.)\/+$/,"$1")}const N=f[b];return v&&!N?g[y]=void 0:g[y]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:t}}function PI(t,e=!1,n=!0){Zr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,f,h)=>(i.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function LI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function bs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var UI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function VI(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?So(t):t,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=y0(n.substring(1),"/"):c=y0(n,e)):c=e,{pathname:c,search:FI(i),hash:qI(a)}}function y0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function s_(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Vy(t){let e=zI(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function zy(t,e,n,i=!1){let a;typeof t=="string"?a=So(t):(a={...t},Bt(!a.pathname||!a.pathname.includes("?"),s_("?","pathname","search",a)),Bt(!a.pathname||!a.pathname.includes("#"),s_("#","pathname","hash",a)),Bt(!a.search||!a.search.includes("#"),s_("#","search","hash",a)));let c=t===""||a.pathname==="",d=c?"/":a.pathname,f;if(d==null)f=n;else{let v=e.length-1;if(!i&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}f=v>=0?e[v]:"/"}let h=VI(a,f),g=d&&d!=="/"&&d.endsWith("/"),y=(c||d===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(g||y)&&(h.pathname+="/"),h}var _s=t=>t.join("/").replace(/\/\/+/g,"/"),BI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,$I=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function HI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function GI(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ZE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function JE(t,e){let n=t;if(typeof n!="string"||!UI.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,a=!1;if(ZE)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),f=bs(d.pathname,e);d.origin===c.origin&&f!=null?n=f+d.search+d.hash:a=!0}catch{Zr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e1=["POST","PUT","PATCH","DELETE"];new Set(e1);var QI=["GET",...e1];new Set(QI);var Hl=p.createContext(null);Hl.displayName="DataRouter";var Kh=p.createContext(null);Kh.displayName="DataRouterState";var WI=p.createContext(!1),t1=p.createContext({isTransitioning:!1});t1.displayName="ViewTransition";var KI=p.createContext(new Map);KI.displayName="Fetchers";var YI=p.createContext(null);YI.displayName="Await";var Rr=p.createContext(null);Rr.displayName="Navigation";var Iu=p.createContext(null);Iu.displayName="Location";var vi=p.createContext({outlet:null,matches:[],isDataRoute:!1});vi.displayName="Route";var By=p.createContext(null);By.displayName="RouteError";var n1="REACT_ROUTER_ERROR",XI="REDIRECT",ZI="ROUTE_ERROR_RESPONSE";function JI(t){if(t.startsWith(`${n1}:${XI}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function eM(t){if(t.startsWith(`${n1}:${ZI}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new $I(e.status,e.statusText,e.data)}catch{}}function tM(t,{relative:e}={}){Bt(Gl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=p.useContext(Rr),{hash:a,pathname:c,search:d}=Mu(t,{relative:e}),f=c;return n!=="/"&&(f=c==="/"?n:_s([n,c])),i.createHref({pathname:f,search:d,hash:a})}function Gl(){return p.useContext(Iu)!=null}function Bi(){return Bt(Gl(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(Iu).location}var r1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function i1(t){p.useContext(Rr).static||p.useLayoutEffect(t)}function fr(){let{isDataRoute:t}=p.useContext(vi);return t?mM():nM()}function nM(){Bt(Gl(),"useNavigate() may be used only in the context of a <Router> component.");let t=p.useContext(Hl),{basename:e,navigator:n}=p.useContext(Rr),{matches:i}=p.useContext(vi),{pathname:a}=Bi(),c=JSON.stringify(Vy(i)),d=p.useRef(!1);return i1(()=>{d.current=!0}),p.useCallback((h,g={})=>{if(Zr(d.current,r1),!d.current)return;if(typeof h=="number"){n.go(h);return}let y=zy(h,JSON.parse(c),a,g.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:_s([e,y.pathname])),(g.replace?n.replace:n.push)(y,g.state,g)},[e,n,c,a,t])}p.createContext(null);function Yh(){let{matches:t}=p.useContext(vi),e=t[t.length-1];return e?e.params:{}}function Mu(t,{relative:e}={}){let{matches:n}=p.useContext(vi),{pathname:i}=Bi(),a=JSON.stringify(Vy(n));return p.useMemo(()=>zy(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function rM(t,e){return s1(t,e)}function s1(t,e,n,i,a){Bt(Gl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=p.useContext(Rr),{matches:d}=p.useContext(vi),f=d[d.length-1],h=f?f.params:{},g=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let M=v&&v.path||"";o1(g,!v||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let b=Bi(),N;if(e){let M=typeof e=="string"?So(e):e;Bt(y==="/"||M.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${M.pathname}" was given in the \`location\` prop.`),N=M}else N=b;let T=N.pathname||"/",E=T;if(y!=="/"){let M=y.replace(/^\//,"").split("/");E="/"+T.replace(/^\//,"").split("/").slice(M.length).join("/")}let j=KE(t,{pathname:E});Zr(v||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Zr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=lM(j&&j.map(M=>Object.assign({},M,{params:Object.assign({},h,M.params),pathname:_s([y,c.encodeLocation?c.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?y:_s([y,c.encodeLocation?c.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),d,n,i,a);return e&&L?p.createElement(Iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},L):L}function iM(){let t=hM(),e=HI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:c},"ErrorBoundary")," or"," ",p.createElement("code",{style:c},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:a},n):null,d)}var sM=p.createElement(iM,null),a1=class extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=eM(t.digest);n&&(t=n)}let e=t!==void 0?p.createElement(vi.Provider,{value:this.props.routeContext},p.createElement(By.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?p.createElement(aM,{error:t},e):e}};a1.contextType=WI;var a_=new WeakMap;function aM({children:t,error:e}){let{basename:n}=p.useContext(Rr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=JI(e.digest);if(i){let a=a_.get(e);if(a)throw a;let c=JE(i.location,n);if(ZE&&!a_.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw a_.set(e,d),d}return p.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return t}function oM({routeContext:t,match:e,children:n}){let i=p.useContext(Hl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),p.createElement(vi.Provider,{value:t},n)}function lM(t,e=[],n=null,i=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,d=n?.errors;if(d!=null){let y=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);Bt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let f=!1,h=-1;if(n)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(h=y),v.route.id){let{loaderData:b,errors:N}=n,T=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!N||N[v.route.id]===void 0);if(v.route.lazy||T){f=!0,h>=0?c=c.slice(0,h+1):c=[c[0]];break}}}let g=n&&i?(y,v)=>{i(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:GI(n.matches),errorInfo:v})}:void 0;return c.reduceRight((y,v,b)=>{let N,T=!1,E=null,j=null;n&&(N=d&&v.route.id?d[v.route.id]:void 0,E=v.route.errorElement||sM,f&&(h<0&&b===0?(o1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,j=null):h===b&&(T=!0,j=v.route.hydrateFallbackElement||null)));let L=e.concat(c.slice(0,b+1)),M=()=>{let P;return N?P=E:T?P=j:v.route.Component?P=p.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=y,p.createElement(oM,{match:v,routeContext:{outlet:y,matches:L,isDataRoute:n!=null},children:P})};return n&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?p.createElement(a1,{location:n.location,revalidation:n.revalidation,component:E,error:N,children:M(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:g}):M()},null)}function Fy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cM(t){let e=p.useContext(Hl);return Bt(e,Fy(t)),e}function uM(t){let e=p.useContext(Kh);return Bt(e,Fy(t)),e}function dM(t){let e=p.useContext(vi);return Bt(e,Fy(t)),e}function qy(t){let e=dM(t),n=e.matches[e.matches.length-1];return Bt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fM(){return qy("useRouteId")}function hM(){let t=p.useContext(By),e=uM("useRouteError"),n=qy("useRouteError");return t!==void 0?t:e.errors?.[n]}function mM(){let{router:t}=cM("useNavigate"),e=qy("useNavigate"),n=p.useRef(!1);return i1(()=>{n.current=!0}),p.useCallback(async(a,c={})=>{Zr(n.current,r1),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...c}))},[t,e])}var v0={};function o1(t,e,n){!e&&!v0[t]&&(v0[t]=!0,Zr(!1,n))}p.memo(pM);function pM({routes:t,future:e,state:n,onError:i}){return s1(t,void 0,n,i,e)}function Ql({to:t,replace:e,state:n,relative:i}){Bt(Gl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=p.useContext(Rr);Zr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=p.useContext(vi),{pathname:d}=Bi(),f=fr(),h=zy(t,Vy(c),d,i==="path"),g=JSON.stringify(h);return p.useEffect(()=>{f(JSON.parse(g),{replace:e,state:n,relative:i})},[f,g,i,e,n]),null}function sn(t){Bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gM({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:c=!1,unstable_useTransitions:d}){Bt(!Gl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),h=p.useMemo(()=>({basename:f,navigator:a,static:c,unstable_useTransitions:d,future:{}}),[f,a,c,d]);typeof n=="string"&&(n=So(n));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:N="default"}=n,T=p.useMemo(()=>{let E=bs(g,f);return E==null?null:{location:{pathname:E,search:y,hash:v,state:b,key:N},navigationType:i}},[f,g,y,v,b,N,i]);return Zr(T!=null,`<Router basename="${f}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:p.createElement(Rr.Provider,{value:h},p.createElement(Iu.Provider,{children:e,value:T}))}function _M({children:t,location:e}){return rM(z_(t),e)}function z_(t,e=[]){let n=[];return p.Children.forEach(t,(i,a)=>{if(!p.isValidElement(i))return;let c=[...e,a];if(i.type===p.Fragment){n.push.apply(n,z_(i.props.children,c));return}Bt(i.type===sn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=z_(i.props.children,c)),n.push(d)}),n}var $f="get",Hf="application/x-www-form-urlencoded";function Xh(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function yM(t){return Xh(t)&&t.tagName.toLowerCase()==="button"}function vM(t){return Xh(t)&&t.tagName.toLowerCase()==="form"}function bM(t){return Xh(t)&&t.tagName.toLowerCase()==="input"}function xM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wM(t,e){return t.button===0&&(!e||e==="_self")&&!xM(t)}var Nf=null;function SM(){if(Nf===null)try{new FormData(document.createElement("form"),0),Nf=!1}catch{Nf=!0}return Nf}var NM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o_(t){return t!=null&&!NM.has(t)?(Zr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hf}"`),null):t}function EM(t,e){let n,i,a,c,d;if(vM(t)){let f=t.getAttribute("action");i=f?bs(f,e):null,n=t.getAttribute("method")||$f,a=o_(t.getAttribute("enctype"))||Hf,c=new FormData(t)}else if(yM(t)||bM(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||f.getAttribute("action");if(i=h?bs(h,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||$f,a=o_(t.getAttribute("formenctype"))||o_(f.getAttribute("enctype"))||Hf,c=new FormData(f,t),!SM()){let{name:g,type:y,value:v}=t;if(y==="image"){let b=g?`${g}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else g&&c.append(g,v)}}else{if(Xh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$f,i=null,a=Hf,d=t}return c&&a==="text/plain"&&(d=c,c=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $y(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CM(t,e,n,i){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&bs(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function jM(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TM(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AM(t,e,n){let i=await Promise.all(t.map(async a=>{let c=e.routes[a.route.id];if(c){let d=await jM(c,n);return d.links?d.links():[]}return[]}));return MM(i.flat(1).filter(TM).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function b0(t,e,n,i,a,c){let d=(h,g)=>n[g]?h.route.id!==n[g].route.id:!0,f=(h,g)=>n[g].pathname!==h.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==h.params["*"];return c==="assets"?e.filter((h,g)=>d(h,g)||f(h,g)):c==="data"?e.filter((h,g)=>{let y=i.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(d(h,g)||f(h,g))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function RM(t,e,{includeHydrateFallback:n}={}){return OM(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let c=[a.module];return a.clientActionModule&&(c=c.concat(a.clientActionModule)),a.clientLoaderModule&&(c=c.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(c=c.concat(a.hydrateFallbackModule)),a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function OM(t){return[...new Set(t)]}function IM(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function MM(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let c=JSON.stringify(IM(a));return n.has(c)||(n.add(c),i.push({key:c,link:a})),i},[])}function l1(){let t=p.useContext(Hl);return $y(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function DM(){let t=p.useContext(Kh);return $y(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Hy=p.createContext(void 0);Hy.displayName="FrameworkContext";function c1(){let t=p.useContext(Hy);return $y(t,"You must render this element inside a <HydratedRouter> element"),t}function kM(t,e){let n=p.useContext(Hy),[i,a]=p.useState(!1),[c,d]=p.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:g,onMouseLeave:y,onTouchStart:v}=e,b=p.useRef(null);p.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let E=L=>{L.forEach(M=>{d(M.isIntersecting)})},j=new IntersectionObserver(E,{threshold:.5});return b.current&&j.observe(b.current),()=>{j.disconnect()}}},[t]),p.useEffect(()=>{if(i){let E=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(E)}}},[i]);let N=()=>{a(!0)},T=()=>{a(!1),d(!1)};return n?t!=="intent"?[c,b,{}]:[c,b,{onFocus:Jc(f,N),onBlur:Jc(h,T),onMouseEnter:Jc(g,N),onMouseLeave:Jc(y,T),onTouchStart:Jc(v,N)}]:[!1,b,{}]}function Jc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function PM({page:t,...e}){let{router:n}=l1(),i=p.useMemo(()=>KE(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?p.createElement(UM,{page:t,matches:i,...e}):null}function LM(t){let{manifest:e,routeModules:n}=c1(),[i,a]=p.useState([]);return p.useEffect(()=>{let c=!1;return AM(t,e,n).then(d=>{c||a(d)}),()=>{c=!0}},[t,e,n]),i}function UM({page:t,matches:e,...n}){let i=Bi(),{future:a,manifest:c,routeModules:d}=c1(),{basename:f}=l1(),{loaderData:h,matches:g}=DM(),y=p.useMemo(()=>b0(t,e,g,c,i,"data"),[t,e,g,c,i]),v=p.useMemo(()=>b0(t,e,g,c,i,"assets"),[t,e,g,c,i]),b=p.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let E=new Set,j=!1;if(e.forEach(M=>{let P=c.routes[M.route.id];!P||!P.hasLoader||(!y.some(V=>V.route.id===M.route.id)&&M.route.id in h&&d[M.route.id]?.shouldRevalidate||P.hasClientLoader?j=!0:E.add(M.route.id))}),E.size===0)return[];let L=CM(t,f,a.unstable_trailingSlashAwareDataRequests,"data");return j&&E.size>0&&L.searchParams.set("_routes",e.filter(M=>E.has(M.route.id)).map(M=>M.route.id).join(",")),[L.pathname+L.search]},[f,a.unstable_trailingSlashAwareDataRequests,h,i,c,y,e,t,d]),N=p.useMemo(()=>RM(v,c),[v,c]),T=LM(v);return p.createElement(p.Fragment,null,b.map(E=>p.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...n})),N.map(E=>p.createElement("link",{key:E,rel:"modulepreload",href:E,...n})),T.map(({key:E,link:j})=>p.createElement("link",{key:E,nonce:n.nonce,...j,crossOrigin:j.crossOrigin??n.crossOrigin})))}function VM(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var zM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zM&&(window.__reactRouterVersion="7.13.0")}catch{}function BM({basename:t,children:e,unstable_useTransitions:n,window:i}){let a=p.useRef();a.current==null&&(a.current=xI({window:i,v5Compat:!0}));let c=a.current,[d,f]=p.useState({action:c.action,location:c.location}),h=p.useCallback(g=>{n===!1?f(g):p.startTransition(()=>f(g))},[n]);return p.useLayoutEffect(()=>c.listen(h),[c,h]),p.createElement(gM,{basename:t,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var u1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d1=p.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:c,replace:d,state:f,target:h,to:g,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...N},T){let{basename:E,unstable_useTransitions:j}=p.useContext(Rr),L=typeof g=="string"&&u1.test(g),M=JE(g,E);g=M.to;let P=tM(g,{relative:a}),[V,z,G]=kM(i,N),C=$M(g,{replace:d,state:f,target:h,preventScrollReset:y,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:j});function w(A){e&&e(A),A.defaultPrevented||C(A)}let S=p.createElement("a",{...N,...G,href:M.absoluteURL||P,onClick:M.isExternal||c?e:w,ref:VM(T,z),target:h,"data-discover":!L&&n==="render"?"true":void 0});return V&&!L?p.createElement(p.Fragment,null,S,p.createElement(PM,{page:P})):S});d1.displayName="Link";var B_=p.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:c,to:d,viewTransition:f,children:h,...g},y){let v=Mu(d,{relative:g.relative}),b=Bi(),N=p.useContext(Kh),{navigator:T,basename:E}=p.useContext(Rr),j=N!=null&&KM(v)&&f===!0,L=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,M=b.pathname,P=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(M=M.toLowerCase(),P=P?P.toLowerCase():null,L=L.toLowerCase()),P&&E&&(P=bs(P,E)||P);const V=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let z=M===L||!a&&M.startsWith(L)&&M.charAt(V)==="/",G=P!=null&&(P===L||!a&&P.startsWith(L)&&P.charAt(L.length)==="/"),C={isActive:z,isPending:G,isTransitioning:j},w=z?e:void 0,S;typeof i=="function"?S=i(C):S=[i,z?"active":null,G?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let A=typeof c=="function"?c(C):c;return p.createElement(d1,{...g,"aria-current":w,className:S,ref:y,style:A,to:d,viewTransition:f},typeof h=="function"?h(C):h)});B_.displayName="NavLink";var FM=p.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:c,method:d=$f,action:f,onSubmit:h,relative:g,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...N},T)=>{let{unstable_useTransitions:E}=p.useContext(Rr),j=QM(),L=WM(f,{relative:g}),M=d.toLowerCase()==="get"?"get":"post",P=typeof f=="string"&&u1.test(f),V=z=>{if(h&&h(z),z.defaultPrevented)return;z.preventDefault();let G=z.nativeEvent.submitter,C=G?.getAttribute("formmethod")||d,w=()=>j(G||z.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:a,state:c,relative:g,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b});E&&n!==!1?p.startTransition(()=>w()):w()};return p.createElement("form",{ref:T,method:M,action:L,onSubmit:i?h:V,...N,"data-discover":!P&&t==="render"?"true":void 0})});FM.displayName="Form";function qM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f1(t){let e=p.useContext(Hl);return Bt(e,qM(t)),e}function $M(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:h}={}){let g=fr(),y=Bi(),v=Mu(t,{relative:c});return p.useCallback(b=>{if(wM(b,e)){b.preventDefault();let N=n!==void 0?n:_u(y)===_u(v),T=()=>g(t,{replace:N,state:i,preventScrollReset:a,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:f});h?p.startTransition(()=>T()):T()}},[y,g,v,n,i,e,t,a,c,d,f,h])}var HM=0,GM=()=>`__${String(++HM)}__`;function QM(){let{router:t}=f1("useSubmit"),{basename:e}=p.useContext(Rr),n=fM(),i=t.fetch,a=t.navigate;return p.useCallback(async(c,d={})=>{let{action:f,method:h,encType:g,formData:y,body:v}=EM(c,e);if(d.navigate===!1){let b=d.fetcherKey||GM();await i(b,n,d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||h,formEncType:d.encType||g,flushSync:d.flushSync})}else await a(d.action||f,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:v,formMethod:d.method||h,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,a,e,n])}function WM(t,{relative:e}={}){let{basename:n}=p.useContext(Rr),i=p.useContext(vi);Bt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),c={...Mu(t||".",{relative:e})},d=Bi();if(t==null){c.search=d.search;let f=new URLSearchParams(c.search),h=f.getAll("index");if(h.some(y=>y==="")){f.delete("index"),h.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();c.search=y?`?${y}`:""}}return(!t||t===".")&&a.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:_s([n,c.pathname])),_u(c)}function KM(t,{relative:e}={}){let n=p.useContext(t1);Bt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=f1("useViewTransitionState"),a=Mu(t,{relative:e});if(!n.isTransitioning)return!1;let c=bs(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=bs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return rh(a.pathname,d)!=null||rh(a.pathname,c)!=null}var Wl=WE();const YM=Ly(Wl),XM=()=>{};var x0={};const h1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},ZM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=t[n++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=t[n++],d=t[n++],f=t[n++],h=((a&7)<<18|(c&63)<<12|(d&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const c=t[n++],d=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},m1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const c=t[a],d=a+1<t.length,f=d?t[a+1]:0,h=a+2<t.length,g=h?t[a+2]:0,y=c>>2,v=(c&3)<<4|f>>4;let b=(f&15)<<2|g>>6,N=g&63;h||(N=64,d||(b=64)),i.push(n[y],n[v],n[b],n[N])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const c=n[t.charAt(a++)],f=a<t.length?n[t.charAt(a)]:0;++a;const g=a<t.length?n[t.charAt(a)]:64;++a;const v=a<t.length?n[t.charAt(a)]:64;if(++a,c==null||f==null||g==null||v==null)throw new JM;const b=c<<2|f>>4;if(i.push(b),g!==64){const N=f<<4&240|g>>2;if(i.push(N),v!==64){const T=g<<6&192|v;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eD=function(t){const e=h1(t);return m1.encodeByteArray(e,!0)},ih=function(t){return eD(t).replace(/\./g,"")},p1=function(t){try{return m1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nD=()=>tD().__FIREBASE_DEFAULTS__,rD=()=>{if(typeof process>"u"||typeof x0>"u")return;const t=x0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&p1(t[1]);return e&&JSON.parse(e)},Gy=()=>{try{return XM()||nD()||rD()||iD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},g1=t=>Gy()?.emulatorHosts?.[t],_1=t=>{const e=g1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},y1=()=>Gy()?.config,v1=t=>Gy()?.[`_${t}`];class sD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Ca(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qy(t){return(await fetch(t,{credentials:"include"})).ok}function aD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,c=t.sub||t.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ih(JSON.stringify(n)),ih(JSON.stringify(d)),""].join(".")}const fu={};function oD(){const t={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?t.emulator.push(e):t.prod.push(e);return t}function lD(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let w0=!1;function Wy(t,e){if(typeof window>"u"||typeof document>"u"||!Ca(window.location.host)||fu[t]===e||fu[t]||w0)return;fu[t]=e;function n(b){return`__firebase__banner__${b}`}const i="__firebase__banner",c=oD().prod.length>0;function d(){const b=document.getElementById(i);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function h(b,N){b.setAttribute("width","24"),b.setAttribute("id",N),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{w0=!0,d()},b}function y(b,N){b.setAttribute("id",N),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=lD(i),N=n("text"),T=document.getElementById(N)||document.createElement("span"),E=n("learnmore"),j=document.getElementById(E)||document.createElement("a"),L=n("preprendIcon"),M=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const P=b.element;f(P),y(j,E);const V=g();h(M,L),P.append(M,T,j,V),document.body.appendChild(P)}c?(T.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function uD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hD(){const t=Xn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mD(){try{return typeof indexedDB=="object"}catch{return!1}}function pD(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}const gD="FirebaseError";class Fi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=gD,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?_D(c,i):"Error",f=`${this.serviceName}: ${d} (${a}).`;return new Fi(a,f,i)}}function _D(t,e){return t.replace(yD,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const yD=/\{\$([^}]+)}/g;function vD(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const c=t[a],d=e[a];if(S0(c)&&S0(d)){if(!lo(c,d))return!1}else if(c!==d)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function S0(t){return t!==null&&typeof t=="object"}function ku(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function bD(t,e){const n=new xD(t,e);return n.subscribe.bind(n)}class xD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let a;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");wD(e,["next","error","complete"])?a=e:a={next:e,error:n,complete:i},a.next===void 0&&(a.next=l_),a.error===void 0&&(a.error=l_),a.complete===void 0&&(a.complete=l_);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function l_(){}function Jt(t){return t&&t._delegate?t._delegate:t}class Sa{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ro="[DEFAULT]";class SD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new sD;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ED(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,d]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);i===f&&d.resolve(a)}return a}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ND(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ND(t){return t===ro?void 0:t}function ED(t){return t.instantiationMode==="EAGER"}class CD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var St;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(St||(St={}));const jD={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},TD=St.INFO,AD={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},RD=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=AD[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ky{constructor(e){this.name=e,this._logLevel=TD,this._logHandler=RD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const OD=(t,e)=>e.some(n=>t instanceof n);let N0,E0;function ID(){return N0||(N0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MD(){return E0||(E0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b1=new WeakMap,F_=new WeakMap,x1=new WeakMap,c_=new WeakMap,Yy=new WeakMap;function DD(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",c),t.removeEventListener("error",d)},c=()=>{n(ba(t.result)),a()},d=()=>{i(t.error),a()};t.addEventListener("success",c),t.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&b1.set(n,t)}).catch(()=>{}),Yy.set(e,t),e}function kD(t){if(F_.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",d),t.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",c),t.addEventListener("error",d),t.addEventListener("abort",d)});F_.set(t,e)}let q_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return F_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ba(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PD(t){q_=t(q_)}function LD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(u_(this),e,...n);return x1.set(i,e.sort?e.sort():[e]),ba(i)}:MD().includes(t)?function(...e){return t.apply(u_(this),e),ba(b1.get(this))}:function(...e){return ba(t.apply(u_(this),e))}}function UD(t){return typeof t=="function"?LD(t):(t instanceof IDBTransaction&&kD(t),OD(t,ID())?new Proxy(t,q_):t)}function ba(t){if(t instanceof IDBRequest)return DD(t);if(c_.has(t))return c_.get(t);const e=UD(t);return e!==t&&(c_.set(t,e),Yy.set(e,t)),e}const u_=t=>Yy.get(t);function VD(t,e,{blocked:n,upgrade:i,blocking:a,terminated:c}={}){const d=indexedDB.open(t,e),f=ba(d);return i&&d.addEventListener("upgradeneeded",h=>{i(ba(d.result),h.oldVersion,h.newVersion,ba(d.transaction),h)}),n&&d.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),f.then(h=>{c&&h.addEventListener("close",()=>c()),a&&h.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const zD=["get","getKey","getAll","getAllKeys","count"],BD=["put","add","delete","clear"],d_=new Map;function C0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(d_.get(e))return d_.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=BD.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||zD.includes(n)))return;const c=async function(d,...f){const h=this.transaction(d,a?"readwrite":"readonly");let g=h.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[n](...f),a&&h.done]))[0]};return d_.set(e,c),c}PD(t=>({...t,get:(e,n,i)=>C0(e,n)||t.get(e,n,i),has:(e,n)=>!!C0(e,n)||t.has(e,n)}));class FD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qD(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function qD(t){return t.getComponent()?.type==="VERSION"}const $_="@firebase/app",j0="0.14.8";const xs=new Ky("@firebase/app"),$D="@firebase/app-compat",HD="@firebase/analytics-compat",GD="@firebase/analytics",QD="@firebase/app-check-compat",WD="@firebase/app-check",KD="@firebase/auth",YD="@firebase/auth-compat",XD="@firebase/database",ZD="@firebase/data-connect",JD="@firebase/database-compat",e4="@firebase/functions",t4="@firebase/functions-compat",n4="@firebase/installations",r4="@firebase/installations-compat",i4="@firebase/messaging",s4="@firebase/messaging-compat",a4="@firebase/performance",o4="@firebase/performance-compat",l4="@firebase/remote-config",c4="@firebase/remote-config-compat",u4="@firebase/storage",d4="@firebase/storage-compat",f4="@firebase/firestore",h4="@firebase/ai",m4="@firebase/firestore-compat",p4="firebase",g4="12.9.0";const H_="[DEFAULT]",_4={[$_]:"fire-core",[$D]:"fire-core-compat",[GD]:"fire-analytics",[HD]:"fire-analytics-compat",[WD]:"fire-app-check",[QD]:"fire-app-check-compat",[KD]:"fire-auth",[YD]:"fire-auth-compat",[XD]:"fire-rtdb",[ZD]:"fire-data-connect",[JD]:"fire-rtdb-compat",[e4]:"fire-fn",[t4]:"fire-fn-compat",[n4]:"fire-iid",[r4]:"fire-iid-compat",[i4]:"fire-fcm",[s4]:"fire-fcm-compat",[a4]:"fire-perf",[o4]:"fire-perf-compat",[l4]:"fire-rc",[c4]:"fire-rc-compat",[u4]:"fire-gcs",[d4]:"fire-gcs-compat",[f4]:"fire-fst",[m4]:"fire-fst-compat",[h4]:"fire-vertex","fire-js":"fire-js",[p4]:"fire-js-all"};const sh=new Map,y4=new Map,G_=new Map;function T0(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function co(t){const e=t.name;if(G_.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;G_.set(e,t);for(const n of sh.values())T0(n,t);for(const n of y4.values())T0(n,t);return!0}function Zh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qr(t){return t==null?!1:t.settings!==void 0}const v4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xa=new Du("app","Firebase",v4);class b4{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xa.create("app-deleted",{appName:this._name})}}const Kl=g4;function w1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:H_,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw xa.create("bad-app-name",{appName:String(a)});if(n||(n=y1()),!n)throw xa.create("no-options");const c=sh.get(a);if(c){if(lo(n,c.options)&&lo(i,c.config))return c;throw xa.create("duplicate-app",{appName:a})}const d=new CD(a);for(const h of G_.values())d.addComponent(h);const f=new b4(n,i,d);return sh.set(a,f),f}function Xy(t=H_){const e=sh.get(t);if(!e&&t===H_&&y1())return w1();if(!e)throw xa.create("no-app",{appName:t});return e}function ki(t,e,n){let i=_4[t]??t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(d.join(" "));return}co(new Sa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const x4="firebase-heartbeat-database",w4=1,yu="firebase-heartbeat-store";let f_=null;function S1(){return f_||(f_=VD(x4,w4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw xa.create("idb-open",{originalErrorMessage:t.message})})),f_}async function S4(t){try{const n=(await S1()).transaction(yu),i=await n.objectStore(yu).get(N1(t));return await n.done,i}catch(e){if(e instanceof Fi)xs.warn(e.message);else{const n=xa.create("idb-get",{originalErrorMessage:e?.message});xs.warn(n.message)}}}async function A0(t,e){try{const i=(await S1()).transaction(yu,"readwrite");await i.objectStore(yu).put(e,N1(t)),await i.done}catch(n){if(n instanceof Fi)xs.warn(n.message);else{const i=xa.create("idb-set",{originalErrorMessage:n?.message});xs.warn(i.message)}}}function N1(t){return`${t.name}!${t.options.appId}`}const N4=1024,E4=30;class C4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new T4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=R0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>E4){const a=A4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=R0(),{heartbeatsToSend:n,unsentEntries:i}=j4(this._heartbeatsCache.heartbeats),a=ih(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return xs.warn(e),""}}}function R0(){return new Date().toISOString().substring(0,10)}function j4(t,e=N4){const n=[];let i=t.slice();for(const a of t){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),O0(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),O0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class T4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mD()?pD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S4(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return A0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function O0(t){return ih(JSON.stringify({version:2,heartbeats:t})).length}function A4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function R4(t){co(new Sa("platform-logger",e=>new FD(e),"PRIVATE")),co(new Sa("heartbeat",e=>new C4(e),"PRIVATE")),ki($_,j0,t),ki($_,j0,"esm2020"),ki("fire-js","")}R4("");function E1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const O4=E1,C1=new Du("auth","Firebase",E1());const ah=new Ky("@firebase/auth");function I4(t,...e){ah.logLevel<=St.WARN&&ah.warn(`Auth (${Kl}): ${t}`,...e)}function Gf(t,...e){ah.logLevel<=St.ERROR&&ah.error(`Auth (${Kl}): ${t}`,...e)}function Vi(t,...e){throw Jy(t,...e)}function fi(t,...e){return Jy(t,...e)}function Zy(t,e,n){const i={...O4(),[e]:n};return new Du("auth","Firebase",i).create(e,{appName:t.name})}function oo(t){return Zy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M4(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Vi(t,"argument-error"),Zy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Jy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return C1.create(t,...e)}function Qe(t,e,...n){if(!t)throw Jy(e,...n)}function ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gf(e),new Error(e)}function ws(t,e){t||ms(e)}function Q_(){return typeof self<"u"&&self.location?.href||""}function D4(){return I0()==="http:"||I0()==="https:"}function I0(){return typeof self<"u"&&self.location?.protocol||null}function k4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D4()||dD()||"connection"in navigator)?navigator.onLine:!0}function P4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=cD()||fD()}get(){return k4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ev(t,e){ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class j1{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const L4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const U4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],V4=new Pu(3e4,6e4);function tv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Yl(t,e,n,i,a={}){return T1(t,a,async()=>{let c={},d={};i&&(e==="GET"?d=i:c={body:JSON.stringify(i)});const f=ku({key:t.config.apiKey,...d}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const g={method:e,headers:h,...c};return uD()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&Ca(t.emulatorConfig.host)&&(g.credentials="include"),j1.fetch()(await A1(t,t.config.apiHost,n,f),g)})}async function T1(t,e,n){t._canInitEmulator=!1;const i={...L4,...e};try{const a=new B4(t),c=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Ef(t,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const f=c.ok?d.errorMessage:d.error.message,[h,g]=f.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ef(t,"credential-already-in-use",d);if(h==="EMAIL_EXISTS")throw Ef(t,"email-already-in-use",d);if(h==="USER_DISABLED")throw Ef(t,"user-disabled",d);const y=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Zy(t,y,g);Vi(t,y)}}catch(a){if(a instanceof Fi)throw a;Vi(t,"network-request-failed",{message:String(a)})}}async function z4(t,e,n,i,a={}){const c=await Yl(t,e,n,i,a);return"mfaPendingCredential"in c&&Vi(t,"multi-factor-auth-required",{_serverResponse:c}),c}async function A1(t,e,n,i){const a=`${e}${n}?${i}`,c=t,d=c.config.emulator?ev(t.config,a):`${t.config.apiScheme}://${a}`;return U4.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class B4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(fi(this.auth,"network-request-failed")),V4.get())})}}function Ef(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const a=fi(t,e,i);return a.customData._tokenResponse=n,a}async function F4(t,e){return Yl(t,"POST","/v1/accounts:delete",e)}async function oh(t,e){return Yl(t,"POST","/v1/accounts:lookup",e)}function hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q4(t,e=!1){const n=Jt(t),i=await n.getIdToken(e),a=nv(i);Qe(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,d=c?.sign_in_provider;return{claims:a,token:i,authTime:hu(h_(a.auth_time)),issuedAtTime:hu(h_(a.iat)),expirationTime:hu(h_(a.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function h_(t){return Number(t)*1e3}function nv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Gf("JWT malformed, contained fewer than 3 sections"),null;try{const a=p1(n);return a?JSON.parse(a):(Gf("Failed to decode base64 JWT payload"),null)}catch(a){return Gf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function M0(t){const e=nv(t);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Fi&&$4(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function $4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class H4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class W_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lh(t){const e=t.auth,n=await t.getIdToken(),i=await vu(t,oh(e,{idToken:n}));Qe(i?.users.length,e,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const c=a.providerUserInfo?.length?R1(a.providerUserInfo):[],d=Q4(t.providerData,c),f=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!d?.length,g=f?h:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new W_(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function G4(t){const e=Jt(t);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q4(t,e){return[...t.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function R1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function W4(t,e){const n=await T1(t,{},async()=>{const i=ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=t.config,d=await A1(t,a,"/v1/token",`key=${c}`),f=await t._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:f,body:i};return t.emulatorConfig&&Ca(t.emulatorConfig.host)&&(h.credentials="include"),j1.fetch()(d,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function K4(t,e){return Yl(t,"POST","/v2/accounts:revokeToken",tv(t,e))}class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):M0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const n=M0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:a,expiresIn:c}=await W4(e,n);this.updateTokensAndExpiration(i,a,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:a,expirationTime:c}=n,d=new Ml;return i&&(Qe(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),a&&(Qe(typeof a=="string","internal-error",{appName:e}),d.accessToken=a),c&&(Qe(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return ms("not implemented")}}function aa(t,e){Qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:n,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new H4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new W_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await vu(this,this.stsTokenManager.getToken(this.auth,e));return Qe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q4(this,e)}reload(){return G4(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qr(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await vu(this,F4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,a=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,f=n.tenantId??void 0,h=n._redirectEventId??void 0,g=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:N,providerData:T,stsTokenManager:E}=n;Qe(v&&E,e,"internal-error");const j=Ml.fromJSON(this.name,E);Qe(typeof v=="string",e,"internal-error"),aa(i,e.name),aa(a,e.name),Qe(typeof b=="boolean",e,"internal-error"),Qe(typeof N=="boolean",e,"internal-error"),aa(c,e.name),aa(d,e.name),aa(f,e.name),aa(h,e.name),aa(g,e.name),aa(y,e.name);const L=new ci({uid:v,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:N,photoURL:d,phoneNumber:c,tenantId:f,stsTokenManager:j,createdAt:g,lastLoginAt:y});return T&&Array.isArray(T)&&(L.providerData=T.map(M=>({...M}))),h&&(L._redirectEventId=h),L}static async _fromIdTokenResponse(e,n,i=!1){const a=new Ml;a.updateFromServerResponse(n);const c=new ci({uid:n.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await lh(c),c}static async _fromGetAccountInfoResponse(e,n,i){const a=n.users[0];Qe(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?R1(a.providerUserInfo):[],d=!(a.email&&a.passwordHash)&&!c?.length,f=new Ml;f.updateFromIdToken(i);const h=new ci({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:d}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new W_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!c?.length};return Object.assign(h,g),h}}const D0=new Map;function ps(t){ws(t instanceof Function,"Expected a class definition");let e=D0.get(t);return e?(ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,D0.set(t,e),e)}class O1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}O1.type="NONE";const k0=O1;function Qf(t,e,n){return`firebase:${t}:${e}:${n}`}class Dl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:a,name:c}=this.auth;this.fullUserKey=Qf(this.userKey,a.apiKey,c),this.fullPersistenceKey=Qf("persistence",a.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await oh(this.auth,{idToken:e}).catch(()=>{});return n?ci._fromGetAccountInfoResponse(this.auth,n,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Dl(ps(k0),e,i);const a=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=a[0]||ps(k0);const d=Qf(i,e.config.apiKey,e.name);let f=null;for(const g of n)try{const y=await g._get(d);if(y){let v;if(typeof y=="string"){const b=await oh(e,{idToken:y}).catch(()=>{});if(!b)break;v=await ci._fromGetAccountInfoResponse(e,b,y)}else v=ci._fromJSON(e,y);g!==c&&(f=v),c=g;break}}catch{}const h=a.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!h.length?new Dl(c,e,i):(c=h[0],f&&await c._set(d,f.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Dl(c,e,i))}}function P0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(k1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L1(e))return"Blackberry";if(U1(e))return"Webos";if(M1(e))return"Safari";if((e.includes("chrome/")||D1(e))&&!e.includes("edge/"))return"Chrome";if(P1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function I1(t=Xn()){return/firefox\//i.test(t)}function M1(t=Xn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D1(t=Xn()){return/crios\//i.test(t)}function k1(t=Xn()){return/iemobile/i.test(t)}function P1(t=Xn()){return/android/i.test(t)}function L1(t=Xn()){return/blackberry/i.test(t)}function U1(t=Xn()){return/webos/i.test(t)}function rv(t=Xn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Y4(t=Xn()){return rv(t)&&!!window.navigator?.standalone}function X4(){return hD()&&document.documentMode===10}function V1(t=Xn()){return rv(t)||P1(t)||U1(t)||L1(t)||/windows phone/i.test(t)||k1(t)}function z1(t,e=[]){let n;switch(t){case"Browser":n=P0(Xn());break;case"Worker":n=`${P0(Xn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kl}/${i}`}class Z4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((d,f)=>{try{const h=e(c);d(h)}catch(h){f(h)}});i.onAbort=n,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function J4(t,e={}){return Yl(t,"GET","/v2/passwordPolicy",tv(t,e))}const ek=6;class tk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ek,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),a&&(n.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class nk{constructor(e,n,i,a){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L0(this),this.idTokenSubscription=new L0(this),this.beforeStateQueue=new Z4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Dl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await oh(this,{idToken:e}),i=await ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qr(this.app))return Promise.reject(oo(this));const n=e?Jt(e):null;return n&&Qe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qr(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qr(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await J4(this),n=new tk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await K4(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;Qe(n,this,"argument-error"),this.redirectPersistenceManager=await Dl.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,a){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(f,this,"internal-error"),f.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,a);return()=>{d=!0,h()}}else{const h=e.addObserver(n);return()=>{d=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&I4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jh(t){return Jt(t)}class L0{constructor(e){this.auth=e,this.observer=null,this.addObserver=bD(n=>this.observer=n)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let iv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rk(t){iv=t}function ik(t){return iv.loadJS(t)}function sk(){return iv.gapiScript}function ak(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function ok(t,e){const n=Zh(t,"auth");if(n.isInitialized()){const a=n.getImmediate(),c=n.getOptions();if(lo(c,e??{}))return a;Vi(a,"already-initialized")}return n.initialize({options:e})}function lk(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ps);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function ck(t,e,n){const i=Jh(t);Qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,c=B1(e),{host:d,port:f}=uk(e),h=f===null?"":`:${f}`,g={url:`${c}//${d}${h}/`},y=Object.freeze({host:d,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Qe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Qe(lo(g,i.config.emulator)&&lo(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,Ca(d)?(Qy(`${c}//${d}${h}`),Wy("Auth",!0)):dk()}function B1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uk(t){const e=B1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const c=a[1];return{host:c,port:U0(i.substr(c.length+1))}}else{const[c,d]=i.split(":");return{host:c,port:U0(d)}}}function U0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function dk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class F1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function kl(t,e){return z4(t,"POST","/v1/accounts:signInWithIdp",tv(t,e))}const fk="http://localhost";class uo extends F1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...c}=n;if(!i||!a)return null;const d=new uo(i,a);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return kl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,kl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kl(e,n)}buildRequest(){const e={requestUri:fk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ku(n)}return e}}class sv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Lu extends sv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _a extends Lu{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";class hs extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return hs.credential(n,i)}catch{return null}}}hs.GOOGLE_SIGN_IN_METHOD="google.com";hs.PROVIDER_ID="google.com";class ya extends Lu{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.GITHUB_SIGN_IN_METHOD="github.com";ya.PROVIDER_ID="github.com";class va extends Lu{constructor(){super("twitter.com")}static credential(e,n){return uo._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return va.credential(n,i)}catch{return null}}}va.TWITTER_SIGN_IN_METHOD="twitter.com";va.PROVIDER_ID="twitter.com";class Vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,a=!1){const c=await ci._fromIdTokenResponse(e,i,a),d=V0(i);return new Vl({user:c,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const a=V0(i);return new Vl({user:e,providerId:a,_tokenResponse:i,operationType:n})}}function V0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ch extends Fi{constructor(e,n,i,a){super(n.code,n.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,a){return new ch(e,n,i,a)}}function q1(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ch._fromErrorAndOperation(t,c,e,i):c})}async function hk(t,e,n=!1){const i=await vu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vl._forOperation(t,"link",i)}async function mk(t,e,n=!1){const{auth:i}=t;if(Qr(i.app))return Promise.reject(oo(i));const a="reauthenticate";try{const c=await vu(t,q1(i,a,e,t),n);Qe(c.idToken,i,"internal-error");const d=nv(c.idToken);Qe(d,i,"internal-error");const{sub:f}=d;return Qe(t.uid===f,i,"user-mismatch"),Vl._forOperation(t,a,c)}catch(c){throw c?.code==="auth/user-not-found"&&Vi(i,"user-mismatch"),c}}async function pk(t,e,n=!1){if(Qr(t.app))return Promise.reject(oo(t));const i="signIn",a=await q1(t,i,e),c=await Vl._fromIdTokenResponse(t,i,a);return n||await t._updateCurrentUser(c.user),c}function gk(t,e,n,i){return Jt(t).onIdTokenChanged(e,n,i)}function _k(t,e,n){return Jt(t).beforeAuthStateChanged(e,n)}function yk(t,e,n,i){return Jt(t).onAuthStateChanged(e,n,i)}function m_(t){return Jt(t).signOut()}const uh="__sak";class $1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const vk=1e3,bk=10;class H1 extends $1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),a=this.localCache[n];i!==a&&e(n,a,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,f,h)=>{this.notifyListeners(d,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const a=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},c=this.storage.getItem(i);X4()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,bk):a()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},vk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H1.type="LOCAL";const xk=H1;class G1 extends $1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G1.type="SESSION";const Q1=G1;function wk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(a=>a.isListeningto(e));if(n)return n;const i=new em(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:a,data:c}=n.data,d=this.handlersMap[a];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(d).map(async g=>g(n.origin,c)),h=await wk(f);n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}em.receivers=[];function av(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class Sk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,d;return new Promise((f,h)=>{const g=av("",20);a.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},i);d={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(y),c=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(b.data.response);break;default:clearTimeout(y),clearTimeout(c),h(new Error("invalid_response"));break}}},this.handlers.add(d),a.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[a.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Pi(){return window}function Nk(t){Pi().location.href=t}function W1(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function Ek(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ck(){return navigator?.serviceWorker?.controller||null}function jk(){return W1()?self:null}const K1="firebaseLocalStorageDb",Tk=1,dh="firebaseLocalStorage",Y1="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tm(t,e){return t.transaction([dh],e?"readwrite":"readonly").objectStore(dh)}function Ak(){const t=indexedDB.deleteDatabase(K1);return new Uu(t).toPromise()}function K_(){const t=indexedDB.open(K1,Tk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(dh,{keyPath:Y1})}catch(a){n(a)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(dh)?e(i):(i.close(),await Ak(),e(await K_()))})})}async function z0(t,e,n){const i=tm(t,!0).put({[Y1]:e,value:n});return new Uu(i).toPromise()}async function Rk(t,e){const n=tm(t,!1).get(e),i=await new Uu(n).toPromise();return i===void 0?null:i.value}function B0(t,e){const n=tm(t,!0).delete(e);return new Uu(n).toPromise()}const Ok=800,Ik=3;class X1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await K_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Ik)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=em._getInstance(jk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Ek(),!this.activeServiceWorker)return;this.sender=new Sk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ck()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await K_();return await z0(e,uh,"1"),await B0(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>z0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>Rk(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>B0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=tm(a,!1).getAll();return new Uu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X1.type="LOCAL";const Mk=X1;new Pu(3e4,6e4);function Z1(t,e){return e?ps(e):(Qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class ov extends F1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Dk(t){return pk(t.auth,new ov(t),t.bypassAuthState)}function kk(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),mk(n,new ov(t),t.bypassAuthState)}async function Pk(t){const{auth:e,user:n}=t;return Qe(n,e,"internal-error"),hk(n,new ov(t),t.bypassAuthState)}class J1{constructor(e,n,i,a,c=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:a,tenantId:c,error:d,type:f}=e;if(d){this.reject(d);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(h))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Dk;case"linkViaPopup":case"linkViaRedirect":return Pk;case"reauthViaPopup":case"reauthViaRedirect":return kk;default:Vi(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Lk=new Pu(2e3,1e4);async function Uk(t,e,n){if(Qr(t.app))return Promise.reject(fi(t,"operation-not-supported-in-this-environment"));const i=Jh(t);M4(t,e,sv);const a=Z1(i,n);return new io(i,"signInViaPopup",e,a).executeNotNull()}class io extends J1{constructor(e,n,i,a,c){super(e,n,a,c),this.provider=i,this.authWindow=null,this.pollId=null,io.currentPopupAction&&io.currentPopupAction.cancel(),io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,io.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Lk.get())};e()}}io.currentPopupAction=null;const Vk="pendingRedirect",Wf=new Map;class zk extends J1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wf.get(this.auth._key());if(!e){try{const i=await Bk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bk(t,e){const n=$k(e),i=qk(t);if(!await i._isAvailable())return!1;const a=await i._get(n)==="true";return await i._remove(n),a}function Fk(t,e){Wf.set(t._key(),e)}function qk(t){return ps(t._redirectPersistence)}function $k(t){return Qf(Vk,t.config.apiKey,t.name)}async function Hk(t,e,n=!1){if(Qr(t.app))return Promise.reject(oo(t));const i=Jh(t),a=Z1(i,e),d=await new zk(i,a,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const Gk=600*1e3;class Qk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Wk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!eC(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(fi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Gk&&this.cachedEventUids.clear(),this.cachedEventUids.has(F0(e))}saveEventToCache(e){this.cachedEventUids.add(F0(e)),this.lastProcessedEventTime=Date.now()}}function F0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Wk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eC(t);default:return!1}}async function Kk(t,e={}){return Yl(t,"GET","/v1/projects",e)}const Yk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xk=/^https?/;async function Zk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Kk(t);for(const n of e)try{if(Jk(n))return}catch{}Vi(t,"unauthorized-domain")}function Jk(t){const e=Q_(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const d=new URL(t);return d.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!Xk.test(n))return!1;if(Yk.test(t))return i===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const eP=new Pu(3e4,6e4);function q0(){const t=Pi().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tP(t){return new Promise((e,n)=>{function i(){q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{q0(),n(fi(t,"network-request-failed"))},timeout:eP.get()})}if(Pi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Pi().gapi?.load)i();else{const a=ak("iframefcb");return Pi()[a]=()=>{gapi.load?i():n(fi(t,"network-request-failed"))},ik(`${sk()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Kf=null,e})}let Kf=null;function nP(t){return Kf=Kf||tP(t),Kf}const rP=new Pu(5e3,15e3),iP="__/auth/iframe",sP="emulator/auth/iframe",aP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lP(t){const e=t.config;Qe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ev(e,sP):`https://${t.config.authDomain}/${iP}`,i={apiKey:e.apiKey,appName:t.name,v:Kl},a=oP.get(t.config.apiHost);a&&(i.eid=a);const c=t._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${ku(i).slice(1)}`}async function cP(t){const e=await nP(t),n=Pi().gapi;return Qe(n,t,"internal-error"),e.open({where:document.body,url:lP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aP,dontclear:!0},i=>new Promise(async(a,c)=>{await i.restyle({setHideOnLeave:!1});const d=fi(t,"network-request-failed"),f=Pi().setTimeout(()=>{c(d)},rP.get());function h(){Pi().clearTimeout(f),a(i)}i.ping(h).then(h,()=>{c(d)})}))}const uP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dP=500,fP=600,hP="_blank",mP="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pP(t,e,n,i=dP,a=fP){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const h={...uP,width:i.toString(),height:a.toString(),top:c,left:d},g=Xn().toLowerCase();n&&(f=D1(g)?hP:n),I1(g)&&(e=e||mP,h.scrollbars="yes");const y=Object.entries(h).reduce((b,[N,T])=>`${b}${N}=${T},`,"");if(Y4(g)&&f!=="_self")return gP(e||"",f),new $0(null);const v=window.open(e||"",f,y);Qe(v,t,"popup-blocked");try{v.focus()}catch{}return new $0(v)}function gP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const _P="__/auth/handler",yP="emulator/auth/handler",vP=encodeURIComponent("fac");async function H0(t,e,n,i,a,c){Qe(t.config.authDomain,t,"auth-domain-config-required"),Qe(t.config.apiKey,t,"invalid-api-key");const d={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Kl,eventId:a};if(e instanceof sv){e.setDefaultLanguage(t.languageCode),d.providerId=e.providerId||"",vD(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))d[y]=v}if(e instanceof Lu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(d.scopes=y.join(","))}t.tenantId&&(d.tid=t.tenantId);const f=d;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const h=await t._getAppCheckToken(),g=h?`#${vP}=${encodeURIComponent(h)}`:"";return`${bP(t)}?${ku(f).slice(1)}${g}`}function bP({config:t}){return t.emulator?ev(t,yP):`https://${t.authDomain}/${_P}`}const p_="webStorageSupport";class xP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=Hk,this._overrideRedirectResult=Fk}async _openPopup(e,n,i,a){ws(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await H0(e,n,i,Q_(),a);return pP(e,c,av())}async _openRedirect(e,n,i,a){await this._originValidation(e);const c=await H0(e,n,i,Q_(),a);return Nk(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:a,promise:c}=this.eventManagers[n];return a?Promise.resolve(a):(ws(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await cP(e),i=new Qk(e);return n.register("authEvent",a=>(Qe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(p_,{type:p_},a=>{const c=a?.[0]?.[p_];c!==void 0&&n(!!c),Vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return V1()||M1()||rv()}}const wP=xP;var G0="@firebase/auth",Q0="1.12.0";class SP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function NP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EP(t){co(new Sa("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:f}=i.options;Qe(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:d,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z1(t)},g=new nk(i,a,c,h);return lk(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),co(new Sa("auth-internal",e=>{const n=Jh(e.getProvider("auth").getImmediate());return(i=>new SP(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(G0,Q0,NP(t)),ki(G0,Q0,"esm2020")}const CP=300,jP=v1("authIdTokenMaxAge")||CP;let W0=null;const TP=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>jP)return;const a=n?.token;W0!==a&&(W0=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function AP(t=Xy()){const e=Zh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ok(t,{popupRedirectResolver:wP,persistence:[Mk,xk,Q1]}),i=v1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const d=TP(c.toString());_k(n,d,()=>d(n.currentUser)),gk(n,f=>d(f))}}const a=g1("auth");return a&&ck(n,`http://${a}`),n}function RP(){return document.getElementsByTagName("head")?.[0]??document}rk({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=a=>{const c=fi("internal-error");c.customData=a,n(c)},i.type="text/javascript",i.charset="UTF-8",RP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EP("Browser");const OP="type.googleapis.com/google.protobuf.Int64Value",IP="type.googleapis.com/google.protobuf.UInt64Value";function tC(t,e){const n={};for(const i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i]));return n}function fh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>fh(e));if(typeof t=="function"||typeof t=="object")return tC(t,e=>fh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function zl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case OP:case IP:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>zl(e)):typeof t=="function"||typeof t=="object"?tC(t,e=>zl(e)):t}const lv="functions";const K0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ur extends Fi{constructor(e,n,i){super(`${lv}/${e}`,n||""),this.details=i,Object.setPrototypeOf(this,ur.prototype)}}function MP(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function hh(t,e){let n=MP(t),i=n,a;try{const c=e&&e.error;if(c){const d=c.status;if(typeof d=="string"){if(!K0[d])return new ur("internal","internal");n=K0[d],i=d}const f=c.message;typeof f=="string"&&(i=f),a=c.details,a!==void 0&&(a=zl(a))}}catch{}return n==="ok"?null:new ur(n,i,a)}class DP{constructor(e,n,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Qr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||i.get().then(c=>this.messaging=c,()=>{}),this.appCheck||a?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:a}}}const Y_="us-central1",kP=/^data: (.*?)(?:\n|$)/;function PP(t){let e=null;return{promise:new Promise((n,i)=>{e=setTimeout(()=>{i(new ur("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class LP{constructor(e,n,i,a,c=Y_,d=(...f)=>fetch(...f)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new DP(e,n,i,a),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(c);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=Y_}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function UP(t,e,n){const i=Ca(e);t.emulatorOrigin=`http${i?"s":""}://${e}:${n}`,i&&(Qy(t.emulatorOrigin+"/backends"),Wy("Functions",!0))}function VP(t,e,n){const i=a=>BP(t,e,a,{});return i.stream=(a,c)=>qP(t,e,a,c),i}function nC(t){return t.emulatorOrigin&&Ca(t.emulatorOrigin)?"include":void 0}async function zP(t,e,n,i,a){n["Content-Type"]="application/json";let c;try{c=await i(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:nC(a)})}catch{return{status:0,json:null}}let d=null;try{d=await c.json()}catch{}return{status:c.status,json:d}}async function rC(t,e){const n={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(n.Authorization="Bearer "+i.authToken),i.messagingToken&&(n["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=i.appCheckToken),n}function BP(t,e,n,i){const a=t._url(e);return FP(t,a,n,i)}async function FP(t,e,n,i){n=fh(n);const a={data:n},c=await rC(t,i),d=i.timeout||7e4,f=PP(d),h=await Promise.race([zP(e,a,c,t.fetchImpl,t),f.promise,t.cancelAllRequests]);if(f.cancel(),!h)throw new ur("cancelled","Firebase Functions instance was deleted.");const g=hh(h.status,h.json);if(g)throw g;if(!h.json)throw new ur("internal","Response is not valid JSON object.");let y=h.json.data;if(typeof y>"u"&&(y=h.json.result),typeof y>"u")throw new ur("internal","Response is missing data field.");return{data:zl(y)}}function qP(t,e,n,i){const a=t._url(e);return $P(t,a,n,i||{})}async function $P(t,e,n,i){n=fh(n);const a={data:n},c=await rC(t,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:c,signal:i?.signal,credentials:nC(t)})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const T=new ur("cancelled","Request was cancelled.");return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}const N=hh(0,null);return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let f,h;const g=new Promise((b,N)=>{f=b,h=N});i?.signal?.addEventListener("abort",()=>{const b=new ur("cancelled","Request was cancelled.");h(b)});const y=d.body.getReader(),v=HP(y,f,h,i?.signal);return{stream:{[Symbol.asyncIterator](){const b=v.getReader();return{async next(){const{value:N,done:T}=await b.read();return{value:N,done:T}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:g}}function HP(t,e,n,i){const a=(d,f)=>{const h=d.match(kP);if(!h)return;const g=h[1];try{const y=JSON.parse(g);if("result"in y){e(zl(y.result));return}if("message"in y){f.enqueue(zl(y.message));return}if("error"in y){const v=hh(0,y);f.error(v),n(v);return}}catch(y){if(y instanceof ur){f.error(y),n(y);return}}},c=new TextDecoder;return new ReadableStream({start(d){let f="";return h();async function h(){if(i?.aborted){const g=new ur("cancelled","Request was cancelled");return d.error(g),n(g),Promise.resolve()}try{const{value:g,done:y}=await t.read();if(y){f.trim()&&a(f.trim(),d),d.close();return}if(i?.aborted){const b=new ur("cancelled","Request was cancelled");d.error(b),n(b),await t.cancel();return}f+=c.decode(g,{stream:!0});const v=f.split(`
`);f=v.pop()||"";for(const b of v)b.trim()&&a(b.trim(),d);return h()}catch(g){const y=g instanceof ur?g:hh(0,null);d.error(y),n(y)}}},cancel(){return t.cancel()}})}const Y0="@firebase/functions",X0="0.13.1";const GP="auth-internal",QP="app-check-internal",WP="messaging-internal";function KP(t){const e=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),c=n.getProvider(GP),d=n.getProvider(WP),f=n.getProvider(QP);return new LP(a,c,d,f,i)};co(new Sa(lv,e,"PUBLIC").setMultipleInstances(!0)),ki(Y0,X0,t),ki(Y0,X0,"esm2020")}function YP(t=Xy(),e=Y_){const i=Zh(Jt(t),lv).getImmediate({identifier:e}),a=_1("functions");return a&&XP(i,...a),i}function XP(t,e,n){UP(Jt(t),e,n)}function ZP(t,e,n){return VP(Jt(t),e)}KP();var JP="firebase",e3="12.9.0";ki(JP,e3,"app");var Z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var iC;(function(){var t;function e(C,w){function S(){}S.prototype=w.prototype,C.F=w.prototype,C.prototype=new S,C.prototype.constructor=C,C.D=function(A,D,k){for(var I=Array(arguments.length-2),K=2;K<arguments.length;K++)I[K-2]=arguments[K];return w.prototype[D].apply(A,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,w,S){S||(S=0);const A=Array(16);if(typeof w=="string")for(var D=0;D<16;++D)A[D]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(D=0;D<16;++D)A[D]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=C.g[0],S=C.g[1],D=C.g[2];let k=C.g[3],I;I=w+(k^S&(D^k))+A[0]+3614090360&4294967295,w=S+(I<<7&4294967295|I>>>25),I=k+(D^w&(S^D))+A[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(S^k&(w^S))+A[2]+606105819&4294967295,D=k+(I<<17&4294967295|I>>>15),I=S+(w^D&(k^w))+A[3]+3250441966&4294967295,S=D+(I<<22&4294967295|I>>>10),I=w+(k^S&(D^k))+A[4]+4118548399&4294967295,w=S+(I<<7&4294967295|I>>>25),I=k+(D^w&(S^D))+A[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(S^k&(w^S))+A[6]+2821735955&4294967295,D=k+(I<<17&4294967295|I>>>15),I=S+(w^D&(k^w))+A[7]+4249261313&4294967295,S=D+(I<<22&4294967295|I>>>10),I=w+(k^S&(D^k))+A[8]+1770035416&4294967295,w=S+(I<<7&4294967295|I>>>25),I=k+(D^w&(S^D))+A[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(S^k&(w^S))+A[10]+4294925233&4294967295,D=k+(I<<17&4294967295|I>>>15),I=S+(w^D&(k^w))+A[11]+2304563134&4294967295,S=D+(I<<22&4294967295|I>>>10),I=w+(k^S&(D^k))+A[12]+1804603682&4294967295,w=S+(I<<7&4294967295|I>>>25),I=k+(D^w&(S^D))+A[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=D+(S^k&(w^S))+A[14]+2792965006&4294967295,D=k+(I<<17&4294967295|I>>>15),I=S+(w^D&(k^w))+A[15]+1236535329&4294967295,S=D+(I<<22&4294967295|I>>>10),I=w+(D^k&(S^D))+A[1]+4129170786&4294967295,w=S+(I<<5&4294967295|I>>>27),I=k+(S^D&(w^S))+A[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^S&(k^w))+A[11]+643717713&4294967295,D=k+(I<<14&4294967295|I>>>18),I=S+(k^w&(D^k))+A[0]+3921069994&4294967295,S=D+(I<<20&4294967295|I>>>12),I=w+(D^k&(S^D))+A[5]+3593408605&4294967295,w=S+(I<<5&4294967295|I>>>27),I=k+(S^D&(w^S))+A[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^S&(k^w))+A[15]+3634488961&4294967295,D=k+(I<<14&4294967295|I>>>18),I=S+(k^w&(D^k))+A[4]+3889429448&4294967295,S=D+(I<<20&4294967295|I>>>12),I=w+(D^k&(S^D))+A[9]+568446438&4294967295,w=S+(I<<5&4294967295|I>>>27),I=k+(S^D&(w^S))+A[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^S&(k^w))+A[3]+4107603335&4294967295,D=k+(I<<14&4294967295|I>>>18),I=S+(k^w&(D^k))+A[8]+1163531501&4294967295,S=D+(I<<20&4294967295|I>>>12),I=w+(D^k&(S^D))+A[13]+2850285829&4294967295,w=S+(I<<5&4294967295|I>>>27),I=k+(S^D&(w^S))+A[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=D+(w^S&(k^w))+A[7]+1735328473&4294967295,D=k+(I<<14&4294967295|I>>>18),I=S+(k^w&(D^k))+A[12]+2368359562&4294967295,S=D+(I<<20&4294967295|I>>>12),I=w+(S^D^k)+A[5]+4294588738&4294967295,w=S+(I<<4&4294967295|I>>>28),I=k+(w^S^D)+A[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^S)+A[11]+1839030562&4294967295,D=k+(I<<16&4294967295|I>>>16),I=S+(D^k^w)+A[14]+4259657740&4294967295,S=D+(I<<23&4294967295|I>>>9),I=w+(S^D^k)+A[1]+2763975236&4294967295,w=S+(I<<4&4294967295|I>>>28),I=k+(w^S^D)+A[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^S)+A[7]+4139469664&4294967295,D=k+(I<<16&4294967295|I>>>16),I=S+(D^k^w)+A[10]+3200236656&4294967295,S=D+(I<<23&4294967295|I>>>9),I=w+(S^D^k)+A[13]+681279174&4294967295,w=S+(I<<4&4294967295|I>>>28),I=k+(w^S^D)+A[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^S)+A[3]+3572445317&4294967295,D=k+(I<<16&4294967295|I>>>16),I=S+(D^k^w)+A[6]+76029189&4294967295,S=D+(I<<23&4294967295|I>>>9),I=w+(S^D^k)+A[9]+3654602809&4294967295,w=S+(I<<4&4294967295|I>>>28),I=k+(w^S^D)+A[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=D+(k^w^S)+A[15]+530742520&4294967295,D=k+(I<<16&4294967295|I>>>16),I=S+(D^k^w)+A[2]+3299628645&4294967295,S=D+(I<<23&4294967295|I>>>9),I=w+(D^(S|~k))+A[0]+4096336452&4294967295,w=S+(I<<6&4294967295|I>>>26),I=k+(S^(w|~D))+A[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~S))+A[14]+2878612391&4294967295,D=k+(I<<15&4294967295|I>>>17),I=S+(k^(D|~w))+A[5]+4237533241&4294967295,S=D+(I<<21&4294967295|I>>>11),I=w+(D^(S|~k))+A[12]+1700485571&4294967295,w=S+(I<<6&4294967295|I>>>26),I=k+(S^(w|~D))+A[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~S))+A[10]+4293915773&4294967295,D=k+(I<<15&4294967295|I>>>17),I=S+(k^(D|~w))+A[1]+2240044497&4294967295,S=D+(I<<21&4294967295|I>>>11),I=w+(D^(S|~k))+A[8]+1873313359&4294967295,w=S+(I<<6&4294967295|I>>>26),I=k+(S^(w|~D))+A[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~S))+A[6]+2734768916&4294967295,D=k+(I<<15&4294967295|I>>>17),I=S+(k^(D|~w))+A[13]+1309151649&4294967295,S=D+(I<<21&4294967295|I>>>11),I=w+(D^(S|~k))+A[4]+4149444226&4294967295,w=S+(I<<6&4294967295|I>>>26),I=k+(S^(w|~D))+A[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=D+(w^(k|~S))+A[2]+718787259&4294967295,D=k+(I<<15&4294967295|I>>>17),I=S+(k^(D|~w))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+k&4294967295}i.prototype.v=function(C,w){w===void 0&&(w=C.length);const S=w-this.blockSize,A=this.C;let D=this.h,k=0;for(;k<w;){if(D==0)for(;k<=S;)a(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<w;)if(A[D++]=C.charCodeAt(k++),D==this.blockSize){a(this,A),D=0;break}}else for(;k<w;)if(A[D++]=C[k++],D==this.blockSize){a(this,A),D=0;break}}this.h=D,this.o+=w},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;w=this.o*8;for(var S=C.length-8;S<C.length;++S)C[S]=w&255,w/=256;for(this.v(C),C=Array(16),w=0,S=0;S<4;++S)for(let A=0;A<32;A+=8)C[w++]=this.g[S]>>>A&255;return C};function c(C,w){var S=f;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=w(C)}function d(C,w){this.h=w;const S=[];let A=!0;for(let D=C.length-1;D>=0;D--){const k=C[D]|0;A&&k==w||(S[D]=k,A=!1)}this.g=S}var f={};function h(C){return-128<=C&&C<128?c(C,function(w){return new d([w|0],w<0?-1:0)}):new d([C|0],C<0?-1:0)}function g(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return j(g(-C));const w=[];let S=1;for(let A=0;C>=S;A++)w[A]=C/S|0,S*=4294967296;return new d(w,0)}function y(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return j(y(C.substring(1),w));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=g(Math.pow(w,8));let A=v;for(let k=0;k<C.length;k+=8){var D=Math.min(8,C.length-k);const I=parseInt(C.substring(k,k+D),w);D<8?(D=g(Math.pow(w,D)),A=A.j(D).add(g(I))):(A=A.j(S),A=A.add(g(I)))}return A}var v=h(0),b=h(1),N=h(16777216);t=d.prototype,t.m=function(){if(E(this))return-j(this).m();let C=0,w=1;for(let S=0;S<this.g.length;S++){const A=this.i(S);C+=(A>=0?A:4294967296+A)*w,w*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(E(this))return"-"+j(this).toString(C);const w=g(Math.pow(C,6));var S=this;let A="";for(;;){const D=V(S,w).g;S=L(S,D.j(w));let k=((S.g.length>0?S.g[0]:S.h)>>>0).toString(C);if(S=D,T(S))return k+A;for(;k.length<6;)k="0"+k;A=k+A}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(let w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function E(C){return C.h==-1}t.l=function(C){return C=L(this,C),E(C)?-1:T(C)?0:1};function j(C){const w=C.g.length,S=[];for(let A=0;A<w;A++)S[A]=~C.g[A];return new d(S,~C.h).add(b)}t.abs=function(){return E(this)?j(this):this},t.add=function(C){const w=Math.max(this.g.length,C.g.length),S=[];let A=0;for(let D=0;D<=w;D++){let k=A+(this.i(D)&65535)+(C.i(D)&65535),I=(k>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);A=I>>>16,k&=65535,I&=65535,S[D]=I<<16|k}return new d(S,S[S.length-1]&-2147483648?-1:0)};function L(C,w){return C.add(j(w))}t.j=function(C){if(T(this)||T(C))return v;if(E(this))return E(C)?j(this).j(j(C)):j(j(this).j(C));if(E(C))return j(this.j(j(C)));if(this.l(N)<0&&C.l(N)<0)return g(this.m()*C.m());const w=this.g.length+C.g.length,S=[];for(var A=0;A<2*w;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(let D=0;D<C.g.length;D++){const k=this.i(A)>>>16,I=this.i(A)&65535,K=C.i(D)>>>16,q=C.i(D)&65535;S[2*A+2*D]+=I*q,M(S,2*A+2*D),S[2*A+2*D+1]+=k*q,M(S,2*A+2*D+1),S[2*A+2*D+1]+=I*K,M(S,2*A+2*D+1),S[2*A+2*D+2]+=k*K,M(S,2*A+2*D+2)}for(C=0;C<w;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=w;C<2*w;C++)S[C]=0;return new d(S,0)};function M(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function P(C,w){this.g=C,this.h=w}function V(C,w){if(T(w))throw Error("division by zero");if(T(C))return new P(v,v);if(E(C))return w=V(j(C),w),new P(j(w.g),j(w.h));if(E(w))return w=V(C,j(w)),new P(j(w.g),w.h);if(C.g.length>30){if(E(C)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var S=b,A=w;A.l(C)<=0;)S=z(S),A=z(A);var D=G(S,1),k=G(A,1);for(A=G(A,2),S=G(S,2);!T(A);){var I=k.add(A);I.l(C)<=0&&(D=D.add(S),k=I),A=G(A,1),S=G(S,1)}return w=L(C,D.j(w)),new P(D,w)}for(D=v;C.l(w)>=0;){for(S=Math.max(1,Math.floor(C.m()/w.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),k=g(S),I=k.j(w);E(I)||I.l(C)>0;)S-=A,k=g(S),I=k.j(w);T(k)&&(k=b),D=D.add(k),C=L(C,I)}return new P(D,C)}t.B=function(C){return V(this,C).h},t.and=function(C){const w=Math.max(this.g.length,C.g.length),S=[];for(let A=0;A<w;A++)S[A]=this.i(A)&C.i(A);return new d(S,this.h&C.h)},t.or=function(C){const w=Math.max(this.g.length,C.g.length),S=[];for(let A=0;A<w;A++)S[A]=this.i(A)|C.i(A);return new d(S,this.h|C.h)},t.xor=function(C){const w=Math.max(this.g.length,C.g.length),S=[];for(let A=0;A<w;A++)S[A]=this.i(A)^C.i(A);return new d(S,this.h^C.h)};function z(C){const w=C.g.length+1,S=[];for(let A=0;A<w;A++)S[A]=C.i(A)<<1|C.i(A-1)>>>31;return new d(S,C.h)}function G(C,w){const S=w>>5;w%=32;const A=C.g.length-S,D=[];for(let k=0;k<A;k++)D[k]=w>0?C.i(k+S)>>>w|C.i(k+S+1)<<32-w:C.i(k+S);return new d(D,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=y,iC=d}).apply(typeof Z0<"u"?Z0:typeof self<"u"?self:typeof window<"u"?window:{});class or{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}or.UNAUTHENTICATED=new or(null),or.GOOGLE_CREDENTIALS=new or("google-credentials-uid"),or.FIRST_PARTY=new or("first-party-uid"),or.MOCK_USER=new or("mock-user");let Xl="12.9.0";function t3(t){Xl=t}const Bl=new Ky("@firebase/firestore");function mh(t,...e){if(Bl.logLevel<=St.DEBUG){const n=e.map(uv);Bl.debug(`Firestore (${Xl}): ${t}`,...n)}}function cv(t,...e){if(Bl.logLevel<=St.ERROR){const n=e.map(uv);Bl.error(`Firestore (${Xl}): ${t}`,...n)}}function sC(t,...e){if(Bl.logLevel<=St.WARN){const n=e.map(uv);Bl.warn(`Firestore (${Xl}): ${t}`,...n)}}function uv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Xt(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,aC(t,i,n)}function aC(t,e,n){let i=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw cv(i),new Error(i)}function jr(t,e,n,i){let a="Unexpected state";typeof n=="string"?a=n:i=n,t||aC(e,a,i)}function Vu(t,e){return t}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable"};class Re extends Fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(or.UNAUTHENTICATED)))}shutdown(){}}class r3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class i3{constructor(e){this.auth=null,e.onInit((n=>{this.auth=n}))}getToken(){return this.auth?this.auth.getToken().then((e=>e?(jr(typeof e.accessToken=="string",42297,{t:e}),new oC(e.accessToken,new or(this.auth.getUid()))):null)):Promise.resolve(null)}invalidateToken(){}start(e,n){}shutdown(){}}class s3{constructor(e,n,i){this.i=e,this.o=n,this.u=i,this.type="FirstParty",this.user=or.FIRST_PARTY,this.l=new Map}h(){return this.u?this.u():null}get headers(){this.l.set("X-Goog-AuthUser",this.i);const e=this.h();return e&&this.l.set("Authorization",e),this.o&&this.l.set("X-Goog-Iam-Authorization-Token",this.o),this.l}}class a3{constructor(e,n,i){this.i=e,this.o=n,this.u=i}getToken(){return Promise.resolve(new s3(this.i,this.o,this.u))}start(e,n){e.enqueueRetryable((()=>n(or.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class J0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o3{constructor(e,n){this.m=n,this.appCheck=null,this.P=null,Qr(e)&&e.settings.appCheckToken&&(this.P=e.settings.appCheckToken),n.onInit((i=>{this.appCheck=i}))}getToken(){return this.P?Promise.resolve(new J0(this.P)):this.appCheck?this.appCheck.getToken().then((e=>e?(jr(typeof e.token=="string",3470,{tokenResult:e}),new J0(e.token)):null)):Promise.resolve(null)}invalidateToken(){}start(e,n){}shutdown(){}}class l3{constructor(e,n,i,a,c,d,f,h,g,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=h,this.useFetchStreams=g,this.isUsingEmulator=y,this.apiKey=v}}const X_="(default)";class bu{constructor(e,n){this.projectId=e,this.database=n||X_}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===X_}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}function c3(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Re(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(t.options.projectId,e)}function u3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class d3{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=u3(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<n&&(i+=e.charAt(a[c]%62))}return i}}function pn(t,e){return t<e?-1:t>e?1:0}function Z_(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const a=t.charAt(i),c=e.charAt(i);if(a!==c)return g_(a)===g_(c)?pn(a,c):g_(a)?1:-1}return pn(t.length,e.length)}const f3=55296,h3=57343;function g_(t){const e=t.charCodeAt(0);return e>=f3&&e<=h3}function lC(t,e,n){return t.length===e.length&&t.every(((i,a)=>n(i,e[a])))}const eN="__name__";class Ri{constructor(e,n,i){n===void 0?n=0:n>e.length&&Xt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Xt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let a=0;a<i;a++){const c=Ri.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return pn(e.length,n.length)}static compareSegments(e,n){const i=Ri.isNumericId(e),a=Ri.isNumericId(n);return i&&!a?-1:!i&&a?1:i&&a?Ri.extractNumericId(e).compare(Ri.extractNumericId(n)):Z_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return iC.fromString(e.substring(4,e.length-2))}}class ln extends Ri{construct(e,n,i){return new ln(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Re(xe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((a=>a.length>0)))}return new ln(n)}static emptyPath(){return new ln([])}}const m3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends Ri{construct(e,n,i){return new cr(e,n,i)}static isValidIdentifier(e){return m3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eN}static keyField(){return new cr([eN])}static fromServerFormat(e){const n=[];let i="",a=0;const c=()=>{if(i.length===0)throw new Re(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Re(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[a+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Re(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,a+=2}else f==="`"?(d=!d,a++):f!=="."||d?(i+=f,a++):(c(),a++)}if(c(),d)throw new Re(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(n)}static emptyPath(){return new cr([])}}class On{constructor(e){this.path=e}static fromPath(e){return new On(ln.fromString(e))}static fromName(e){return new On(ln.fromString(e).popFirst(5))}static empty(){return new On(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ln.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ln.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new On(new ln(e.slice()))}}function cC(t,e,n){if(!n)throw new Re(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tN(t){if(!On.isDocumentKey(t))throw new Re(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nN(t){if(On.isDocumentKey(t))throw new Re(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xt(12329,{type:typeof t})}function ja(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nm(t);throw new Re(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}let Cf=null;function p3(){return Cf===null?Cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cf++,"0x"+Cf.toString(16)}function g3(t){return t==null}function ph(t){return t===0&&1/t==-1/0}const __="RestConnection",_3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class y3{get T(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.R=n+"://"+e.host,this.V=`projects/${i}/databases/${a}`,this.A=this.databaseId.database===X_?`project_id=${i}`:`project_id=${i}&database_id=${a}`}I(e,n,i,a,c){const d=p3(),f=this.p(e,n.toUriEncodedString());mh(__,`Sending RPC '${e}' ${d}:`,f,i);const h={"google-cloud-resource-prefix":this.V,"x-goog-request-params":this.A};this.F(h,a,c);const{host:g}=new URL(f),y=Ca(g);return this.v(e,f,h,i,y).then((v=>(mh(__,`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw sC(__,`RPC '${e}' ${d} failed with error: `,v,"url: ",f,"request:",i),v}))}D(e,n,i,a,c,d){return this.I(e,n,i,a,c)}F(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}p(e,n){const i=_3[e];let a=`${this.R}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}var rN,mt;function iN(t){if(t===void 0)return cv("RPC_ERROR","HTTP error has no status"),xe.UNKNOWN;switch(t){case 200:return xe.OK;case 400:return xe.FAILED_PRECONDITION;case 401:return xe.UNAUTHENTICATED;case 403:return xe.PERMISSION_DENIED;case 404:return xe.NOT_FOUND;case 409:return xe.ABORTED;case 416:return xe.OUT_OF_RANGE;case 429:return xe.RESOURCE_EXHAUSTED;case 499:return xe.CANCELLED;case 500:return xe.UNKNOWN;case 501:return xe.UNIMPLEMENTED;case 503:return xe.UNAVAILABLE;case 504:return xe.DEADLINE_EXCEEDED;default:return t>=200&&t<300?xe.OK:t>=400&&t<500?xe.FAILED_PRECONDITION:t>=500&&t<600?xe.INTERNAL:xe.UNKNOWN}}(mt=rN||(rN={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";class v3 extends y3{S(e,n){throw new Error("Not supported by FetchConnection")}async v(e,n,i,a,c){const d=JSON.stringify(a);let f;try{const h={method:"POST",headers:i,body:d};c&&(h.credentials="include"),f=await fetch(n,h)}catch(h){const g=h;throw new Re(iN(g.status),"Request failed with error: "+g.statusText)}if(!f.ok){let h=await f.json();Array.isArray(h)&&(h=h[0]);const g=h?.error?.message;throw new Re(iN(f.status),`Request failed with error: ${g??f.statusText}`)}return f.json()}}function sN(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}class b3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ss{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new b3("Invalid base64 string: "+c):c}})(e);return new Ss(n)}static fromUint8Array(e){const n=(function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c})(e);return new Ss(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ss.EMPTY_BYTE_STRING=new Ss("");const x3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(t){if(jr(!!t,39018),typeof t=="string"){let e=0;const n=x3.exec(t);if(jr(!!n,46558,{timestamp:t}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gn(t.seconds),nanos:gn(t.nanos)}}function gn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xu(t){return typeof t=="string"?Ss.fromBase64String(t):Ss.fromUint8Array(t)}function Kr(t,e){const n={typeString:t};return e&&(n.value=e),n}function Bu(t,e){if(!uC(t))throw new Re(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const d=t[i];if(a&&typeof d!==a){n=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new Re(xe.INVALID_ARGUMENT,n);return!0}const aN=-62135596800,oN=1e6;class Nn{static now(){return Nn.fromMillis(Date.now())}static fromDate(e){return Nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*oN);return new Nn(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<aN)throw new Re(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oN}_compareTo(e){return this.seconds===e.seconds?pn(this.nanoseconds,e.nanoseconds):pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bu(e,Nn._jsonSchema))return new Nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nn._jsonSchemaVersion="firestore/timestamp/1.0",Nn._jsonSchema={type:Kr("string",Nn._jsonSchemaVersion),seconds:Kr("number"),nanoseconds:Kr("number")};function fC(t){return(t?.mapValue?.fields||{}).__type__?.stringValue==="server_timestamp"}function hC(t){const e=t.mapValue.fields.__previous_value__;return fC(e)?hC(e):e}function wu(t){const e=fo(t.mapValue.fields.__local_write_time__.timestampValue);return new Nn(e.seconds,e.nanos)}const mC="__type__",w3="__max__",jf={},pC="__vector__",gh="value";function ho(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fC(t)?4:(function(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===w3})(t)?9007199254740991:(function(n){return(n?.mapValue?.fields||{})[mC]?.stringValue===pC})(t)?10:11:Xt(28295,{value:t})}function _h(t,e){if(t===e)return!0;const n=ho(t);if(n!==ho(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wu(t).isEqual(wu(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=fo(a.timestampValue),f=fo(c.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,c){return xu(a.bytesValue).isEqual(xu(c.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,c){return gn(a.geoPointValue.latitude)===gn(c.geoPointValue.latitude)&&gn(a.geoPointValue.longitude)===gn(c.geoPointValue.longitude)})(t,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return gn(a.integerValue)===gn(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=gn(a.doubleValue),f=gn(c.doubleValue);return d===f?ph(d)===ph(f):isNaN(d)&&isNaN(f)}return!1})(t,e);case 9:return lC(t.arrayValue.values||[],e.arrayValue.values||[],_h);case 10:case 11:return(function(a,c){const d=a.mapValue.fields||{},f=c.mapValue.fields||{};if(sN(d)!==sN(f))return!1;for(const h in d)if(d.hasOwnProperty(h)&&(f[h]===void 0||!_h(d[h],f[h])))return!1;return!0})(t,e);default:return Xt(52216,{left:t})}}function Su(t,e){return(t.values||[]).find((n=>_h(n,e)))!==void 0}function yh(t,e){if(t===e)return 0;const n=ho(t),i=ho(e);if(n!==i)return pn(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return pn(t.booleanValue,e.booleanValue);case 2:return(function(c,d){const f=gn(c.integerValue||c.doubleValue),h=gn(d.integerValue||d.doubleValue);return f<h?-1:f>h?1:f===h?0:isNaN(f)?isNaN(h)?0:-1:1})(t,e);case 3:return lN(t.timestampValue,e.timestampValue);case 4:return lN(wu(t),wu(e));case 5:return Z_(t.stringValue,e.stringValue);case 6:return(function(c,d){const f=xu(c),h=xu(d);return f.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(c,d){const f=c.split("/"),h=d.split("/");for(let g=0;g<f.length&&g<h.length;g++){const y=pn(f[g],h[g]);if(y!==0)return y}return pn(f.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(c,d){const f=pn(gn(c.latitude),gn(d.latitude));return f!==0?f:pn(gn(c.longitude),gn(d.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return cN(t.arrayValue,e.arrayValue);case 10:return(function(c,d){const f=c.fields||{},h=d.fields||{},g=f[gh]?.arrayValue,y=h[gh]?.arrayValue,v=pn(g?.values?.length||0,y?.values?.length||0);return v!==0?v:cN(g,y)})(t.mapValue,e.mapValue);case 11:return(function(c,d){if(c===jf&&d===jf)return 0;if(c===jf)return 1;if(d===jf)return-1;const f=c.fields||{},h=Object.keys(f),g=d.fields||{},y=Object.keys(g);h.sort(),y.sort();for(let v=0;v<h.length&&v<y.length;++v){const b=Z_(h[v],y[v]);if(b!==0)return b;const N=yh(f[h[v]],g[y[v]]);if(N!==0)return N}return pn(h.length,y.length)})(t.mapValue,e.mapValue);default:throw Xt(23264,{C:n})}}function lN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pn(t,e);const n=fo(t),i=fo(e),a=pn(n.seconds,i.seconds);return a!==0?a:pn(n.nanos,i.nanos)}function cN(t,e){const n=t.values||[],i=e.values||[];for(let a=0;a<n.length&&a<i.length;++a){const c=yh(n[a],i[a]);if(c)return c}return pn(n.length,i.length)}function uN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gC(t){return!!t&&"arrayValue"in t}function dN(t){return!!t&&"nullValue"in t}function fN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function y_(t){return!!t&&"mapValue"in t}function mu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return zu(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=mu(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mu(t.arrayValue.values[n]);return e}return{...t}}class hN{constructor(e,n){this.position=e,this.inclusive=n}}class _C{}class bi extends _C{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new S3(e,n,i):n==="array-contains"?new C3(e,i):n==="in"?new j3(e,i):n==="not-in"?new T3(e,i):n==="array-contains-any"?new A3(e,i):new bi(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new N3(e,i):new E3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yh(n,this.value)):n!==null&&ho(this.value)===ho(n)&&this.matchesComparison(yh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fu extends _C{constructor(e,n){super(),this.filters=e,this.op=n,this.N=null}static create(e,n){return new Fu(e,n)}matches(e){return(function(i){return i.op==="and"})(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.N!==null||(this.N=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.N}getFilters(){return Object.assign([],this.filters)}}class S3 extends bi{constructor(e,n,i){super(e,n,i),this.key=On.fromName(i.referenceValue)}matches(e){const n=On.comparator(e.key,this.key);return this.matchesComparison(n)}}class N3 extends bi{constructor(e,n){super(e,"in",n),this.keys=yC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class E3 extends bi{constructor(e,n){super(e,"not-in",n),this.keys=yC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function yC(t,e){return(e.arrayValue?.values||[]).map((n=>On.fromName(n.referenceValue)))}class C3 extends bi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gC(n)&&Su(n.arrayValue,this.value)}}class j3 extends bi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Su(this.value.arrayValue,n)}}class T3 extends bi{constructor(e,n){super(e,"not-in",n)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Su(this.value.arrayValue,n)}}class A3 extends bi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gC(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Su(this.value.arrayValue,i)))}}class vh{constructor(e,n="asc"){this.field=e,this.dir=n}}class Pn{static fromTimestamp(e){return new Pn(e)}static min(){return new Pn(new Nn(0,0))}static max(){return new Pn(new Nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bh{constructor(e,n){this.comparator=e,this.root=n||Ln.EMPTY}insert(e,n){return new bh(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new bh(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return n+i.left.size;a<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}}class Tf{constructor(e,n,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,n,i,a,c){this.key=e,this.value=n,this.color=i??Ln.RED,this.left=a??Ln.EMPTY,this.right=c??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,a,c){return new Ln(e??this.key,n??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,i),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Ln.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xt(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Xt(57766)}get value(){throw Xt(16141)}get color(){throw Xt(16727)}get left(){throw Xt(29726)}get right(){throw Xt(36894)}copy(e,n,i,a,c){return this}insert(e,n,i){return new Ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nu{constructor(e){this.comparator=e,this.data=new bh(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mN(this.data.getIterator())}getIteratorFrom(e){return new mN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Nu)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Nu(this.comparator);return n.data=e,n}}class mN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class mo{constructor(e){this.fields=e,e.sort(cr.comparator)}static empty(){return new mo([])}unionWith(e){let n=new Nu(cr.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new mo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lC(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Cr{constructor(e){this.value=e}static empty(){return new Cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!y_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(n)}setAll(e){let n=cr.emptyPath(),i={},a=[];e.forEach(((d,f)=>{if(!n.isImmediateParentOf(f)){const h=this.getFieldsMap(n);this.applyChanges(h,i,a),i={},a=[],n=f.popLast()}d?i[f.lastSegment()]=mu(d):a.push(f.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,a)}delete(e){const n=this.field(e.popLast());y_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _h(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=n.mapValue.fields[e.get(i)];y_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,i){zu(n,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new Cr(mu(this.value))}}class Oi{constructor(e,n,i,a,c,d,f){this.key=e,this.documentType=n,this.version=i,this.readTime=a,this.createTime=c,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Oi(e,0,Pn.min(),Pn.min(),Pn.min(),Cr.empty(),0)}static newFoundDocument(e,n,i,a){return new Oi(e,1,n,Pn.min(),i,a,0)}static newNoDocument(e,n){return new Oi(e,2,n,Pn.min(),Pn.min(),Cr.empty(),0)}static newUnknownDocument(e,n){return new Oi(e,3,n,Pn.min(),Pn.min(),Cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class R3{constructor(e,n=null,i=[],a=[],c=null,d=null,f=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=d,this.endAt=f,this.O=null}}function pN(t,e=null,n=[],i=[],a=null,c=null,d=null){return new R3(t,e,n,i,a,c,d)}class dv{constructor(e,n=null,i=[],a=[],c=null,d="F",f=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=d,this.startAt=f,this.endAt=h,this.q=null,this.L=null,this.B=null,this.startAt,this.endAt}}function O3(t){return t.collectionGroup!==null}function I3(t){const e=Vu(t);if(e.q===null){e.q=[];const n=new Set;for(const c of e.explicitOrderBy)e.q.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Nu(cr.comparator);return d.filters.forEach((h=>{h.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.q.push(new vh(c,i))})),n.has(cr.keyField().canonicalString())||e.q.push(new vh(cr.keyField(),i))}return e.q}function M3(t){const e=Vu(t);return e.L||(e.L=D3(e,I3(t))),e.L}function D3(t,e){if(t.limitType==="F")return pN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new vh(a.field,c)}));const n=t.endAt?new hN(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new hN(t.startAt.position,t.startAt.inclusive):null;return pN(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function J_(t,e){const n=t.filters.concat([e]);return new dv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function k3(t,e){return(function(i){return typeof i=="number"&&Number.isInteger(i)&&!ph(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER})(e)?(function(i){return{integerValue:""+i}})(e):vC(t,e)}class rm{constructor(){this._=void 0}}class bC extends rm{}class P3 extends rm{constructor(e){super(),this.elements=e}}class L3 extends rm{constructor(e){super(),this.elements=e}}class U3 extends rm{constructor(e,n){super(),this.serializer=e,this.$=n}}class V3{constructor(e,n){this.field=e,this.transform=n}}class hi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}let im=class{};class xC extends im{constructor(e,n,i,a=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class fv extends im{constructor(e,n,i,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}class hv extends im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z3 extends im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}const B3={asc:"ASCENDING",desc:"DESCENDING"},F3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q3={and:"AND",or:"OR"};class $3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ey(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function G3(t,e){return ey(t,e.toTimestamp())}function pu(t){return jr(!!t,49232),Pn.fromTimestamp((function(n){const i=fo(n);return new Nn(i.seconds,i.nanos)})(t))}function mv(t,e){return ty(t,e).canonicalString()}function ty(t,e){const n=(function(a){return new ln(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?n:n.child(e)}function xh(t,e){return mv(t.databaseId,e.path)}function ny(t,e){const n=(function(a){const c=ln.fromString(a);return jr(SC(c),10190,{key:c.toString()}),c})(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new On((function(a){return jr(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)})(n))}function gN(t,e,n){return{name:xh(t,e),fields:n.value.mapValue.fields}}function Q3(t,e){return"found"in e?(function(i,a){jr(!!a.found,43571),a.found.name,a.found.updateTime;const c=ny(i,a.found.name),d=pu(a.found.updateTime),f=a.found.createTime?pu(a.found.createTime):Pn.min(),h=new Cr({mapValue:{fields:a.found.fields}});return Oi.newFoundDocument(c,d,f,h)})(t,e):"missing"in e?(function(i,a){jr(!!a.missing,3894),jr(!!a.readTime,22933);const c=ny(i,a.missing),d=pu(a.readTime);return Oi.newNoDocument(c,d)})(t,e):Xt(7234,{result:e})}function W3(t,e){let n;if(e instanceof xC)n={update:gN(t,e.key,e.value)};else if(e instanceof hv)n={delete:xh(t,e.key)};else if(e instanceof fv)n={update:gN(t,e.key,e.data),updateMask:J3(e.fieldMask)};else{if(!(e instanceof z3))return Xt(16599,{U:e.type});n={verify:xh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,d){const f=d.transform;if(f instanceof bC)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof P3)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof L3)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof U3)return{fieldPath:d.field.canonicalString(),increment:f.$};throw Xt(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:G3(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Xt(27497)})(t,e.precondition)),n}function K3(t,e){const n={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=(function(g,y){return mv(g.databaseId,y)})(t,a);const c=(function(g){if(g.length!==0)return wC(Fu.create(g,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(g){if(g.length!==0)return g.map((y=>(function(b){return{field:wl(b.field),direction:Y3(b.dir)}})(y)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const f=(function(g,y){return g.useProto3Json||g3(y)?y:{value:y}})(t,e.limit);return f!==null&&(n.structuredQuery.limit=f),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{M:n,parent:a}}function Y3(t){return B3[t]}function X3(t){return F3[t]}function Z3(t){return q3[t]}function wl(t){return{fieldPath:t.canonicalString()}}function wC(t){return t instanceof bi?(function(n){if(n.op==="=="){if(fN(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NAN"}};if(dN(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fN(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NAN"}};if(dN(n.value))return{unaryFilter:{field:wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(n.field),op:X3(n.op),value:n.value}}})(t):t instanceof Fu?(function(n){const i=n.getFilters().map((a=>wC(a)));return i.length===1?i[0]:{compositeFilter:{op:Z3(n.op),filters:i}}})(t):Xt(54877,{filter:t})}function J3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function SC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function NC(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}function pv(t){return new $3(t,!0)}class eL{}class tL extends eL{constructor(e,n,i,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=a,this.k=!1}j(){if(this.k)throw new Re(xe.FAILED_PRECONDITION,"The client has already been terminated.")}I(e,n,i,a){return this.j(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.I(e,ty(n,i),a,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Re(xe.UNKNOWN,c.toString())}))}D(e,n,i,a,c){return this.j(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.D(e,ty(n,i),a,d,f,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Re(xe.UNKNOWN,d.toString())}))}terminate(){this.k=!0,this.connection.terminate()}}async function qu(t,e){const n=Vu(t),i={writes:e.map((a=>W3(n.serializer,a)))};await n.I("Commit",n.serializer.databaseId,ln.emptyPath(),i)}async function nL(t,e){const n=Vu(t),i={documents:e.map((f=>xh(n.serializer,f)))},a=await n.D("BatchGetDocuments",n.serializer.databaseId,ln.emptyPath(),i,e.length),c=new Map;a.forEach((f=>{const h=Q3(n.serializer,f);c.set(h.key.toString(),h)}));const d=[];return e.forEach((f=>{const h=c.get(f.toString());jr(!!h,55234,{key:f}),d.push(h)})),d}async function rL(t,e){const n=Vu(t),{M:i,parent:a}=K3(n.serializer,M3(e));return(await n.D("RunQuery",n.serializer.databaseId,a,{structuredQuery:i.structuredQuery})).filter((c=>!!c.document)).map((c=>(function(f,h,g){const y=ny(f,h.name),v=pu(h.updateTime),b=h.createTime?pu(h.createTime):Pn.min(),N=new Cr({mapValue:{fields:h.fields}}),T=Oi.newFoundDocument(y,v,b,N);return g?T.setHasCommittedMutations():T})(n.serializer,c.document,void 0)))}const EC="ComponentProvider",gu=new Map;function No(t){if(t._terminated)throw new Re(xe.FAILED_PRECONDITION,"The client has already been terminated.");if(!gu.has(t)){mh(EC,"Initializing Datastore");const e=(function(c){return new v3(c)})((function(c,d,f,h,g){return new l3(c,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,dC(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator,h)})(t._databaseId,t.app.options.appId||"",t._persistenceKey,t.app.options.apiKey,t._freezeSettings())),n=pv(t._databaseId),i=(function(c,d,f,h){return new tL(c,d,f,h)})(t._authCredentials,t._appCheckCredentials,e,n);gu.set(t,i)}return gu.get(t)}const iL=1048576,CC="firestore.googleapis.com",_N=!0;class yN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CC,this.ssl=_N}else this.host=e.host,this.ssl=e.ssl??_N;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iL)throw new Re(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(i,a,c,d){if(a===!0&&d===!0)throw new Re(xe.INVALID_ARGUMENT,`${i} and ${c} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Re(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $u{constructor(e,n,i,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new n3;switch(i.type){case"firstParty":return new a3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Re(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=gu.get(n);i&&(mh(EC,"Removing Datastore"),gu.delete(n),i.terminate())})(this),Promise.resolve()}}function sL(t,e){const n=typeof t=="object"?t:Xy(),i=typeof t=="string"?t:"(default)",a=Zh(n,"firestore/lite").getImmediate({identifier:i});if(!a._initialized){const c=_1("firestore");c&&aL(a,...c)}return a}function aL(t,e,n,i={}){t=ja(t,$u);const a=Ca(e),c=t._getSettings(),d={...c,emulatorOptions:t._getEmulatorOptions()},f=`${e}:${n}`;a&&(Qy(`https://${f}`),Wy("Firestore",!0)),c.host!==CC&&c.host!==f&&sC("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...c,host:f,ssl:a,emulatorOptions:i};if(!lo(h,d)&&(t._setSettings(h),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=or.MOCK_USER;else{g=aD(i.mockUserToken,t._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new Re(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new or(v)}t._authCredentials=new r3(new oC(g,y))}}let Hu=class jC{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new jC(this.firestore,e,this._query)}};class Zt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Bu(n,Zt._jsonSchema))return new Zt(e,i||null,new On(ln.fromString(n.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Kr("string",Zt._jsonSchemaVersion),referencePath:Kr("string")};class ys extends Hu{constructor(e,n,i){super(e,n,(function(c){return new dv(c)})(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new On(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function qt(t,e,...n){if(t=Jt(t),cC("collection","path",e),t instanceof $u){const i=ln.fromString(e,...n);return nN(i),new ys(t,null,i)}{if(!(t instanceof Zt||t instanceof ys))throw new Re(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ln.fromString(e,...n));return nN(i),new ys(t.firestore,null,i)}}function Ue(t,e,...n){if(t=Jt(t),arguments.length===1&&(e=d3.newId()),cC("doc","path",e),t instanceof $u){const i=ln.fromString(e,...n);return tN(i),new Zt(t,null,new On(i))}{if(!(t instanceof Zt||t instanceof ys))throw new Re(xe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ln.fromString(e,...n));return tN(i),new Zt(t.firestore,t instanceof ys?t.converter:null,new On(i))}}class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(Ss.fromBase64String(e))}catch(n){throw new Re(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wr(Ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bu(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:Kr("string",Wr._jsonSchemaVersion),bytes:Kr("string")};class sm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class am{constructor(e){this._methodName=e}}class Li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pn(this._lat,e._lat)||pn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(Bu(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:Kr("string",Li._jsonSchemaVersion),latitude:Kr("number"),longitude:Kr("number")};class mi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bu(e,mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mi(e.vectorValues);throw new Re(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Kr("string",mi._jsonSchemaVersion),vectorValues:Kr("object")};const oL=/^__.*__$/;class lL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new fv(e,this.data,this.fieldMask,n,this.fieldTransforms):new xC(e,this.data,n,this.fieldTransforms)}}class TC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new fv(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xt(40011,{dataSource:t})}}class gv{constructor(e,n,i,a,c,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new gv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AC(this.dataSource)&&oL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class cL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||pv(e)}createContext(e,n,i,a=!1){return new gv({dataSource:e,methodName:n,targetDoc:i,path:cr.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(t){const e=t._freezeSettings(),n=pv(t._databaseId);return new cL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _v(t,e,n,i,a,c={}){const d=t.createContext(c.merge||c.mergeFields?2:0,e,n,a);vv("Data must be an object, but it was:",d,i);const f=IC(i,d);let h,g;if(c.merge)h=new mo(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const y=[];for(const v of c.mergeFields){const b=Fl(e,v,n);if(!d.contains(b))throw new Re(xe.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);kC(y,b)||y.push(b)}h=new mo(y),g=d.fieldTransforms.filter((v=>h.covers(v.field)))}else h=null,g=d.fieldTransforms;return new lL(new Cr(f),h,g)}class om extends am{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof om}}class yv extends am{_toFieldTransform(e){return new V3(e.path,new bC)}isEqual(e){return e instanceof yv}}function RC(t,e,n,i){const a=t.createContext(1,e,n);vv("Data must be an object, but it was:",a,i);const c=[],d=Cr.empty();zu(i,((h,g)=>{const y=DC(e,h,n);g=Jt(g);const v=a.childContextForFieldPath(y);if(g instanceof om)c.push(y);else{const b=Qu(g,v);b!=null&&(c.push(y),d.set(y,b))}}));const f=new mo(c);return new TC(d,f,a.fieldTransforms)}function OC(t,e,n,i,a,c){const d=t.createContext(1,e,n),f=[Fl(e,i,n)],h=[a];if(c.length%2!=0)throw new Re(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)f.push(Fl(e,c[b])),h.push(c[b+1]);const g=[],y=Cr.empty();for(let b=f.length-1;b>=0;--b)if(!kC(g,f[b])){const N=f[b];let T=h[b];T=Jt(T);const E=d.childContextForFieldPath(N);if(T instanceof om)g.push(N);else{const j=Qu(T,E);j!=null&&(g.push(N),y.set(N,j))}}const v=new mo(g);return new TC(y,v,d.fieldTransforms)}function uL(t,e,n,i=!1){return Qu(n,t.createContext(i?4:3,e))}function Qu(t,e){if(MC(t=Jt(t)))return vv("Unsupported field value:",e,t),IC(t,e);if(t instanceof am)return(function(i,a){if(!AC(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const c=[];let d=0;for(const f of i){let h=Qu(f,a.childContextForArray(d));h==null&&(h={nullValue:"NULL_VALUE"}),c.push(h),d++}return{arrayValue:{values:c}}})(t,e)}return(function(i,a){if((i=Jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return k3(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Nn.fromDate(i);return{timestampValue:ey(a.serializer,c)}}if(i instanceof Nn){const c=new Nn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ey(a.serializer,c)}}if(i instanceof Li)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wr)return{bytesValue:H3(a.serializer,i._byteString)};if(i instanceof Zt){const c=a.databaseId,d=i.firestore._databaseId;if(!d.isEqual(c))throw a.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:mv(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof mi)return(function(d,f){const h=d instanceof mi?d.toArray():d;return{mapValue:{fields:{[mC]:{stringValue:pC},[gh]:{arrayValue:{values:h.map((y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return vC(f.serializer,y)}))}}}}}})(i,a);if(NC(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${nm(i)}`)})(t,e)}function IC(t,e){const n={};return(function(a){for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c))return!1;return!0})(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zu(t,((i,a)=>{const c=Qu(a,e.childContextForField(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function MC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nn||t instanceof Li||t instanceof Wr||t instanceof Zt||t instanceof am||t instanceof mi||NC(t))}function vv(t,e,n){if(!MC(n)||!uC(n)){const i=nm(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function Fl(t,e,n){if((e=Jt(e))instanceof sm)return e._internalPath;if(typeof e=="string")return DC(t,e);throw wh("Field path arguments must be of type string or ",t,!1,void 0,n)}const dL=new RegExp("[~\\*/\\[\\]]");function DC(t,e,n){if(e.search(dL)>=0)throw wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sm(...e.split("."))._internalPath}catch{throw wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wh(t,e,n,i,a){const c=i&&!i.isEmpty(),d=a!==void 0;let f=`Function ${e}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let h="";return(c||d)&&(h+=" (found",c&&(h+=` in field ${i}`),d&&(h+=` in document ${a}`),h+=")"),new Re(xe.INVALID_ARGUMENT,f+t+h)}function kC(t,e){return t.some((n=>n.isEqual(e)))}class PC{constructor(e,n,i,a,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Fl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LC extends PC{data(){return super.data()}}class fL{constructor(e,n){this._docs=n,this.query=e}get docs(){return[...this._docs]}get size(){return this.docs.length}get empty(){return this.docs.length===0}forEach(e,n){this._docs.forEach(e,n)}}class bv{}class UC extends bv{}function _n(t,e,...n){let i=[];e instanceof bv&&i.push(e),i=i.concat(n),(function(c){const d=c.filter((h=>h instanceof xv)).length,f=c.filter((h=>h instanceof lm)).length;if(d>1||d>0&&f>0)throw new Re(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)t=a._apply(t);return t}class lm extends UC{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new lm(e,n,i)}_apply(e){const n=this._parse(e);return VC(e._query,n),new Hu(e.firestore,e.converter,J_(e._query,n))}_parse(e){const n=Gu(e.firestore);return(function(c,d,f,h,g,y,v){let b;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Re(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){bN(v,y);const T=[];for(const E of v)T.push(vN(h,c,E));b={arrayValue:{values:T}}}else b=vN(h,c,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||bN(v,y),b=uL(f,d,v,y==="in"||y==="not-in");return bi.create(g,y,b)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jr(t,e,n){const i=e,a=Fl("where",t);return lm._create(a,i,n)}class xv extends bv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xv(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Fu.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(a,c){let d=a;const f=c.getFlattenedFilters();for(const h of f)VC(d,h),d=J_(d,h)})(e._query,n),new Hu(e.firestore,e.converter,J_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wv extends UC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wv(e,n)}_apply(e){const n=(function(a,c,d){if(a.startAt!==null)throw new Re(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Re(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vh(c,d)})(e._query,this._field,this._direction);return new Hu(e.firestore,e.converter,(function(a,c){const d=a.explicitOrderBy.concat([c]);return new dv(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,n))}}function pi(t,e="asc"){const n=e,i=Fl("orderBy",t);return wv._create(i,n)}function vN(t,e,n){if(typeof(n=Jt(n))=="string"){if(n==="")throw new Re(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O3(e)&&n.indexOf("/")!==-1)throw new Re(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ln.fromString(n));if(!On.isDocumentKey(i))throw new Re(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return uN(t,new On(i))}if(n instanceof Zt)return uN(t,n._key);throw new Re(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(n)}.`)}function bN(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VC(t,e){const n=(function(a,c){for(const d of a)for(const f of d.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hL{convertValue(e,n="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Xt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return zu(e,((a,c)=>{i[a]=this.convertValue(c,n)})),i}convertVectorValue(e){const n=e.fields?.[gh].arrayValue?.values?.map((i=>gn(i.doubleValue)));return new mi(n)}convertGeoPoint(e){return new Li(gn(e.latitude),gn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=hC(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(wu(e));default:return null}}convertTimestamp(e){const n=fo(e);return new Nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ln.fromString(e);jr(SC(i),9688,{name:e});const a=new bu(i.get(1),i.get(3)),c=new On(i.popFirst(5));return a.isEqual(n)||cv(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function Sv(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class zC extends hL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function Vn(t){const e=No((t=ja(t,Zt)).firestore),n=new zC(t.firestore);return nL(e,[t._key]).then((i=>{jr(i.length===1,15618);const a=i[0];return new PC(t.firestore,n,t._key,a.isFoundDocument()?a:null,t.converter)}))}function $t(t){(function(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Re(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")})((t=ja(t,Hu))._query);const e=No(t.firestore),n=new zC(t.firestore);return rL(e,t._query).then((i=>{const a=i.map((c=>new LC(t.firestore,n,c.key,c,t.converter)));return t._query.limitType==="L"&&a.reverse(),new fL(t,a)}))}function zn(t,e,n){const i=Sv((t=ja(t,Zt)).converter,e,n),a=_v(Gu(t.firestore),"setDoc",t._key,i,t.converter!==null,n);return qu(No(t.firestore),[a.toMutation(t._key,hi.none())])}function gi(t,e,n,...i){const a=Gu((t=ja(t,Zt)).firestore);let c;return c=typeof(e=Jt(e))=="string"||e instanceof sm?OC(a,"updateDoc",t._key,e,n,i):RC(a,"updateDoc",t._key,e),qu(No(t.firestore),[c.toMutation(t._key,hi.exists(!0))])}function dr(t){return qu(No((t=ja(t,Zt)).firestore),[new hv(t._key,hi.none())])}function mL(t,e){const n=Ue(t=ja(t,ys)),i=Sv(t.converter,e),a=_v(Gu(t.firestore),"addDoc",n._key,i,n.converter!==null,{});return qu(No(t.firestore),[a.toMutation(n._key,hi.exists(!1))]).then((()=>n))}function Ie(){return new yv("serverTimestamp")}const xN="4.11.0";class pL{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gu(e)}set(e,n,i){this._verifyNotCommitted();const a=v_(e,this._firestore),c=Sv(a.converter,n,i),d=_v(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,i);return this._mutations.push(d.toMutation(a._key,hi.none())),this}update(e,n,i,...a){this._verifyNotCommitted();const c=v_(e,this._firestore);let d;return d=typeof(n=Jt(n))=="string"||n instanceof sm?OC(this._dataReader,"WriteBatch.update",c._key,n,i,a):RC(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,hi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=v_(e,this._firestore);return this._mutations=this._mutations.concat(new hv(n._key,hi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function v_(t,e){if((t=Jt(t)).firestore!==e)throw new Re(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Zl(t){t=ja(t,$u);const e=No(t);return new pL(t,(n=>qu(e,n)))}(function(){t3(`${Kl}_lite`),co(new Sa("firestore/lite",((e,{instanceIdentifier:n,options:i})=>{const a=e.getProvider("app").getImmediate(),c=new $u(new i3(e.getProvider("auth-internal")),new o3(a,e.getProvider("app-check-internal")),c3(a,n),a);return i&&c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),ki("firestore-lite",xN,""),ki("firestore-lite",xN,"esm2020")})();function gL(){const t={apiKey:"AIzaSyDSh_ziVPTuK97HjhP8kGlS1QEBfMXtDn8".trim(),authDomain:"brandwala-v2.firebaseapp.com".trim(),projectId:"brandwala-v2".trim(),storageBucket:"brandwala-v2.firebasestorage.app".trim(),messagingSenderId:"479622870032".trim(),appId:"1:479622870032:web:9de99a65fa2580e91f4695".trim()},n=["apiKey","authDomain","projectId","appId"].filter(i=>!String(t?.[i]||"").trim());if(n.length)throw new Error(`Missing VITE_FIREBASE fields: ${n.join(", ")}`);return t}const Nv=w1(gL()),_L=Nv,Sl=AP(Nv),be=sL(Nv),Ev="users",yL=60*1e3,vL=30*1e3,bL=new Set(["admin","ops","sales","customer","investor"]),Sh=new Map,au=new Map;let Yf=null,ry=0,Nl=null;function Ta(t){return String(t||"").trim().toLowerCase()}function Pl(t,e=0){const n=String(t??"").trim().toLowerCase();return n==="1"||n==="true"||n==="yes"?1:n==="0"||n==="false"||n==="no"?0:Number(t)===1?1:e}function BC(t){const e=String(t||"customer").trim().toLowerCase();return bL.has(e)?e:"customer"}function Cv(t){const e=Ta(t?.email),n=BC(t?.role),i=Pl(t?.active,1),a=Pl(t?.can_see_price_gbp,0),c=Pl(t?.can_use_cart,1);return{email:e,name:String(t?.name||"").trim(),role:n,active:i,can_see_price_gbp:a,can_use_cart:c,is_admin:n==="admin"}}function cm(t){return Ue(be,Ev,Ta(t))}function jv(t){const e=Ta(t);e&&(Sh.delete(e),au.delete(e)),Yf=null,ry=0,Nl=null}async function xL(t){const e=Ta(t);if(!e)return null;const n=Date.now(),i=Sh.get(e);if(i&&n-i.ts<yL)return i.value;if(au.has(e))return au.get(e);const a=(async()=>{const c=await Vn(cm(e)),d=c.exists()?Cv({...c.data(),email:e}):null;return Sh.set(e,{ts:Date.now(),value:d}),d})();au.set(e,a);try{return await a}finally{au.delete(e)}}async function wL(){const t=Date.now();if(Yf&&t-ry<vL)return Yf;if(Nl)return Nl;Nl=(async()=>{const e=_n(qt(be,Ev),pi("email","asc")),i=(await $t(e)).docs.map(a=>Cv(a.data()));return Yf=i,ry=Date.now(),i.forEach(a=>{Sh.set(Ta(a.email),{ts:Date.now(),value:a})}),i})();try{return await Nl}finally{Nl=null}}async function SL(t){const e=Ta(t?.user_email||t?.email);if(!e)throw new Error("Email is required");const n=Cv({...t,email:e});await zn(cm(e),{...n,created_at:Ie(),updated_at:Ie()}),await zn(Ue(be,Ev,e,"config","preferences"),{theme:"system",language:"en",currency_display:"auto",items_per_page:20,compact_mode:0,show_images:1,default_order_view:"table",timezone:"Asia/Dhaka",created_at:Ie(),updated_at:Ie()},{merge:!0}),jv(e)}async function NL(t,e={}){const n=Ta(t);if(!n)throw new Error("User email is required");const i={};e.name!==void 0&&(i.name=String(e.name||"").trim()),e.role!==void 0&&(i.role=BC(e.role)),e.active!==void 0&&(i.active=Pl(e.active,1)),e.can_see_price_gbp!==void 0&&(i.can_see_price_gbp=Pl(e.can_see_price_gbp,0)),e.can_use_cart!==void 0&&(i.can_use_cart=Pl(e.can_use_cart,1)),i.updated_at=Ie(),await gi(cm(n),i),jv(n)}async function EL(t){const e=Ta(t);if(!e)throw new Error("User email is required");await dr(cm(e)),jv(e)}const FC=p.createContext(null),CL="us-central1".trim(),jL=YP(_L,CL),TL=ZP(jL,"syncMyClaims"),b_="bw.auth.user.v1";function fl(t,e=!1){const n=String(t??"").trim().toLowerCase();return n==="1"||n==="true"||n==="yes"?!0:n==="0"||n==="false"||n==="no"?!1:typeof t=="number"?t===1:typeof t=="boolean"?t:e}function AL({children:t}){const[e,n]=p.useState(()=>{try{const y=sessionStorage.getItem(b_);return y?JSON.parse(y):null}catch{return null}}),[i,a]=p.useState(!0);function c(y){try{if(!y){sessionStorage.removeItem(b_);return}sessionStorage.setItem(b_,JSON.stringify(y))}catch{}}async function d(y,{forceSignOut:v=!0}={}){const b=String(y?.email||"").trim().toLowerCase();if(!b)return v&&await m_(Sl),null;let N=await y.getIdTokenResult(!0),T=N?.claims||{};if(!(typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"))&&(!("active"in T)||!("role"in T)))try{await TL({}),await y.getIdToken(!0),N=await y.getIdTokenResult(!0),T=N?.claims||{}}catch{}let j="active"in T?fl(T.active,!1):null,L="role"in T?String(T.role||"customer").toLowerCase()==="admin"?"admin":"customer":null,M="can_see_price_gbp"in T?fl(T.can_see_price_gbp,!1):null,P="can_use_cart"in T?fl(T.can_use_cart,!0):null;if(j===null||L===null||M===null||P===null)try{const G=await xL(b);G&&(j===null&&(j=fl(G.active,!1)),L===null&&(L=String(G.role||"customer").toLowerCase()==="admin"?"admin":"customer"),M===null&&(M=fl(G.can_see_price_gbp,!1)),P===null&&(P=fl(G.can_use_cart,!0)))}catch(G){console.error("Profile fallback read failed",G)}const V=j===null?!1:j;if(!V)return v&&await m_(Sl),null;const z=L==="admin"?"admin":"customer";return{uid:y.uid,email:b,name:y.displayName||"",photo_url:String(y.photoURL||""),role:z,is_admin:z==="admin",can_see_price_gbp:M===null?!1:M,can_use_cart:P===null?!0:P,active:V}}async function f(){const y=Sl.currentUser;if(!y)return n(null),{ok:!1};try{const v=await d(y,{forceSignOut:!1});return n(v),c(v),v?{ok:!0,user:v}:{ok:!1,reason:"profile_not_found_or_inactive"}}catch(v){return console.error("refreshAccess failed",v),n(null),c(null),{ok:!1,reason:String(v?.code||v?.message||"unknown_error")}}}p.useEffect(()=>{const y=yk(Sl,async v=>{a(!0);try{if(!v){n(null),c(null);return}const b=await d(v);n(b),c(b)}catch(b){console.error("Auth state hydration failed",b),n(null),c(null)}finally{a(!1)}});return()=>y()},[]);async function h(){await m_(Sl),n(null),c(null)}const g=p.useMemo(()=>({user:e,setUser:n,loading:i,logout:h,refreshAccess:f}),[e,i]);return l.jsx(FC.Provider,{value:g,children:t})}function en(){return p.useContext(FC)}function Gn({children:t}){const{user:e,loading:n}=en();return n?null:e?t:l.jsx(Ql,{to:"/login",replace:!0})}function qC(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=qC(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function $C(){for(var t,e,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=qC(t))&&(i&&(i+=" "),i+=e);return i}const RL=(t,e)=>{const n=new Array(t.length+e.length);for(let i=0;i<t.length;i++)n[i]=t[i];for(let i=0;i<e.length;i++)n[t.length+i]=e[i];return n},OL=(t,e)=>({classGroupId:t,validator:e}),HC=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Nh="-",wN=[],IL="arbitrary..",ML=t=>{const e=kL(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return DL(d);const f=d.split(Nh),h=f[0]===""&&f.length>1?1:0;return GC(f,h,e)},getConflictingClassGroupIds:(d,f)=>{if(f){const h=i[d],g=n[d];return h?g?RL(g,h):h:g||wN}return n[d]||wN}}},GC=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const a=t[e],c=n.nextPart.get(a);if(c){const g=GC(t,e+1,c);if(g)return g}const d=n.validators;if(d===null)return;const f=e===0?t.join(Nh):t.slice(e).join(Nh),h=d.length;for(let g=0;g<h;g++){const y=d[g];if(y.validator(f))return y.classGroupId}},DL=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),i=e.slice(0,n);return i?IL+i:void 0})(),kL=t=>{const{theme:e,classGroups:n}=t;return PL(n,e)},PL=(t,e)=>{const n=HC();for(const i in t){const a=t[i];Tv(a,n,i,e)}return n},Tv=(t,e,n,i)=>{const a=t.length;for(let c=0;c<a;c++){const d=t[c];LL(d,e,n,i)}},LL=(t,e,n,i)=>{if(typeof t=="string"){UL(t,e,n);return}if(typeof t=="function"){VL(t,e,n,i);return}zL(t,e,n,i)},UL=(t,e,n)=>{const i=t===""?e:QC(e,t);i.classGroupId=n},VL=(t,e,n,i)=>{if(BL(t)){Tv(t(i),e,n,i);return}e.validators===null&&(e.validators=[]),e.validators.push(OL(n,t))},zL=(t,e,n,i)=>{const a=Object.entries(t),c=a.length;for(let d=0;d<c;d++){const[f,h]=a[d];Tv(h,QC(e,f),n,i)}},QC=(t,e)=>{let n=t;const i=e.split(Nh),a=i.length;for(let c=0;c<a;c++){const d=i[c];let f=n.nextPart.get(d);f||(f=HC(),n.nextPart.set(d,f)),n=f}return n},BL=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,FL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),i=Object.create(null);const a=(c,d)=>{n[c]=d,e++,e>t&&(e=0,i=n,n=Object.create(null))};return{get(c){let d=n[c];if(d!==void 0)return d;if((d=i[c])!==void 0)return a(c,d),d},set(c,d){c in n?n[c]=d:a(c,d)}}},iy="!",SN=":",qL=[],NN=(t,e,n,i,a)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:i,isExternal:a}),$L=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=a=>{const c=[];let d=0,f=0,h=0,g;const y=a.length;for(let E=0;E<y;E++){const j=a[E];if(d===0&&f===0){if(j===SN){c.push(a.slice(h,E)),h=E+1;continue}if(j==="/"){g=E;continue}}j==="["?d++:j==="]"?d--:j==="("?f++:j===")"&&f--}const v=c.length===0?a:a.slice(h);let b=v,N=!1;v.endsWith(iy)?(b=v.slice(0,-1),N=!0):v.startsWith(iy)&&(b=v.slice(1),N=!0);const T=g&&g>h?g-h:void 0;return NN(c,N,b,T)};if(e){const a=e+SN,c=i;i=d=>d.startsWith(a)?c(d.slice(a.length)):NN(qL,!1,d,void 0,!0)}if(n){const a=i;i=c=>n({className:c,parseClassName:a})}return i},HL=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,i)=>{e.set(n,1e6+i)}),n=>{const i=[];let a=[];for(let c=0;c<n.length;c++){const d=n[c],f=d[0]==="[",h=e.has(d);f||h?(a.length>0&&(a.sort(),i.push(...a),a=[]),i.push(d)):a.push(d)}return a.length>0&&(a.sort(),i.push(...a)),i}},GL=t=>({cache:FL(t.cacheSize),parseClassName:$L(t),sortModifiers:HL(t),...ML(t)}),QL=/\s+/,WL=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:c}=e,d=[],f=t.trim().split(QL);let h="";for(let g=f.length-1;g>=0;g-=1){const y=f[g],{isExternal:v,modifiers:b,hasImportantModifier:N,baseClassName:T,maybePostfixModifierPosition:E}=n(y);if(v){h=y+(h.length>0?" "+h:h);continue}let j=!!E,L=i(j?T.substring(0,E):T);if(!L){if(!j){h=y+(h.length>0?" "+h:h);continue}if(L=i(T),!L){h=y+(h.length>0?" "+h:h);continue}j=!1}const M=b.length===0?"":b.length===1?b[0]:c(b).join(":"),P=N?M+iy:M,V=P+L;if(d.indexOf(V)>-1)continue;d.push(V);const z=a(L,j);for(let G=0;G<z.length;++G){const C=z[G];d.push(P+C)}h=y+(h.length>0?" "+h:h)}return h},KL=(...t)=>{let e=0,n,i,a="";for(;e<t.length;)(n=t[e++])&&(i=WC(n))&&(a&&(a+=" "),a+=i);return a},WC=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=WC(t[i]))&&(n&&(n+=" "),n+=e);return n},YL=(t,...e)=>{let n,i,a,c;const d=h=>{const g=e.reduce((y,v)=>v(y),t());return n=GL(g),i=n.cache.get,a=n.cache.set,c=f,f(h)},f=h=>{const g=i(h);if(g)return g;const y=WL(h,n);return a(h,y),y};return c=d,(...h)=>c(KL(...h))},XL=[],Sn=t=>{const e=n=>n[t]||XL;return e.isThemeGetter=!0,e},KC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,YC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ZL=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,JL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,n6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,r6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oa=t=>ZL.test(t),tt=t=>!!t&&!Number.isNaN(Number(t)),la=t=>!!t&&Number.isInteger(Number(t)),x_=t=>t.endsWith("%")&&tt(t.slice(0,-1)),us=t=>JL.test(t),XC=()=>!0,i6=t=>e6.test(t)&&!t6.test(t),Av=()=>!1,s6=t=>n6.test(t),a6=t=>r6.test(t),o6=t=>!Ce(t)&&!je(t),l6=t=>Aa(t,ej,Av),Ce=t=>KC.test(t),eo=t=>Aa(t,tj,i6),EN=t=>Aa(t,g6,tt),c6=t=>Aa(t,rj,XC),u6=t=>Aa(t,nj,Av),CN=t=>Aa(t,ZC,Av),d6=t=>Aa(t,JC,a6),Af=t=>Aa(t,ij,s6),je=t=>YC.test(t),eu=t=>Eo(t,tj),f6=t=>Eo(t,nj),jN=t=>Eo(t,ZC),h6=t=>Eo(t,ej),m6=t=>Eo(t,JC),Rf=t=>Eo(t,ij,!0),p6=t=>Eo(t,rj,!0),Aa=(t,e,n)=>{const i=KC.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},Eo=(t,e,n=!1)=>{const i=YC.exec(t);return i?i[1]?e(i[1]):n:!1},ZC=t=>t==="position"||t==="percentage",JC=t=>t==="image"||t==="url",ej=t=>t==="length"||t==="size"||t==="bg-size",tj=t=>t==="length",g6=t=>t==="number",nj=t=>t==="family-name",rj=t=>t==="number"||t==="weight",ij=t=>t==="shadow",_6=()=>{const t=Sn("color"),e=Sn("font"),n=Sn("text"),i=Sn("font-weight"),a=Sn("tracking"),c=Sn("leading"),d=Sn("breakpoint"),f=Sn("container"),h=Sn("spacing"),g=Sn("radius"),y=Sn("shadow"),v=Sn("inset-shadow"),b=Sn("text-shadow"),N=Sn("drop-shadow"),T=Sn("blur"),E=Sn("perspective"),j=Sn("aspect"),L=Sn("ease"),M=Sn("animate"),P=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...V(),je,Ce],G=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto","contain","none"],w=()=>[je,Ce,h],S=()=>[oa,"full","auto",...w()],A=()=>[la,"none","subgrid",je,Ce],D=()=>["auto",{span:["full",la,je,Ce]},la,je,Ce],k=()=>[la,"auto",je,Ce],I=()=>["auto","min","max","fr",je,Ce],K=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...w()],B=()=>[oa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],Y=()=>[oa,"screen","full","dvw","lvw","svw","min","max","fit",...w()],Z=()=>[oa,"screen","full","lh","dvh","lvh","svh","min","max","fit",...w()],se=()=>[t,je,Ce],F=()=>[...V(),jN,CN,{position:[je,Ce]}],re=()=>["no-repeat",{repeat:["","x","y","space","round"]}],he=()=>["auto","cover","contain",h6,l6,{size:[je,Ce]}],pe=()=>[x_,eu,eo],ye=()=>["","none","full",g,je,Ce],we=()=>["",tt,eu,eo],me=()=>["solid","dashed","dotted","double"],Fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[tt,x_,jN,CN],Be=()=>["","none",T,je,Ce],et=()=>["none",tt,je,Ce],Ze=()=>["none",tt,je,Ce],it=()=>[tt,je,Ce],Mt=()=>[oa,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[us],breakpoint:[us],color:[XC],container:[us],"drop-shadow":[us],ease:["in","out","in-out"],font:[o6],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[us],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[us],shadow:[us],spacing:["px",tt],text:[us],"text-shadow":[us],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",oa,Ce,je,j]}],container:["container"],columns:[{columns:[tt,Ce,je,f]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:G()}],"overflow-x":[{"overflow-x":G()}],"overflow-y":[{"overflow-y":G()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:S()}],"inset-x":[{"inset-x":S()}],"inset-y":[{"inset-y":S()}],start:[{"inset-s":S(),start:S()}],end:[{"inset-e":S(),end:S()}],"inset-bs":[{"inset-bs":S()}],"inset-be":[{"inset-be":S()}],top:[{top:S()}],right:[{right:S()}],bottom:[{bottom:S()}],left:[{left:S()}],visibility:["visible","invisible","collapse"],z:[{z:[la,"auto",je,Ce]}],basis:[{basis:[oa,"full","auto",f,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,oa,"auto","initial","none",Ce]}],grow:[{grow:["",tt,je,Ce]}],shrink:[{shrink:["",tt,je,Ce]}],order:[{order:[la,"first","last","none",je,Ce]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:[...K(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...K()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":K()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pbs:[{pbs:w()}],pbe:[{pbe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mbs:[{mbs:R()}],mbe:[{mbe:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],"inline-size":[{inline:["auto",...Y()]}],"min-inline-size":[{"min-inline":["auto",...Y()]}],"max-inline-size":[{"max-inline":["none",...Y()]}],"block-size":[{block:["auto",...Z()]}],"min-block-size":[{"min-block":["auto",...Z()]}],"max-block-size":[{"max-block":["none",...Z()]}],w:[{w:[f,"screen",...B()]}],"min-w":[{"min-w":[f,"screen","none",...B()]}],"max-w":[{"max-w":[f,"screen","none","prose",{screen:[d]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",n,eu,eo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,p6,c6]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",x_,Ce]}],"font-family":[{font:[f6,u6,e]}],"font-features":[{"font-features":[Ce]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,je,Ce]}],"line-clamp":[{"line-clamp":[tt,"none",je,EN]}],leading:[{leading:[c,...w()]}],"list-image":[{"list-image":["none",je,Ce]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",je,Ce]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:se()}],"text-color":[{text:se()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",je,eo]}],"text-decoration-color":[{decoration:se()}],"underline-offset":[{"underline-offset":[tt,"auto",je,Ce]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je,Ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je,Ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:F()}],"bg-repeat":[{bg:re()}],"bg-size":[{bg:he()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},la,je,Ce],radial:["",je,Ce],conic:[la,je,Ce]},m6,d6]}],"bg-color":[{bg:se()}],"gradient-from-pos":[{from:pe()}],"gradient-via-pos":[{via:pe()}],"gradient-to-pos":[{to:pe()}],"gradient-from":[{from:se()}],"gradient-via":[{via:se()}],"gradient-to":[{to:se()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-bs":[{"border-bs":we()}],"border-w-be":[{"border-be":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:se()}],"border-color-x":[{"border-x":se()}],"border-color-y":[{"border-y":se()}],"border-color-s":[{"border-s":se()}],"border-color-e":[{"border-e":se()}],"border-color-bs":[{"border-bs":se()}],"border-color-be":[{"border-be":se()}],"border-color-t":[{"border-t":se()}],"border-color-r":[{"border-r":se()}],"border-color-b":[{"border-b":se()}],"border-color-l":[{"border-l":se()}],"divide-color":[{divide:se()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,je,Ce]}],"outline-w":[{outline:["",tt,eu,eo]}],"outline-color":[{outline:se()}],shadow:[{shadow:["","none",y,Rf,Af]}],"shadow-color":[{shadow:se()}],"inset-shadow":[{"inset-shadow":["none",v,Rf,Af]}],"inset-shadow-color":[{"inset-shadow":se()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:se()}],"ring-offset-w":[{"ring-offset":[tt,eo]}],"ring-offset-color":[{"ring-offset":se()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":se()}],"text-shadow":[{"text-shadow":["none",b,Rf,Af]}],"text-shadow-color":[{"text-shadow":se()}],opacity:[{opacity:[tt,je,Ce]}],"mix-blend":[{"mix-blend":[...Fe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Fe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":se()}],"mask-image-linear-to-color":[{"mask-linear-to":se()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":se()}],"mask-image-t-to-color":[{"mask-t-to":se()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":se()}],"mask-image-r-to-color":[{"mask-r-to":se()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":se()}],"mask-image-b-to-color":[{"mask-b-to":se()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":se()}],"mask-image-l-to-color":[{"mask-l-to":se()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":se()}],"mask-image-x-to-color":[{"mask-x-to":se()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":se()}],"mask-image-y-to-color":[{"mask-y-to":se()}],"mask-image-radial":[{"mask-radial":[je,Ce]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":se()}],"mask-image-radial-to-color":[{"mask-radial-to":se()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":V()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":se()}],"mask-image-conic-to-color":[{"mask-conic-to":se()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:F()}],"mask-repeat":[{mask:re()}],"mask-size":[{mask:he()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",je,Ce]}],filter:[{filter:["","none",je,Ce]}],blur:[{blur:Be()}],brightness:[{brightness:[tt,je,Ce]}],contrast:[{contrast:[tt,je,Ce]}],"drop-shadow":[{"drop-shadow":["","none",N,Rf,Af]}],"drop-shadow-color":[{"drop-shadow":se()}],grayscale:[{grayscale:["",tt,je,Ce]}],"hue-rotate":[{"hue-rotate":[tt,je,Ce]}],invert:[{invert:["",tt,je,Ce]}],saturate:[{saturate:[tt,je,Ce]}],sepia:[{sepia:["",tt,je,Ce]}],"backdrop-filter":[{"backdrop-filter":["","none",je,Ce]}],"backdrop-blur":[{"backdrop-blur":Be()}],"backdrop-brightness":[{"backdrop-brightness":[tt,je,Ce]}],"backdrop-contrast":[{"backdrop-contrast":[tt,je,Ce]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,je,Ce]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,je,Ce]}],"backdrop-invert":[{"backdrop-invert":["",tt,je,Ce]}],"backdrop-opacity":[{"backdrop-opacity":[tt,je,Ce]}],"backdrop-saturate":[{"backdrop-saturate":[tt,je,Ce]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,je,Ce]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",je,Ce]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",je,Ce]}],ease:[{ease:["linear","initial",L,je,Ce]}],delay:[{delay:[tt,je,Ce]}],animate:[{animate:["none",M,je,Ce]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[E,je,Ce]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:et()}],"rotate-x":[{"rotate-x":et()}],"rotate-y":[{"rotate-y":et()}],"rotate-z":[{"rotate-z":et()}],scale:[{scale:Ze()}],"scale-x":[{"scale-x":Ze()}],"scale-y":[{"scale-y":Ze()}],"scale-z":[{"scale-z":Ze()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[je,Ce,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Mt()}],"translate-x":[{"translate-x":Mt()}],"translate-y":[{"translate-y":Mt()}],"translate-z":[{"translate-z":Mt()}],"translate-none":["translate-none"],accent:[{accent:se()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:se()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je,Ce]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mbs":[{"scroll-mbs":w()}],"scroll-mbe":[{"scroll-mbe":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pbs":[{"scroll-pbs":w()}],"scroll-pbe":[{"scroll-pbe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je,Ce]}],fill:[{fill:["none",...se()]}],"stroke-w":[{stroke:[tt,eu,eo,EN]}],stroke:[{stroke:["none",...se()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},y6=YL(_6);function Ge(...t){return y6($C(t))}const Pe=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ge("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Pe.displayName="Card";const ut=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ge("flex flex-col space-y-1.5 p-6",t),...e}));ut.displayName="CardHeader";const dt=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ge("font-semibold leading-none tracking-tight",t),...e}));dt.displayName="CardTitle";const sj=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));sj.displayName="CardDescription";const ze=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ge("p-6 pt-0",t),...e}));ze.displayName="CardContent";const v6=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ge("flex items-center p-6 pt-0",t),...e}));v6.displayName="CardFooter";function TN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Bn(...t){return e=>{let n=!1;const i=t.map(a=>{const c=TN(a,e);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let a=0;a<i.length;a++){const c=i[a];typeof c=="function"?c():TN(t[a],null)}}}}function pt(...t){return p.useCallback(Bn(...t),t)}var b6=Symbol.for("react.lazy"),Eh=Uy[" use ".trim().toString()];function x6(t){return typeof t=="object"&&t!==null&&"then"in t}function aj(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===b6&&"_payload"in t&&x6(t._payload)}function oj(t){const e=S6(t),n=p.forwardRef((i,a)=>{let{children:c,...d}=i;aj(c)&&typeof Eh=="function"&&(c=Eh(c._payload));const f=p.Children.toArray(c),h=f.find(E6);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}var w6=oj("Slot");function S6(t){const e=p.forwardRef((n,i)=>{let{children:a,...c}=n;if(aj(a)&&typeof Eh=="function"&&(a=Eh(a._payload)),p.isValidElement(a)){const d=j6(a),f=C6(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var N6=Symbol("radix.slottable");function E6(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===N6}function C6(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function j6(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const AN=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,RN=$C,um=(t,e)=>n=>{var i;if(e?.variants==null)return RN(t,n?.class,n?.className);const{variants:a,defaultVariants:c}=e,d=Object.keys(a).map(g=>{const y=n?.[g],v=c?.[g];if(y===null)return null;const b=AN(y)||AN(v);return a[g][b]}),f=n&&Object.entries(n).reduce((g,y)=>{let[v,b]=y;return b===void 0||(g[v]=b),g},{}),h=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((g,y)=>{let{class:v,className:b,...N}=y;return Object.entries(N).every(T=>{let[E,j]=T;return Array.isArray(j)?j.includes({...c,...f}[E]):{...c,...f}[E]===j})?[...g,v,b]:g},[]);return RN(t,d,h,n?.class,n?.className)},T6=um("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),fe=p.forwardRef(({className:t,variant:e,size:n,asChild:i=!1,...a},c)=>{const d=i?w6:"button";return l.jsx(d,{className:Ge(T6({variant:e,size:n,className:t})),ref:c,...a})});fe.displayName="Button";const A6=um("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Rv=p.forwardRef(({className:t,variant:e,...n},i)=>l.jsx("div",{ref:i,role:"alert",className:Ge(A6({variant:e}),t),...n}));Rv.displayName="Alert";const lj=p.forwardRef(({className:t,...e},n)=>l.jsx("h5",{ref:n,className:Ge("mb-1 font-medium leading-none tracking-tight",t),...e}));lj.displayName="AlertTitle";const Ov=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ge("text-sm [&_p]:leading-relaxed",t),...e}));Ov.displayName="AlertDescription";const cj=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const R6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const O6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const ON=t=>{const e=O6(t);return e.charAt(0).toUpperCase()+e.slice(1)};var I6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const M6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const D6=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:c,iconNode:d,...f},h)=>p.createElement("svg",{ref:h,...I6,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:cj("lucide",a),...!c&&!M6(f)&&{"aria-hidden":"true"},...f},[...d.map(([g,y])=>p.createElement(g,y)),...Array.isArray(c)?c:[c]]));const ft=(t,e)=>{const n=p.forwardRef(({className:i,...a},c)=>p.createElement(D6,{ref:c,iconNode:e,className:cj(`lucide-${R6(ON(t))}`,`lucide-${t}`,i),...a}));return n.displayName=ON(t),n};const k6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],P6=ft("arrow-right",k6);const L6=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],U6=ft("badge-dollar-sign",L6);const V6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}]],sy=ft("ban",V6);const z6=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],B6=ft("boxes",z6);const F6=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],q6=ft("calculator",F6);const $6=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],H6=ft("check-check",$6);const G6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uj=ft("check",G6);const Q6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Iv=ft("chevron-down",Q6);const W6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],K6=ft("chevron-right",W6);const Y6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],X6=ft("chevron-up",Y6);const Z6=[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]],J6=ft("chevrons-up",Z6);const eU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tU=ft("circle-check",eU);const nU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rU=ft("circle",nU);const iU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],IN=ft("clipboard-list",iU);const sU=[["path",{d:"M11.35 22H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v5.35",key:"17jvcc"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M14 19h6",key:"bvotb8"}],["path",{d:"M17 16v6",key:"18yu1i"}]],aU=ft("file-plus-corner",sU);const oU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lU=ft("funnel",oU);const cU=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]],uU=ft("image-off",cU);const dU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fU=ft("info",dU);const hU=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],mU=ft("landmark",hU);const pU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ft=ft("loader-circle",pU);const gU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],MN=ft("log-out",gU);const _U=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],yU=ft("menu",_U);const vU=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"m10 8-3 3 3 3",key:"fp6dz7"}],["path",{d:"M17 14v-1a2 2 0 0 0-2-2H7",key:"1tkjnz"}]],bU=ft("message-square-reply",vU);const xU=[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]],wU=ft("messages-square",xU);const SU=[["path",{d:"M5 12h14",key:"1ays0h"}]],Mv=ft("minus",SU);const NU=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],dj=ft("package-check",NU);const EU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ch=ft("pencil",EU);const CU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dv=ft("plus",CU);const jU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ui=ft("save",jU);const TU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],AU=ft("shield-check",TU);const RU=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Wu=ft("shopping-cart",RU);const OU=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],IU=ft("tag",OU);const MU=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ar=ft("trash-2",MU);const DU=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],kv=ft("truck",DU);const kU=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],PU=ft("users",kU);const LU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dm=ft("x",LU);function UU(){const t=fr(),{user:e,refreshAccess:n}=en(),[i,a]=p.useState(!1),[c,d]=p.useState("");p.useEffect(()=>{e&&t("/products",{replace:!0})},[e,t]);async function f(){a(!0),d("");try{const h=new hs;h.setCustomParameters({prompt:"select_account"});const g=await Uk(Sl,h),y=String(g?.user?.email||"").trim().toLowerCase(),v=await n();if(!v?.ok){const b=String(v?.reason||"unknown");throw new Error(`Not authorized for ${y||"this account"}. reason=${b}`)}t("/products",{replace:!0})}catch(h){console.error("Login failed:",h),d(String(h?.message||"Google sign-in failed"))}finally{a(!1)}}return l.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white px-4 py-10",children:l.jsx("div",{className:"mx-auto flex min-h-[80vh] w-full max-w-md items-center",children:l.jsxs(Pe,{className:"w-full rounded-2xl border-slate-200 shadow-sm",children:[l.jsxs(ut,{className:"space-y-2",children:[l.jsx(dt,{className:"text-xl tracking-tight text-slate-900",children:"Sign in"}),l.jsx(sj,{children:"Continue with Google to access Brand Wala UK."})]}),l.jsxs(ze,{className:"space-y-4",children:[c?l.jsxs(Rv,{variant:"destructive",children:[l.jsx(lj,{children:"Sign-in error"}),l.jsx(Ov,{children:c})]}):null,l.jsx(fe,{type:"button",className:"w-full",onClick:f,disabled:i,children:i?l.jsxs(l.Fragment,{children:[l.jsx(Ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Continue with Google"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Your account must exist in Firestore `users` with `active=1`."})]})]})})})}const VU=15*1e3,ay=new Map,ou=new Map;function Ra(t){return String(t||"").trim().toLowerCase()}function fm(t){return String(t||"").trim()}function jh(t,e){return Ue(be,"carts",Ra(t),"items",fm(e))}function Th(t){return Math.max(6,Math.round(Number(t||0)||0))}function fj(t,e){const n=Math.max(1,Math.round(Number(e||1)||1)),i=Math.max(0,Math.round(Number(t||0)||0));return i===0?0:Math.max(n,Math.ceil(i/n)*n)}function hj(t){return qt(be,"carts",Ra(t),"items")}function hm(t){const e=Ra(t);e&&(ay.delete(e),ou.delete(e))}function Pv(t={},e=""){const n=String(t.product_id||e||"").trim(),i=Number(t.unit_price_gbp??t.price_gbp??t.price??0)||0,a=Number(t.case_size??0)||0,c=Th(Number(t.qty_step??a)),d=Number(t.quantity??0)||0;return{product_id:n,product_code:String(t.product_code||"").trim(),barcode:String(t.barcode||"").trim(),name:String(t.name||"").trim(),brand:String(t.brand||"").trim(),image_url:String(t.image_url||t.imageUrl||"").trim(),unit_price_gbp:i,price_gbp:i,case_size:a,qty_step:c,country_of_origin:String(t.country_of_origin||"").trim(),quantity:d,line_total_gbp:Number((i*d).toFixed(2))}}async function hl(t){const e=Ra(t);if(!e)return{items:[]};const n=Date.now(),i=ay.get(e);if(i&&n-i.ts<VU)return i.value;if(ou.has(e))return ou.get(e);const a=(async()=>{const f={items:(await $t(hj(e))).docs.map(h=>Pv(h.data(),h.id)).filter(h=>!!h.product_id&&h.quantity>0)};return ay.set(e,{ts:Date.now(),value:f}),f})();ou.set(e,a);try{return await a}finally{ou.delete(e)}}async function zU(t,e){const n=Ra(t),i=fm(e?.product_id);if(!n)throw new Error("Missing email");if(!i)throw new Error("Missing product_id");const a=Pv(e,i),c=Th(a.case_size),d=fj(a.quantity||c,c);return await zn(jh(n,i),{...a,quantity:d,qty_step:c,unit_price_gbp:a.unit_price_gbp,line_total_gbp:Number((a.unit_price_gbp*d).toFixed(2)),updated_at:Ie(),created_at:Ie()},{merge:!0}),hm(n),{success:!0}}async function BU(t,e,n,i={}){const a=Ra(t),c=fm(e);if(!a)throw new Error("Missing email");if(!c)throw new Error("Missing product_id");let d=Th(i?.qty_step??i?.case_size??0),f=Number(i?.unit_price_gbp??i?.price_gbp??0)||0;if(!i?.qty_step||!i?.unit_price_gbp){const g=await Vn(jh(a,c));if(g.exists()){const y=Pv(g.data(),c);i?.qty_step||(d=Th(y.qty_step||y.case_size)),i?.unit_price_gbp||(f=Number(y.unit_price_gbp||y.price_gbp||0)||0)}}const h=fj(n,d);return await gi(jh(a,c),{quantity:h,qty_step:d,line_total_gbp:Number((f*h).toFixed(2)),updated_at:Ie()}),hm(a),{success:!0}}async function FU(t,e){const n=Ra(t),i=fm(e);return!n||!i?{success:!0}:(await dr(jh(n,i)),hm(n),{success:!0})}async function DN(t){const e=Ra(t);if(!e)return{success:!0};const n=await $t(hj(e));return await Promise.all(n.docs.map(i=>dr(i.ref))),hm(e),{success:!0}}const Lv=15*1e3,oy=new Map,lu=new Map,Eu=new Map,jl=new Map,Ah=new Map,Tl=new Map;function Cs(t=""){const e=String(t||"").trim();oy.clear(),lu.clear(),e?(Eu.delete(e),jl.delete(e),Ah.delete(e),Tl.delete(e)):(Eu.clear(),jl.clear(),Ah.clear(),Tl.clear())}const mj=["draft","submitted","priced","under_review","finalized","processing","partially_delivered","delivered","cancelled"],qU={draft:["submitted","cancelled"],submitted:["priced","cancelled"],priced:["under_review","finalized","submitted","cancelled"],under_review:["priced","finalized","cancelled"],finalized:["under_review","processing","cancelled"],processing:["partially_delivered","delivered","cancelled"],partially_delivered:["processing","delivered","cancelled"],delivered:[],cancelled:[]};function Ku(t){return String(t||"").trim().toLowerCase()}function rt(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function lr(t){return Number((rt(t)||0).toFixed(2))}function ly(t){const e=String(t||"").trim().toLowerCase();return mj.includes(e)?e:""}function Uv(t,{role:e="admin",includeCurrent:n=!1}={}){const i=ly(t),a=String(e||"admin").toLowerCase();if(!i)return n?[...mj]:[];if(a!=="admin")return n?[i]:[];const c=qU[i]||[];return n?[i,...c]:[...c]}function $U(){const t=new Date().toISOString().replace(/[-:.TZ]/g,"").slice(0,14),e=Math.floor(Math.random()*9e5)+1e5;return`ORD_${t}_${e}`}function HU(t,e){const n=Math.max(0,rt(t?.ordered_quantity)),i=rt(t?.buy_price_gbp);return{order_item_id:String(t?.order_item_id||"").trim()||`${e+1}`,item_sl:e+1,product_id:String(t?.product_id||"").trim(),barcode:String(t?.barcode||"").trim(),brand:String(t?.brand||"").trim(),name:String(t?.name||"").trim(),image_url:String(t?.image_url||t?.imageUrl||"").trim(),case_size:rt(t?.case_size),ordered_quantity:n,buy_price_gbp:i,line_purchase_value_gbp:Number((n*i).toFixed(2))}}function pj(t,e){return{order_id:String(t?.order_id||e||""),order_name:String(t?.order_name||"Untitled"),creator_email:String(t?.creator_email||""),creator_name:String(t?.creator_name||""),creator_role:String(t?.creator_role||"customer"),status:String(t?.status||"submitted"),created_at:t?.created_at||null,updated_at:t?.updated_at||null,total_order_qty:rt(t?.total_order_qty),total_purchase_value_gbp:rt(t?.total_purchase_value_gbp),calculated_selling_price:t?.calculated_selling_price||null}}function GU(t,e){return{order_item_id:String(t?.order_item_id||e||""),item_sl:rt(t?.item_sl),product_id:String(t?.product_id||""),barcode:String(t?.barcode||""),brand:String(t?.brand||""),name:String(t?.name||""),image_url:String(t?.image_url||""),case_size:rt(t?.case_size),ordered_quantity:rt(t?.ordered_quantity),buy_price_gbp:rt(t?.buy_price_gbp),line_purchase_value_gbp:rt(t?.line_purchase_value_gbp),calculated_selling_price:t?.calculated_selling_price||null,pricing_snapshot:t?.pricing_snapshot||null,customer_offer:t?.customer_offer||null,customer_unit_gbp:t?.customer_unit_gbp,customer_unit_bdt:t?.customer_unit_bdt,customer_changed_quantity:t?.customer_changed_quantity,final_quantity:t?.final_quantity,final_unit_gbp:t?.final_unit_gbp,final_unit_bdt:t?.final_unit_bdt}}async function gj(t,e,n){const i=String(t||"").trim(),a=String(e||"").trim();if(!i||!a)return;const c=Math.max(0,Math.round(rt(n,0))),d=await $t(_n(qt(be,"shipment_allocations"),Jr("order_item_id","==",a)));if(d.empty)return;const f=d.docs.map(V=>({id:V.id,ref:V.ref,...V.data()||{}})).filter(V=>String(V.order_id||"").trim()===i);if(!f.length)return;const h=f.map(V=>Math.max(0,rt(V.arrived_qty,rt(V.shipped_qty,0)))),g=h.reduce((V,z)=>V+z,0),y=Math.max(c,Math.round(g)),N=f.map(V=>Math.max(0,rt(V.needed_qty,rt(V.allocated_qty,0)))).map((V,z)=>Math.max(0,V-h[z])).map(V=>V>0?V:1),T=N.reduce((V,z)=>V+z,0)||f.length,E=[...h];let j=Math.max(0,y-Math.round(g));const L=new Array(f.length).fill(0);for(let V=0;V<f.length&&!(j<=0);V+=1){const z=V===f.length-1?j:Math.floor(j*N[V]/T);L[V]+=Math.max(0,z)}let M=L.reduce((V,z)=>V+z,0);for(;M<j;)for(let V=0;V<f.length&&M<j;V+=1)L[V]+=1,M+=1;for(let V=0;V<f.length;V+=1)E[V]=Math.max(h[V],Math.round(h[V]+L[V]));const P=Zl(be);f.forEach((V,z)=>{const G=E[z],C=rt(V.unit_total_weight,rt(V.unit_product_weight,0)+rt(V.unit_package_weight,0)),w=G*C;P.set(V.ref,{needed_qty:G,allocated_qty:G,needed_weight:w,allocated_weight:w,updated_at:Ie()},{merge:!0})}),await P.commit()}async function _j(t){const e=String(t||"").trim();if(!e)return;const n=await $t(qt(be,"orders",e,"items"));let i=0,a=0;n.docs.forEach(c=>{const d=c.data()||{},f=Math.max(0,rt(d?.ordered_quantity,0)),h=rt(d?.line_purchase_value_gbp,rt(d?.buy_price_gbp,0)*f);i+=f,a+=h}),await zn(Ue(be,"orders",e),{total_order_qty:Math.round(i),total_purchase_value_gbp:lr(a),updated_at:Ie()},{merge:!0})}async function QU({email:t,creator_name:e,creator_role:n,order_name:i,items:a=[]}){const c=Ku(t);if(!c)throw new Error("Missing user email");if(!String(i||"").trim())throw new Error("Missing order name");if(!Array.isArray(a)||a.length===0)throw new Error("Cart is empty");const d=$U(),f=a.map((b,N)=>HU(b,N)).filter(b=>b.ordered_quantity>0&&b.product_id);if(!f.length)throw new Error("No valid order items");const h=f.reduce((b,N)=>b+N.ordered_quantity,0),g=Number(f.reduce((b,N)=>b+N.line_purchase_value_gbp,0).toFixed(2)),y=Ue(be,"orders",d),v=Zl(be);return v.set(y,{order_id:d,order_name:String(i).trim(),creator_email:c,creator_name:String(e||"").trim(),creator_role:String(n).toLowerCase(),status:"submitted",total_order_qty:h,total_purchase_value_gbp:g,created_at:Ie(),updated_at:Ie()}),f.forEach(b=>{const N=`${d}-${b.item_sl}`;v.set(Ue(be,"orders",d,"items",N),{...b,order_item_id:N,order_id:d,created_at:Ie(),updated_at:Ie()})}),await v.commit(),Cs(d),{order_id:d}}async function Vv({email:t,role:e}){const n=Ku(t),i=String(e||"customer").toLowerCase();if(!n)return[];const a=`${i}::${n}`,c=Date.now(),d=oy.get(a);if(d&&c-d.ts<Lv)return d.value;if(lu.has(a))return lu.get(a);const f=(async()=>{const h=qt(be,"orders"),g=i==="admin"?_n(h,pi("created_at","desc")):_n(h,Jr("creator_email","==",n)),v=(await $t(g)).docs.map(b=>pj(b.data(),b.id));return i!=="admin"&&v.sort((b,N)=>String(N.order_id||"").localeCompare(String(b.order_id||""))),oy.set(a,{ts:Date.now(),value:v}),v.forEach(b=>{const N=String(b.order_id||"").trim();N&&Eu.set(N,{ts:Date.now(),value:b})}),v})();lu.set(a,f);try{return await f}finally{lu.delete(a)}}async function zv({email:t,role:e,order_id:n}){const i=Ku(t),a=String(e||"customer").toLowerCase();if(!i||!n)return null;const c=String(n),d=Date.now(),f=Eu.get(c);let h=f&&d-f.ts<Lv?f.value:null;if(!h){if(jl.has(c))h=await jl.get(c);else{const g=(async()=>{const y=Ue(be,"orders",c),v=await Vn(y);return v.exists()?pj(v.data(),v.id):null})();jl.set(c,g);try{h=await g}finally{jl.delete(c)}}Eu.set(c,{ts:Date.now(),value:h})}return!h||a!=="admin"&&h.creator_email!==i?null:h}async function Ii({email:t,role:e,order_id:n}){const i=await zv({email:t,role:e,order_id:n});if(!i)return{order:null,items:[]};const a=String(n||"").trim(),c=Date.now(),d=Ah.get(a);let f=d&&c-d.ts<Lv?d.value:null;if(!f){if(Tl.has(a))f=await Tl.get(a);else{const h=(async()=>(await $t(_n(qt(be,"orders",a,"items"),pi("item_sl","asc")))).docs.map(y=>GU(y.data(),y.id)))();Tl.set(a,h);try{f=await h}finally{Tl.delete(a)}}Ah.set(a,{ts:Date.now(),value:f})}return{order:i,items:f}}async function kN({order_id:t,price_mode:e,profit_rate_pct:n,customer_price_currency:i,update_order_meta:a=!0,rows:c=[]}){const d=String(t||"").trim();if(!d)throw new Error("Missing order_id");if(!Array.isArray(c)||c.length===0)throw new Error("No rows to save");const f=String(e||"purchase"),h=rt(n,0),g=Zl(be);if(c.forEach(y=>{const v=String(y?.order_item_id||"").trim();if(!v)return;const b=Ue(be,"orders",d,"items",v);g.set(b,{pricing_snapshot:{initial_unit_gbp:lr(y.initial_unit_gbp),initial_unit_bdt:Math.round(rt(y.initial_unit_bdt)),initial_plus_cargo_unit_gbp:lr(y.initial_plus_cargo_unit_gbp??rt(y.initial_unit_gbp)+rt(y.cargo_unit_gbp)),initial_plus_cargo_unit_bdt:Math.round(rt(y.initial_plus_cargo_unit_bdt)),calculated_offer_unit_gbp:lr(y.calculated_offer_unit_gbp??y.selling_unit_gbp),calculated_offer_unit_bdt:Math.round(rt(y.calculated_offer_unit_bdt,y.selling_unit_bdt)),offer_unit_gbp:lr(y.offer_unit_gbp??y.offered_product_unit_gbp),offer_unit_bdt:Math.round(rt(y.offer_unit_bdt,y.offered_product_unit_bdt)),customer_counter_unit_gbp:y.customer_counter_unit_gbp??null,customer_counter_unit_bdt:y.customer_counter_unit_bdt??null,final_unit_gbp:y.final_unit_gbp??null,final_unit_bdt:y.final_unit_bdt??null,updated_at:Ie()},calculated_selling_price:{mode:f,profit_rate_pct:h,offered_product_unit_gbp:lr(y.offered_product_unit_gbp),offered_product_unit_bdt:Math.round(rt(y.offered_product_unit_bdt)),cargo_unit_gbp:lr(y.cargo_unit_gbp),cargo_unit_bdt:Math.round(rt(y.cargo_unit_bdt)),selling_unit_gbp:lr(y.selling_unit_gbp),selling_unit_bdt:Math.round(rt(y.selling_unit_bdt)),updated_at:Ie()},updated_at:Ie()},{merge:!0})}),a){const y=Ue(be,"orders",d);g.set(y,{calculated_selling_price:{mode:f,profit_rate_pct:h,...i?{customer_price_currency:String(i).toLowerCase()==="gbp"?"gbp":"bdt"}:{},updated_at:Ie()},updated_at:Ie()},{merge:!0})}return await g.commit(),Cs(d),{success:!0,saved:c.length}}async function WU({order_id:t,currency:e}){const n=String(t||"").trim();if(!n)throw new Error("Missing order_id");const i=String(e).toLowerCase()==="gbp"?"gbp":"bdt";return await zn(Ue(be,"orders",n),{calculated_selling_price:{customer_price_currency:i,updated_at:Ie()},updated_at:Ie()},{merge:!0}),Cs(n),{success:!0,currency:i}}async function yj({order_id:t,status:e}){const n=String(t||"").trim(),i=ly(e);if(!n)throw new Error("Missing order_id");if(!i)throw new Error("Invalid status");const a=Ue(be,"orders",n),c=await Vn(a);if(!c.exists())throw new Error("Order not found");const d=ly(c.data()?.status)||"submitted";if(d===i)return{success:!0,status:i};if(!Uv(d,{role:"admin"}).includes(i))throw new Error(`Invalid status transition: ${d} -> ${i}`);return await zn(a,{status:i,updated_at:Ie()},{merge:!0}),Cs(n),{success:!0,status:i}}async function KU({email:t,order_id:e,decision:n,currency:i,offers:a=[]}){const c=Ku(t),d=String(e||"").trim(),f=String(n).toLowerCase(),h=String(i).toLowerCase()==="gbp"?"gbp":"bdt";if(!c)throw new Error("Missing user email");if(!d)throw new Error("Missing order_id");if(f!=="accept"&&f!=="negotiate")throw new Error("Invalid decision");if(!Array.isArray(a)||a.length===0)throw new Error("No offers provided");const g=await zv({email:c,role:"customer",order_id:d});if(!g)throw new Error("Order not found or not permitted");if(String(g.status||"").toLowerCase()!=="priced")throw new Error("Order is not in priced status");const v=Zl(be);a.forEach(N=>{const T=String(N?.order_item_id||"").trim();if(!T)return;const E=h==="gbp"?lr(N?.unit_price):Math.round(rt(N?.unit_price));v.set(Ue(be,"orders",d,"items",T),{customer_offer:{decision:f,currency:h,unit_price:E,updated_at:Ie()},...h==="gbp"?{customer_unit_gbp:E}:{customer_unit_bdt:E},updated_at:Ie()},{merge:!0})});const b=f==="accept"?"finalized":"under_review";return v.set(Ue(be,"orders",d),{status:b,customer_pricing_decision:{decision:f,currency:h,updated_at:Ie()},updated_at:Ie()},{merge:!0}),await v.commit(),Cs(d),{success:!0,status:b}}async function YU({email:t,order_id:e,order_item_id:n,currency:i,unit_price:a,decision:c="negotiate",customer_changed_quantity:d}){const f=Ku(t),h=String(e||"").trim(),g=String(n||"").trim(),y=String(i).toLowerCase()==="gbp"?"gbp":"bdt",v=String(c||"negotiate").toLowerCase();if(!f)throw new Error("Missing user email");if(!h)throw new Error("Missing order_id");if(!g)throw new Error("Missing order_item_id");const b=await zv({email:f,role:"customer",order_id:h});if(!b)throw new Error("Order not found or not permitted");const N=String(b.status||"").toLowerCase();if(N!=="priced"&&N!=="under_review")throw new Error("Order is not open for customer pricing");const T=y==="gbp"?lr(a):Math.round(rt(a));return await zn(Ue(be,"orders",h,"items",g),{customer_offer:{decision:v,currency:y,unit_price:T,updated_at:Ie()},...y==="gbp"?{customer_unit_gbp:T}:{customer_unit_bdt:T},pricing_snapshot:{...y==="gbp"?{customer_counter_unit_gbp:T}:{customer_counter_unit_bdt:T},updated_at:Ie()},...d!==void 0?{customer_changed_quantity:Math.max(0,Math.round(rt(d,0)))}:{},updated_at:Ie()},{merge:!0}),d!==void 0&&await gj(h,g,d),Cs(h),{success:!0}}async function XU({order_id:t,order_item_id:e,final_quantity:n,final_unit_gbp:i,final_unit_bdt:a,note:c}){const d=String(t||"").trim(),f=String(e||"").trim();if(!d)throw new Error("Missing order_id");if(!f)throw new Error("Missing order_item_id");const h=Math.max(0,Math.round(rt(n,0))),g=lr(i),y=Math.round(rt(a,0)),v=Ue(be,"orders",d,"items",f),b=await Vn(v),N=b.exists()?b.data():{},T=lr(rt(N?.buy_price_gbp,0));return await zn(v,{ordered_quantity:h,customer_changed_quantity:h,line_purchase_value_gbp:lr(T*h),final_quantity:h,final_unit_gbp:g,final_unit_bdt:y,pricing_snapshot:{final_unit_gbp:g,final_unit_bdt:y,updated_at:Ie()},final_line_gbp:lr(g*h),final_line_bdt:Math.round(y*h),...c!==void 0?{final_note:String(c||"").trim()}:{},updated_at:Ie()},{merge:!0}),await gj(d,f,h),await _j(d),Cs(d),{success:!0}}async function ZU({order_id:t,order_item_id:e}){const n=String(t||"").trim(),i=String(e||"").trim();if(!n)throw new Error("Missing order_id");if(!i)throw new Error("Missing order_item_id");return await dr(Ue(be,"orders",n,"items",i)),await _j(n),Cs(n),{success:!0}}async function JU({order_id:t}){const e=String(t||"").trim();if(!e)throw new Error("Missing order_id");const n=Ue(be,"orders",e),i=await Vn(n);if(!i.exists())throw new Error("Order not found");if(String(i.data()?.status||"").toLowerCase()!=="cancelled")throw new Error("Only cancelled orders can be deleted");const c=await $t(qt(be,"orders",e,"items")),d=await $t(_n(qt(be,"shipment_allocations"),Jr("order_id","==",e)));return await Promise.all([...c.docs.map(f=>dr(f.ref)),...d.docs.map(f=>dr(f.ref))]),await dr(n),Cs(e),{success:!0}}const vj=p.createContext(null);function di(t){return Math.max(6,Number(t?.case_size||0))}function Rh(t,e){const n=Math.max(1,Math.round(Number(e||1)||1)),i=Math.max(0,Math.round(Number(t||0)||0));return i===0?0:Math.max(n,Math.ceil(i/n)*n)}function e5(t){return String(t?.product_id||t?.productId||"").trim()}function t5(t,e){switch(e.type){case"OPEN":return{...t,open:!0};case"CLOSE":return{...t,open:!1};case"TOGGLE":return{...t,open:!t.open};case"SET_ITEMS":{const n={};for(const i of e.items||[]){const a=String(i.product_id||i.productId||"").trim();if(!a)continue;const c={product_id:a,product_code:i.product_code||"",barcode:i.barcode||"",brand:i.brand||"",name:i.name||"",imageUrl:i.image_url||i.imageUrl||"",price:Number(i.price_gbp??i.price??0)||0,case_size:Number(i.case_size??0)||0,country_of_origin:i.country_of_origin||""},d=di(c);n[a]={product:c,qty:Rh(Number(i.quantity||0)||d,d)}}return{...t,items:n}}case"SET_ITEM_LOADING":{const{key:n,op:i}=e,a={...t.itemLoading};return i?a[n]=i:delete a[n],{...t,itemLoading:a}}case"SET_GLOBAL_LOADING":return{...t,loading:!!e.loading};case"SET_ORDER_LOADING":return{...t,orderLoading:!!e.loading};case"ADD_LOCAL":{const n=e.product,i=e.key,a=di(n),c=Number(e.qty??a),d=Rh(c,a);return{...t,items:{...t.items,[i]:{product:n,qty:d}}}}case"REMOVE_LOCAL":{const n={...t.items};return delete n[e.key],{...t,items:n}}case"UPDATE_QTY_LOCAL":{const n=t.items[e.key];return n?{...t,items:{...t.items,[e.key]:{...n,qty:e.qty}}}:t}case"CLEAR_LOCAL":return{...t,items:{}};default:return t}}const n5={open:!1,loading:!1,orderLoading:!1,itemLoading:{},items:{}};function r5({children:t}){const n=en()?.user,[i,a]=p.useReducer(t5,n5),c=n?.email||"",d=String(n?.role||"customer").toLowerCase(),f=!!n?.can_use_cart&&d!=="customer";p.useEffect(()=>{let g=!0;async function y(){if(!c||!f){a({type:"SET_ITEMS",items:[]}),a({type:"CLOSE"});return}a({type:"SET_GLOBAL_LOADING",loading:!0});try{const v=await hl(c);if(!g)return;a({type:"SET_ITEMS",items:v.items||[]})}catch(v){const b=String(v?.code||""),N=String(v?.message||"");b.includes("permission-denied")||N.includes("Missing or insufficient permissions")||console.error("cartGetItems failed:",v),g&&(a({type:"SET_ITEMS",items:[]}),a({type:"CLOSE"}))}finally{g&&a({type:"SET_GLOBAL_LOADING",loading:!1})}}return y(),()=>{g=!1}},[f,c]);const h=p.useMemo(()=>{const g=Object.entries(i.items).map(([z,G])=>({key:z,...G})),y=z=>e5(z),v=z=>i.itemLoading[z]||null,b=async(z,G)=>{if(!f)throw new Error("Cart is disabled for your account");if(!c)throw new Error("No user email");const C=y(z);if(!C)throw new Error("Missing product_id on product");if(!i.itemLoading[C]){a({type:"SET_ITEM_LOADING",key:C,op:"add"});try{const w=di(z),S=Rh(G,w);await zU(c,{product_id:z.product_id,product_code:z.product_code,barcode:z.barcode,name:z.name,brand:z.brand,imageUrl:z.imageUrl,unit_price_gbp:Number(z.price||0),price:z.price,case_size:z.case_size,qty_step:w,quantity:S}),a({type:"ADD_LOCAL",key:C,product:z,qty:S})}catch(w){console.error("cartAddItem failed:",w);try{const S=await hl(c);a({type:"SET_ITEMS",items:S.items||[]})}catch{}throw w}finally{a({type:"SET_ITEM_LOADING",key:C,op:null})}}},N=async z=>{if(!f)throw new Error("Cart is disabled for your account");if(!c)throw new Error("No user email");const G=String(z||"").trim();if(G&&!i.itemLoading[G]){a({type:"SET_ITEM_LOADING",key:G,op:"remove"});try{await FU(c,G),a({type:"REMOVE_LOCAL",key:G})}catch(C){console.error("cartDeleteItem failed:",C);try{const w=await hl(c);a({type:"SET_ITEMS",items:w.items||[]})}catch{}throw C}finally{a({type:"SET_ITEM_LOADING",key:G,op:null})}}},T=async(z,G)=>{if(!f)throw new Error("Cart is disabled for your account");if(!c)throw new Error("No user email");const C=String(z||"").trim(),w=i.items[C];if(!w||i.itemLoading[C])return;const S=di(w.product),A=Rh(Number(G||0)||0,S);a({type:"SET_ITEM_LOADING",key:C,op:"update"}),a({type:"UPDATE_QTY_LOCAL",key:C,qty:A});try{await BU(c,C,A,{qty_step:S,case_size:Number(w.product?.case_size||0),unit_price_gbp:Number(w.product?.price||0)})}catch(D){console.error("cartUpdateItem failed:",D);try{const k=await hl(c);a({type:"SET_ITEMS",items:k.items||[]})}catch{}throw D}finally{a({type:"SET_ITEM_LOADING",key:C,op:null})}},E=T,j=z=>{const G=String(z||"").trim(),C=i.items[G];if(!C)return;const w=di(C.product);return T(G,C.qty+w)},L=z=>{const G=String(z||"").trim(),C=i.items[G];if(!C)return;const w=di(C.product);return T(G,Math.max(w,C.qty-w))},M=async()=>{if(!f)throw new Error("Cart is disabled for your account");if(!c)throw new Error("No user email");a({type:"SET_GLOBAL_LOADING",loading:!0}),a({type:"CLEAR_LOCAL"});try{await DN(c)}catch(z){console.error("cartClear failed:",z);try{const G=await hl(c);a({type:"SET_ITEMS",items:G.items||[]})}catch{}throw z}finally{a({type:"SET_GLOBAL_LOADING",loading:!1})}},P=async()=>{if(f&&c){a({type:"SET_GLOBAL_LOADING",loading:!0});try{const z=await hl(c);a({type:"SET_ITEMS",items:z.items||[]})}finally{a({type:"SET_GLOBAL_LOADING",loading:!1})}}},V=async z=>{if(!f)throw new Error("Cart is disabled for your account");if(!c)throw new Error("No user email");const G=String(z||"").trim();if(!G)throw new Error("Missing order_name");if(!i.orderLoading){a({type:"SET_ORDER_LOADING",loading:!0});try{const C=g.map((S,A)=>({item_sl:A+1,product_id:String(S.product?.product_id||""),barcode:String(S.product?.barcode||""),brand:String(S.product?.brand||""),name:String(S.product?.name||""),image_url:String(S.product?.imageUrl||""),case_size:Number(S.product?.case_size||0),ordered_quantity:Number(S.qty||0),buy_price_gbp:Number(S.product?.price||0)})),w=await QU({email:c,creator_name:n?.name||"",creator_role:n?.role||"customer",order_name:G,items:C});return await DN(c),a({type:"SET_ITEMS",items:[]}),w}finally{a({type:"SET_ORDER_LOADING",loading:!1})}}};return{open:i.open,loading:i.loading,orderLoading:i.orderLoading,items:g,distinctCount:g.length,getKey:y,isInCart:z=>{const G=y(z);return!!(G&&i.items[G])},isItemLoading:z=>{const G=typeof z=="string"?z:y(z);return!!v(G)},getItemLoadingOp:z=>{const G=typeof z=="string"?z:y(z);return v(G)},openCart:()=>a({type:"OPEN"}),closeCart:()=>a({type:"CLOSE"}),toggleCart:()=>a({type:"TOGGLE"}),add:b,remove:N,setQty:T,updateQty:E,inc:j,dec:L,clear:M,refresh:P,createOrder:V}},[f,c,i.items,i.itemLoading,i.loading,i.open,i.orderLoading,n?.name,n?.role]);return l.jsx(vj.Provider,{value:h,children:t})}function mm(){const t=p.useContext(vj);if(!t)throw new Error("useCart must be used within <CartProvider />");return t}const i5=um("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Un({className:t,variant:e,...n}){return l.jsx("div",{className:Ge(i5({variant:e}),t),...n})}var s5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pm=s5.reduce((t,e)=>{const n=oj(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),a5="Separator",PN="horizontal",o5=["horizontal","vertical"],bj=p.forwardRef((t,e)=>{const{decorative:n,orientation:i=PN,...a}=t,c=l5(i)?i:PN,f=n?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return l.jsx(pm.div,{"data-orientation":c,...f,...a,ref:e})});bj.displayName=a5;function l5(t){return o5.includes(t)}var xj=bj;const gm=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...i},a)=>l.jsx(xj,{ref:a,decorative:n,orientation:e,className:Ge("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...i}));gm.displayName=xj.displayName;function c5(t){if(!t)return"";const e=t.match(/[?&]id=([^&]+)/),n=t.match(/\/file\/d\/([^/]+)/),i=e?.[1]||n?.[1];return i?`https://lh3.googleusercontent.com/d/${i}`:t}function u5(t){const e=String(t?.product_id||t?.productId||"").trim();if(e)return e;const n=String(t?.product_code||t?.productCode||"").trim(),i=String(t?.barcode||"").trim();return n&&i?`${n}_${i}`:""}function d5({product:t}){const{user:e}=en(),n=String(e?.role||"customer").toLowerCase(),i=!!e?.can_see_price_gbp,a=!!e?.can_use_cart&&n!=="customer",{add:c,remove:d,isInCart:f,getKey:h,getItemLoadingOp:g}=mm(),y=p.useMemo(()=>{const G=u5(t);return G?{...t,product_id:G}:t},[t]),v=c5(y.imageUrl),b=di(y),N=h(y),T=f(y),E=g?.(N),j=!!E,[L,M]=p.useState(b);p.useEffect(()=>{M(b)},[b,N]);const P=()=>M(G=>Math.max(b,G-b)),V=()=>M(G=>G+b),z=j||!N;return l.jsxs(Pe,{className:"group overflow-hidden rounded-2xl border-border bg-card shadow-sm transition hover:shadow-md",children:[l.jsx("div",{className:"flex h-48 items-center justify-center bg-white p-2",children:v?l.jsx("img",{src:v,alt:y.name,className:"h-[88%] w-[88%] object-contain transition duration-300 group-hover:scale-105",loading:"lazy",referrerPolicy:"no-referrer",onError:G=>{if(G.currentTarget.dataset.fallbackTried!=="1"){G.currentTarget.dataset.fallbackTried="1",G.currentTarget.src=y.imageUrl;return}G.currentTarget.style.display="none"}}):l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(uU,{className:"h-4 w-4"}),l.jsx("span",{children:"No image"})]})}),l.jsxs(ze,{className:"p-4",children:[l.jsx("div",{className:"text-xs font-medium uppercase tracking-wide text-muted-foreground",children:y.brand}),l.jsx("h3",{className:"mt-1 line-clamp-2 text-sm font-semibold text-foreground",children:y.name}),l.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i?l.jsxs("span",{className:"text-lg font-bold text-foreground",children:["",Number(y.price??0).toFixed(2)]}):l.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Login to see price"}),l.jsxs(Un,{variant:"secondary",className:"rounded-full",children:["Case ",b]})]}),a?T?l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx(fe,{type:"button",variant:"destructive",size:"icon",onClick:()=>d(N),disabled:j,className:"h-9 w-9 rounded-xl",title:"Delete from cart","aria-label":"Delete from cart",children:E==="remove"?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(Ar,{className:"h-4 w-4"})})}):l.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center rounded-xl border border-input bg-background",children:[l.jsx(fe,{type:"button",variant:"ghost",size:"icon",onClick:P,disabled:j,className:"h-9 w-9 rounded-l-xl",title:`- ${b}`,"aria-label":"Decrease quantity",children:l.jsx(Mv,{className:"h-4 w-4"})}),l.jsx("div",{className:"min-w-[56px] px-2 text-center text-sm font-semibold text-foreground",children:L}),l.jsx(fe,{type:"button",variant:"ghost",size:"icon",onClick:V,disabled:j,className:"h-9 w-9 rounded-r-xl",title:`+ ${b}`,"aria-label":"Increase quantity",children:l.jsx(Dv,{className:"h-4 w-4"})})]}),l.jsxs(fe,{type:"button",onClick:()=>c(y,L),disabled:z,className:Ge("rounded-xl","gap-2"),title:N?"Add to cart":"Missing product_id",children:[E==="add"?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(Wu,{className:"h-4 w-4"}),E==="add"?"Adding...":"Add"]})]}):l.jsx("div",{className:"mt-4 rounded-xl border border-dashed border-border px-3 py-2 text-xs text-muted-foreground",children:n==="customer"?"Ordering is disabled for customer for now.":"Cart is disabled for your account."}),l.jsx(gm,{className:"my-3"}),l.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[l.jsxs("div",{children:["Product ID: ",y.product_id||""]}),l.jsxs("div",{children:["Barcode: ",y.barcode||""]}),l.jsxs("div",{children:["Origin: ",y.country_of_origin||""]})]})]})]})}const He=p.forwardRef(({className:t,type:e,...n},i)=>l.jsx("input",{type:e,className:Ge("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:i,...n}));He.displayName="Input";function cy(t,[e,n]){return Math.min(n,Math.max(e,t))}function Te(t,e,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t?.(a),n===!1||!a.defaultPrevented)return e?.(a)}}function f5(t,e){const n=p.createContext(e),i=c=>{const{children:d,...f}=c,h=p.useMemo(()=>f,Object.values(f));return l.jsx(n.Provider,{value:h,children:d})};i.displayName=t+"Provider";function a(c){const d=p.useContext(n);if(d)return d;if(e!==void 0)return e;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[i,a]}function Oa(t,e=[]){let n=[];function i(c,d){const f=p.createContext(d),h=n.length;n=[...n,d];const g=v=>{const{scope:b,children:N,...T}=v,E=b?.[t]?.[h]||f,j=p.useMemo(()=>T,Object.values(T));return l.jsx(E.Provider,{value:j,children:N})};g.displayName=c+"Provider";function y(v,b){const N=b?.[t]?.[h]||f,T=p.useContext(N);if(T)return T;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[g,y]}const a=()=>{const c=n.map(d=>p.createContext(d));return function(f){const h=f?.[t]||c;return p.useMemo(()=>({[`__scope${t}`]:{...f,[t]:h}}),[f,h])}};return a.scopeName=t,[i,h5(a,...e)]}function h5(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const d=i.reduce((f,{useScope:h,scopeName:g})=>{const v=h(c)[`__scope${g}`];return{...f,...v}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}function LN(t){const e=m5(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(g5);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function m5(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=y5(a),f=_5(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var p5=Symbol("radix.slottable");function g5(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===p5}function _5(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function y5(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Bv(t){const e=t+"CollectionProvider",[n,i]=Oa(e),[a,c]=n(e,{collectionRef:{current:null},itemMap:new Map}),d=E=>{const{scope:j,children:L}=E,M=pa.useRef(null),P=pa.useRef(new Map).current;return l.jsx(a,{scope:j,itemMap:P,collectionRef:M,children:L})};d.displayName=e;const f=t+"CollectionSlot",h=LN(f),g=pa.forwardRef((E,j)=>{const{scope:L,children:M}=E,P=c(f,L),V=pt(j,P.collectionRef);return l.jsx(h,{ref:V,children:M})});g.displayName=f;const y=t+"CollectionItemSlot",v="data-radix-collection-item",b=LN(y),N=pa.forwardRef((E,j)=>{const{scope:L,children:M,...P}=E,V=pa.useRef(null),z=pt(j,V),G=c(y,L);return pa.useEffect(()=>(G.itemMap.set(V,{ref:V,...P}),()=>{G.itemMap.delete(V)})),l.jsx(b,{[v]:"",ref:z,children:M})});N.displayName=y;function T(E){const j=c(t+"CollectionConsumer",E);return pa.useCallback(()=>{const M=j.collectionRef.current;if(!M)return[];const P=Array.from(M.querySelectorAll(`[${v}]`));return Array.from(j.itemMap.values()).sort((G,C)=>P.indexOf(G.ref.current)-P.indexOf(C.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:d,Slot:g,ItemSlot:N},T,i]}var v5=p.createContext(void 0);function _m(t){const e=p.useContext(v5);return t||e||"ltr"}function b5(t){const e=x5(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(S5);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function x5(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=E5(a),f=N5(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var w5=Symbol("radix.slottable");function S5(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===w5}function N5(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function E5(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var C5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wj=C5.reduce((t,e)=>{const n=b5(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function j5(t,e){t&&Wl.flushSync(()=>t.dispatchEvent(e))}function Rn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>e.current?.(...n),[])}function T5(t,e=globalThis?.document){const n=Rn(t);p.useEffect(()=>{const i=a=>{a.key==="Escape"&&n(a)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var A5="DismissableLayer",uy="dismissableLayer.update",R5="dismissableLayer.pointerDownOutside",O5="dismissableLayer.focusOutside",UN,Sj=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ym=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:c,onInteractOutside:d,onDismiss:f,...h}=t,g=p.useContext(Sj),[y,v]=p.useState(null),b=y?.ownerDocument??globalThis?.document,[,N]=p.useState({}),T=pt(e,C=>v(C)),E=Array.from(g.layers),[j]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),L=E.indexOf(j),M=y?E.indexOf(y):-1,P=g.layersWithOutsidePointerEventsDisabled.size>0,V=M>=L,z=D5(C=>{const w=C.target,S=[...g.branches].some(A=>A.contains(w));!V||S||(a?.(C),d?.(C),C.defaultPrevented||f?.())},b),G=k5(C=>{const w=C.target;[...g.branches].some(A=>A.contains(w))||(c?.(C),d?.(C),C.defaultPrevented||f?.())},b);return T5(C=>{M===g.layers.size-1&&(i?.(C),!C.defaultPrevented&&f&&(C.preventDefault(),f()))},b),p.useEffect(()=>{if(y)return n&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(UN=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(y)),g.layers.add(y),VN(),()=>{n&&g.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=UN)}},[y,b,n,g]),p.useEffect(()=>()=>{y&&(g.layers.delete(y),g.layersWithOutsidePointerEventsDisabled.delete(y),VN())},[y,g]),p.useEffect(()=>{const C=()=>N({});return document.addEventListener(uy,C),()=>document.removeEventListener(uy,C)},[]),l.jsx(wj.div,{...h,ref:T,style:{pointerEvents:P?V?"auto":"none":void 0,...t.style},onFocusCapture:Te(t.onFocusCapture,G.onFocusCapture),onBlurCapture:Te(t.onBlurCapture,G.onBlurCapture),onPointerDownCapture:Te(t.onPointerDownCapture,z.onPointerDownCapture)})});ym.displayName=A5;var I5="DismissableLayerBranch",M5=p.forwardRef((t,e)=>{const n=p.useContext(Sj),i=p.useRef(null),a=pt(e,i);return p.useEffect(()=>{const c=i.current;if(c)return n.branches.add(c),()=>{n.branches.delete(c)}},[n.branches]),l.jsx(wj.div,{...t,ref:a})});M5.displayName=I5;function D5(t,e=globalThis?.document){const n=Rn(t),i=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const c=f=>{if(f.target&&!i.current){let h=function(){Nj(R5,n,g,{discrete:!0})};const g={originalEvent:f};f.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=h,e.addEventListener("click",a.current,{once:!0})):h()}else e.removeEventListener("click",a.current);i.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",c),e.removeEventListener("click",a.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function k5(t,e=globalThis?.document){const n=Rn(t),i=p.useRef(!1);return p.useEffect(()=>{const a=c=>{c.target&&!i.current&&Nj(O5,n,{originalEvent:c},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function VN(){const t=new CustomEvent(uy);document.dispatchEvent(t)}function Nj(t,e,n,{discrete:i}){const a=n.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&a.addEventListener(t,e,{once:!0}),i?j5(a,c):a.dispatchEvent(c)}var w_=0;function Fv(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??zN()),document.body.insertAdjacentElement("beforeend",t[1]??zN()),w_++,()=>{w_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),w_--}},[])}function zN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function P5(t){const e=L5(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(V5);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function L5(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=B5(a),f=z5(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var U5=Symbol("radix.slottable");function V5(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===U5}function z5(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function B5(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var F5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q5=F5.reduce((t,e)=>{const n=P5(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),S_="focusScope.autoFocusOnMount",N_="focusScope.autoFocusOnUnmount",BN={bubbles:!1,cancelable:!0},$5="FocusScope",vm=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:c,...d}=t,[f,h]=p.useState(null),g=Rn(a),y=Rn(c),v=p.useRef(null),b=pt(e,E=>h(E)),N=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(i){let E=function(P){if(N.paused||!f)return;const V=P.target;f.contains(V)?v.current=V:ga(v.current,{select:!0})},j=function(P){if(N.paused||!f)return;const V=P.relatedTarget;V!==null&&(f.contains(V)||ga(v.current,{select:!0}))},L=function(P){if(document.activeElement===document.body)for(const z of P)z.removedNodes.length>0&&ga(f)};document.addEventListener("focusin",E),document.addEventListener("focusout",j);const M=new MutationObserver(L);return f&&M.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",j),M.disconnect()}}},[i,f,N.paused]),p.useEffect(()=>{if(f){qN.add(N);const E=document.activeElement;if(!f.contains(E)){const L=new CustomEvent(S_,BN);f.addEventListener(S_,g),f.dispatchEvent(L),L.defaultPrevented||(H5(Y5(Ej(f)),{select:!0}),document.activeElement===E&&ga(f))}return()=>{f.removeEventListener(S_,g),setTimeout(()=>{const L=new CustomEvent(N_,BN);f.addEventListener(N_,y),f.dispatchEvent(L),L.defaultPrevented||ga(E??document.body,{select:!0}),f.removeEventListener(N_,y),qN.remove(N)},0)}}},[f,g,y,N]);const T=p.useCallback(E=>{if(!n&&!i||N.paused)return;const j=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,L=document.activeElement;if(j&&L){const M=E.currentTarget,[P,V]=G5(M);P&&V?!E.shiftKey&&L===V?(E.preventDefault(),n&&ga(P,{select:!0})):E.shiftKey&&L===P&&(E.preventDefault(),n&&ga(V,{select:!0})):L===M&&E.preventDefault()}},[n,i,N.paused]);return l.jsx(q5.div,{tabIndex:-1,...d,ref:b,onKeyDown:T})});vm.displayName=$5;function H5(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(ga(i,{select:e}),document.activeElement!==n)return}function G5(t){const e=Ej(t),n=FN(e,t),i=FN(e.reverse(),t);return[n,i]}function Ej(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function FN(t,e){for(const n of t)if(!Q5(n,{upTo:e}))return n}function Q5(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function W5(t){return t instanceof HTMLInputElement&&"select"in t}function ga(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&W5(t)&&e&&t.select()}}var qN=K5();function K5(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=$N(t,e),t.unshift(e)},remove(e){t=$N(t,e),t[0]?.resume()}}}function $N(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function Y5(t){return t.filter(e=>e.tagName!=="A")}var yn=globalThis?.document?p.useLayoutEffect:()=>{},X5=Uy[" useId ".trim().toString()]||(()=>{}),Z5=0;function vs(t){const[e,n]=p.useState(X5());return yn(()=>{n(i=>i??String(Z5++))},[t]),e?`radix-${e}`:""}const J5=["top","right","bottom","left"],Na=Math.min,Er=Math.max,Oh=Math.round,Of=Math.floor,Ui=t=>({x:t,y:t}),e9={left:"right",right:"left",bottom:"top",top:"bottom"},t9={start:"end",end:"start"};function dy(t,e,n){return Er(t,Na(e,n))}function Ns(t,e){return typeof t=="function"?t(e):t}function Es(t){return t.split("-")[0]}function Jl(t){return t.split("-")[1]}function qv(t){return t==="x"?"y":"x"}function $v(t){return t==="y"?"height":"width"}const n9=new Set(["top","bottom"]);function Di(t){return n9.has(Es(t))?"y":"x"}function Hv(t){return qv(Di(t))}function r9(t,e,n){n===void 0&&(n=!1);const i=Jl(t),a=Hv(t),c=$v(a);let d=a==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[c]>e.floating[c]&&(d=Ih(d)),[d,Ih(d)]}function i9(t){const e=Ih(t);return[fy(t),e,fy(e)]}function fy(t){return t.replace(/start|end/g,e=>t9[e])}const HN=["left","right"],GN=["right","left"],s9=["top","bottom"],a9=["bottom","top"];function o9(t,e,n){switch(t){case"top":case"bottom":return n?e?GN:HN:e?HN:GN;case"left":case"right":return e?s9:a9;default:return[]}}function l9(t,e,n,i){const a=Jl(t);let c=o9(Es(t),n==="start",i);return a&&(c=c.map(d=>d+"-"+a),e&&(c=c.concat(c.map(fy)))),c}function Ih(t){return t.replace(/left|right|bottom|top/g,e=>e9[e])}function c9(t){return{top:0,right:0,bottom:0,left:0,...t}}function Cj(t){return typeof t!="number"?c9(t):{top:t,right:t,bottom:t,left:t}}function Mh(t){const{x:e,y:n,width:i,height:a}=t;return{width:i,height:a,top:n,left:e,right:e+i,bottom:n+a,x:e,y:n}}function QN(t,e,n){let{reference:i,floating:a}=t;const c=Di(e),d=Hv(e),f=$v(d),h=Es(e),g=c==="y",y=i.x+i.width/2-a.width/2,v=i.y+i.height/2-a.height/2,b=i[f]/2-a[f]/2;let N;switch(h){case"top":N={x:y,y:i.y-a.height};break;case"bottom":N={x:y,y:i.y+i.height};break;case"right":N={x:i.x+i.width,y:v};break;case"left":N={x:i.x-a.width,y:v};break;default:N={x:i.x,y:i.y}}switch(Jl(e)){case"start":N[d]-=b*(n&&g?-1:1);break;case"end":N[d]+=b*(n&&g?-1:1);break}return N}async function u9(t,e){var n;e===void 0&&(e={});const{x:i,y:a,platform:c,rects:d,elements:f,strategy:h}=t,{boundary:g="clippingAncestors",rootBoundary:y="viewport",elementContext:v="floating",altBoundary:b=!1,padding:N=0}=Ns(e,t),T=Cj(N),j=f[b?v==="floating"?"reference":"floating":v],L=Mh(await c.getClippingRect({element:(n=await(c.isElement==null?void 0:c.isElement(j)))==null||n?j:j.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:g,rootBoundary:y,strategy:h})),M=v==="floating"?{x:i,y:a,width:d.floating.width,height:d.floating.height}:d.reference,P=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),V=await(c.isElement==null?void 0:c.isElement(P))?await(c.getScale==null?void 0:c.getScale(P))||{x:1,y:1}:{x:1,y:1},z=Mh(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:M,offsetParent:P,strategy:h}):M);return{top:(L.top-z.top+T.top)/V.y,bottom:(z.bottom-L.bottom+T.bottom)/V.y,left:(L.left-z.left+T.left)/V.x,right:(z.right-L.right+T.right)/V.x}}const d9=async(t,e,n)=>{const{placement:i="bottom",strategy:a="absolute",middleware:c=[],platform:d}=n,f=c.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(e));let g=await d.getElementRects({reference:t,floating:e,strategy:a}),{x:y,y:v}=QN(g,i,h),b=i,N={},T=0;for(let j=0;j<f.length;j++){var E;const{name:L,fn:M}=f[j],{x:P,y:V,data:z,reset:G}=await M({x:y,y:v,initialPlacement:i,placement:b,strategy:a,middlewareData:N,rects:g,platform:{...d,detectOverflow:(E=d.detectOverflow)!=null?E:u9},elements:{reference:t,floating:e}});y=P??y,v=V??v,N={...N,[L]:{...N[L],...z}},G&&T<=50&&(T++,typeof G=="object"&&(G.placement&&(b=G.placement),G.rects&&(g=G.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:a}):G.rects),{x:y,y:v}=QN(g,b,h)),j=-1)}return{x:y,y:v,placement:b,strategy:a,middlewareData:N}},f9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:a,rects:c,platform:d,elements:f,middlewareData:h}=e,{element:g,padding:y=0}=Ns(t,e)||{};if(g==null)return{};const v=Cj(y),b={x:n,y:i},N=Hv(a),T=$v(N),E=await d.getDimensions(g),j=N==="y",L=j?"top":"left",M=j?"bottom":"right",P=j?"clientHeight":"clientWidth",V=c.reference[T]+c.reference[N]-b[N]-c.floating[T],z=b[N]-c.reference[N],G=await(d.getOffsetParent==null?void 0:d.getOffsetParent(g));let C=G?G[P]:0;(!C||!await(d.isElement==null?void 0:d.isElement(G)))&&(C=f.floating[P]||c.floating[T]);const w=V/2-z/2,S=C/2-E[T]/2-1,A=Na(v[L],S),D=Na(v[M],S),k=A,I=C-E[T]-D,K=C/2-E[T]/2+w,q=dy(k,K,I),R=!h.arrow&&Jl(a)!=null&&K!==q&&c.reference[T]/2-(K<k?A:D)-E[T]/2<0,B=R?K<k?K-k:K-I:0;return{[N]:b[N]+B,data:{[N]:q,centerOffset:K-q-B,...R&&{alignmentOffset:B}},reset:R}}}),h9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:a,middlewareData:c,rects:d,initialPlacement:f,platform:h,elements:g}=e,{mainAxis:y=!0,crossAxis:v=!0,fallbackPlacements:b,fallbackStrategy:N="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:E=!0,...j}=Ns(t,e);if((n=c.arrow)!=null&&n.alignmentOffset)return{};const L=Es(a),M=Di(f),P=Es(f)===f,V=await(h.isRTL==null?void 0:h.isRTL(g.floating)),z=b||(P||!E?[Ih(f)]:i9(f)),G=T!=="none";!b&&G&&z.push(...l9(f,E,T,V));const C=[f,...z],w=await h.detectOverflow(e,j),S=[];let A=((i=c.flip)==null?void 0:i.overflows)||[];if(y&&S.push(w[L]),v){const K=r9(a,d,V);S.push(w[K[0]],w[K[1]])}if(A=[...A,{placement:a,overflows:S}],!S.every(K=>K<=0)){var D,k;const K=(((D=c.flip)==null?void 0:D.index)||0)+1,q=C[K];if(q&&(!(v==="alignment"?M!==Di(q):!1)||A.every(Y=>Di(Y.placement)===M?Y.overflows[0]>0:!0)))return{data:{index:K,overflows:A},reset:{placement:q}};let R=(k=A.filter(B=>B.overflows[0]<=0).sort((B,Y)=>B.overflows[1]-Y.overflows[1])[0])==null?void 0:k.placement;if(!R)switch(N){case"bestFit":{var I;const B=(I=A.filter(Y=>{if(G){const Z=Di(Y.placement);return Z===M||Z==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(Z=>Z>0).reduce((Z,se)=>Z+se,0)]).sort((Y,Z)=>Y[1]-Z[1])[0])==null?void 0:I[0];B&&(R=B);break}case"initialPlacement":R=f;break}if(a!==R)return{reset:{placement:R}}}return{}}}};function WN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function KN(t){return J5.some(e=>t[e]>=0)}const m9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:i}=e,{strategy:a="referenceHidden",...c}=Ns(t,e);switch(a){case"referenceHidden":{const d=await i.detectOverflow(e,{...c,elementContext:"reference"}),f=WN(d,n.reference);return{data:{referenceHiddenOffsets:f,referenceHidden:KN(f)}}}case"escaped":{const d=await i.detectOverflow(e,{...c,altBoundary:!0}),f=WN(d,n.floating);return{data:{escapedOffsets:f,escaped:KN(f)}}}default:return{}}}}},jj=new Set(["left","top"]);async function p9(t,e){const{placement:n,platform:i,elements:a}=t,c=await(i.isRTL==null?void 0:i.isRTL(a.floating)),d=Es(n),f=Jl(n),h=Di(n)==="y",g=jj.has(d)?-1:1,y=c&&h?-1:1,v=Ns(e,t);let{mainAxis:b,crossAxis:N,alignmentAxis:T}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return f&&typeof T=="number"&&(N=f==="end"?T*-1:T),h?{x:N*y,y:b*g}:{x:b*g,y:N*y}}const g9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:a,y:c,placement:d,middlewareData:f}=e,h=await p9(e,t);return d===((n=f.offset)==null?void 0:n.placement)&&(i=f.arrow)!=null&&i.alignmentOffset?{}:{x:a+h.x,y:c+h.y,data:{...h,placement:d}}}}},_9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:a,platform:c}=e,{mainAxis:d=!0,crossAxis:f=!1,limiter:h={fn:L=>{let{x:M,y:P}=L;return{x:M,y:P}}},...g}=Ns(t,e),y={x:n,y:i},v=await c.detectOverflow(e,g),b=Di(Es(a)),N=qv(b);let T=y[N],E=y[b];if(d){const L=N==="y"?"top":"left",M=N==="y"?"bottom":"right",P=T+v[L],V=T-v[M];T=dy(P,T,V)}if(f){const L=b==="y"?"top":"left",M=b==="y"?"bottom":"right",P=E+v[L],V=E-v[M];E=dy(P,E,V)}const j=h.fn({...e,[N]:T,[b]:E});return{...j,data:{x:j.x-n,y:j.y-i,enabled:{[N]:d,[b]:f}}}}}},y9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:a,rects:c,middlewareData:d}=e,{offset:f=0,mainAxis:h=!0,crossAxis:g=!0}=Ns(t,e),y={x:n,y:i},v=Di(a),b=qv(v);let N=y[b],T=y[v];const E=Ns(f,e),j=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(h){const P=b==="y"?"height":"width",V=c.reference[b]-c.floating[P]+j.mainAxis,z=c.reference[b]+c.reference[P]-j.mainAxis;N<V?N=V:N>z&&(N=z)}if(g){var L,M;const P=b==="y"?"width":"height",V=jj.has(Es(a)),z=c.reference[v]-c.floating[P]+(V&&((L=d.offset)==null?void 0:L[v])||0)+(V?0:j.crossAxis),G=c.reference[v]+c.reference[P]+(V?0:((M=d.offset)==null?void 0:M[v])||0)-(V?j.crossAxis:0);T<z?T=z:T>G&&(T=G)}return{[b]:N,[v]:T}}}},v9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:a,rects:c,platform:d,elements:f}=e,{apply:h=()=>{},...g}=Ns(t,e),y=await d.detectOverflow(e,g),v=Es(a),b=Jl(a),N=Di(a)==="y",{width:T,height:E}=c.floating;let j,L;v==="top"||v==="bottom"?(j=v,L=b===(await(d.isRTL==null?void 0:d.isRTL(f.floating))?"start":"end")?"left":"right"):(L=v,j=b==="end"?"top":"bottom");const M=E-y.top-y.bottom,P=T-y.left-y.right,V=Na(E-y[j],M),z=Na(T-y[L],P),G=!e.middlewareData.shift;let C=V,w=z;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(w=P),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=M),G&&!b){const A=Er(y.left,0),D=Er(y.right,0),k=Er(y.top,0),I=Er(y.bottom,0);N?w=T-2*(A!==0||D!==0?A+D:Er(y.left,y.right)):C=E-2*(k!==0||I!==0?k+I:Er(y.top,y.bottom))}await h({...e,availableWidth:w,availableHeight:C});const S=await d.getDimensions(f.floating);return T!==S.width||E!==S.height?{reset:{rects:!0}}:{}}}};function bm(){return typeof window<"u"}function ec(t){return Tj(t)?(t.nodeName||"").toLowerCase():"#document"}function Tr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function qi(t){var e;return(e=(Tj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Tj(t){return bm()?t instanceof Node||t instanceof Tr(t).Node:!1}function _i(t){return bm()?t instanceof Element||t instanceof Tr(t).Element:!1}function zi(t){return bm()?t instanceof HTMLElement||t instanceof Tr(t).HTMLElement:!1}function YN(t){return!bm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Tr(t).ShadowRoot}const b9=new Set(["inline","contents"]);function Yu(t){const{overflow:e,overflowX:n,overflowY:i,display:a}=yi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!b9.has(a)}const x9=new Set(["table","td","th"]);function w9(t){return x9.has(ec(t))}const S9=[":popover-open",":modal"];function xm(t){return S9.some(e=>{try{return t.matches(e)}catch{return!1}})}const N9=["transform","translate","scale","rotate","perspective"],E9=["transform","translate","scale","rotate","perspective","filter"],C9=["paint","layout","strict","content"];function Gv(t){const e=Qv(),n=_i(t)?yi(t):t;return N9.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||E9.some(i=>(n.willChange||"").includes(i))||C9.some(i=>(n.contain||"").includes(i))}function j9(t){let e=Ea(t);for(;zi(e)&&!ql(e);){if(Gv(e))return e;if(xm(e))return null;e=Ea(e)}return null}function Qv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const T9=new Set(["html","body","#document"]);function ql(t){return T9.has(ec(t))}function yi(t){return Tr(t).getComputedStyle(t)}function wm(t){return _i(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ea(t){if(ec(t)==="html")return t;const e=t.assignedSlot||t.parentNode||YN(t)&&t.host||qi(t);return YN(e)?e.host:e}function Aj(t){const e=Ea(t);return ql(e)?t.ownerDocument?t.ownerDocument.body:t.body:zi(e)&&Yu(e)?e:Aj(e)}function Cu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=Aj(t),c=a===((i=t.ownerDocument)==null?void 0:i.body),d=Tr(a);if(c){const f=hy(d);return e.concat(d,d.visualViewport||[],Yu(a)?a:[],f&&n?Cu(f):[])}return e.concat(a,Cu(a,[],n))}function hy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Rj(t){const e=yi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=zi(t),c=a?t.offsetWidth:n,d=a?t.offsetHeight:i,f=Oh(n)!==c||Oh(i)!==d;return f&&(n=c,i=d),{width:n,height:i,$:f}}function Wv(t){return _i(t)?t:t.contextElement}function Ll(t){const e=Wv(t);if(!zi(e))return Ui(1);const n=e.getBoundingClientRect(),{width:i,height:a,$:c}=Rj(e);let d=(c?Oh(n.width):n.width)/i,f=(c?Oh(n.height):n.height)/a;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const A9=Ui(0);function Oj(t){const e=Tr(t);return!Qv()||!e.visualViewport?A9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function R9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Tr(t)?!1:e}function po(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),c=Wv(t);let d=Ui(1);e&&(i?_i(i)&&(d=Ll(i)):d=Ll(t));const f=R9(c,n,i)?Oj(c):Ui(0);let h=(a.left+f.x)/d.x,g=(a.top+f.y)/d.y,y=a.width/d.x,v=a.height/d.y;if(c){const b=Tr(c),N=i&&_i(i)?Tr(i):i;let T=b,E=hy(T);for(;E&&i&&N!==T;){const j=Ll(E),L=E.getBoundingClientRect(),M=yi(E),P=L.left+(E.clientLeft+parseFloat(M.paddingLeft))*j.x,V=L.top+(E.clientTop+parseFloat(M.paddingTop))*j.y;h*=j.x,g*=j.y,y*=j.x,v*=j.y,h+=P,g+=V,T=Tr(E),E=hy(T)}}return Mh({width:y,height:v,x:h,y:g})}function Sm(t,e){const n=wm(t).scrollLeft;return e?e.left+n:po(qi(t)).left+n}function Ij(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-Sm(t,n),a=n.top+e.scrollTop;return{x:i,y:a}}function O9(t){let{elements:e,rect:n,offsetParent:i,strategy:a}=t;const c=a==="fixed",d=qi(i),f=e?xm(e.floating):!1;if(i===d||f&&c)return n;let h={scrollLeft:0,scrollTop:0},g=Ui(1);const y=Ui(0),v=zi(i);if((v||!v&&!c)&&((ec(i)!=="body"||Yu(d))&&(h=wm(i)),zi(i))){const N=po(i);g=Ll(i),y.x=N.x+i.clientLeft,y.y=N.y+i.clientTop}const b=d&&!v&&!c?Ij(d,h):Ui(0);return{width:n.width*g.x,height:n.height*g.y,x:n.x*g.x-h.scrollLeft*g.x+y.x+b.x,y:n.y*g.y-h.scrollTop*g.y+y.y+b.y}}function I9(t){return Array.from(t.getClientRects())}function M9(t){const e=qi(t),n=wm(t),i=t.ownerDocument.body,a=Er(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),c=Er(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let d=-n.scrollLeft+Sm(t);const f=-n.scrollTop;return yi(i).direction==="rtl"&&(d+=Er(e.clientWidth,i.clientWidth)-a),{width:a,height:c,x:d,y:f}}const XN=25;function D9(t,e){const n=Tr(t),i=qi(t),a=n.visualViewport;let c=i.clientWidth,d=i.clientHeight,f=0,h=0;if(a){c=a.width,d=a.height;const y=Qv();(!y||y&&e==="fixed")&&(f=a.offsetLeft,h=a.offsetTop)}const g=Sm(i);if(g<=0){const y=i.ownerDocument,v=y.body,b=getComputedStyle(v),N=y.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,T=Math.abs(i.clientWidth-v.clientWidth-N);T<=XN&&(c-=T)}else g<=XN&&(c+=g);return{width:c,height:d,x:f,y:h}}const k9=new Set(["absolute","fixed"]);function P9(t,e){const n=po(t,!0,e==="fixed"),i=n.top+t.clientTop,a=n.left+t.clientLeft,c=zi(t)?Ll(t):Ui(1),d=t.clientWidth*c.x,f=t.clientHeight*c.y,h=a*c.x,g=i*c.y;return{width:d,height:f,x:h,y:g}}function ZN(t,e,n){let i;if(e==="viewport")i=D9(t,n);else if(e==="document")i=M9(qi(t));else if(_i(e))i=P9(e,n);else{const a=Oj(t);i={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return Mh(i)}function Mj(t,e){const n=Ea(t);return n===e||!_i(n)||ql(n)?!1:yi(n).position==="fixed"||Mj(n,e)}function L9(t,e){const n=e.get(t);if(n)return n;let i=Cu(t,[],!1).filter(f=>_i(f)&&ec(f)!=="body"),a=null;const c=yi(t).position==="fixed";let d=c?Ea(t):t;for(;_i(d)&&!ql(d);){const f=yi(d),h=Gv(d);!h&&f.position==="fixed"&&(a=null),(c?!h&&!a:!h&&f.position==="static"&&!!a&&k9.has(a.position)||Yu(d)&&!h&&Mj(t,d))?i=i.filter(y=>y!==d):a=f,d=Ea(d)}return e.set(t,i),i}function U9(t){let{element:e,boundary:n,rootBoundary:i,strategy:a}=t;const d=[...n==="clippingAncestors"?xm(e)?[]:L9(e,this._c):[].concat(n),i],f=d[0],h=d.reduce((g,y)=>{const v=ZN(e,y,a);return g.top=Er(v.top,g.top),g.right=Na(v.right,g.right),g.bottom=Na(v.bottom,g.bottom),g.left=Er(v.left,g.left),g},ZN(e,f,a));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function V9(t){const{width:e,height:n}=Rj(t);return{width:e,height:n}}function z9(t,e,n){const i=zi(e),a=qi(e),c=n==="fixed",d=po(t,!0,c,e);let f={scrollLeft:0,scrollTop:0};const h=Ui(0);function g(){h.x=Sm(a)}if(i||!i&&!c)if((ec(e)!=="body"||Yu(a))&&(f=wm(e)),i){const N=po(e,!0,c,e);h.x=N.x+e.clientLeft,h.y=N.y+e.clientTop}else a&&g();c&&!i&&a&&g();const y=a&&!i&&!c?Ij(a,f):Ui(0),v=d.left+f.scrollLeft-h.x-y.x,b=d.top+f.scrollTop-h.y-y.y;return{x:v,y:b,width:d.width,height:d.height}}function E_(t){return yi(t).position==="static"}function JN(t,e){if(!zi(t)||yi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return qi(t)===n&&(n=n.ownerDocument.body),n}function Dj(t,e){const n=Tr(t);if(xm(t))return n;if(!zi(t)){let a=Ea(t);for(;a&&!ql(a);){if(_i(a)&&!E_(a))return a;a=Ea(a)}return n}let i=JN(t,e);for(;i&&w9(i)&&E_(i);)i=JN(i,e);return i&&ql(i)&&E_(i)&&!Gv(i)?n:i||j9(t)||n}const B9=async function(t){const e=this.getOffsetParent||Dj,n=this.getDimensions,i=await n(t.floating);return{reference:z9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function F9(t){return yi(t).direction==="rtl"}const q9={convertOffsetParentRelativeRectToViewportRelativeRect:O9,getDocumentElement:qi,getClippingRect:U9,getOffsetParent:Dj,getElementRects:B9,getClientRects:I9,getDimensions:V9,getScale:Ll,isElement:_i,isRTL:F9};function kj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function $9(t,e){let n=null,i;const a=qi(t);function c(){var f;clearTimeout(i),(f=n)==null||f.disconnect(),n=null}function d(f,h){f===void 0&&(f=!1),h===void 0&&(h=1),c();const g=t.getBoundingClientRect(),{left:y,top:v,width:b,height:N}=g;if(f||e(),!b||!N)return;const T=Of(v),E=Of(a.clientWidth-(y+b)),j=Of(a.clientHeight-(v+N)),L=Of(y),P={rootMargin:-T+"px "+-E+"px "+-j+"px "+-L+"px",threshold:Er(0,Na(1,h))||1};let V=!0;function z(G){const C=G[0].intersectionRatio;if(C!==h){if(!V)return d();C?d(!1,C):i=setTimeout(()=>{d(!1,1e-7)},1e3)}C===1&&!kj(g,t.getBoundingClientRect())&&d(),V=!1}try{n=new IntersectionObserver(z,{...P,root:a.ownerDocument})}catch{n=new IntersectionObserver(z,P)}n.observe(t)}return d(!0),c}function H9(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:h=!1}=i,g=Wv(t),y=a||c?[...g?Cu(g):[],...Cu(e)]:[];y.forEach(L=>{a&&L.addEventListener("scroll",n,{passive:!0}),c&&L.addEventListener("resize",n)});const v=g&&f?$9(g,n):null;let b=-1,N=null;d&&(N=new ResizeObserver(L=>{let[M]=L;M&&M.target===g&&N&&(N.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var P;(P=N)==null||P.observe(e)})),n()}),g&&!h&&N.observe(g),N.observe(e));let T,E=h?po(t):null;h&&j();function j(){const L=po(t);E&&!kj(E,L)&&n(),E=L,T=requestAnimationFrame(j)}return n(),()=>{var L;y.forEach(M=>{a&&M.removeEventListener("scroll",n),c&&M.removeEventListener("resize",n)}),v?.(),(L=N)==null||L.disconnect(),N=null,h&&cancelAnimationFrame(T)}}const G9=g9,Q9=_9,W9=h9,K9=v9,Y9=m9,eE=f9,X9=y9,Z9=(t,e,n)=>{const i=new Map,a={platform:q9,...n},c={...a.platform,_c:i};return d9(t,e,{...a,platform:c})};var J9=typeof document<"u",eV=function(){},Xf=J9?p.useLayoutEffect:eV;function Dh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Dh(t[i],e[i]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,a[i]))return!1;for(i=n;i--!==0;){const c=a[i];if(!(c==="_owner"&&t.$$typeof)&&!Dh(t[c],e[c]))return!1}return!0}return t!==t&&e!==e}function Pj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function tE(t,e){const n=Pj(t);return Math.round(e*n)/n}function C_(t){const e=p.useRef(t);return Xf(()=>{e.current=t}),e}function tV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:a,elements:{reference:c,floating:d}={},transform:f=!0,whileElementsMounted:h,open:g}=t,[y,v]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[b,N]=p.useState(i);Dh(b,i)||N(i);const[T,E]=p.useState(null),[j,L]=p.useState(null),M=p.useCallback(Y=>{Y!==G.current&&(G.current=Y,E(Y))},[]),P=p.useCallback(Y=>{Y!==C.current&&(C.current=Y,L(Y))},[]),V=c||T,z=d||j,G=p.useRef(null),C=p.useRef(null),w=p.useRef(y),S=h!=null,A=C_(h),D=C_(a),k=C_(g),I=p.useCallback(()=>{if(!G.current||!C.current)return;const Y={placement:e,strategy:n,middleware:b};D.current&&(Y.platform=D.current),Z9(G.current,C.current,Y).then(Z=>{const se={...Z,isPositioned:k.current!==!1};K.current&&!Dh(w.current,se)&&(w.current=se,Wl.flushSync(()=>{v(se)}))})},[b,e,n,D,k]);Xf(()=>{g===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,v(Y=>({...Y,isPositioned:!1})))},[g]);const K=p.useRef(!1);Xf(()=>(K.current=!0,()=>{K.current=!1}),[]),Xf(()=>{if(V&&(G.current=V),z&&(C.current=z),V&&z){if(A.current)return A.current(V,z,I);I()}},[V,z,I,A,S]);const q=p.useMemo(()=>({reference:G,floating:C,setReference:M,setFloating:P}),[M,P]),R=p.useMemo(()=>({reference:V,floating:z}),[V,z]),B=p.useMemo(()=>{const Y={position:n,left:0,top:0};if(!R.floating)return Y;const Z=tE(R.floating,y.x),se=tE(R.floating,y.y);return f?{...Y,transform:"translate("+Z+"px, "+se+"px)",...Pj(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:se}},[n,f,R.floating,y.x,y.y]);return p.useMemo(()=>({...y,update:I,refs:q,elements:R,floatingStyles:B}),[y,I,q,R,B])}const nV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:a}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?eE({element:i.current,padding:a}).fn(n):{}:i?eE({element:i,padding:a}).fn(n):{}}}},rV=(t,e)=>({...G9(t),options:[t,e]}),iV=(t,e)=>({...Q9(t),options:[t,e]}),sV=(t,e)=>({...X9(t),options:[t,e]}),aV=(t,e)=>({...W9(t),options:[t,e]}),oV=(t,e)=>({...K9(t),options:[t,e]}),lV=(t,e)=>({...Y9(t),options:[t,e]}),cV=(t,e)=>({...nV(t),options:[t,e]});function uV(t){const e=dV(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(hV);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function dV(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=pV(a),f=mV(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var fV=Symbol("radix.slottable");function hV(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fV}function mV(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function pV(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var gV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_V=gV.reduce((t,e)=>{const n=uV(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),yV="Arrow",Lj=p.forwardRef((t,e)=>{const{children:n,width:i=10,height:a=5,...c}=t;return l.jsx(_V.svg,{...c,ref:e,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});Lj.displayName=yV;var vV=Lj;function bV(t){const e=xV(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(SV);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function xV(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=EV(a),f=NV(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var wV=Symbol("radix.slottable");function SV(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wV}function NV(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function EV(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var CV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Uj=CV.reduce((t,e)=>{const n=bV(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function jV(t){const[e,n]=p.useState(void 0);return yn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const c=a[0];let d,f;if("borderBoxSize"in c){const h=c.borderBoxSize,g=Array.isArray(h)?h[0]:h;d=g.inlineSize,f=g.blockSize}else d=t.offsetWidth,f=t.offsetHeight;n({width:d,height:f})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var Kv="Popper",[Vj,Nm]=Oa(Kv),[TV,zj]=Vj(Kv),Bj=t=>{const{__scopePopper:e,children:n}=t,[i,a]=p.useState(null);return l.jsx(TV,{scope:e,anchor:i,onAnchorChange:a,children:n})};Bj.displayName=Kv;var Fj="PopperAnchor",qj=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...a}=t,c=zj(Fj,n),d=p.useRef(null),f=pt(e,d),h=p.useRef(null);return p.useEffect(()=>{const g=h.current;h.current=i?.current||d.current,g!==h.current&&c.onAnchorChange(h.current)}),i?null:l.jsx(Uj.div,{...a,ref:f})});qj.displayName=Fj;var Yv="PopperContent",[AV,RV]=Vj(Yv),$j=p.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:a=0,align:c="center",alignOffset:d=0,arrowPadding:f=0,avoidCollisions:h=!0,collisionBoundary:g=[],collisionPadding:y=0,sticky:v="partial",hideWhenDetached:b=!1,updatePositionStrategy:N="optimized",onPlaced:T,...E}=t,j=zj(Yv,n),[L,M]=p.useState(null),P=pt(e,me=>M(me)),[V,z]=p.useState(null),G=jV(V),C=G?.width??0,w=G?.height??0,S=i+(c!=="center"?"-"+c:""),A=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},D=Array.isArray(g)?g:[g],k=D.length>0,I={padding:A,boundary:D.filter(IV),altBoundary:k},{refs:K,floatingStyles:q,placement:R,isPositioned:B,middlewareData:Y}=tV({strategy:"fixed",placement:S,whileElementsMounted:(...me)=>H9(...me,{animationFrame:N==="always"}),elements:{reference:j.anchor},middleware:[rV({mainAxis:a+w,alignmentAxis:d}),h&&iV({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?sV():void 0,...I}),h&&aV({...I}),oV({...I,apply:({elements:me,rects:Fe,availableWidth:Ne,availableHeight:Be})=>{const{width:et,height:Ze}=Fe.reference,it=me.floating.style;it.setProperty("--radix-popper-available-width",`${Ne}px`),it.setProperty("--radix-popper-available-height",`${Be}px`),it.setProperty("--radix-popper-anchor-width",`${et}px`),it.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),V&&cV({element:V,padding:f}),MV({arrowWidth:C,arrowHeight:w}),b&&lV({strategy:"referenceHidden",...I})]}),[Z,se]=Qj(R),F=Rn(T);yn(()=>{B&&F?.()},[B,F]);const re=Y.arrow?.x,he=Y.arrow?.y,pe=Y.arrow?.centerOffset!==0,[ye,we]=p.useState();return yn(()=>{L&&we(window.getComputedStyle(L).zIndex)},[L]),l.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:B?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[Y.transformOrigin?.x,Y.transformOrigin?.y].join(" "),...Y.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(AV,{scope:n,placedSide:Z,onArrowChange:z,arrowX:re,arrowY:he,shouldHideArrow:pe,children:l.jsx(Uj.div,{"data-side":Z,"data-align":se,...E,ref:P,style:{...E.style,animation:B?void 0:"none"}})})})});$j.displayName=Yv;var Hj="PopperArrow",OV={top:"bottom",right:"left",bottom:"top",left:"right"},Gj=p.forwardRef(function(e,n){const{__scopePopper:i,...a}=e,c=RV(Hj,i),d=OV[c.placedSide];return l.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:l.jsx(vV,{...a,ref:n,style:{...a.style,display:"block"}})})});Gj.displayName=Hj;function IV(t){return t!==null}var MV=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:a}=e,d=a.arrow?.centerOffset!==0,f=d?0:t.arrowWidth,h=d?0:t.arrowHeight,[g,y]=Qj(n),v={start:"0%",center:"50%",end:"100%"}[y],b=(a.arrow?.x??0)+f/2,N=(a.arrow?.y??0)+h/2;let T="",E="";return g==="bottom"?(T=d?v:`${b}px`,E=`${-h}px`):g==="top"?(T=d?v:`${b}px`,E=`${i.floating.height+h}px`):g==="right"?(T=`${-h}px`,E=d?v:`${N}px`):g==="left"&&(T=`${i.floating.width+h}px`,E=d?v:`${N}px`),{data:{x:T,y:E}}}});function Qj(t){const[e,n="center"]=t.split("-");return[e,n]}var Wj=Bj,Kj=qj,Yj=$j,Xj=Gj;function DV(t){const e=kV(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(LV);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function kV(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=VV(a),f=UV(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PV=Symbol("radix.slottable");function LV(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PV}function UV(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function VV(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],BV=zV.reduce((t,e)=>{const n=DV(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),FV="Portal",Em=p.forwardRef((t,e)=>{const{container:n,...i}=t,[a,c]=p.useState(!1);yn(()=>c(!0),[]);const d=n||a&&globalThis?.document?.body;return d?YM.createPortal(l.jsx(BV.div,{...i,ref:e}),d):null});Em.displayName=FV;function Zj(t){const e=qV(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(HV);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function qV(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=QV(a),f=GV(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $V=Symbol("radix.slottable");function HV(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$V}function GV(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function QV(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var WV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Or=WV.reduce((t,e)=>{const n=Zj(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),KV=Uy[" useInsertionEffect ".trim().toString()]||yn;function ju({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[a,c,d]=YV({defaultProp:e,onChange:n}),f=t!==void 0,h=f?t:a;{const y=p.useRef(t!==void 0);p.useEffect(()=>{const v=y.current;v!==f&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=f},[f,i])}const g=p.useCallback(y=>{if(f){const v=XV(y)?y(t):y;v!==t&&d.current?.(v)}else c(y)},[f,t,c,d]);return[h,g]}function YV({defaultProp:t,onChange:e}){const[n,i]=p.useState(t),a=p.useRef(n),c=p.useRef(e);return KV(()=>{c.current=e},[e]),p.useEffect(()=>{a.current!==n&&(c.current?.(n),a.current=n)},[n,a]),[n,i,c]}function XV(t){return typeof t=="function"}function ZV(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function JV(t){const e=ez(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(nz);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function ez(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=iz(a),f=rz(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var tz=Symbol("radix.slottable");function nz(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===tz}function rz(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function iz(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var sz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],az=sz.reduce((t,e)=>{const n=JV(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),Jj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oz="VisuallyHidden",lz=p.forwardRef((t,e)=>l.jsx(az.span,{...t,ref:e,style:{...Jj,...t.style}}));lz.displayName=oz;var cz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ml=new WeakMap,If=new WeakMap,Mf={},j_=0,e2=function(t){return t&&(t.host||e2(t.parentNode))},uz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=e2(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},dz=function(t,e,n,i){var a=uz(e,Array.isArray(t)?t:[t]);Mf[n]||(Mf[n]=new WeakMap);var c=Mf[n],d=[],f=new Set,h=new Set(a),g=function(v){!v||f.has(v)||(f.add(v),g(v.parentNode))};a.forEach(g);var y=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(b){if(f.has(b))y(b);else try{var N=b.getAttribute(i),T=N!==null&&N!=="false",E=(ml.get(b)||0)+1,j=(c.get(b)||0)+1;ml.set(b,E),c.set(b,j),d.push(b),E===1&&T&&If.set(b,!0),j===1&&b.setAttribute(n,"true"),T||b.setAttribute(i,"true")}catch(L){console.error("aria-hidden: cannot operate on ",b,L)}})};return y(e),f.clear(),j_++,function(){d.forEach(function(v){var b=ml.get(v)-1,N=c.get(v)-1;ml.set(v,b),c.set(v,N),b||(If.has(v)||v.removeAttribute(i),If.delete(v)),N||v.removeAttribute(n)}),j_--,j_||(ml=new WeakMap,ml=new WeakMap,If=new WeakMap,Mf={})}},Xv=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),a=cz(t);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),dz(i,a,n,"aria-hidden")):function(){return null}},Mi=function(){return Mi=Object.assign||function(e){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Mi.apply(this,arguments)};function t2(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function fz(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,c;i<a;i++)(c||!(i in e))&&(c||(c=Array.prototype.slice.call(e,0,i)),c[i]=e[i]);return t.concat(c||Array.prototype.slice.call(e))}var Zf="right-scroll-bar-position",Jf="width-before-scroll-bar",hz="with-scroll-bars-hidden",mz="--removed-body-scroll-bar-size";function T_(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pz(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var a=n.value;a!==i&&(n.value=i,n.callback(i,a))}}}})[0];return n.callback=e,n.facade}var gz=typeof window<"u"?p.useLayoutEffect:p.useEffect,nE=new WeakMap;function _z(t,e){var n=pz(null,function(i){return t.forEach(function(a){return T_(a,i)})});return gz(function(){var i=nE.get(n);if(i){var a=new Set(i),c=new Set(t),d=n.current;a.forEach(function(f){c.has(f)||T_(f,null)}),c.forEach(function(f){a.has(f)||T_(f,d)})}nE.set(n,t)},[t]),n}function yz(t){return t}function vz(t,e){e===void 0&&(e=yz);var n=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(c){var d=e(c,i);return n.push(d),function(){n=n.filter(function(f){return f!==d})}},assignSyncMedium:function(c){for(i=!0;n.length;){var d=n;n=[],d.forEach(c)}n={push:function(f){return c(f)},filter:function(){return n}}},assignMedium:function(c){i=!0;var d=[];if(n.length){var f=n;n=[],f.forEach(c),d=n}var h=function(){var y=d;d=[],y.forEach(c)},g=function(){return Promise.resolve().then(h)};g(),n={push:function(y){d.push(y),g()},filter:function(y){return d=d.filter(y),n}}}};return a}function bz(t){t===void 0&&(t={});var e=vz(null);return e.options=Mi({async:!0,ssr:!1},t),e}var n2=function(t){var e=t.sideCar,n=t2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return p.createElement(i,Mi({},n))};n2.isSideCarExport=!0;function xz(t,e){return t.useMedium(e),n2}var r2=bz(),A_=function(){},Cm=p.forwardRef(function(t,e){var n=p.useRef(null),i=p.useState({onScrollCapture:A_,onWheelCapture:A_,onTouchMoveCapture:A_}),a=i[0],c=i[1],d=t.forwardProps,f=t.children,h=t.className,g=t.removeScrollBar,y=t.enabled,v=t.shards,b=t.sideCar,N=t.noRelative,T=t.noIsolation,E=t.inert,j=t.allowPinchZoom,L=t.as,M=L===void 0?"div":L,P=t.gapMode,V=t2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=b,G=_z([n,e]),C=Mi(Mi({},V),a);return p.createElement(p.Fragment,null,y&&p.createElement(z,{sideCar:r2,removeScrollBar:g,shards:v,noRelative:N,noIsolation:T,inert:E,setCallbacks:c,allowPinchZoom:!!j,lockRef:n,gapMode:P}),d?p.cloneElement(p.Children.only(f),Mi(Mi({},C),{ref:G})):p.createElement(M,Mi({},C,{className:h,ref:G}),f))});Cm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cm.classNames={fullWidth:Jf,zeroRight:Zf};var wz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Sz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wz();return e&&t.setAttribute("nonce",e),t}function Nz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ez(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Cz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Sz())&&(Nz(e,n),Ez(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},jz=function(){var t=Cz();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},i2=function(){var t=jz(),e=function(n){var i=n.styles,a=n.dynamic;return t(i,a),null};return e},Tz={left:0,top:0,right:0,gap:0},R_=function(t){return parseInt(t||"",10)||0},Az=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[R_(n),R_(i),R_(a)]},Rz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Tz;var e=Az(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},Oz=i2(),Ul="data-scroll-locked",Iz=function(t,e,n,i){var a=t.left,c=t.top,d=t.right,f=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(hz,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(f,"px ").concat(i,`;
  }
  body[`).concat(Ul,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(f,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zf,` {
    right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(Jf,` {
    margin-right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(Zf," .").concat(Zf,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Jf," .").concat(Jf,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Ul,`] {
    `).concat(mz,": ").concat(f,`px;
  }
`)},rE=function(){var t=parseInt(document.body.getAttribute(Ul)||"0",10);return isFinite(t)?t:0},Mz=function(){p.useEffect(function(){return document.body.setAttribute(Ul,(rE()+1).toString()),function(){var t=rE()-1;t<=0?document.body.removeAttribute(Ul):document.body.setAttribute(Ul,t.toString())}},[])},Dz=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,a=i===void 0?"margin":i;Mz();var c=p.useMemo(function(){return Rz(a)},[a]);return p.createElement(Oz,{styles:Iz(c,!e,a,n?"":"!important")})},my=!1;if(typeof window<"u")try{var Df=Object.defineProperty({},"passive",{get:function(){return my=!0,!0}});window.addEventListener("test",Df,Df),window.removeEventListener("test",Df,Df)}catch{my=!1}var pl=my?{passive:!1}:!1,kz=function(t){return t.tagName==="TEXTAREA"},s2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!kz(t)&&n[e]==="visible")},Pz=function(t){return s2(t,"overflowY")},Lz=function(t){return s2(t,"overflowX")},iE=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=a2(t,i);if(a){var c=o2(t,i),d=c[1],f=c[2];if(d>f)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},Uz=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},Vz=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},a2=function(t,e){return t==="v"?Pz(e):Lz(e)},o2=function(t,e){return t==="v"?Uz(e):Vz(e)},zz=function(t,e){return t==="h"&&e==="rtl"?-1:1},Bz=function(t,e,n,i,a){var c=zz(t,window.getComputedStyle(e).direction),d=c*i,f=n.target,h=e.contains(f),g=!1,y=d>0,v=0,b=0;do{if(!f)break;var N=o2(t,f),T=N[0],E=N[1],j=N[2],L=E-j-c*T;(T||L)&&a2(t,f)&&(v+=L,b+=T);var M=f.parentNode;f=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!h&&f!==document.body||h&&(e.contains(f)||e===f));return(y&&Math.abs(v)<1||!y&&Math.abs(b)<1)&&(g=!0),g},kf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},sE=function(t){return[t.deltaX,t.deltaY]},aE=function(t){return t&&"current"in t?t.current:t},Fz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},$z=0,gl=[];function Hz(t){var e=p.useRef([]),n=p.useRef([0,0]),i=p.useRef(),a=p.useState($z++)[0],c=p.useState(i2)[0],d=p.useRef(t);p.useEffect(function(){d.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var E=fz([t.lockRef.current],(t.shards||[]).map(aE),!0).filter(Boolean);return E.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),E.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var f=p.useCallback(function(E,j){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!d.current.allowPinchZoom;var L=kf(E),M=n.current,P="deltaX"in E?E.deltaX:M[0]-L[0],V="deltaY"in E?E.deltaY:M[1]-L[1],z,G=E.target,C=Math.abs(P)>Math.abs(V)?"h":"v";if("touches"in E&&C==="h"&&G.type==="range")return!1;var w=window.getSelection(),S=w&&w.anchorNode,A=S?S===G||S.contains(G):!1;if(A)return!1;var D=iE(C,G);if(!D)return!0;if(D?z=C:(z=C==="v"?"h":"v",D=iE(C,G)),!D)return!1;if(!i.current&&"changedTouches"in E&&(P||V)&&(i.current=z),!z)return!0;var k=i.current||z;return Bz(k,j,E,k==="h"?P:V)},[]),h=p.useCallback(function(E){var j=E;if(!(!gl.length||gl[gl.length-1]!==c)){var L="deltaY"in j?sE(j):kf(j),M=e.current.filter(function(z){return z.name===j.type&&(z.target===j.target||j.target===z.shadowParent)&&Fz(z.delta,L)})[0];if(M&&M.should){j.cancelable&&j.preventDefault();return}if(!M){var P=(d.current.shards||[]).map(aE).filter(Boolean).filter(function(z){return z.contains(j.target)}),V=P.length>0?f(j,P[0]):!d.current.noIsolation;V&&j.cancelable&&j.preventDefault()}}},[]),g=p.useCallback(function(E,j,L,M){var P={name:E,delta:j,target:L,should:M,shadowParent:Gz(L)};e.current.push(P),setTimeout(function(){e.current=e.current.filter(function(V){return V!==P})},1)},[]),y=p.useCallback(function(E){n.current=kf(E),i.current=void 0},[]),v=p.useCallback(function(E){g(E.type,sE(E),E.target,f(E,t.lockRef.current))},[]),b=p.useCallback(function(E){g(E.type,kf(E),E.target,f(E,t.lockRef.current))},[]);p.useEffect(function(){return gl.push(c),t.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",h,pl),document.addEventListener("touchmove",h,pl),document.addEventListener("touchstart",y,pl),function(){gl=gl.filter(function(E){return E!==c}),document.removeEventListener("wheel",h,pl),document.removeEventListener("touchmove",h,pl),document.removeEventListener("touchstart",y,pl)}},[]);var N=t.removeScrollBar,T=t.inert;return p.createElement(p.Fragment,null,T?p.createElement(c,{styles:qz(a)}):null,N?p.createElement(Dz,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Gz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Qz=xz(r2,Hz);var jm=p.forwardRef(function(t,e){return p.createElement(Cm,Mi({},t,{ref:e,sideCar:Qz}))});jm.classNames=Cm.classNames;var Wz=[" ","Enter","ArrowUp","ArrowDown"],Kz=[" ","Enter"],go="Select",[Tm,Am,Yz]=Bv(go),[tc]=Oa(go,[Yz,Nm]),Rm=Nm(),[Xz,Ia]=tc(go),[Zz,Jz]=tc(go),l2=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:a,onOpenChange:c,value:d,defaultValue:f,onValueChange:h,dir:g,name:y,autoComplete:v,disabled:b,required:N,form:T}=t,E=Rm(e),[j,L]=p.useState(null),[M,P]=p.useState(null),[V,z]=p.useState(!1),G=_m(g),[C,w]=ju({prop:i,defaultProp:a??!1,onChange:c,caller:go}),[S,A]=ju({prop:d,defaultProp:f,onChange:h,caller:go}),D=p.useRef(null),k=j?T||!!j.closest("form"):!0,[I,K]=p.useState(new Set),q=Array.from(I).map(R=>R.props.value).join(";");return l.jsx(Wj,{...E,children:l.jsxs(Xz,{required:N,scope:e,trigger:j,onTriggerChange:L,valueNode:M,onValueNodeChange:P,valueNodeHasChildren:V,onValueNodeHasChildrenChange:z,contentId:vs(),value:S,onValueChange:A,open:C,onOpenChange:w,dir:G,triggerPointerDownPosRef:D,disabled:b,children:[l.jsx(Tm.Provider,{scope:e,children:l.jsx(Zz,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(R=>{K(B=>new Set(B).add(R))},[]),onNativeOptionRemove:p.useCallback(R=>{K(B=>{const Y=new Set(B);return Y.delete(R),Y})},[]),children:n})}),k?l.jsxs(I2,{"aria-hidden":!0,required:N,tabIndex:-1,name:y,autoComplete:v,value:S,onChange:R=>A(R.target.value),disabled:b,form:T,children:[S===void 0?l.jsx("option",{value:""}):null,Array.from(I)]},q):null]})})};l2.displayName=go;var c2="SelectTrigger",u2=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...a}=t,c=Rm(n),d=Ia(c2,n),f=d.disabled||i,h=pt(e,d.onTriggerChange),g=Am(n),y=p.useRef("touch"),[v,b,N]=D2(E=>{const j=g().filter(P=>!P.disabled),L=j.find(P=>P.value===d.value),M=k2(j,E,L);M!==void 0&&d.onValueChange(M.value)}),T=E=>{f||(d.onOpenChange(!0),N()),E&&(d.triggerPointerDownPosRef.current={x:Math.round(E.pageX),y:Math.round(E.pageY)})};return l.jsx(Kj,{asChild:!0,...c,children:l.jsx(Or.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:f,"data-disabled":f?"":void 0,"data-placeholder":M2(d.value)?"":void 0,...a,ref:h,onClick:Te(a.onClick,E=>{E.currentTarget.focus(),y.current!=="mouse"&&T(E)}),onPointerDown:Te(a.onPointerDown,E=>{y.current=E.pointerType;const j=E.target;j.hasPointerCapture(E.pointerId)&&j.releasePointerCapture(E.pointerId),E.button===0&&E.ctrlKey===!1&&E.pointerType==="mouse"&&(T(E),E.preventDefault())}),onKeyDown:Te(a.onKeyDown,E=>{const j=v.current!=="";!(E.ctrlKey||E.altKey||E.metaKey)&&E.key.length===1&&b(E.key),!(j&&E.key===" ")&&Wz.includes(E.key)&&(T(),E.preventDefault())})})})});u2.displayName=c2;var d2="SelectValue",f2=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:a,children:c,placeholder:d="",...f}=t,h=Ia(d2,n),{onValueNodeHasChildrenChange:g}=h,y=c!==void 0,v=pt(e,h.onValueNodeChange);return yn(()=>{g(y)},[g,y]),l.jsx(Or.span,{...f,ref:v,style:{pointerEvents:"none"},children:M2(h.value)?l.jsx(l.Fragment,{children:d}):c})});f2.displayName=d2;var eB="SelectIcon",h2=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...a}=t;return l.jsx(Or.span,{"aria-hidden":!0,...a,ref:e,children:i||""})});h2.displayName=eB;var tB="SelectPortal",m2=t=>l.jsx(Em,{asChild:!0,...t});m2.displayName=tB;var _o="SelectContent",p2=p.forwardRef((t,e)=>{const n=Ia(_o,t.__scopeSelect),[i,a]=p.useState();if(yn(()=>{a(new DocumentFragment)},[]),!n.open){const c=i;return c?Wl.createPortal(l.jsx(g2,{scope:t.__scopeSelect,children:l.jsx(Tm.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),c):null}return l.jsx(_2,{...t,ref:e})});p2.displayName=_o;var oi=10,[g2,Ma]=tc(_o),nB="SelectContentImpl",rB=Zj("SelectContent.RemoveScroll"),_2=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:c,onPointerDownOutside:d,side:f,sideOffset:h,align:g,alignOffset:y,arrowPadding:v,collisionBoundary:b,collisionPadding:N,sticky:T,hideWhenDetached:E,avoidCollisions:j,...L}=t,M=Ia(_o,n),[P,V]=p.useState(null),[z,G]=p.useState(null),C=pt(e,me=>V(me)),[w,S]=p.useState(null),[A,D]=p.useState(null),k=Am(n),[I,K]=p.useState(!1),q=p.useRef(!1);p.useEffect(()=>{if(P)return Xv(P)},[P]),Fv();const R=p.useCallback(me=>{const[Fe,...Ne]=k().map(Ze=>Ze.ref.current),[Be]=Ne.slice(-1),et=document.activeElement;for(const Ze of me)if(Ze===et||(Ze?.scrollIntoView({block:"nearest"}),Ze===Fe&&z&&(z.scrollTop=0),Ze===Be&&z&&(z.scrollTop=z.scrollHeight),Ze?.focus(),document.activeElement!==et))return},[k,z]),B=p.useCallback(()=>R([w,P]),[R,w,P]);p.useEffect(()=>{I&&B()},[I,B]);const{onOpenChange:Y,triggerPointerDownPosRef:Z}=M;p.useEffect(()=>{if(P){let me={x:0,y:0};const Fe=Be=>{me={x:Math.abs(Math.round(Be.pageX)-(Z.current?.x??0)),y:Math.abs(Math.round(Be.pageY)-(Z.current?.y??0))}},Ne=Be=>{me.x<=10&&me.y<=10?Be.preventDefault():P.contains(Be.target)||Y(!1),document.removeEventListener("pointermove",Fe),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[P,Y,Z]),p.useEffect(()=>{const me=()=>Y(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[Y]);const[se,F]=D2(me=>{const Fe=k().filter(et=>!et.disabled),Ne=Fe.find(et=>et.ref.current===document.activeElement),Be=k2(Fe,me,Ne);Be&&setTimeout(()=>Be.ref.current.focus())}),re=p.useCallback((me,Fe,Ne)=>{const Be=!q.current&&!Ne;(M.value!==void 0&&M.value===Fe||Be)&&(S(me),Be&&(q.current=!0))},[M.value]),he=p.useCallback(()=>P?.focus(),[P]),pe=p.useCallback((me,Fe,Ne)=>{const Be=!q.current&&!Ne;(M.value!==void 0&&M.value===Fe||Be)&&D(me)},[M.value]),ye=i==="popper"?py:y2,we=ye===py?{side:f,sideOffset:h,align:g,alignOffset:y,arrowPadding:v,collisionBoundary:b,collisionPadding:N,sticky:T,hideWhenDetached:E,avoidCollisions:j}:{};return l.jsx(g2,{scope:n,content:P,viewport:z,onViewportChange:G,itemRefCallback:re,selectedItem:w,onItemLeave:he,itemTextRefCallback:pe,focusSelectedItem:B,selectedItemText:A,position:i,isPositioned:I,searchRef:se,children:l.jsx(jm,{as:rB,allowPinchZoom:!0,children:l.jsx(vm,{asChild:!0,trapped:M.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:Te(a,me=>{M.trigger?.focus({preventScroll:!0}),me.preventDefault()}),children:l.jsx(ym,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:l.jsx(ye,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:me=>me.preventDefault(),...L,...we,onPlaced:()=>K(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...L.style},onKeyDown:Te(L.onKeyDown,me=>{const Fe=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!Fe&&me.key.length===1&&F(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let Be=k().filter(et=>!et.disabled).map(et=>et.ref.current);if(["ArrowUp","End"].includes(me.key)&&(Be=Be.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const et=me.target,Ze=Be.indexOf(et);Be=Be.slice(Ze+1)}setTimeout(()=>R(Be)),me.preventDefault()}})})})})})})});_2.displayName=nB;var iB="SelectItemAlignedPosition",y2=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...a}=t,c=Ia(_o,n),d=Ma(_o,n),[f,h]=p.useState(null),[g,y]=p.useState(null),v=pt(e,C=>y(C)),b=Am(n),N=p.useRef(!1),T=p.useRef(!0),{viewport:E,selectedItem:j,selectedItemText:L,focusSelectedItem:M}=d,P=p.useCallback(()=>{if(c.trigger&&c.valueNode&&f&&g&&E&&j&&L){const C=c.trigger.getBoundingClientRect(),w=g.getBoundingClientRect(),S=c.valueNode.getBoundingClientRect(),A=L.getBoundingClientRect();if(c.dir!=="rtl"){const et=A.left-w.left,Ze=S.left-et,it=C.left-Ze,Mt=C.width+it,Ir=Math.max(Mt,w.width),hr=window.innerWidth-oi,mr=cy(Ze,[oi,Math.max(oi,hr-Ir)]);f.style.minWidth=Mt+"px",f.style.left=mr+"px"}else{const et=w.right-A.right,Ze=window.innerWidth-S.right-et,it=window.innerWidth-C.right-Ze,Mt=C.width+it,Ir=Math.max(Mt,w.width),hr=window.innerWidth-oi,mr=cy(Ze,[oi,Math.max(oi,hr-Ir)]);f.style.minWidth=Mt+"px",f.style.right=mr+"px"}const D=b(),k=window.innerHeight-oi*2,I=E.scrollHeight,K=window.getComputedStyle(g),q=parseInt(K.borderTopWidth,10),R=parseInt(K.paddingTop,10),B=parseInt(K.borderBottomWidth,10),Y=parseInt(K.paddingBottom,10),Z=q+R+I+Y+B,se=Math.min(j.offsetHeight*5,Z),F=window.getComputedStyle(E),re=parseInt(F.paddingTop,10),he=parseInt(F.paddingBottom,10),pe=C.top+C.height/2-oi,ye=k-pe,we=j.offsetHeight/2,me=j.offsetTop+we,Fe=q+R+me,Ne=Z-Fe;if(Fe<=pe){const et=D.length>0&&j===D[D.length-1].ref.current;f.style.bottom="0px";const Ze=g.clientHeight-E.offsetTop-E.offsetHeight,it=Math.max(ye,we+(et?he:0)+Ze+B),Mt=Fe+it;f.style.height=Mt+"px"}else{const et=D.length>0&&j===D[0].ref.current;f.style.top="0px";const it=Math.max(pe,q+E.offsetTop+(et?re:0)+we)+Ne;f.style.height=it+"px",E.scrollTop=Fe-pe+E.offsetTop}f.style.margin=`${oi}px 0`,f.style.minHeight=se+"px",f.style.maxHeight=k+"px",i?.(),requestAnimationFrame(()=>N.current=!0)}},[b,c.trigger,c.valueNode,f,g,E,j,L,c.dir,i]);yn(()=>P(),[P]);const[V,z]=p.useState();yn(()=>{g&&z(window.getComputedStyle(g).zIndex)},[g]);const G=p.useCallback(C=>{C&&T.current===!0&&(P(),M?.(),T.current=!1)},[P,M]);return l.jsx(aB,{scope:n,contentWrapper:f,shouldExpandOnScrollRef:N,onScrollButtonChange:G,children:l.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:V},children:l.jsx(Or.div,{...a,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});y2.displayName=iB;var sB="SelectPopperPosition",py=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:a=oi,...c}=t,d=Rm(n);return l.jsx(Yj,{...d,...c,ref:e,align:i,collisionPadding:a,style:{boxSizing:"border-box",...c.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});py.displayName=sB;var[aB,Zv]=tc(_o,{}),gy="SelectViewport",v2=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...a}=t,c=Ma(gy,n),d=Zv(gy,n),f=pt(e,c.onViewportChange),h=p.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),l.jsx(Tm.Slot,{scope:n,children:l.jsx(Or.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:f,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Te(a.onScroll,g=>{const y=g.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:b}=d;if(b?.current&&v){const N=Math.abs(h.current-y.scrollTop);if(N>0){const T=window.innerHeight-oi*2,E=parseFloat(v.style.minHeight),j=parseFloat(v.style.height),L=Math.max(E,j);if(L<T){const M=L+N,P=Math.min(T,M),V=M-P;v.style.height=P+"px",v.style.bottom==="0px"&&(y.scrollTop=V>0?V:0,v.style.justifyContent="flex-end")}}}h.current=y.scrollTop})})})]})});v2.displayName=gy;var b2="SelectGroup",[oB,lB]=tc(b2),cB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,a=vs();return l.jsx(oB,{scope:n,id:a,children:l.jsx(Or.div,{role:"group","aria-labelledby":a,...i,ref:e})})});cB.displayName=b2;var x2="SelectLabel",w2=p.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,a=lB(x2,n);return l.jsx(Or.div,{id:a.id,...i,ref:e})});w2.displayName=x2;var kh="SelectItem",[uB,S2]=tc(kh),N2=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:a=!1,textValue:c,...d}=t,f=Ia(kh,n),h=Ma(kh,n),g=f.value===i,[y,v]=p.useState(c??""),[b,N]=p.useState(!1),T=pt(e,M=>h.itemRefCallback?.(M,i,a)),E=vs(),j=p.useRef("touch"),L=()=>{a||(f.onValueChange(i),f.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(uB,{scope:n,value:i,disabled:a,textId:E,isSelected:g,onItemTextChange:p.useCallback(M=>{v(P=>P||(M?.textContent??"").trim())},[]),children:l.jsx(Tm.ItemSlot,{scope:n,value:i,disabled:a,textValue:y,children:l.jsx(Or.div,{role:"option","aria-labelledby":E,"data-highlighted":b?"":void 0,"aria-selected":g&&b,"data-state":g?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...d,ref:T,onFocus:Te(d.onFocus,()=>N(!0)),onBlur:Te(d.onBlur,()=>N(!1)),onClick:Te(d.onClick,()=>{j.current!=="mouse"&&L()}),onPointerUp:Te(d.onPointerUp,()=>{j.current==="mouse"&&L()}),onPointerDown:Te(d.onPointerDown,M=>{j.current=M.pointerType}),onPointerMove:Te(d.onPointerMove,M=>{j.current=M.pointerType,a?h.onItemLeave?.():j.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(d.onPointerLeave,M=>{M.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:Te(d.onKeyDown,M=>{h.searchRef?.current!==""&&M.key===" "||(Kz.includes(M.key)&&L(),M.key===" "&&M.preventDefault())})})})})});N2.displayName=kh;var cu="SelectItemText",E2=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:a,...c}=t,d=Ia(cu,n),f=Ma(cu,n),h=S2(cu,n),g=Jz(cu,n),[y,v]=p.useState(null),b=pt(e,L=>v(L),h.onItemTextChange,L=>f.itemTextRefCallback?.(L,h.value,h.disabled)),N=y?.textContent,T=p.useMemo(()=>l.jsx("option",{value:h.value,disabled:h.disabled,children:N},h.value),[h.disabled,h.value,N]),{onNativeOptionAdd:E,onNativeOptionRemove:j}=g;return yn(()=>(E(T),()=>j(T)),[E,j,T]),l.jsxs(l.Fragment,{children:[l.jsx(Or.span,{id:h.textId,...c,ref:b}),h.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Wl.createPortal(c.children,d.valueNode):null]})});E2.displayName=cu;var C2="SelectItemIndicator",j2=p.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return S2(C2,n).isSelected?l.jsx(Or.span,{"aria-hidden":!0,...i,ref:e}):null});j2.displayName=C2;var _y="SelectScrollUpButton",T2=p.forwardRef((t,e)=>{const n=Ma(_y,t.__scopeSelect),i=Zv(_y,t.__scopeSelect),[a,c]=p.useState(!1),d=pt(e,i.onScrollButtonChange);return yn(()=>{if(n.viewport&&n.isPositioned){let f=function(){const g=h.scrollTop>0;c(g)};const h=n.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),a?l.jsx(R2,{...t,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=n;f&&h&&(f.scrollTop=f.scrollTop-h.offsetHeight)}}):null});T2.displayName=_y;var yy="SelectScrollDownButton",A2=p.forwardRef((t,e)=>{const n=Ma(yy,t.__scopeSelect),i=Zv(yy,t.__scopeSelect),[a,c]=p.useState(!1),d=pt(e,i.onScrollButtonChange);return yn(()=>{if(n.viewport&&n.isPositioned){let f=function(){const g=h.scrollHeight-h.clientHeight,y=Math.ceil(h.scrollTop)<g;c(y)};const h=n.viewport;return f(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[n.viewport,n.isPositioned]),a?l.jsx(R2,{...t,ref:d,onAutoScroll:()=>{const{viewport:f,selectedItem:h}=n;f&&h&&(f.scrollTop=f.scrollTop+h.offsetHeight)}}):null});A2.displayName=yy;var R2=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...a}=t,c=Ma("SelectScrollButton",n),d=p.useRef(null),f=Am(n),h=p.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return p.useEffect(()=>()=>h(),[h]),yn(()=>{f().find(y=>y.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[f]),l.jsx(Or.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:Te(a.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(i,50))}),onPointerMove:Te(a.onPointerMove,()=>{c.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(i,50))}),onPointerLeave:Te(a.onPointerLeave,()=>{h()})})}),dB="SelectSeparator",O2=p.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return l.jsx(Or.div,{"aria-hidden":!0,...i,ref:e})});O2.displayName=dB;var vy="SelectArrow",fB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,a=Rm(n),c=Ia(vy,n),d=Ma(vy,n);return c.open&&d.position==="popper"?l.jsx(Xj,{...a,...i,ref:e}):null});fB.displayName=vy;var hB="SelectBubbleInput",I2=p.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const a=p.useRef(null),c=pt(i,a),d=ZV(e);return p.useEffect(()=>{const f=a.current;if(!f)return;const h=window.HTMLSelectElement.prototype,y=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==e&&y){const v=new Event("change",{bubbles:!0});y.call(f,e),f.dispatchEvent(v)}},[d,e]),l.jsx(Or.select,{...n,style:{...Jj,...n.style},ref:c,defaultValue:e})});I2.displayName=hB;function M2(t){return t===""||t===void 0}function D2(t){const e=Rn(t),n=p.useRef(""),i=p.useRef(0),a=p.useCallback(d=>{const f=n.current+d;e(f),(function h(g){n.current=g,window.clearTimeout(i.current),g!==""&&(i.current=window.setTimeout(()=>h(""),1e3))})(f)},[e]),c=p.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,a,c]}function k2(t,e,n){const a=e.length>1&&Array.from(e).every(g=>g===e[0])?e[0]:e,c=n?t.indexOf(n):-1;let d=mB(t,Math.max(c,0));a.length===1&&(d=d.filter(g=>g!==n));const h=d.find(g=>g.textValue.toLowerCase().startsWith(a.toLowerCase()));return h!==n?h:void 0}function mB(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var pB=l2,P2=u2,gB=f2,_B=h2,yB=m2,L2=p2,vB=v2,U2=w2,V2=N2,bB=E2,xB=j2,z2=T2,B2=A2,F2=O2;const an=pB,on=gB,Kt=p.forwardRef(({className:t,children:e,...n},i)=>l.jsxs(P2,{ref:i,className:Ge("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(_B,{asChild:!0,children:l.jsx(Iv,{className:"h-4 w-4 opacity-50"})})]}));Kt.displayName=P2.displayName;const q2=p.forwardRef(({className:t,...e},n)=>l.jsx(z2,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(X6,{className:"h-4 w-4"})}));q2.displayName=z2.displayName;const $2=p.forwardRef(({className:t,...e},n)=>l.jsx(B2,{ref:n,className:Ge("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(Iv,{className:"h-4 w-4"})}));$2.displayName=B2.displayName;const Yt=p.forwardRef(({className:t,children:e,position:n="popper",...i},a)=>l.jsx(yB,{children:l.jsxs(L2,{ref:a,className:Ge("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[l.jsx(q2,{}),l.jsx(vB,{className:Ge("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx($2,{})]})}));Yt.displayName=L2.displayName;const wB=p.forwardRef(({className:t,...e},n)=>l.jsx(U2,{ref:n,className:Ge("px-2 py-1.5 text-sm font-semibold",t),...e}));wB.displayName=U2.displayName;const ot=p.forwardRef(({className:t,children:e,...n},i)=>l.jsxs(V2,{ref:i,className:Ge("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(xB,{children:l.jsx(uj,{className:"h-4 w-4"})})}),l.jsx(bB,{children:e})]}));ot.displayName=V2.displayName;const SB=p.forwardRef(({className:t,...e},n)=>l.jsx(F2,{ref:n,className:Ge("-mx-1 my-1 h-px bg-muted",t),...e}));SB.displayName=F2.displayName;function nt({className:t,...e}){return l.jsx("div",{className:Ge("animate-pulse rounded-md bg-primary/10",t),...e})}function NB(t,e){return p.useReducer((n,i)=>e[n][i]??n,t)}var ei=t=>{const{present:e,children:n}=t,i=EB(e),a=typeof n=="function"?n({present:i.isPresent}):p.Children.only(n),c=pt(i.ref,CB(a));return typeof n=="function"||i.isPresent?p.cloneElement(a,{ref:c}):null};ei.displayName="Presence";function EB(t){const[e,n]=p.useState(),i=p.useRef(null),a=p.useRef(t),c=p.useRef("none"),d=t?"mounted":"unmounted",[f,h]=NB(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const g=Pf(i.current);c.current=f==="mounted"?g:"none"},[f]),yn(()=>{const g=i.current,y=a.current;if(y!==t){const b=c.current,N=Pf(g);t?h("MOUNT"):N==="none"||g?.display==="none"?h("UNMOUNT"):h(y&&b!==N?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,h]),yn(()=>{if(e){let g;const y=e.ownerDocument.defaultView??window,v=N=>{const E=Pf(i.current).includes(CSS.escape(N.animationName));if(N.target===e&&E&&(h("ANIMATION_END"),!a.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",g=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},b=N=>{N.target===e&&(c.current=Pf(i.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{y.clearTimeout(g),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:p.useCallback(g=>{i.current=g?getComputedStyle(g):null,n(g)},[])}}function Pf(t){return t?.animationName||"none"}function CB(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function H2(t){const e=jB(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(AB);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function jB(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=OB(a),f=RB(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var TB=Symbol("radix.slottable");function AB(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===TB}function RB(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function OB(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var IB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xu=IB.reduce((t,e)=>{const n=H2(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),Om="Dialog",[G2]=Oa(Om),[MB,xi]=G2(Om),Q2=t=>{const{__scopeDialog:e,children:n,open:i,defaultOpen:a,onOpenChange:c,modal:d=!0}=t,f=p.useRef(null),h=p.useRef(null),[g,y]=ju({prop:i,defaultProp:a??!1,onChange:c,caller:Om});return l.jsx(MB,{scope:e,triggerRef:f,contentRef:h,contentId:vs(),titleId:vs(),descriptionId:vs(),open:g,onOpenChange:y,onOpenToggle:p.useCallback(()=>y(v=>!v),[y]),modal:d,children:n})};Q2.displayName=Om;var W2="DialogTrigger",K2=p.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,a=xi(W2,n),c=pt(e,a.triggerRef);return l.jsx(Xu.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tb(a.open),...i,ref:c,onClick:Te(t.onClick,a.onOpenToggle)})});K2.displayName=W2;var Jv="DialogPortal",[DB,Y2]=G2(Jv,{forceMount:void 0}),X2=t=>{const{__scopeDialog:e,forceMount:n,children:i,container:a}=t,c=xi(Jv,e);return l.jsx(DB,{scope:e,forceMount:n,children:p.Children.map(i,d=>l.jsx(ei,{present:n||c.open,children:l.jsx(Em,{asChild:!0,container:a,children:d})}))})};X2.displayName=Jv;var Ph="DialogOverlay",Z2=p.forwardRef((t,e)=>{const n=Y2(Ph,t.__scopeDialog),{forceMount:i=n.forceMount,...a}=t,c=xi(Ph,t.__scopeDialog);return c.modal?l.jsx(ei,{present:i||c.open,children:l.jsx(PB,{...a,ref:e})}):null});Z2.displayName=Ph;var kB=H2("DialogOverlay.RemoveScroll"),PB=p.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,a=xi(Ph,n);return l.jsx(jm,{as:kB,allowPinchZoom:!0,shards:[a.contentRef],children:l.jsx(Xu.div,{"data-state":tb(a.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),yo="DialogContent",J2=p.forwardRef((t,e)=>{const n=Y2(yo,t.__scopeDialog),{forceMount:i=n.forceMount,...a}=t,c=xi(yo,t.__scopeDialog);return l.jsx(ei,{present:i||c.open,children:c.modal?l.jsx(LB,{...a,ref:e}):l.jsx(UB,{...a,ref:e})})});J2.displayName=yo;var LB=p.forwardRef((t,e)=>{const n=xi(yo,t.__scopeDialog),i=p.useRef(null),a=pt(e,n.contentRef,i);return p.useEffect(()=>{const c=i.current;if(c)return Xv(c)},[]),l.jsx(eT,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(t.onCloseAutoFocus,c=>{c.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Te(t.onPointerDownOutside,c=>{const d=c.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&c.preventDefault()}),onFocusOutside:Te(t.onFocusOutside,c=>c.preventDefault())})}),UB=p.forwardRef((t,e)=>{const n=xi(yo,t.__scopeDialog),i=p.useRef(!1),a=p.useRef(!1);return l.jsx(eT,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{t.onCloseAutoFocus?.(c),c.defaultPrevented||(i.current||n.triggerRef.current?.focus(),c.preventDefault()),i.current=!1,a.current=!1},onInteractOutside:c=>{t.onInteractOutside?.(c),c.defaultPrevented||(i.current=!0,c.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const d=c.target;n.triggerRef.current?.contains(d)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&a.current&&c.preventDefault()}})}),eT=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:c,...d}=t,f=xi(yo,n),h=p.useRef(null),g=pt(e,h);return Fv(),l.jsxs(l.Fragment,{children:[l.jsx(vm,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:a,onUnmountAutoFocus:c,children:l.jsx(ym,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":tb(f.open),...d,ref:g,onDismiss:()=>f.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(VB,{titleId:f.titleId}),l.jsx(BB,{contentRef:h,descriptionId:f.descriptionId})]})]})}),eb="DialogTitle",tT=p.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,a=xi(eb,n);return l.jsx(Xu.h2,{id:a.titleId,...i,ref:e})});tT.displayName=eb;var nT="DialogDescription",rT=p.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,a=xi(nT,n);return l.jsx(Xu.p,{id:a.descriptionId,...i,ref:e})});rT.displayName=nT;var iT="DialogClose",sT=p.forwardRef((t,e)=>{const{__scopeDialog:n,...i}=t,a=xi(iT,n);return l.jsx(Xu.button,{type:"button",...i,ref:e,onClick:Te(t.onClick,()=>a.onOpenChange(!1))})});sT.displayName=iT;function tb(t){return t?"open":"closed"}var aT="DialogTitleWarning",[Z$,oT]=f5(aT,{contentName:yo,titleName:eb,docsSlug:"dialog"}),VB=({titleId:t})=>{const e=oT(aT),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},zB="DialogDescriptionWarning",BB=({contentRef:t,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oT(zB).contentName}}.`;return p.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(i))},[i,t,e]),null},lT=Q2,FB=K2,cT=X2,Im=Z2,Mm=J2,Dm=tT,km=rT,uT=sT;const nb=lT,dT=FB,qB=cT,fT=p.forwardRef(({className:t,...e},n)=>l.jsx(Im,{className:Ge("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));fT.displayName=Im.displayName;const $B=um("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Pm=p.forwardRef(({side:t="right",className:e,children:n,...i},a)=>l.jsxs(qB,{children:[l.jsx(fT,{}),l.jsxs(Mm,{ref:a,className:Ge($B({side:t}),e),...i,children:[l.jsxs(uT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[l.jsx(dm,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));Pm.displayName=Mm.displayName;const Lm=({className:t,...e})=>l.jsx("div",{className:Ge("flex flex-col space-y-2 text-center sm:text-left",t),...e});Lm.displayName="SheetHeader";const Um=p.forwardRef(({className:t,...e},n)=>l.jsx(Dm,{ref:n,className:Ge("text-lg font-semibold text-foreground",t),...e}));Um.displayName=Dm.displayName;const hT=p.forwardRef(({className:t,...e},n)=>l.jsx(km,{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));hT.displayName=km.displayName;function HB(t){const e=String(t?.product_id||t?.productId||"").trim();if(e)return e;const n=String(t?.product_code||t?.productCode||"").trim(),i=String(t?.barcode||"").trim();return n&&i?`${n}_${i}`:String(t?._rowNumber||"").trim()}function GB(){return l.jsxs(Pe,{className:"overflow-hidden rounded-2xl",children:[l.jsx("div",{className:"h-48 bg-white",children:l.jsx(nt,{className:"h-full w-full"})}),l.jsxs(ze,{className:"p-4",children:[l.jsx(nt,{className:"h-3 w-20"}),l.jsxs("div",{className:"mt-3 space-y-2",children:[l.jsx(nt,{className:"h-4 w-full"}),l.jsx(nt,{className:"h-4 w-2/3"})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[l.jsx(nt,{className:"h-6 w-16"}),l.jsx(nt,{className:"h-6 w-20 rounded-full"})]}),l.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[l.jsx(nt,{className:"h-8 w-28 rounded-xl"}),l.jsx(nt,{className:"h-8 w-24 rounded-xl"})]}),l.jsxs("div",{className:"mt-4 space-y-2",children:[l.jsx(nt,{className:"h-3 w-40"}),l.jsx(nt,{className:"h-3 w-28"})]})]})]})}function QB(){const[t,e]=p.useState([]),[n,i]=p.useState(!0),[a,c]=p.useState(!1),[d,f]=p.useState(""),[h,g]=p.useState("ALL");p.useEffect(()=>{let P=!0;const V="bw_products_cache_v1",z=360*60*1e3;async function G(){try{try{const A=sessionStorage.getItem(V);if(A){const D=JSON.parse(A);if(D?.ts&&Date.now()-Number(D.ts)<z&&Array.isArray(D?.products)){P&&(e(D.products),i(!1));return}}}catch{}const w=await(await fetch("/brand-wala-uk/data/pc_data.json",{cache:"no-store"})).json();if(!P)return;const S=w.products||[];e(S);try{sessionStorage.setItem(V,JSON.stringify({ts:Date.now(),products:S}))}catch{}}catch(C){console.error("Failed to load products:",C)}finally{P&&i(!1)}}return G(),()=>{P=!1}},[]);const y=p.useMemo(()=>{const P=new Set;for(const V of t){const z=String(V?.brand||"").trim();z&&P.add(z)}return["ALL",...Array.from(P).sort((V,z)=>V.localeCompare(z))]},[t]),v=p.useMemo(()=>{const P=d.trim().toLowerCase();return t.filter(V=>{if(h!=="ALL"&&String(V?.brand||"").trim()!==h)return!1;if(!P)return!0;const z=String(V?.name||"").toLowerCase(),G=String(V?.brand||"").toLowerCase(),C=String(V?.barcode||"").toLowerCase(),w=String(V?.product_code||"").toLowerCase(),S=String(V?.product_id||"").toLowerCase();return z.includes(P)||G.includes(P)||C.includes(P)||w.includes(P)||S.includes(P)})},[t,h,d]),b=t.length,N=v.length,T=20,E=h!=="ALL"||d.trim().length>0,j=(h!=="ALL"?1:0)+(d.trim().length>0?1:0),L=()=>{f(""),g("ALL")},M=l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"Search"}),l.jsx(He,{value:d,onChange:P=>f(P.target.value),placeholder:"Search name, brand, barcode, code, or product id...",className:"rounded-xl"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"Brand"}),l.jsxs(an,{value:h,onValueChange:g,children:[l.jsx(Kt,{className:"rounded-xl",children:l.jsx(on,{placeholder:"Select brand"})}),l.jsx(Yt,{children:y.map(P=>l.jsx(ot,{value:P,children:P==="ALL"?"All brands":P},P))})]})]})]});return l.jsx("div",{className:"min-h-screen bg-background",children:l.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 sm:py-8",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between gap-2 lg:hidden",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.jsx("span",{className:"font-medium text-foreground",children:n?"":N})," ","showing ",l.jsx("span",{className:"opacity-60",children:"/"})," ",l.jsx("span",{className:"font-medium text-foreground",children:n?"":b})]}),l.jsxs(nb,{open:a,onOpenChange:c,children:[l.jsx(dT,{asChild:!0,children:l.jsxs(fe,{variant:E?"default":"outline",className:"rounded-xl",children:[l.jsx(lU,{className:"mr-2 h-4 w-4"}),"Filters",E?l.jsx("span",{className:"ml-2 rounded-full border border-current px-1.5 py-0.5 text-[10px] leading-none",children:j}):null]})}),l.jsxs(Pm,{side:"left",className:"w-[90vw] sm:max-w-sm",children:[l.jsxs(Lm,{children:[l.jsx(Um,{children:"Filters"}),l.jsx(hT,{children:"Refine product list by search and brand."})]}),l.jsxs("div",{className:"mt-4 space-y-4",children:[M,l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fe,{variant:"outline",className:"flex-1 rounded-xl",onClick:L,children:"Clear"}),l.jsx(fe,{className:"flex-1 rounded-xl",onClick:()=>c(!1),children:"Apply"})]})]})]})]})]}),l.jsx(Pe,{className:"mb-6 hidden rounded-2xl lg:block",children:l.jsx(ze,{className:"p-4",children:l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[l.jsx("div",{className:"grid w-full grid-cols-1 gap-3 md:grid-cols-2",children:M}),l.jsxs("div",{className:"flex flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:justify-between md:justify-end",children:[l.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.jsx("span",{className:"font-medium text-foreground",children:n?"":N})," ","showing ",l.jsx("span",{className:"opacity-60",children:"/"})," ",l.jsx("span",{className:"font-medium text-foreground",children:n?"":b})," ","total"]}),l.jsx(fe,{variant:"outline",className:"w-full rounded-xl sm:w-auto",onClick:L,children:"Clear"})]})]})})}),n?l.jsx("div",{className:"grid gap-6 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4",children:Array.from({length:T}).map((P,V)=>l.jsx(GB,{},V))}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid gap-6 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 2xl:grid-cols-4",children:v.map(P=>l.jsx(d5,{product:P},HB(P)))}),v.length===0&&l.jsx(Pe,{className:"mt-10 rounded-2xl",children:l.jsx(ze,{className:"p-8 text-center text-muted-foreground",children:"No products match your filters."})})]})]})})}const Vm=lT,WB=cT,mT=p.forwardRef(({className:t,...e},n)=>l.jsx(Im,{ref:n,className:Ge("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));mT.displayName=Im.displayName;const Zu=p.forwardRef(({className:t,children:e,...n},i)=>l.jsxs(WB,{children:[l.jsx(mT,{}),l.jsxs(Mm,{ref:i,className:Ge("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(uT,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(dm,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zu.displayName=Mm.displayName;const Ju=({className:t,...e})=>l.jsx("div",{className:Ge("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ju.displayName="DialogHeader";const ed=({className:t,...e})=>l.jsx("div",{className:Ge("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ed.displayName="DialogFooter";const td=p.forwardRef(({className:t,...e},n)=>l.jsx(Dm,{ref:n,className:Ge("text-lg font-semibold leading-none tracking-tight",t),...e}));td.displayName=Dm.displayName;const zm=p.forwardRef(({className:t,...e},n)=>l.jsx(km,{ref:n,className:Ge("text-sm text-muted-foreground",t),...e}));zm.displayName=km.displayName;function KB(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0");return`${e}-${n}-${i} ${a}:${c}`}function YB({open:t,onClose:e,onCreate:n,loading:i=!1,error:a="",userEmail:c=""}){const d=p.useMemo(()=>{const g=String(c||"").trim(),y=KB();return g?`${g} - ${y}`:`Order - ${y}`},[c,t]),[f,h]=p.useState(d);return p.useEffect(()=>{t&&h(d)},[t,d]),l.jsx(Vm,{open:t,onOpenChange:g=>{!g&&!i&&e?.()},children:l.jsxs(Zu,{className:"fixed left-1/2 top-1/2 z-50 w-full max-w-md -translate-x-1/2 -translate-y-1/2 rounded-2xl bg-background p-6 shadow-lg",children:[" ",l.jsx(Ju,{children:l.jsx(td,{className:"text-foreground",children:"Place order"})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-sm font-medium text-muted-foreground",children:"Order name"}),l.jsx(He,{value:f,readOnly:!0,disabled:!0,autoComplete:"off",spellCheck:!1,className:"rounded-xl"})]}),a?l.jsx(Rv,{variant:"destructive",className:"rounded-xl",children:l.jsx(Ov,{children:a})}):null,l.jsxs("p",{className:"text-xs text-muted-foreground",children:["This will create an order from your current cart. Status will be"," ",l.jsx("span",{className:"font-semibold text-foreground",children:"submitted"}),"."]})]}),l.jsxs(ed,{className:"gap-2 sm:gap-2",children:[l.jsx(fe,{type:"button",variant:"outline",className:"rounded-xl",onClick:e,disabled:i,children:"Cancel"}),l.jsx(fe,{type:"button",className:"rounded-xl",onClick:()=>n?.(f),disabled:i,children:i?l.jsxs(l.Fragment,{children:[l.jsx(Ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Create order"]}):"Create order"})]})]})})}function nd({open:t,onClose:e,onConfirm:n,title:i="Delete",description:a="Are you sure? This action cannot be undone.",confirmText:c="Delete",loading:d=!1,error:f=""}){return l.jsx(Vm,{open:t,onOpenChange:h=>{!d&&!h&&e?.()},children:l.jsxs(Zu,{className:"sm:max-w-md",children:[l.jsxs(Ju,{children:[l.jsx(td,{children:i}),l.jsx(zm,{children:a})]}),f?l.jsx("div",{className:"rounded-lg border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:f}):null,l.jsxs(ed,{children:[l.jsx(fe,{variant:"outline",onClick:e,disabled:d,children:"Cancel"}),l.jsx(fe,{variant:"destructive",onClick:n,disabled:d,children:d?"Deleting...":c})]})]})})}function XB(t){if(!t)return"";const e=t.match(/[?&]id=([^&]+)/),n=t.match(/\/file\/d\/([^/]+)/),i=e?.[1]||n?.[1];return i?`https://lh3.googleusercontent.com/d/${i}`:t}function ZB({rows:t=3}){return l.jsx("div",{className:"space-y-2",children:Array.from({length:t}).map((e,n)=>l.jsx(Pe,{className:"rounded-xl border border-border bg-card",children:l.jsx(ze,{className:"p-2.5",children:l.jsxs("div",{className:"flex gap-2.5",children:[l.jsx(nt,{className:"h-14 w-14 rounded-lg"}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx(nt,{className:"h-3 w-20"}),l.jsxs("div",{className:"mt-2 space-y-2",children:[l.jsx(nt,{className:"h-4 w-full"}),l.jsx(nt,{className:"h-4 w-2/3"})]}),l.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[l.jsx(nt,{className:"h-3 w-28"}),l.jsx(nt,{className:"h-4 w-16"})]}),l.jsxs("div",{className:"mt-2 flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(nt,{className:"h-8 w-8 rounded-lg"}),l.jsx(nt,{className:"h-8 w-20 rounded-lg"}),l.jsx(nt,{className:"h-8 w-8 rounded-lg"}),l.jsx(nt,{className:"h-8 w-8 rounded-lg"})]}),l.jsx(nt,{className:"h-8 w-8 rounded-lg"})]}),l.jsx("div",{className:"mt-2",children:l.jsx(nt,{className:"h-3 w-36"})})]})]})})},n))})}function JB(){const{user:t}=en(),e=fr(),n=!!t?.can_see_price_gbp,{items:i,remove:a,clear:c,loading:d,getItemLoadingOp:f,updateQty:h,createOrder:g}=mm(),[y,v]=p.useState({}),[b,N]=p.useState(null),[T,E]=p.useState(!1),[j,L]=p.useState(!1),[M,P]=p.useState(!1),[V,z]=p.useState("");function G(q){const R=y[q.key];return typeof R=="number"?R:q.qty}function C(q,R){v(B=>({...B,[q]:R}))}function w(q,R){const B=di(q.product),Y=G(q),Z=Math.max(B,Y+R*B);C(q.key,Z)}function S(q){return G(q)!==q.qty}async function A(q){N(q.key);try{const R=di(q.product),B=Math.max(R,Number(G(q)||0)||0);await h(q.key,B),v(Y=>{const Z={...Y};return delete Z[q.key],Z})}finally{N(null)}}const D=p.useMemo(()=>{let q=0,R=0;for(const B of i){const Y=G(B);q+=Y,R+=Number(B.product?.price??0)*Y}return{totalQty:q,totalPrice:R}},[i,y]),k=i.some(S);async function I(q){z("");const R=String(q||"").trim();if(!R){z("Please enter an order name.");return}try{P(!0),await g(R),E(!1),await c(),e("/orders")}catch(B){z(B?.message?B.message:"Failed to create order.")}finally{P(!1)}}async function K(){await c(),L(!1)}return l.jsxs("div",{className:"mx-auto w-full max-w-4xl p-3 md:p-5",children:[l.jsxs("div",{className:"mb-4 flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Cart"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," item",i.length===1?"":"s"]})]}),i.length>0&&l.jsx(fe,{variant:"outline",className:"w-full rounded-xl sm:w-auto",onClick:()=>L(!0),disabled:d||M,children:d?l.jsxs(l.Fragment,{children:[l.jsx(Ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Clearing"]}):"Clear cart"})]}),d&&i.length===0?l.jsx(ZB,{rows:3}):i.length===0?l.jsx(Pe,{className:"rounded-2xl border border-border bg-muted",children:l.jsx(ze,{className:"p-8 text-center text-muted-foreground",children:"Your cart is empty."})}):l.jsx("div",{className:"space-y-2",children:i.map(q=>{const R=q.product,B=di(R),Y=XB(R.imageUrl),Z=f?.(q.key),se=!!Z||b===q.key,F=G(q),re=S(q);return l.jsx(Pe,{className:["rounded-xl border border-border bg-card shadow-sm",se?"opacity-70":""].join(" "),children:l.jsx(ze,{className:"p-2.5",children:l.jsxs("div",{className:"flex gap-2.5",children:[l.jsx("div",{className:"h-14 w-14 flex-shrink-0 overflow-hidden rounded-lg bg-white",children:Y?l.jsx("img",{src:Y,alt:R.name,className:"h-14 w-14 object-contain",loading:"lazy",referrerPolicy:"no-referrer",onError:he=>{he.currentTarget.src=R.imageUrl}}):null}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-[10px] font-medium uppercase tracking-wide text-muted-foreground",children:R.brand}),l.jsx("div",{className:"line-clamp-2 text-sm font-semibold leading-tight text-foreground",children:R.name})]}),n?l.jsxs("div",{className:"shrink-0 text-xs font-semibold text-foreground",children:["",Number(R.price??0).toFixed(2)]}):l.jsx("div",{className:"shrink-0 text-xs font-medium text-muted-foreground",children:"Login to see price"})]}),l.jsxs("div",{className:"mt-1.5 flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Step:"," ",l.jsx("span",{className:"font-medium text-foreground",children:B})]}),l.jsxs(Un,{variant:"secondary",className:"rounded-full text-[10px]",children:["Case ",B]})]}),l.jsx(gm,{className:"my-2"}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fe,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-lg",onClick:()=>w(q,-1),disabled:se||d||M,title:`- ${B}`,"aria-label":`Decrease by ${B}`,children:l.jsx(Mv,{className:"h-4 w-4"})}),l.jsxs("div",{className:"min-w-[84px] text-center",children:[l.jsx("div",{className:"text-xs font-semibold text-foreground",children:F}),l.jsx("div",{className:"text-[10px] text-muted-foreground",children:b===q.key?l.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:[l.jsx(Ft,{className:"h-3 w-3 animate-spin"}),"Saving"]}):re?"unsaved":"quantity"})]}),l.jsx(fe,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-lg",onClick:()=>w(q,1),disabled:se||d||M,title:`+ ${B}`,"aria-label":`Increase by ${B}`,children:l.jsx(Dv,{className:"h-4 w-4"})}),re&&l.jsx(fe,{size:"icon",onClick:()=>A(q),disabled:se||d||M,className:"ml-1 h-8 w-8 rounded-lg",title:"Save quantity","aria-label":"Save quantity",children:b===q.key?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})]}),l.jsx(fe,{variant:"destructive",size:"icon",className:"h-8 w-8 rounded-lg",onClick:()=>a(q.key),disabled:se||d||M,title:"Delete item","aria-label":"Delete item",children:Z==="remove"?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(Ar,{className:"h-4 w-4"})})]}),n&&l.jsxs("div",{className:"mt-1.5 text-[11px] text-muted-foreground",children:["Line total:"," ",l.jsxs("span",{className:"font-medium text-foreground",children:["",(Number(R.price??0)*F).toFixed(2)]})]})]})]})})},q.key)})}),l.jsx(Pe,{className:"mt-6 rounded-2xl border border-border bg-card",children:l.jsxs(ze,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[l.jsx("span",{children:"Total quantity"}),l.jsx("span",{className:"font-semibold text-foreground",children:D.totalQty})]}),n&&l.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-muted-foreground",children:[l.jsx("span",{children:"Estimated total"}),l.jsxs("span",{className:"text-base font-bold text-foreground",children:["",D.totalPrice.toFixed(2)]})]}),l.jsx(fe,{className:"mt-4 w-full rounded-2xl",disabled:i.length===0||d||M||k,onClick:()=>E(!0),title:k?"Save quantity changes before placing order":"Place order",children:M?l.jsxs(l.Fragment,{children:[l.jsx(Ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating order"]}):"Place order"}),k&&l.jsx("p",{className:"mt-2 text-center text-xs text-amber-600",children:"Please save your quantity changes before placing the order."}),l.jsx("p",{className:"mt-2 text-center text-xs text-muted-foreground",children:"Quantity changes by case size (min 6)."})]})}),l.jsx(YB,{open:T,onClose:()=>{M||(E(!1),z(""))},onCreate:I,loading:M,error:V,userEmail:t?.email}),l.jsx(nd,{open:j,onClose:()=>L(!1),onConfirm:K,title:"Clear cart?",description:"This will remove all items from your cart.",confirmText:"Clear",loading:d})]})}function e8(){const t=fr();return l.jsx("div",{className:"mx-auto flex min-h-[70vh] w-full max-w-2xl items-center justify-center p-4 md:p-6",children:l.jsxs(Pe,{className:"w-full",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-2xl",children:"404 - Page Not Found"})}),l.jsxs(ze,{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"The page you requested does not exist."}),l.jsx(fe,{onClick:()=>t("/products"),children:"Go To Products"})]})]})})}function t8(){const t=fr();return l.jsx("div",{className:"mx-auto flex min-h-[70vh] w-full max-w-2xl items-center justify-center p-4 md:p-6",children:l.jsxs(Pe,{className:"w-full",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-2xl",children:"Permission Denied"})}),l.jsxs(ze,{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"You do not have permission to access this page."}),l.jsx(fe,{onClick:()=>t("/products"),children:"Go To Products"})]})]})})}function n8(){return l.jsx(Pe,{children:l.jsx(ze,{className:"space-y-3 p-4",children:Array.from({length:5}).map((t,e)=>l.jsxs("div",{className:"rounded-lg border p-3",children:[l.jsx(nt,{className:"h-4 w-56"}),l.jsx(nt,{className:"mt-2 h-3 w-44"})]},e))})})}function r8(){const{user:t}=en(),e=fr(),[n,i]=p.useState(!0),[a,c]=p.useState(""),[d,f]=p.useState([]);p.useEffect(()=>{let g=!0;return(async()=>{if(t?.email){i(!0),c("");try{const y=await Vv({email:t.email,role:t.role});g&&f(y)}catch(y){g&&c(y?.message||"Failed to load orders")}finally{g&&i(!1)}}})(),()=>{g=!1}},[t?.email,t?.role]);const h=p.useMemo(()=>[...d].sort((g,y)=>String(y.order_id).localeCompare(String(g.order_id))),[d]);return l.jsxs("div",{className:"mx-auto w-full max-w-5xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"My Orders"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Your submitted orders."})]}),a?l.jsx("div",{className:"mb-4 rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:a}):null,n?l.jsx(n8,{}):h.length===0?l.jsx(Pe,{children:l.jsx(ze,{className:"py-10 text-center text-sm text-muted-foreground",children:"No orders yet."})}):l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Orders"})}),l.jsx(ze,{className:"space-y-3",children:h.map((g,y)=>l.jsxs("div",{className:"flex flex-col gap-3 rounded-lg border p-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{className:"text-sm font-semibold",children:["#",y+1," ",g.order_name||"Untitled"]}),l.jsx("div",{className:"mt-1 truncate text-xs text-muted-foreground",children:g.order_id}),l.jsx("div",{className:"mt-1",children:l.jsx(Un,{variant:"secondary",children:String(g.status||"submitted").toLowerCase()})})]}),l.jsx(fe,{size:"sm",className:"w-full sm:w-auto",onClick:()=>e(`/customer/orders/${g.order_id}`),children:"View"})]},g.order_id))})]})]})}function oE(t){if(!t)return"";const e=t.match(/[?&]id=([^&]+)/),n=t.match(/\/file\/d\/([^/]+)/),i=e?.[1]||n?.[1];return i?`https://lh3.googleusercontent.com/d/${i}`:t}function i8(){return l.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((t,e)=>l.jsx("div",{className:"rounded-lg border p-3",children:l.jsx(nt,{className:"h-14 w-full"})},e))})}function ca(t){return`${(Number(t)||0).toFixed(2)}`}function Lf(t){return`${Math.round(Number(t)||0)}`}function s8(){const{orderId:t}=Yh(),{user:e}=en(),n=fr(),[i,a]=p.useState(!0),[c,d]=p.useState(""),[f,h]=p.useState(null),[g,y]=p.useState([]),[v,b]=p.useState({}),[N,T]=p.useState(!1),[E,j]=p.useState({}),[L,M]=p.useState({}),[P,V]=p.useState("");p.useEffect(()=>{let R=!0;return(async()=>{if(!(!e?.email||!t)){a(!0),d("");try{const B=await Ii({email:e.email,role:e.role,order_id:t});if(!R)return;if(!B.order){d("Order not found"),h(null),y([]);return}h(B.order),y(B.items||[])}catch(B){R&&d(B?.message||"Failed to load order")}finally{R&&a(!1)}}})(),()=>{R=!1}},[e?.email,e?.role,t]),p.useEffect(()=>{const R={},B=!!e?.can_see_price_gbp;(g||[]).forEach(Y=>{const Z=Y?.calculated_selling_price||{},se=Number(B?Y?.customer_unit_gbp:Y?.customer_unit_bdt),F=Number(B?Z?.selling_unit_gbp??Z?.offered_product_unit_gbp??0:Z?.selling_unit_bdt??Z?.offered_product_unit_bdt??0),re=Number.isFinite(se)&&se>0?se:F;R[String(Y.order_item_id||"")]=re>0?String(re):"",R[`qty__${String(Y.order_item_id||"")}`]=String(Math.max(0,Math.round(Number(Y?.customer_changed_quantity??Y?.ordered_quantity??0))))}),b(R)},[g,e?.can_see_price_gbp]);const z=String(f?.status||"").toLowerCase(),C=new Set(["priced","under_review","finalized","processing","partially_delivered","delivered"]).has(z),w=new Set(["finalized","processing","partially_delivered","delivered"]).has(z),S=z!=="priced",A=!!e?.can_see_price_gbp,D=(g||[]).reduce((R,B)=>{const Y=B?.calculated_selling_price||{},Z=String(B?.order_item_id||""),se=Math.max(0,Math.round(Number(v[`qty__${Z}`]??B?.customer_changed_quantity??B?.ordered_quantity??0))),F=Number(w?A?B?.final_unit_gbp??B?.customer_unit_gbp??Y?.selling_unit_gbp??Y?.offered_product_unit_gbp??0:B?.final_unit_bdt??B?.customer_unit_bdt??Y?.selling_unit_bdt??Y?.offered_product_unit_bdt??0:A?Y?.selling_unit_gbp??Y?.offered_product_unit_gbp??0:Y?.selling_unit_bdt??Y?.offered_product_unit_bdt??0);return R+(Number.isFinite(F)?F*se:0)},0),k=(g||[]).reduce((R,B)=>{const Y=String(B?.order_item_id||""),Z=Number(w?A?B?.final_unit_gbp:B?.final_unit_bdt:A?B?.customer_unit_gbp:B?.customer_unit_bdt),se=Number(v[Y]||0),F=Number.isFinite(Z)&&Z>0?Z:se,re=Math.max(0,Math.round(Number(w?B?.final_quantity??B?.customer_changed_quantity??B?.ordered_quantity??0:v[`qty__${Y}`]??B?.customer_changed_quantity??B?.ordered_quantity??0)));return R+(Number.isFinite(F)?F*re:0)},0),I=g.length>0&&g.every(R=>{const B=Number(A?R?.customer_unit_gbp:R?.customer_unit_bdt);return Number.isFinite(B)&&B>0});async function K(){if(!(!t||!e?.email||!g.length)){T(!0),V("");try{if(!I)throw new Error("Save each item price first.");const R=g.map(Z=>{const se=String(Z.order_item_id||""),F=Number(A?Z?.customer_unit_gbp||0:Z?.customer_unit_bdt||0);return{order_item_id:se,unit_price:F}}),B=await KU({email:e.email,order_id:t,decision:"negotiate",currency:A?"gbp":"bdt",offers:R}),Y=String(B?.status||"").toLowerCase();h(Z=>Z&&{...Z,status:Y}),V("Customer review submitted. Order moved to under_review.")}catch(R){V(R?.message||"Failed to submit decision")}finally{T(!1)}}}async function q(R){const B=String(R?.order_item_id||"");if(!(!B||!t||!e?.email)){j(Y=>({...Y,[B]:!0})),V("");try{const Y=R?.calculated_selling_price||{},Z=Number(v[B]||0),se=Math.max(0,Math.round(Number(v[`qty__${B}`]??R?.customer_changed_quantity??R?.ordered_quantity??0)));if(S)throw new Error("Editing is locked for this status.");if(!(Z>0))throw new Error("Enter valid price");if(!(se>0))throw new Error("Enter valid quantity");await YU({email:e.email,order_id:t,order_item_id:B,currency:A?"gbp":"bdt",unit_price:Z,customer_changed_quantity:se,decision:"negotiate"});const F=await Ii({email:e.email,role:e.role,order_id:t});F?.order&&h(F.order),Array.isArray(F?.items)&&y(F.items),M(re=>({...re,[B]:!1})),V(`Saved ${R?.name||"item"} offer.`)}catch(Y){V(Y?.message||"Failed to save item offer")}finally{j(Y=>{const Z={...Y};return delete Z[B],Z})}}}return l.jsxs("div",{className:"mx-auto w-full max-w-5xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Order Items"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:f?.order_name||t}),f?.status?l.jsx(Un,{className:"mt-2",variant:"secondary",children:String(f.status||"").toLowerCase()}):null]}),l.jsx(fe,{className:"w-full sm:w-auto",variant:"outline",onClick:()=>n("/customer/orders"),children:"Back"})]}),c?l.jsx("div",{className:"mb-4 rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:c}):null,P?l.jsx("div",{className:"mb-4 rounded-lg border px-4 py-3 text-sm",children:P}):null,l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Items"})}),l.jsx(ze,{children:i?l.jsx(i8,{}):g.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No items."}):l.jsxs(l.Fragment,{children:[C?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-3 flex flex-col gap-2 sm:flex-row sm:items-center",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Save each item. Then change order status."}),l.jsx("div",{className:"sm:ml-auto",children:l.jsx(fe,{className:"w-full sm:w-auto",size:"sm",onClick:K,disabled:N||!I||S,children:N?"Updating...":"Change Order Status"})})]}),l.jsxs("div",{className:"mb-3 grid gap-2 md:grid-cols-2",children:[l.jsxs("div",{className:"rounded-lg border p-3 text-sm",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Offered Order Value"}),l.jsx("div",{className:"font-semibold",children:A?ca(D):Lf(D)})]}),l.jsxs("div",{className:"rounded-lg border p-3 text-sm",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Customer Total"}),l.jsx("div",{className:"font-semibold",children:A?ca(k):Lf(k)})]})]})]}):l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Price is hidden. Ask admin to move order status to ",l.jsx("span",{className:"font-medium",children:"priced"})," or later."]}),l.jsx("div",{className:"space-y-3 md:hidden",children:g.map(R=>{const B=R?.calculated_selling_price||{},Y=String(R.order_item_id||""),Z=Number(w?A?R?.final_unit_gbp??R?.customer_unit_gbp??B?.selling_unit_gbp??B?.offered_product_unit_gbp??0:R?.final_unit_bdt??R?.customer_unit_bdt??B?.selling_unit_bdt??B?.offered_product_unit_bdt??0:A?B?.selling_unit_gbp??B?.offered_product_unit_gbp??0:B?.selling_unit_bdt??B?.offered_product_unit_bdt??0),se=Number(A?B?.cargo_unit_gbp||0:B?.cargo_unit_bdt||0),F=A?Number(R?.buy_price_gbp||0):Number(B?.profit_rate_pct||0)>=0?Z/(1+Number(B?.profit_rate_pct||0)/100):0,re=A?Number(R?.customer_unit_gbp||0)>0:Number(R?.customer_unit_bdt||0)>0,he=L[Y]??!re;return l.jsxs("div",{className:"rounded-lg border p-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-10 w-10 overflow-hidden rounded border bg-white",children:R.image_url?l.jsx("img",{src:oE(R.image_url),alt:R.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"min-w-0 text-sm font-medium",children:R.name||"Item"})]}),C?l.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs",children:[l.jsxs("div",{className:"rounded border p-2",children:[l.jsx("div",{className:"text-muted-foreground",children:w?"Final Qty":"Changed Qty"}),w?l.jsx("div",{className:"font-semibold",children:Math.max(0,Math.round(Number(R?.final_quantity??R?.customer_changed_quantity??R?.ordered_quantity??0)))}):l.jsx("input",{className:"mt-1 h-8 w-full rounded-md border bg-background px-2",value:String(v[`qty__${Y}`]??Math.max(0,Math.round(Number(R?.customer_changed_quantity??R?.ordered_quantity??0)))),onChange:pe=>b(ye=>({...ye,[`qty__${Y}`]:pe.target.value})),inputMode:"numeric",disabled:S||!he})]}),l.jsxs("div",{className:"rounded border p-2",children:[l.jsx("div",{className:"text-muted-foreground",children:w?"Final / Unit":"Offered / Unit"}),l.jsx("div",{className:"font-semibold",children:A?ca(Z):Lf(Z)})]}),A?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"rounded border p-2",children:[l.jsx("div",{className:"text-muted-foreground",children:"Unit Purchase"}),l.jsx("div",{className:"font-semibold",children:ca(F)})]}),l.jsxs("div",{className:"rounded border p-2",children:[l.jsx("div",{className:"text-muted-foreground",children:"Cargo / Unit"}),l.jsx("div",{className:"font-semibold",children:ca(se)})]})]}):null]}):null,C&&!w?l.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[l.jsx("input",{className:"h-8 flex-1 rounded-md border bg-background px-2 text-xs",value:String(v[Y]??""),onChange:pe=>b(ye=>({...ye,[Y]:pe.target.value})),inputMode:"decimal",disabled:S||!he}),re&&!he?l.jsx(fe,{size:"icon",variant:"outline",onClick:()=>M(pe=>({...pe,[Y]:!0})),"aria-label":"Edit item",title:"Edit",disabled:S,children:l.jsx(Ch,{className:"h-4 w-4"})}):l.jsx(fe,{size:"icon",variant:"outline",onClick:()=>q(R),disabled:!!E[Y]||S,"aria-label":"Save item",title:"Save",children:E[Y]?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})]}):null]},Y)})}),l.jsx("div",{className:"hidden overflow-x-auto md:block",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Product"}),C?l.jsx("th",{className:"px-3 py-2",children:w?"Final Qty":"Changed Qty"}):null,C&&A?l.jsx("th",{className:"px-3 py-2",children:"Unit Purchase"}):null,C&&A?l.jsx("th",{className:"px-3 py-2",children:"Cargo / Unit"}):null,C?l.jsx("th",{className:"px-3 py-2",children:w?"Final Price / Unit":"Offered / Unit"}):null,C&&!w?l.jsx("th",{className:"px-3 py-2",children:"Counter Offer"}):null,C&&!w?l.jsx("th",{className:"px-3 py-2",children:"Action"}):null]})}),l.jsx("tbody",{className:"divide-y",children:g.map(R=>{const B=R?.calculated_selling_price||{},Y=String(R.order_item_id||""),Z=Number(w?A?R?.final_unit_gbp??R?.customer_unit_gbp??B?.selling_unit_gbp??B?.offered_product_unit_gbp??0:R?.final_unit_bdt??R?.customer_unit_bdt??B?.selling_unit_bdt??B?.offered_product_unit_bdt??0:A?B?.selling_unit_gbp??B?.offered_product_unit_gbp??0:B?.selling_unit_bdt??B?.offered_product_unit_bdt??0),se=Number(A?B?.cargo_unit_gbp||0:B?.cargo_unit_bdt||0),F=A?Number(R?.buy_price_gbp||0):Number(B?.profit_rate_pct||0)>=0?Z/(1+Number(B?.profit_rate_pct||0)/100):0,re=A?Number(R?.customer_unit_gbp||0)>0:Number(R?.customer_unit_bdt||0)>0,he=L[Y]??!re;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:R.image_url?l.jsx("img",{src:oE(R.image_url),alt:R.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-medium",children:R.name||"Item"})]})}),C?l.jsx("td",{className:"px-3 py-2",children:w?Math.max(0,Math.round(Number(R?.final_quantity??R?.customer_changed_quantity??R?.ordered_quantity??0))):l.jsx("input",{className:"h-8 w-20 rounded-md border bg-background px-2",value:String(v[`qty__${Y}`]??Math.max(0,Math.round(Number(R?.customer_changed_quantity??R?.ordered_quantity??0)))),onChange:pe=>b(ye=>({...ye,[`qty__${Y}`]:pe.target.value})),inputMode:"numeric",disabled:S||!he})}):null,C&&A?l.jsx("td",{className:"px-3 py-2",children:ca(F)}):null,C&&A?l.jsx("td",{className:"px-3 py-2",children:ca(se)}):null,C?l.jsx("td",{className:"px-3 py-2",children:A?ca(Z):Lf(Z)}):null,C&&!w?l.jsx("td",{className:"px-3 py-2",children:l.jsx("input",{className:"h-8 w-28 rounded-md border bg-background px-2",value:String(v[Y]??""),onChange:pe=>b(ye=>({...ye,[Y]:pe.target.value})),inputMode:"decimal",disabled:S||!he})}):null,C&&!w?l.jsx("td",{className:"px-3 py-2",children:re&&!he?l.jsx(fe,{size:"icon",variant:"outline",onClick:()=>M(pe=>({...pe,[Y]:!0})),"aria-label":"Edit item",title:"Edit",disabled:S,children:l.jsx(Ch,{className:"h-4 w-4"})}):l.jsx(fe,{size:"icon",variant:"outline",onClick:()=>q(R),disabled:!!E[Y]||S,"aria-label":"Save item",title:"Save",children:E[Y]?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})}):null]},Y)})})]})})]})})]})]})}function a8(){return l.jsx(Pe,{children:l.jsx(ze,{className:"space-y-3 p-4",children:Array.from({length:6}).map((t,e)=>l.jsxs("div",{className:"rounded-lg border p-3",children:[l.jsx(nt,{className:"h-4 w-72"}),l.jsx(nt,{className:"mt-2 h-3 w-52"})]},e))})})}function o8(t){return`${(Number(t)||0).toFixed(2)}`}function l8(){const{user:t}=en(),e=fr(),[n,i]=p.useState(!0),[a,c]=p.useState(""),[d,f]=p.useState([]),[h,g]=p.useState({}),[y,v]=p.useState({}),[b,N]=p.useState({}),[T,E]=p.useState(!1),[j,L]=p.useState(null),[M,P]=p.useState("");p.useEffect(()=>{let w=!0;return(async()=>{if(t?.email){i(!0),c("");try{const S=await Vv({email:t.email,role:t.role});w&&f(S)}catch(S){w&&c(S?.message||"Failed to load orders")}finally{w&&i(!1)}}})(),()=>{w=!1}},[t?.email,t?.role]),p.useEffect(()=>{g(w=>{const S={...w};for(const A of d){const D=String(A.order_id||"");D&&(S[D]||(S[D]=String(A.status||"submitted").toLowerCase()))}return S})},[d]);async function V(w){const S=String(w||"");if(!S)return;const A=d.find(I=>String(I.order_id)===S);if(!A)return;const D=String(A.status||"submitted").toLowerCase(),k=String(h[S]||"").toLowerCase();if(!(!k||k===D)){v(I=>({...I,[S]:!0})),c("");try{await yj({order_id:S,status:k}),f(I=>I.map(K=>String(K.order_id)===S?{...K,status:k}:K))}catch(I){c(I?.message||"Failed to update status")}finally{v(I=>{const K={...I};return delete K[S],K})}}}async function z(w){const S=String(w?.order_id||"");if(!(!S||String(w?.status||"").toLowerCase()!=="cancelled")){N(D=>({...D,[S]:!0})),c("");try{await JU({order_id:S}),f(D=>D.filter(k=>String(k.order_id)!==S)),g(D=>{const k={...D};return delete k[S],k})}catch(D){c(D?.message||"Failed to delete order")}finally{N(D=>{const k={...D};return delete k[S],k})}}}function G(w){L(w||null),P(""),E(!0)}const C=p.useMemo(()=>[...d].sort((w,S)=>String(S.order_id).localeCompare(String(w.order_id))),[d]);return l.jsxs("div",{className:"mx-auto w-full max-w-7xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Orders"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Admin order list with purchase totals."})]}),a?l.jsx("div",{className:"mb-4 rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:a}):null,n?l.jsx(a8,{}):C.length===0?l.jsx(Pe,{children:l.jsx(ze,{className:"py-10 text-center text-sm text-muted-foreground",children:"No orders found."})}):l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"All Orders"})}),l.jsx(ze,{className:"space-y-3",children:C.map((w,S)=>l.jsxs("div",{className:"flex flex-col gap-3 rounded-lg border p-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"truncate text-sm font-semibold",children:["#",S+1," ",w.order_name||"Untitled"]}),l.jsx(Un,{variant:"secondary",children:w.status||"submitted"})]}),l.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[w.order_id,"  ",w.creator_email]}),l.jsxs("div",{className:"mt-1 text-xs",children:["Qty ",Math.round(Number(w.total_order_qty||0)),"  Purchase Value ",o8(w.total_purchase_value_gbp)]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(an,{value:String(h[w.order_id]||w.status||"submitted").toLowerCase(),onValueChange:A=>g(D=>({...D,[w.order_id]:String(A||"").toLowerCase()})),children:[l.jsx(Kt,{className:"h-8 w-[170px]",children:l.jsx(on,{placeholder:"Status"})}),l.jsx(Yt,{children:Uv(String(w.status||"").toLowerCase(),{role:"admin",includeCurrent:!0}).map(A=>l.jsx(ot,{value:A,children:A},`${w.order_id}-${A}`))})]}),l.jsx(fe,{size:"sm",variant:"outline",onClick:()=>V(w.order_id),disabled:!!y[w.order_id]||String(h[w.order_id]||w.status||"").toLowerCase()===String(w.status||"").toLowerCase(),children:y[w.order_id]?"Saving...":"Update"}),String(w.status||"").toLowerCase()==="cancelled"?l.jsx(fe,{size:"icon",variant:"destructive",onClick:()=>G(w),disabled:!!b[w.order_id],title:"Delete cancelled order","aria-label":"Delete cancelled order",children:b[w.order_id]?"...":l.jsx(Ar,{className:"h-4 w-4"})}):null,l.jsx(fe,{size:"sm",onClick:()=>e(`/admin/orders/${w.order_id}`),children:"View"})]})]},w.order_id))})]}),l.jsx(Vm,{open:T,onOpenChange:w=>{!w&&!b[String(j?.order_id||"")]&&E(!1)},children:l.jsxs(Zu,{className:"sm:max-w-md",children:[l.jsxs(Ju,{children:[l.jsx(td,{children:"Delete cancelled order?"}),l.jsx(zm,{children:j?`Type "${j.order_name||"Untitled"}" to permanently delete this order.`:"Type the order name to confirm deletion."})]}),l.jsx(He,{value:M,onChange:w=>P(w.target.value),placeholder:String(j?.order_name||""),disabled:!!b[String(j?.order_id||"")]}),l.jsxs(ed,{children:[l.jsx(fe,{variant:"outline",onClick:()=>E(!1),disabled:!!b[String(j?.order_id||"")],children:"Cancel"}),l.jsx(fe,{variant:"destructive",disabled:!!b[String(j?.order_id||"")]||String(M||"").trim()!==String(j?.order_name||"").trim(),title:"Delete order","aria-label":"Delete order",onClick:async()=>{j&&(await z(j),E(!1),L(null),P(""))},children:b[String(j?.order_id||"")]?"Deleting...":l.jsx(Ar,{className:"h-4 w-4"})})]})]})})]})}const rd=15*1e3;let eh=null,by=0,El=null;const Tu=new Map,Al=new Map,Lh=new Map,Rl=new Map,Uh=new Map,Ol=new Map,Vh=new Map,Il=new Map;function Yr({shipmentId:t="",orderId:e=""}={}){const n=String(t||"").trim(),i=String(e||"").trim();eh=null,by=0,El=null,n?(Tu.delete(n),Al.delete(n),Lh.delete(n),Rl.delete(n),Vh.delete(n),Il.delete(n)):(Tu.clear(),Al.clear(),Lh.clear(),Rl.clear(),Vh.clear(),Il.clear()),i?(Uh.delete(i),Ol.delete(i)):(Uh.clear(),Ol.clear())}function Xe(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function _l(t){return Number((Xe(t)||0).toFixed(2))}function Uf(t){return Math.round(Xe(t))}function pT(){const t=new Date().toISOString().replace(/[-:.TZ]/g,"").slice(0,14),e=Math.floor(Math.random()*9e5)+1e5;return`ALC_${t}_${e}`}function lE(t){const e=Xe(t?.gbp_avg_rate,NaN);if(Number.isFinite(e)&&e>0)return e;const n=Xe(t?.gbp_rate_product,NaN),i=Xe(t?.gbp_rate_cargo,NaN);return Number.isFinite(n)&&Number.isFinite(i)&&n>0&&i>0?(n+i)/2:Number.isFinite(n)&&n>0?n:Number.isFinite(i)&&i>0?i:0}function id(t,e,n=null){const i=Xe(t?.needed_qty,Xe(t?.allocated_qty)),a=Xe(t?.arrived_qty,Xe(t?.shipped_qty)),c=Xe(t?.unit_product_weight,Xe(n?.unit_product_weight,0)),d=Xe(t?.unit_package_weight,Xe(n?.unit_package_weight,0)),f=c+d,h=_l(i*f),g=_l(a*f),y=_l(Xe(t?.buy_price_gbp,Xe(n?.buy_price_gbp,Xe(n?.price_gbp,0)))),v=_l(a*y),b=_l(g*Xe(e?.cargo_cost_per_kg)),N=Xe(e?.gbp_rate_product,lE(e)),T=Xe(e?.gbp_rate_cargo,lE(e)),E=Uf(v*N),j=Uf(b*T),L=Uf(E+j);return{needed_qty:i,arrived_qty:a,allocated_qty:i,shipped_qty:a,unit_product_weight:c,unit_package_weight:d,unit_total_weight:_l(f),needed_weight:h,arrived_weight:g,allocated_weight:h,shipped_weight:g,buy_price_gbp:y,product_cost_gbp:v,product_cost_bdt:E,cargo_cost_gbp:b,cargo_cost_bdt:j,total_cost_bdt:L,revenue_bdt:Xe(t?.revenue_bdt,0),profit_bdt:Uf(Xe(t?.revenue_bdt,0)-L)}}function c8(t={},e=null){const n=Xe(t?.unit_product_weight,Xe(e?.unit_product_weight,0)),i=Xe(t?.unit_package_weight,Xe(e?.unit_package_weight,0));return!(n>0)||i<0}async function u8(t,e,n,i){const a=String(t||"").trim(),c=String(e||"").trim();!a||!c||await zn(Ue(be,"orders",a,"items",c),{unit_product_weight:Xe(n,0),unit_package_weight:Xe(i,0),updated_at:Ie()},{merge:!0})}async function d8(t,e,n){const i=String(t||"").trim();if(!i)return;const a=await $t(_n(qt(be,"shipment_allocations"),Jr("order_item_id","==",i)));if(a.empty)return;const c={},d={};await Promise.all(a.docs.map(async f=>{const h=f.data()||{},g=String(h.shipment_id||"").trim(),y=String(h.order_id||"").trim(),v=`${y}__${i}`;c[g]||(c[g]=await Co(g)),d[v]||(d[v]=await sd(y,i));const b=c[g];if(!b)return;const N=d[v],T={...h,unit_product_weight:Xe(e,0),unit_package_weight:Xe(n,0)},E=id(T,b,N);await gi(f.ref,{...E,updated_at:Ie()})}))}async function sd(t,e){const n=String(t||"").trim(),i=String(e||"").trim();if(!n||!i)return null;const a=await Vn(Ue(be,"orders",n,"items",i));return a.exists()?a.data():null}async function f8(){const t=Date.now();if(eh&&t-by<rd)return eh;if(El)return El;El=(async()=>{const n=(await $t(_n(qt(be,"shipments"),pi("created_at","desc")))).docs.map(i=>({shipment_id:i.id,...i.data()}));return eh=n,by=Date.now(),n.forEach(i=>{const a=String(i.shipment_id||"").trim();a&&Tu.set(a,{ts:Date.now(),value:i})}),n})();try{return await El}finally{El=null}}async function Co(t){const e=String(t||"").trim();if(!e)return null;const n=Date.now(),i=Tu.get(e);if(i&&n-i.ts<rd)return i.value;if(Al.has(e))return Al.get(e);const a=(async()=>{const c=await Vn(Ue(be,"shipments",e)),d=c.exists()?{shipment_id:c.id,...c.data()}:null;return Tu.set(e,{ts:Date.now(),value:d}),d})();Al.set(e,a);try{return await a}finally{Al.delete(e)}}async function rb(t){const e=String(t||"").trim();if(!e)return[];const n=Date.now(),i=Lh.get(e);if(i&&n-i.ts<rd)return i.value;if(Rl.has(e))return Rl.get(e);const a=(async()=>{const d=(await $t(_n(qt(be,"shipment_allocations"),Jr("shipment_id","==",e)))).docs.map(f=>({allocation_id:f.id,...f.data()}));return Lh.set(e,{ts:Date.now(),value:d}),d})();Rl.set(e,a);try{return await a}finally{Rl.delete(e)}}async function cE(t){const e=String(t||"").trim();if(!e)return[];const n=Date.now(),i=Uh.get(e);if(i&&n-i.ts<rd)return i.value;if(Ol.has(e))return Ol.get(e);const a=(async()=>{const d=(await $t(_n(qt(be,"shipment_allocations"),Jr("order_id","==",e)))).docs.map(f=>({allocation_id:f.id,...f.data()}));return Uh.set(e,{ts:Date.now(),value:d}),d})();Ol.set(e,a);try{return await a}finally{Ol.delete(e)}}async function uE(t={}){const e=String(t.shipment_id||"").trim(),n=String(t.order_id||"").trim(),i=String(t.order_item_id||"").trim();if(!e||!i)throw new Error("shipment_id and order_item_id are required");const a=await Co(e);if(!a)throw new Error("Shipment not found");const c=await sd(n,i),d=pT(),f={allocation_id:d,shipment_id:e,order_id:n||String(c?.order_id||""),order_item_id:i,product_id:String(t.product_id||c?.product_id||""),pricing_mode_id:String(t.pricing_mode_id||""),revenue_bdt:Xe(t.revenue_bdt,0),created_at:Ie(),updated_at:Ie()},h=id(t,a,c);return await zn(Ue(be,"shipment_allocations",d),{...f,...h}),Yr({shipmentId:e,orderId:f.order_id}),{allocation_id:d,...f,...h}}async function dE(t=[]){const e=Array.isArray(t)?t:[];if(!e.length)return[];const n=new Map,i=new Map,a=Ie(),c=[],d=Zl(be),f=new Set,h=new Set;for(const g of e){const y=String(g?.shipment_id||"").trim(),v=String(g?.order_id||"").trim(),b=String(g?.order_item_id||"").trim();if(!y||!b)throw new Error("shipment_id and order_item_id are required");n.has(y)||n.set(y,await Co(y));const N=n.get(y);if(!N)throw new Error(`Shipment not found: ${y}`);const T=`${v}__${b}`;i.has(T)||i.set(T,await sd(v,b));const E=i.get(T),j=pT(),L={allocation_id:j,shipment_id:y,order_id:v||String(E?.order_id||""),order_item_id:b,product_id:String(g?.product_id||E?.product_id||""),pricing_mode_id:String(g?.pricing_mode_id||""),revenue_bdt:Xe(g?.revenue_bdt,0),created_at:a,updated_at:a},M=id(g,N,E);d.set(Ue(be,"shipment_allocations",j),{...L,...M}),c.push({allocation_id:j,...L,...M}),f.add(y),L.order_id&&h.add(L.order_id)}return await d.commit(),f.forEach(g=>Yr({shipmentId:g})),h.forEach(g=>Yr({orderId:g})),!f.size&&!h.size&&Yr(),c}async function ib(t,e={}){const n=String(t||"").trim();if(!n)throw new Error("Missing allocation_id");const i=await Vn(Ue(be,"shipment_allocations",n));if(!i.exists())throw new Error("Allocation not found");const a=i.data(),c=await Co(a.shipment_id);if(!c)throw new Error("Shipment not found");const d=await sd(a.order_id,a.order_item_id),f={...a,...e},h=id(f,c,d);await gi(Ue(be,"shipment_allocations",n),{...h,..."revenue_bdt"in e?{revenue_bdt:Xe(e.revenue_bdt,0)}:{},updated_at:Ie()}),("unit_product_weight"in e||"unit_package_weight"in e)&&(await u8(a.order_id,a.order_item_id,h.unit_product_weight,h.unit_package_weight),await d8(a.order_item_id,h.unit_product_weight,h.unit_package_weight));const g=await Vn(Ue(be,"shipment_allocations",n));return Yr({shipmentId:a.shipment_id,orderId:a.order_id}),{allocation_id:n,...g.data()}}async function gT(t){const e=String(t||"").trim();if(!e)return;const n=await Vn(Ue(be,"shipment_allocations",e)),i=n.exists()?n.data():null;await dr(Ue(be,"shipment_allocations",e)),i?Yr({shipmentId:i.shipment_id,orderId:i.order_id}):Yr()}async function h8(t=[]){const e=Array.isArray(t)?t:[];if(!e.length)return;const n=Zl(be),i=new Set,a=new Set;for(const c of e){const d=typeof c=="string"?String(c||"").trim():String(c?.allocation_id||"").trim();if(d&&(n.delete(Ue(be,"shipment_allocations",d)),c&&typeof c=="object")){const f=String(c.shipment_id||"").trim(),h=String(c.order_id||"").trim();f&&i.add(f),h&&a.add(h)}}await n.commit(),i.forEach(c=>Yr({shipmentId:c})),a.forEach(c=>Yr({orderId:c})),!i.size&&!a.size&&Yr()}async function xy(t,e){const n=String(t||"").trim(),i=String(e||"").trim();if(!n||!i)return[];const a=await $t(_n(qt(be,"orders",i,"items"),pi("item_sl","asc"))),c=await $t(_n(qt(be,"shipment_allocations"),Jr("order_id","==",i))),d={};return c.docs.forEach(f=>{const h=f.data(),g=String(h.order_item_id||"").trim();g&&(d[g]=Xe(d[g])+Xe(h.needed_qty,Xe(h.allocated_qty)))}),a.docs.map(f=>f.data()).map(f=>{const h=Xe(f.ordered_quantity),g=Xe(d[f.order_item_id]),y=Math.max(0,h-g);return y<=0?null:{shipment_id:n,order_id:i,order_item_id:String(f.order_item_id||""),product_id:String(f.product_id||""),needed_qty:y,arrived_qty:0,allocated_qty:y,shipped_qty:0}}).filter(Boolean)}async function gs(t){const e=String(t||"").trim();if(!e)return;const n=await Co(e);if(!n)return;const i=await $t(_n(qt(be,"shipment_allocations"),Jr("shipment_id","==",e))),a=await Promise.all(i.docs.map(async d=>{const f=d.data(),h=await sd(f.order_id,f.order_item_id);return{docRef:d.ref,prev:f,item:h}})),c=a.filter(({prev:d,item:f})=>c8(d,f)).map(({prev:d,item:f})=>({allocation_id:String(d?.allocation_id||""),order_item_id:String(d?.order_item_id||""),name:String(f?.name||f?.product_id||d?.product_id||"item")}));if(c.length){const d=c.slice(0,5).map(h=>h.name).join(", "),f=c.length>5?` +${c.length-5} more`:"";throw new Error(`Missing weight for ${c.length} shipment row(s). Set product/package weight first: ${d}${f}`)}await Promise.all(a.map(async({docRef:d,prev:f,item:h})=>{const g=id(f,n,h);await gi(d,{...g,updated_at:Ie()})})),Yr({shipmentId:e})}function m8(t,e){return`${String(t||"").trim()}__${encodeURIComponent(String(e||"").trim())}`}async function p8(t){const e=String(t||"").trim();if(!e)return[];const n=Date.now(),i=Vh.get(e);if(i&&n-i.ts<rd)return i.value;if(Il.has(e))return Il.get(e);const a=(async()=>{const d=(await $t(_n(qt(be,"shipment_product_snapshots"),Jr("shipment_id","==",e)))).docs.map(f=>({snapshot_id:f.id,...f.data()}));return Vh.set(e,{ts:Date.now(),value:d}),d})();Il.set(e,a);try{return await a}finally{Il.delete(e)}}async function g8(t={}){const e=String(t.shipment_id||"").trim(),n=String(t.product_id||"").trim();if(!e||!n)throw new Error("shipment_id and product_id are required");const i=m8(e,n);await zn(Ue(be,"shipment_product_snapshots",i),{snapshot_id:i,shipment_id:e,product_id:n,name:String(t.name||"").trim(),needed_qty:Xe(t.needed_qty,0),ordered_qty:t.ordered_qty===""?"":Xe(t.ordered_qty,0),arrived_qty:t.arrived_qty===""?"":Xe(t.arrived_qty,t.received_qty===""?"":Xe(t.received_qty,0)),received_qty:t.received_qty===""?"":Xe(t.received_qty,0),order_breakdown:Array.isArray(t.order_breakdown)?t.order_breakdown:[],updated_at:Ie(),created_at:Ie()},{merge:!0});const a=await Vn(Ue(be,"shipment_product_snapshots",i));return Yr({shipmentId:e}),a.exists()?{snapshot_id:i,...a.data()}:null}function to(t){if(!t)return"";const e=t.match(/[?&]id=([^&]+)/),n=t.match(/\/file\/d\/([^/]+)/),i=e?.[1]||n?.[1];return i?`https://lh3.googleusercontent.com/d/${i}`:t}function bt(t){return`${(Number(t)||0).toFixed(2)}`}function It(t){return`${Math.round(Number(t)||0)}`}function Oe(t){return Number((Number(t)||0).toFixed(2))}function yl(t){const e=String(t??"").trim();return!!(!e||e==="-"||e==="."||e==="-."||e.endsWith("."))}function ge(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function fE(t){return Number(t?.needed_qty??t?.allocated_qty??0)}function _8(t){return Number(t?.arrived_qty??t?.shipped_qty??0)}function vl(t){return Math.round((Number(t)||0)*1e3)}function Kn(t){const e=Number(t?.gbp_avg_rate||0);if(e>0)return e;const n=Number(t?.gbp_rate_product||0),i=Number(t?.gbp_rate_cargo||0);return n>0&&i>0?Oe((n+i)/2):n>0?n:i>0?i:0}function hE(t){const e=Number(t);if(!Number.isFinite(e))return"";const n=e*1e3;return Number.isInteger(n)?String(n):String(Number(n.toFixed(3)))}function mE(t){const e=String(t??"").trim();if(!e)return"";const n=Number(e);return Number.isFinite(n)?n/1e3:""}function pE(t){return String(t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`).map(e=>e.trim())}async function y8(t){if(navigator.clipboard?.writeText){await navigator.clipboard.writeText(t);return}const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}function v8(){return l.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((t,e)=>l.jsx("div",{className:"rounded-lg border p-3",children:l.jsx(nt,{className:"h-14 w-full"})},e))})}function b8(){const{orderId:t}=Yh(),{user:e}=en(),n=fr(),[i,a]=p.useState(!0),[c,d]=p.useState(""),[f,h]=p.useState(null),[g,y]=p.useState([]),[v,b]=p.useState("raw"),[N,T]=p.useState([]),[E,j]=p.useState(""),[L,M]=p.useState(!1),[P,V]=p.useState(""),[z,G]=p.useState([]),[C,w]=p.useState([]),[S,A]=p.useState(!1),[D,k]=p.useState(""),[I,K]=p.useState({}),[q,R]=p.useState(!1),[B,Y]=p.useState(""),[Z,se]=p.useState(""),[F,re]=p.useState("10"),[he,pe]=p.useState("purchase"),[ye,we]=p.useState(!0),[me,Fe]=p.useState(!1),[Ne,Be]=p.useState(""),[et,Ze]=p.useState({}),[it,Mt]=p.useState(""),[Ir,hr]=p.useState({}),[mr,js]=p.useState({}),[wi,Si]=p.useState({}),[Ts,Ao]=p.useState({}),[ic,te]=p.useState({}),[ce,_e]=p.useState({}),[Ve,Me]=p.useState(""),[Cn,Fn]=p.useState("bdt"),[vn,Qn]=p.useState(!1),[Ht,yt]=p.useState(!1),[cn,bn]=p.useState(""),[dd,Gm]=p.useState(!1);p.useEffect(()=>{let U=!0;return(async()=>{if(!(!e?.email||!t)){a(!0),d("");try{const[$,W,ae]=await Promise.all([Ii({email:e.email,role:e.role,order_id:t}),f8(),cE(t)]);if(!U)return;if(!$.order){d("Order not found"),h(null),y([]);return}h($.order),y($.items||[]);const de=$?.order?.calculated_selling_price||null,ve=($.items||[]).find(Ot=>Number.isFinite(Number(Ot?.calculated_selling_price?.profit_rate_pct)))?.calculated_selling_price?.profit_rate_pct,De=Number.isFinite(Number(de?.profit_rate_pct))?Number(de?.profit_rate_pct):Number.isFinite(Number(ve))?Number(ve):10,Se=String(de?.customer_price_currency||"bdt").toLowerCase();Fn(Se==="gbp"?"gbp":"bdt"),pe("purchase"),re(String(De)),we(!0),T(Array.isArray(W)?W:[]);const qe=Array.isArray(ae)?ae:[];w(qe);const Nt=[...new Set(qe.map(Ot=>String(Ot.shipment_id||"").trim()).filter(Boolean))];Nt.length>0&&j(Nt[0])}catch($){U&&d($?.message||"Failed to load order")}finally{U&&a(!1)}}})(),()=>{U=!1}},[e?.email,e?.role,t]),p.useEffect(()=>{const U=String(f?.status||"").toLowerCase();U&&bn(U)},[f?.status]);const Qm=p.useMemo(()=>(g||[]).reduce((U,$)=>U+Number($.line_purchase_value_gbp||0),0),[g]),Lt=p.useMemo(()=>{const U={};return(g||[]).forEach($=>{const W=String($.order_item_id||"").trim();W&&(U[W]=$)}),U},[g]);async function As(){const U=await cE(t);w(Array.isArray(U)?U:[])}async function ni(U){const $=String(U||"").trim();if(!$||!t){G([]);return}const W=await rb($);G(W.filter(ae=>String(ae.order_id||"").trim()===String(t||"").trim()))}p.useEffect(()=>{E&&ni(E)},[E]),p.useEffect(()=>{const U={};z.forEach($=>{U[$.allocation_id]={unit_product_weight:hE($.unit_product_weight),unit_package_weight:hE($.unit_package_weight)}}),K(U)},[z]);async function Hi(){const U=String(E||"").trim();if(!(!U||!t)){M(!0),V("");try{const $=await xy(U,t);if(!$.length){V("No remaining items to allocate for this order.");return}await dE($.map(W=>({shipment_id:U,order_id:t,order_item_id:W.order_item_id,needed_qty:Number(W.needed_qty??W.allocated_qty??0),arrived_qty:0,unit_product_weight:0,unit_package_weight:0}))),await gs(U),await As(),await ni(U),V(`Added ${$.length} shipment item rows.`)}catch($){V($?.message||"Failed to add order to shipment.")}finally{M(!1)}}}async function Ro(){const U=String(E||"").trim();if(!(!U||!t)){M(!0),V("");try{const $=[...new Set(C.map(ae=>String(ae.shipment_id||"").trim()).filter(Boolean))];await h8(C);const W=await xy(U,t);W.length&&await dE(W.map(ae=>({shipment_id:U,order_id:t,order_item_id:ae.order_item_id,needed_qty:Number(ae.needed_qty??ae.allocated_qty??0),arrived_qty:0,unit_product_weight:0,unit_package_weight:0}))),await Promise.all([...new Set([...$,U])].map(ae=>gs(ae).catch(()=>null))),A(!1),V("Shipment updated for this order."),await As(),await ni(U)}catch($){V($?.message||"Failed to update shipment.")}finally{M(!1)}}}async function Da(U){const $=String(U?.allocation_id||"").trim(),W=String(U?.shipment_id||"").trim();if(!(!$||!W)){k($),V("");try{await gT($),await gs(W),await As(),await ni(W),V("Removed item from shipment.")}catch(ae){V(ae?.message||"Failed to remove item from shipment.")}finally{k("")}}}async function Wm(){const U=z.map($=>Lt[String($.order_item_id||"")]?.name||"Item").join(`
`);await y8(U),V(`Copied ${z.length} product name(s).`)}function fd(){const U=pE(B),$=pE(Z);K(W=>{const ae={...W};return z.forEach((de,ve)=>{const De=de.allocation_id,Se=ae[De]||{};ae[De]={unit_product_weight:U[ve]===void 0||U[ve]===""?Se.unit_product_weight??"":U[ve],unit_package_weight:$[ve]===void 0||$[ve]===""?Se.unit_package_weight??"":$[ve]}}),ae}),V("Applied pasted weight columns.")}async function sc(){if(!(!E||!z.length)){R(!0),V("");try{for(const U of z){const $=U.allocation_id,W=I[$]||{};await ib($,{unit_product_weight:mE(W.unit_product_weight),unit_package_weight:mE(W.unit_package_weight)})}await gs(E),await ni(E),V(`Saved weight rows: ${z.length}`)}catch(U){V(U?.message||"Failed to save weights.")}finally{R(!1)}}}const ac=p.useMemo(()=>[...new Set(C.map(U=>String(U.shipment_id||"").trim()).filter(Boolean))],[C]).length>0,wt=p.useMemo(()=>N.find(U=>String(U.shipment_id||"")===String(E||""))||null,[N,E]),Dt=he,Mr=ge(F,10),Rs=p.useMemo(()=>{const U={};return z.forEach($=>{const W=String($.order_item_id||"").trim();W&&(U[W]||(U[W]={needed_qty:0,unit_product_weight:Number($.unit_product_weight||0),unit_package_weight:Number($.unit_package_weight||0),unit_total_weight:Number($.unit_total_weight||0)}),U[W].needed_qty+=fE($),U[W].unit_product_weight=Number($.unit_product_weight||U[W].unit_product_weight||0),U[W].unit_package_weight=Number($.unit_package_weight||U[W].unit_package_weight||0),U[W].unit_total_weight=Number($.unit_total_weight||U[W].unit_total_weight||0))}),(g||[]).map($=>{const W=String($.order_item_id||"").trim(),ae=U[W]||{},de=Number(ae.needed_qty||$.ordered_quantity||0),ve=Number($.buy_price_gbp||0),De=Number(ae.unit_product_weight||0),Se=Number(ae.unit_package_weight||0),qe=Number(ae.unit_total_weight||De+Se||0),Nt=Oe(de*qe),Ot=Oe(Nt*Number(wt?.cargo_cost_per_kg||0)),er=Oe(de*ve),$n=Oe(er+Ot),kr=Oe(de>0?Ot/de:0);return{order_item_id:W,name:$.name||"Item",image_url:$.image_url||"",qty:de,buyUnit:ve,upw:De,ukw:Se,utw:qe,totalWeightKg:Nt,cargoTotalGbp:Ot,purchaseTotalGbp:er,landedTotalGbp:$n,cargoUnitGbp:kr}})},[z,g,wt?.cargo_cost_per_kg]),oc=p.useMemo(()=>Rs.reduce((U,$)=>(U.qty+=$.qty,U.weightKg+=$.totalWeightKg,U.purchase+=$.purchaseTotalGbp,U.cargo+=$.cargoTotalGbp,U.landed+=$.landedTotalGbp,U),{qty:0,weightKg:0,purchase:0,cargo:0,landed:0}),[Rs]),pr=p.useMemo(()=>{const U=Number(Mr||0)/100,$=Kn(wt);return Rs.map(W=>{const ae=Dt==="total"?W.buyUnit+W.cargoUnitGbp:W.buyUnit,de=Oe(W.cargoUnitGbp),ve=Oe(Dt==="purchase"?W.buyUnit*(1+U):ae*(1+U)),De=Math.round(ve*$),Se=Math.round(de*$),qe=Oe(Dt==="purchase"?ve+de:ve),Nt=Math.round(qe*$);return{...W,offeredProductUnitGbp:ve,offeredProductUnitBdt:De,cargoUnitGbp:de,cargoUnitBdt:Se,sellingUnitGbp:qe,sellingUnitBdt:Nt}})},[Rs,Dt,Mr,wt]),Gt=p.useMemo(()=>{const U=ge(Kn(wt),0);return pr.reduce(($,W)=>($.itemUnitGbp+=ge(W.buyUnit,0),$.itemUnitBdt+=Math.round(ge(W.buyUnit,0)*U),$.itemPlusCargoUnitGbp+=Oe(ge(W.buyUnit,0)+ge(W.cargoUnitGbp,0)),$.itemPlusCargoUnitBdt+=Math.round(Oe(ge(W.buyUnit,0)+ge(W.cargoUnitGbp,0))*U),$.productWtG+=vl(ge(W.upw,0)),$.packageWtG+=vl(ge(W.ukw,0)),$.totalWtG+=vl(ge(W.utw,0)),$.totalCargoGbp+=ge(W.cargoTotalGbp,0),$.totalItemGbp+=ge(W.purchaseTotalGbp,0),$.totalItemBdt+=Math.round(ge(W.purchaseTotalGbp,0)*U),$.totalItemPlusCargoGbp+=ge(W.landedTotalGbp,0),$.totalItemPlusCargoBdt+=Math.round(ge(W.landedTotalGbp,0)*U),$.offeredProductUnitGbp+=ge(W.offeredProductUnitGbp,0),$.offeredProductUnitBdt+=ge(W.offeredProductUnitBdt,0),$.cargoUnitGbp+=ge(W.cargoUnitGbp,0),$.cargoUnitBdt+=ge(W.cargoUnitBdt,0),$.sellingUnitGbp+=ge(W.sellingUnitGbp,0),$.sellingUnitBdt+=ge(W.sellingUnitBdt,0),$),{itemUnitGbp:0,itemUnitBdt:0,itemPlusCargoUnitGbp:0,itemPlusCargoUnitBdt:0,productWtG:0,packageWtG:0,totalWtG:0,totalCargoGbp:0,totalItemGbp:0,totalItemBdt:0,totalItemPlusCargoGbp:0,totalItemPlusCargoBdt:0,offeredProductUnitGbp:0,offeredProductUnitBdt:0,cargoUnitGbp:0,cargoUnitBdt:0,sellingUnitGbp:0,sellingUnitBdt:0})},[pr,wt]);p.useEffect(()=>{const U=Kn(wt);Mt(String(U||""))},[wt?.shipment_id,wt?.gbp_avg_rate,wt?.gbp_rate_product,wt?.gbp_rate_cargo]),p.useEffect(()=>{const U=ge(it,Kn(wt));Ze($=>{const W={...$};return pr.forEach(ae=>{const de=String(ae.order_item_id||"");if(!de||W[de])return;const ve=ge(Mr,10),De=Dt==="total"?ae.buyUnit+ae.cargoUnitGbp:ae.buyUnit,Se=Oe(De*(1+ve/100)),qe=Math.round(Se*U);W[de]={profitPct:String(ve),offerGbp:String(Se.toFixed(2)),offerBdt:String(qe),lastEdited:"pct"}}),W})},[pr,Dt,Mr,wt,it]),p.useEffect(()=>{const U=ge(it,Kn(wt));Ze($=>{const W={...$};return pr.forEach(ae=>{const de=String(ae.order_item_id||""),ve=$[de];if(!de||!ve)return;const De=Dt==="total"?ae.buyUnit+ae.cargoUnitGbp:ae.buyUnit,Se=String(ve.lastEdited||"pct"),qe=ge(ve.profitPct,ge(Mr,10)),Nt=Oe(ge(ve.offerGbp,0)),Ot=Math.round(ge(ve.offerBdt,0));if(Se==="gbp"){if(yl(ve.offerGbp))return;W[de]=Os(ae,{source:"gbp",offerGbp:String(Nt),rateOverride:U,baseOverride:De}),W[de].lastEdited="gbp"}else if(Se==="bdt"){if(yl(ve.offerBdt))return;W[de]=Os(ae,{source:"bdt",offerBdt:String(Ot),rateOverride:U,baseOverride:De}),W[de].lastEdited="bdt"}else{if(yl(ve.profitPct))return;W[de]=Os(ae,{source:"pct",profitPct:String(qe),rateOverride:U,baseOverride:De}),W[de].lastEdited="pct"}}),W})},[it,Dt,Mr,pr,wt]);const Jn=p.useMemo(()=>{const U=ge(it,Kn(wt));return pr.map($=>{const W=String($.order_item_id||""),ae=et[W]||{},de=Lt[W]?.calculated_selling_price||{},ve=Dt==="total"?$.buyUnit+$.cargoUnitGbp:$.buyUnit,De=ge(Mr,10),Se=Oe(ve*(1+De/100)),qe=Math.round(Se*U),Nt=ae.profitPct!=null?String(ae.profitPct):String(De),Ot=ae.offerGbp!=null?String(ae.offerGbp):String(Se.toFixed(2)),er=ae.offerBdt!=null?String(ae.offerBdt):String(qe),$n=Oe(ge(Ot,Se)),kr=Math.round(ge(er,qe)),jn=Dt==="purchase"?Oe($n+$.cargoUnitGbp):$n,Ps=Dt==="purchase"?Math.round(kr+$.cargoUnitBdt):kr,Io=Number.isFinite(Number(de?.selling_unit_gbp))?Oe(de.selling_unit_gbp):null,La=Number.isFinite(Number(de?.selling_unit_bdt))?Math.round(Number(de.selling_unit_bdt)):null;return{...$,draft:{profitPct:Nt,offerGbp:Ot,offerBdt:er},finalOfferUnitGbp:jn,finalOfferUnitBdt:Ps,calcPriceGbp:Io,calcPriceBdt:La}})},[pr,et,Dt,Mr,wt,it,Lt]),xn=p.useMemo(()=>{const U=Cn==="gbp"?"gbp":"bdt";return(g||[]).map($=>{const W=$?.calculated_selling_price||{},ae=Math.round(ge($?.ordered_quantity,0)),de=U==="gbp"?Number.isFinite(Number(W?.selling_unit_gbp))?Oe(W.selling_unit_gbp):Number.isFinite(Number(W?.offered_product_unit_gbp))?Oe(W.offered_product_unit_gbp):null:Number.isFinite(Number(W?.selling_unit_bdt))?Math.round(Number(W.selling_unit_bdt)):Number.isFinite(Number(W?.offered_product_unit_bdt))?Math.round(Number(W.offered_product_unit_bdt)):null,ve=de==null?null:U==="gbp"?Oe(de*ae):Math.round(de*ae);return{order_item_id:$.order_item_id,name:$.name||"Item",image_url:$.image_url||"",qty:ae,unit:de,total:ve,currency:U}})},[g,Cn]),Ut=Cn==="gbp"?"gbp":"bdt",qn=ge(Kn(wt),0),gr=p.useMemo(()=>(g||[]).map(U=>{const $=String(U.order_item_id||""),W=U?.calculated_selling_price||{},ae=Math.max(0,Math.round(ge(U?.ordered_quantity,0))),de=Math.max(0,Math.round(ge(U?.customer_changed_quantity,ae))),ve=ge(qn,0),De=Oe(ge(W?.cargo_unit_gbp,ve>0?ge(W?.cargo_unit_bdt,0)/ve:0)),Se=Math.round(ge(W?.cargo_unit_bdt,ve>0?De*ve:0)),qe=Oe(ge(U?.buy_price_gbp,0)),Nt=Oe(qe+De),Ot=Math.round(Nt*ve),er=Oe(ge(W?.selling_unit_gbp,ve>0?ge(W?.selling_unit_bdt,ge(W?.offered_product_unit_bdt,0))/ve:ge(W?.offered_product_unit_gbp,0))),$n=Math.round(ge(W?.selling_unit_bdt,ve>0?er*ve:ge(W?.offered_product_unit_bdt,0))),kr=Oe(ge(U?.customer_unit_gbp,ve>0?ge(U?.customer_unit_bdt,$n)/ve:er)),jn=Math.round(ge(U?.customer_unit_bdt,ve>0?kr*ve:$n)),Ps=Oe(ge(U?.final_unit_gbp,ve>0?ge(U?.final_unit_bdt,jn)/ve:kr)),Io=Math.round(ge(U?.final_unit_bdt,ve>0?Ps*ve:jn)),La=Math.max(0,Math.round(ge(U?.final_quantity,de)));return{order_item_id:$,name:U?.name||"Item",image_url:U?.image_url||"",buy_price_gbp:Oe(ge(U?.buy_price_gbp,0)),cargoUnitGbp:De,cargoUnitBdt:Se,baseUnitCostGbp:Nt,baseUnitCostBdt:Ot,orderedQty:ae,customerChangedQty:de,offeredUnitGbp:er,offeredUnitBdt:$n,customerUnitGbp:kr,customerUnitBdt:jn,finalUnitGbp:Ps,finalUnitBdt:Io,finalQty:La}}),[g,Ut,qn]),Gi=p.useMemo(()=>{const U=gr.reduce((Se,qe)=>Se+Oe(ge(qe.baseUnitCostGbp,0)*ge(qe.finalQty,0)),0),$=gr.reduce((Se,qe)=>Se+Math.round(ge(qe.baseUnitCostBdt,0)*ge(qe.finalQty,0)),0),W=gr.reduce((Se,qe)=>Se+ge(qe.finalUnitGbp,0)*ge(qe.finalQty,0),0),ae=gr.reduce((Se,qe)=>Se+ge(qe.finalUnitBdt,0)*ge(qe.finalQty,0),0),de=W-U,ve=ae-$,De=$>0?Oe(ve/$*100):0;return{baseTotalCostGbp:Oe(U),baseTotalCostBdt:Math.round($),finalTotalGbp:Oe(W),finalTotalBdt:Math.round(ae),profitGbp:Oe(de),profitBdt:Math.round(ve),profitPct:De}},[gr,qn]);p.useEffect(()=>{Si(U=>{const $={...U};return gr.forEach(W=>{const ae=String(W.order_item_id||"");ae&&($[ae]||($[ae]={finalQty:String(W.finalQty),finalUnit:String(Ut==="gbp"?W.finalUnitGbp:W.finalUnitBdt)}))}),$}),te(U=>{const $={...U};return gr.forEach(W=>{const ae=String(W.order_item_id||"");if(!ae||$[ae]!==void 0)return;const de=ge(W.finalUnit,0)>0;$[ae]=!de}),$})},[gr]),p.useEffect(()=>{js(U=>{const $={...U};return Jn.forEach(W=>{const ae=String(W.order_item_id||"");if(!ae||$[ae]!==void 0)return;const de=!!Lt[ae]?.calculated_selling_price;$[ae]=!de}),$})},[Jn,Lt]);function Os(U,$={}){const W=ge($.rateOverride,ge(it,Kn(wt))),ae=ge($.baseOverride,Dt==="total"?U.buyUnit+U.cargoUnitGbp:U.buyUnit),de=String($.source||"pct");let ve=ge($.profitPct,ge(F,10)),De=Oe(ge($.offerGbp,0)),Se=Math.round(ge($.offerBdt,0));return de==="pct"?(De=Oe(ae*(1+ve/100)),Se=Math.round(De*W)):de==="gbp"?(ve=ae>0?Oe((De/ae-1)*100):0,Se=Math.round(De*W)):de==="bdt"&&(De=W>0?Oe(Se/W):0,ve=ae>0?Oe((De/ae-1)*100):0),{profitPct:String(ve),offerGbp:String(De.toFixed(2)),offerBdt:String(Se)}}function hd(U,$){const W=String(U.order_item_id||"");if(yl($)){Ze(de=>({...de,[W]:{...de[W]||{},profitPct:String($),lastEdited:"pct"}}));return}const ae=Os(U,{source:"pct",profitPct:$});Ze(de=>({...de,[W]:{...de[W]||{},...ae,profitPct:String($),lastEdited:"pct"}}))}function ka(U,$){const W=String(U.order_item_id||"");if(yl($)){Ze(de=>({...de,[W]:{...de[W]||{},offerGbp:String($),lastEdited:"gbp"}}));return}const ae=Os(U,{source:"gbp",offerGbp:$});Ze(de=>({...de,[W]:{...de[W]||{},...ae,offerGbp:String($),lastEdited:"gbp"}}))}function lc(U,$){const W=String(U.order_item_id||"");if(yl($)){Ze(de=>({...de,[W]:{...de[W]||{},offerBdt:String($),lastEdited:"bdt"}}));return}const ae=Os(U,{source:"bdt",offerBdt:$});Ze(de=>({...de,[W]:{...de[W]||{},...ae,offerBdt:String($),lastEdited:"bdt"}}))}async function Is(U){const $=String(U?.order_item_id||"").trim();if(!(!$||!t)){Ao(W=>({...W,[$]:!0})),Me("");try{const W=wi[$]||{},ae=Math.max(0,Math.round(ge(W.finalQty,U.finalQty))),de=ge(W.finalUnit,U.finalUnit);if(ae>0&&!(de>0))throw new Error("Final price must be greater than 0.");const ve=ge(qn,Kn(wt)),De=Ut==="gbp"?Oe(de):ve>0?Oe(de/ve):0,Se=Math.round(Ut==="bdt"?de:de*ve);await XU({order_id:t,order_item_id:$,final_quantity:ae,final_unit_gbp:De,final_unit_bdt:Se});const qe=await Ii({email:e?.email,role:e?.role,order_id:t});qe?.order&&h(qe.order),Array.isArray(qe?.items)&&y(qe.items),te(Nt=>({...Nt,[$]:!1})),Me(`Saved final price for ${U.name||"item"}.`)}catch(W){Me(W?.message||"Failed to save final price row.")}finally{Ao(W=>{const ae={...W};return delete ae[$],ae})}}}async function Ms(U){const $=String(U?.order_item_id||"").trim();if(!(!$||!t)&&window.confirm(`Remove "${U?.name||"this item"}" from order?`)){_e(W=>({...W,[$]:!0})),Me("");try{await ZU({order_id:t,order_item_id:$});const W=await Ii({email:e?.email,role:e?.role,order_id:t});W?.order&&h(W.order),Array.isArray(W?.items)&&y(W.items),Me(`Removed ${U.name||"item"} from order.`)}catch(W){Me(W?.message||"Failed to remove item.")}finally{_e(W=>{const ae={...W};return delete ae[$],ae})}}}async function Pa(U){const $=String(U?.order_item_id||"").trim();if(!(!$||!t)){hr(W=>({...W,[$]:!0})),Be("");try{const W=Oe(ge(U?.draft?.offerGbp,0)),ae=Math.round(ge(U?.draft?.offerBdt,0)),de=Oe(ge(U?.buyUnit,0)),ve=Oe(ge(U?.cargoUnitGbp,0)),De=Math.round(ge(U?.cargoUnitBdt,0)),Se=Dt==="purchase"?Oe(W+ve):W,qe=Dt==="purchase"?Math.round(ae+De):ae;await kN({order_id:t,price_mode:Dt,profit_rate_pct:ge(U?.draft?.profitPct,Mr),update_order_meta:!1,rows:[{order_item_id:$,initial_unit_gbp:de,initial_unit_bdt:Math.round(de*ge(it,Kn(wt))),initial_plus_cargo_unit_gbp:Oe(de+ve),initial_plus_cargo_unit_bdt:Math.round(Oe(de+ve)*ge(it,Kn(wt))),calculated_offer_unit_gbp:Se,calculated_offer_unit_bdt:qe,offer_unit_gbp:W,offer_unit_bdt:ae,customer_counter_unit_gbp:Lt[$]?.customer_unit_gbp??null,customer_counter_unit_bdt:Lt[$]?.customer_unit_bdt??null,final_unit_gbp:Lt[$]?.final_unit_gbp??null,final_unit_bdt:Lt[$]?.final_unit_bdt??null,offered_product_unit_gbp:W,offered_product_unit_bdt:ae,cargo_unit_gbp:ve,cargo_unit_bdt:De,selling_unit_gbp:Se,selling_unit_bdt:qe}]});const Nt=await Ii({email:e?.email,role:e?.role,order_id:t});Nt?.order&&h(Nt.order),Array.isArray(Nt?.items)&&y(Nt.items),js(Ot=>({...Ot,[$]:!1})),Be(`Saved offered price for ${U.name||"item"}.`)}catch(W){Be(W?.message||"Failed to save row.")}finally{hr(W=>{const ae={...W};return delete ae[$],ae})}}}async function Ds(){if(!(!t||!Jn.length)){Fe(!0),Be("");try{const U=ge(it,Kn(wt)),$=Jn.map(ae=>{const de=Oe(ge(ae?.draft?.offerGbp,ae.offeredProductUnitGbp)),ve=Math.round(ge(ae?.draft?.offerBdt,ae.offeredProductUnitBdt)),De=Dt==="purchase"?Oe(de+ge(ae.cargoUnitGbp,0)):de,Se=Dt==="purchase"?Math.round(ve+ge(ae.cargoUnitBdt,0)):ve;return{order_item_id:ae.order_item_id,initial_unit_gbp:ae.buyUnit,initial_unit_bdt:Math.round(ae.buyUnit*U),initial_plus_cargo_unit_gbp:Oe(ae.buyUnit+ae.cargoUnitGbp),initial_plus_cargo_unit_bdt:Math.round(Oe(ae.buyUnit+ae.cargoUnitGbp)*U),calculated_offer_unit_gbp:De,calculated_offer_unit_bdt:Se,offer_unit_gbp:de,offer_unit_bdt:ve,customer_counter_unit_gbp:Lt[ae.order_item_id]?.customer_unit_gbp??null,customer_counter_unit_bdt:Lt[ae.order_item_id]?.customer_unit_bdt??null,final_unit_gbp:Lt[ae.order_item_id]?.final_unit_gbp??null,final_unit_bdt:Lt[ae.order_item_id]?.final_unit_bdt??null,offered_product_unit_gbp:de,offered_product_unit_bdt:ve,cargo_unit_gbp:ae.cargoUnitGbp,cargo_unit_bdt:ae.cargoUnitBdt,selling_unit_gbp:De,selling_unit_bdt:Se}});await kN({order_id:t,price_mode:he,profit_rate_pct:Number(F||0),customer_price_currency:Cn,update_order_meta:!1,rows:$});const W=await Ii({email:e?.email,role:e?.role,order_id:t});W?.order&&h(W.order),Array.isArray(W?.items)&&y(W.items),Be(`Calculated selling price saved for ${$.length} item(s).`),we(!1)}catch(U){Be(U?.message||"Failed to save calculated selling price.")}finally{Fe(!1)}}}async function tn(U){if(!t)return;const $=String(U||"").toLowerCase()==="gbp"?"gbp":"bdt";Qn(!0),Be("");try{await WU({order_id:t,currency:$}),Fn($),h(W=>W&&{...W,calculated_selling_price:{...W.calculated_selling_price||{},customer_price_currency:$}}),Be(`Customer will see ${$.toUpperCase()} offer price for this order.`)}catch(W){Be(W?.message||"Failed to save customer price display option.")}finally{Qn(!1)}}async function cc(){if(!t)return;const U=String(cn||"").toLowerCase();if(U){yt(!0),Be("");try{await yj({order_id:t,status:U}),h($=>$&&{...$,status:U}),Be(`Order status changed to ${U}.`)}catch($){Be($?.message||"Failed to update order status.")}finally{yt(!1)}}}const ks=String(f?.status||"").toLowerCase(),Ni=Uv(ks,{role:"admin",includeCurrent:!0}),Dr=p.useMemo(()=>g.length?g.every(U=>{const $=U?.calculated_selling_price||{},W=Number.isFinite(Number($?.offered_product_unit_gbp)),ae=Number.isFinite(Number($?.offered_product_unit_bdt));return W||ae}):!1,[g]);return p.useEffect(()=>{v==="negotiate"&&!Dr&&b("calculate")},[v,Dr]),l.jsxs("div",{className:"mx-auto w-full max-w-6xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4 flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Order Details"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:f?.order_name||t}),f?.status?l.jsx(Un,{className:"mt-2",variant:"secondary",children:f.status}):null]}),l.jsx(fe,{variant:"outline",onClick:()=>n("/admin/orders"),children:"Back"})]}),c?l.jsx("div",{className:"mb-4 rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:c}):null,!i&&f?l.jsxs(Pe,{className:"mb-4",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Summary"})}),l.jsxs(ze,{className:"text-sm",children:[l.jsxs("div",{children:["Customer: ",f.creator_email]}),l.jsxs("div",{children:["Total Qty: ",Math.round(Number(f.total_order_qty||0))]}),l.jsxs("div",{children:["Total Purchase Value: ",bt(f.total_purchase_value_gbp||Qm)]})]})]}):null,l.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[l.jsx(fe,{variant:v==="raw"?"default":"outline",size:"sm",onClick:()=>b("raw"),children:"Raw Order"}),l.jsx(fe,{variant:v==="shipment"?"default":"outline",size:"sm",onClick:()=>b("shipment"),children:"Shipment"}),l.jsx(fe,{variant:v==="weight"?"default":"outline",size:"sm",onClick:()=>b("weight"),children:"Weight"}),l.jsx(fe,{variant:v==="price"?"default":"outline",size:"sm",onClick:()=>b("price"),children:"Price Mode"}),l.jsx(fe,{variant:v==="calculate"?"default":"outline",size:"sm",onClick:()=>b("calculate"),children:"Calculate Price"}),l.jsx(fe,{variant:v==="negotiate"?"default":"outline",size:"sm",onClick:()=>b("negotiate"),disabled:!Dr,title:Dr?"Negotiate & Finalize":"Complete Calculate Price first",children:"Negotiate & Finalize"})]}),v==="raw"?l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Items"})}),l.jsx(ze,{children:i?l.jsx(v8,{}):g.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No items."}):l.jsx("div",{className:"space-y-3",children:g.map(U=>l.jsxs("div",{className:"flex items-center gap-3 rounded-lg border p-3",children:[l.jsx("div",{className:"h-14 w-14 overflow-hidden rounded-lg bg-white",children:U.image_url?l.jsx("img",{src:to(U.image_url),alt:U.name,className:"h-14 w-14 object-contain",loading:"lazy",onError:$=>{$.currentTarget.src=U.image_url}}):null}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsx("div",{className:"truncate text-sm font-semibold",children:U.name||"Unnamed item"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[U.brand||"-","  Qty ",Math.round(Number(U.ordered_quantity||0))]})]}),l.jsxs("div",{className:"text-right text-xs",children:[l.jsx("div",{className:"text-muted-foreground",children:"Purchase / unit"}),l.jsx("div",{className:"font-semibold",children:bt(U.buy_price_gbp)}),l.jsx("div",{className:"mt-1 text-muted-foreground",children:"Line total"}),l.jsx("div",{className:"font-semibold",children:bt(U.line_purchase_value_gbp)})]})]},U.order_item_id))})})]}):v==="shipment"?l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Shipment Items"})}),l.jsxs(ze,{className:"space-y-4",children:[l.jsxs("div",{className:"grid gap-3 md:grid-cols-[1fr_auto]",children:[l.jsxs(an,{value:E,onValueChange:async U=>{j(U),await ni(U)},disabled:ac&&!S,children:[l.jsx(Kt,{children:l.jsx(on,{placeholder:"Select shipment to assign this order"})}),l.jsx(Yt,{children:N.map(U=>l.jsx(ot,{value:U.shipment_id,children:U.name||U.shipment_id},U.shipment_id))})]}),ac?S?l.jsx(fe,{onClick:Ro,disabled:!E||L,children:L?"Updating...":"Update Shipment"}):l.jsx(fe,{variant:"outline",onClick:()=>A(!0),children:"Edit"}):l.jsx(fe,{onClick:Hi,disabled:!E||L,children:L?"Adding...":"Add Order To Shipment"})]}),P?l.jsx("div",{className:"rounded-lg border px-3 py-2 text-sm",children:P}):null,ac&&!S?l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Shipment already assigned. Click ",l.jsx("span",{className:"font-semibold",children:"Edit"})," to change."]}):null,E?z.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No shipment item rows for this order in selected shipment."}):l.jsx("div",{className:"space-y-2",children:z.map(U=>l.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-lg border p-3 text-xs",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:Lt[String(U.order_item_id||"")]?.image_url?l.jsx("img",{src:to(Lt[String(U.order_item_id||"")]?.image_url),alt:Lt[String(U.order_item_id||"")]?.name||"item",className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-semibold",children:Lt[String(U.order_item_id||"")]?.name||"Item"})]}),l.jsxs("div",{className:"mt-1 text-muted-foreground",children:["Needed ",Math.round(fE(U)),"  Arrived ",Math.round(_8(U))]})]}),l.jsx(fe,{size:"icon",variant:"destructive",disabled:D===U.allocation_id,onClick:()=>Da(U),title:"Delete from shipment","aria-label":"Delete from shipment",children:D===U.allocation_id?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(Ar,{className:"h-4 w-4"})})]},U.allocation_id))}):l.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a shipment first."})]})]}):v==="weight"?l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Weight (Bulk Paste)"})}),l.jsx(ze,{className:"space-y-4",children:E?z.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No allocated rows for this order in selected shipment."}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(fe,{variant:"outline",onClick:Wm,children:"Copy Product Names"}),l.jsx(fe,{size:"icon",onClick:sc,disabled:q,title:"Save all weights","aria-label":"Save all weights",children:q?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})]}),l.jsxs("div",{className:"grid gap-3 lg:grid-cols-3",children:[l.jsx("div",{className:"lg:col-span-2 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Product"}),l.jsx("th",{className:"px-3 py-2",children:"Product Wt (g)"}),l.jsx("th",{className:"px-3 py-2",children:"Package Wt (g)"})]})}),l.jsx("tbody",{className:"divide-y",children:z.map(U=>{const $=U.allocation_id,W=Lt[String(U.order_item_id||"")]||{};return l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:W.image_url?l.jsx("img",{src:to(W.image_url),alt:W.name||"item",className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-medium",children:W.name||"Item"})]})}),l.jsx("td",{className:"px-3 py-2",children:l.jsx("input",{className:"h-8 w-28 rounded-md border bg-background px-2",value:String(I[$]?.unit_product_weight??""),onChange:ae=>K(de=>({...de,[$]:{...de[$]||{},unit_product_weight:ae.target.value}}))})}),l.jsx("td",{className:"px-3 py-2",children:l.jsx("input",{className:"h-8 w-28 rounded-md border bg-background px-2",value:String(I[$]?.unit_package_weight??""),onChange:ae=>K(de=>({...de,[$]:{...de[$]||{},unit_package_weight:ae.target.value}}))})})]},$)})})]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Product Weight Column (g)"}),l.jsx("textarea",{className:"min-h-[140px] w-full rounded-md border bg-background p-2 text-xs",value:B,onChange:U=>Y(U.target.value)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Package Weight Column (g)"}),l.jsx("textarea",{className:"min-h-[140px] w-full rounded-md border bg-background p-2 text-xs",value:Z,onChange:U=>se(U.target.value)})]}),l.jsx(fe,{variant:"outline",className:"w-full",onClick:fd,children:"Apply Pasted Columns"})]})]})]}):l.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a shipment in Shipment tab first."})})]}):v==="price"?l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Price Mode"})}),l.jsx(ze,{className:"space-y-4",children:E?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-3 rounded-lg border p-3 md:grid-cols-[220px_1fr]",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Profit Rate (%)"}),l.jsx("input",{className:"h-9 w-full rounded-md border bg-background px-2 text-sm",value:F,onChange:U=>re(U.target.value),inputMode:"decimal",disabled:!ye})]}),l.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[l.jsx(fe,{variant:he==="purchase"?"default":"outline",onClick:()=>pe("purchase"),disabled:!ye,children:"Apply On Purchase Price"}),l.jsx(fe,{variant:he==="total"?"default":"outline",onClick:()=>pe("total"),disabled:!ye,children:"Apply On Total Price"}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Shipment Avg Rate: ",Kn(wt),"  Cargo/KG: ",bt(wt?.cargo_cost_per_kg)]}),ye?l.jsx(fe,{size:"icon",onClick:Ds,disabled:me||!pr.length,title:"Save calculated selling price","aria-label":"Save calculated selling price",children:me?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})}):l.jsx(fe,{variant:"outline",onClick:()=>we(!0),children:"Edit Calculated Selling Price"})]})]}),Ne?l.jsx("div",{className:"rounded-lg border px-3 py-2 text-sm",children:Ne}):null,l.jsxs("div",{className:"rounded-lg border px-3 py-2 text-xs text-muted-foreground",children:["Changing ",l.jsx("span",{className:"font-semibold",children:"Price Mode"})," recalculates preview instantly in FE. Values are saved to DB only when you click ",l.jsx("span",{className:"font-semibold",children:"Save Calculated Selling Price"}),"."]}),l.jsxs("div",{className:"rounded-lg border px-3 py-2 text-xs",children:[l.jsx("span",{className:"text-muted-foreground",children:"Profit Rule: "}),l.jsx("span",{className:"font-semibold",children:Dt==="purchase"?"(Item x rate) + Item + Cargo":"(Item+Cargo) x rate + (Item+Cargo)"})]}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Weights shown in g. Cargo = total weight (kg) x shipment cargo cost per kg."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsxs("thead",{className:"bg-muted/40 text-muted-foreground",children:[l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-1",colSpan:9,children:"Cost Section"}),l.jsx("th",{className:"bg-primary/10 px-3 py-1 text-primary",colSpan:2,children:"Offer Section"})]}),l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Product"}),l.jsx("th",{className:"px-3 py-2",children:"Needed"}),l.jsx("th",{className:"px-3 py-2",children:"Weight (g)"}),l.jsx("th",{className:"px-3 py-2",children:"Item / Unit"}),l.jsx("th",{className:"px-3 py-2",children:"Cargo / Unit"}),l.jsx("th",{className:"px-3 py-2",children:"Item+Cargo / Unit"}),l.jsx("th",{className:"px-3 py-2",children:"Total Item"}),l.jsx("th",{className:"px-3 py-2",children:"Total Cargo"}),l.jsx("th",{className:"px-3 py-2",children:"Total Cost"}),l.jsx("th",{className:"bg-primary/5 px-3 py-2 text-primary",children:"Calculated Offer / Unit"}),l.jsx("th",{className:"bg-primary/5 px-3 py-2 text-primary",children:"Calculated Total / Unit"})]})]}),l.jsx("tbody",{className:"divide-y",children:pr.map(U=>{const $=ge(it,Kn(wt)),W=Oe(U.buyUnit),ae=Math.round(W*$),de=Oe(U.cargoUnitGbp),ve=Math.round(de*$),De=Oe(W+de),Se=Math.round(De*$),qe=Oe(U.purchaseTotalGbp),Nt=Math.round(qe*$),Ot=Oe(U.cargoTotalGbp),er=Math.round(Ot*$),$n=Oe(U.landedTotalGbp),kr=Math.round($n*$);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:U.image_url?l.jsx("img",{src:to(U.image_url),alt:U.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-medium",children:U.name})]})}),l.jsx("td",{className:"px-3 py-2",children:Math.round(U.qty)}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsxs("div",{children:["P ",vl(U.upw)]}),l.jsxs("div",{children:["Pkg ",vl(U.ukw)]}),l.jsxs("div",{children:["T ",vl(U.utw)]})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(W)}),l.jsx("div",{children:It(ae)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(de)}),l.jsx("div",{children:It(ve)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(De)}),l.jsx("div",{children:It(Se)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(qe)}),l.jsx("div",{children:It(Nt)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(Ot)}),l.jsx("div",{children:It(er)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt($n)}),l.jsx("div",{children:It(kr)})]}),l.jsxs("td",{className:"bg-primary/5 px-3 py-2",children:[l.jsx("div",{children:bt(U.offeredProductUnitGbp)}),l.jsx("div",{children:It(U.offeredProductUnitBdt)})]}),l.jsxs("td",{className:"bg-primary/5 px-3 py-2",children:[l.jsx("div",{children:bt(U.sellingUnitGbp)}),l.jsx("div",{children:It(U.sellingUnitBdt)})]})]},U.order_item_id)})}),l.jsx("tfoot",{children:l.jsxs("tr",{className:"bg-muted/30 font-semibold",children:[l.jsx("td",{className:"px-3 py-2",children:"Total"}),l.jsx("td",{className:"px-3 py-2",children:Math.round(oc.qty)}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsxs("div",{children:["P ",Math.round(Gt.productWtG)]}),l.jsxs("div",{children:["Pkg ",Math.round(Gt.packageWtG)]}),l.jsxs("div",{children:["T ",Math.round(Gt.totalWtG)]})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(Gt.itemUnitGbp)}),l.jsx("div",{children:It(Gt.itemUnitBdt)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(Gt.cargoUnitGbp)}),l.jsx("div",{children:It(Gt.cargoUnitBdt)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(Gt.itemPlusCargoUnitGbp)}),l.jsx("div",{children:It(Gt.itemPlusCargoUnitBdt)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(Gt.totalItemGbp)}),l.jsx("div",{children:It(Gt.totalItemBdt)})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(Gt.totalCargoGbp)}),l.jsx("div",{children:It(Math.round(Gt.totalCargoGbp*ge(Kn(wt),0)))})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(Gt.totalItemPlusCargoGbp)}),l.jsx("div",{children:It(Gt.totalItemPlusCargoBdt)})]}),l.jsxs("td",{className:"bg-primary/10 px-3 py-2",children:[l.jsx("div",{children:bt(Gt.offeredProductUnitGbp)}),l.jsx("div",{children:It(Gt.offeredProductUnitBdt)})]}),l.jsxs("td",{className:"bg-primary/10 px-3 py-2",children:[l.jsx("div",{children:bt(Gt.sellingUnitGbp)}),l.jsx("div",{children:It(Gt.sellingUnitBdt)})]})]})})]})})]}):l.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a shipment in Shipment tab first."})})]}):v==="negotiate"?l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Negotiate & Finalize"})}),l.jsx(ze,{className:"space-y-4",children:Dr?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid gap-2 md:grid-cols-4",children:[l.jsxs("div",{className:"rounded-lg border p-3 text-sm",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Item Cost (Item + Cargo)"}),l.jsx("div",{className:"font-semibold",children:bt(Gi.baseTotalCostGbp)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:It(Gi.baseTotalCostBdt)})]}),l.jsxs("div",{className:"rounded-lg border p-3 text-sm",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Final Total"}),l.jsx("div",{className:"font-semibold",children:bt(Gi.finalTotalGbp)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:It(Gi.finalTotalBdt)})]}),l.jsxs("div",{className:"rounded-lg border p-3 text-sm",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Profit"}),l.jsx("div",{className:"font-semibold",children:bt(Gi.profitGbp)}),l.jsx("div",{className:"text-xs text-muted-foreground",children:It(Gi.profitBdt)})]}),l.jsxs("div",{className:"rounded-lg border p-3 text-sm",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Profit Rate"}),l.jsxs("div",{className:"font-semibold",children:[Gi.profitPct,"%"]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-lg border p-3",children:[l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current status: ",String(f?.status||"-"),"  Rate: ",qn||0," BDT/GBP"]}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs(an,{value:cn||ks||"submitted",onValueChange:bn,children:[l.jsx(Kt,{className:"h-8 w-[180px]",children:l.jsx(on,{placeholder:"Select status"})}),l.jsx(Yt,{children:Ni.map(U=>l.jsx(ot,{value:U,children:U},`neg-status-${U}`))})]}),l.jsx(fe,{size:"sm",variant:"outline",onClick:cc,disabled:Ht||!cn||cn===ks,children:Ht?"Updating...":"Update Status"})]})]}),Ve?l.jsx("div",{className:"rounded-lg border px-3 py-2 text-sm",children:Ve}):null,l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Product"}),l.jsx("th",{className:"px-3 py-2",children:"Ordered Qty"}),l.jsx("th",{className:"px-3 py-2",children:"Customer Qty"}),l.jsx("th",{className:"px-3 py-2",children:"Offered Price"}),l.jsx("th",{className:"px-3 py-2",children:"Customer Offer"}),l.jsx("th",{className:"px-3 py-2",children:"Final Qty"}),l.jsx("th",{className:"px-3 py-2",children:"Final Price"}),l.jsx("th",{className:"px-3 py-2",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y",children:gr.map(U=>{const $=String(U.order_item_id||""),W=ic[$]??!0,ae=(Se,qe)=>{const Nt=ge(U.baseUnitCostBdt,0),Ot=ge(qe,0)||Math.round(ge(Se,0)*ge(qn,0));return!(Nt>0)||!(Ot>0)?"-":`${Oe((Ot-Nt)/Nt*100)}%`},de=ge(wi[$]?.finalUnit,Ut==="gbp"?U.finalUnitGbp:U.finalUnitBdt),ve=Ut==="gbp"?de:ge(qn,0)>0?de/ge(qn,0):0,De=Ut==="bdt"?de:Math.round(de*ge(qn,0));return l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:U.image_url?l.jsx("img",{src:to(U.image_url),alt:U.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-medium",children:U.name})]})}),l.jsx("td",{className:"px-3 py-2",children:U.orderedQty}),l.jsx("td",{className:"px-3 py-2",children:U.customerChangedQty}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(U.offeredUnitGbp)}),l.jsx("div",{className:"text-[10px] text-muted-foreground",children:It(U.offeredUnitBdt)}),l.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Profit ",ae(U.offeredUnitGbp,U.offeredUnitBdt)]})]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("span",{children:[bt(U.customerUnitGbp)," / ",It(U.customerUnitBdt)]}),l.jsx(fe,{size:"sm",variant:"outline",className:"h-6 px-2 text-[10px]",onClick:()=>Si(Se=>({...Se,[$]:{...Se[$]||{},finalUnit:String(Ut==="gbp"?U.customerUnitGbp:U.customerUnitBdt)}})),disabled:!W,children:"Accept"})]}),l.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Profit ",ae(U.customerUnitGbp,U.customerUnitBdt)]})]}),l.jsx("td",{className:"px-3 py-2",children:l.jsx("input",{className:"h-8 w-24 rounded-md border bg-background px-2",value:String(wi[$]?.finalQty??U.finalQty),onChange:Se=>Si(qe=>({...qe,[$]:{...qe[$]||{},finalQty:Se.target.value}})),disabled:!W,inputMode:"numeric"})}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("input",{className:"h-8 w-28 rounded-md border bg-background px-2",value:String(wi[$]?.finalUnit??(Ut==="gbp"?U.finalUnitGbp:U.finalUnitBdt)),onChange:Se=>Si(qe=>({...qe,[$]:{...qe[$]||{},finalUnit:Se.target.value}})),disabled:!W,inputMode:"decimal"}),l.jsxs("div",{className:"mt-1 text-[10px] text-muted-foreground",children:[bt(ve)," / ",It(De)]}),l.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Profit ",ae(ve,De)]})]}),l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-1",children:[W?l.jsx(fe,{size:"icon",onClick:()=>Is(U),disabled:!!Ts[$],"aria-label":"Save row",title:"Save",children:Ts[$]?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})}):l.jsx(fe,{size:"icon",variant:"outline",onClick:()=>te(Se=>({...Se,[$]:!0})),"aria-label":"Edit row",title:"Edit",children:l.jsx(Ch,{className:"h-4 w-4"})}),l.jsx(fe,{size:"icon",variant:"destructive",onClick:()=>Ms(U),disabled:!!ce[$],"aria-label":"Remove item",title:"Remove item",children:ce[$]?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(Ar,{className:"h-4 w-4"})})]})})]},$)})})]})})]}):l.jsxs("div",{className:"rounded-lg border px-3 py-2 text-sm text-muted-foreground",children:["Complete ",l.jsx("span",{className:"font-semibold",children:"Calculate Price"})," first to unlock this tab."]})})]}):l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Calculate Price"})}),l.jsx(ze,{className:"space-y-4",children:E?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-3 rounded-lg border p-3 text-xs text-muted-foreground",children:["Using saved price mode: ",l.jsx("span",{className:"font-semibold",children:Dt}),"."]}),l.jsxs("div",{className:"mb-3 flex items-center gap-2 rounded-lg border p-3",children:[l.jsx("div",{className:"text-xs text-muted-foreground",children:"Customer sees:"}),l.jsx(fe,{size:"sm",variant:Cn==="gbp"?"default":"outline",onClick:()=>tn("gbp"),disabled:vn,children:"Offer Price GBP"}),l.jsx(fe,{size:"sm",variant:Cn==="bdt"?"default":"outline",onClick:()=>tn("bdt"),disabled:vn,children:"Offer Price BDT"}),l.jsx(fe,{size:"sm",variant:"outline",onClick:()=>Gm(U=>!U),children:dd?"Hide Preview":"Preview"}),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current status: ",String(f?.status||"-")]}),l.jsxs(an,{value:cn||ks||"submitted",onValueChange:bn,children:[l.jsx(Kt,{className:"h-8 w-[180px]",children:l.jsx(on,{placeholder:"Select status"})}),l.jsx(Yt,{children:Ni.map(U=>l.jsx(ot,{value:U,children:U},U))})]}),l.jsx(fe,{size:"sm",variant:"outline",onClick:cc,disabled:Ht||!cn||cn===ks,children:Ht?"Updating...":"Update Status"})]})]}),l.jsxs("div",{className:"rounded-lg border px-3 py-2 text-xs text-muted-foreground",children:["To let customer see prices, set order status to ",l.jsx("span",{className:"font-semibold",children:"priced"}),"."]}),dd?l.jsx("div",{className:"overflow-x-auto rounded-lg border",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Customer Preview Item"}),l.jsx("th",{className:"px-3 py-2",children:"Qty"}),l.jsx("th",{className:"px-3 py-2",children:"Price / Unit"}),l.jsx("th",{className:"px-3 py-2",children:"Line Total"})]})}),l.jsx("tbody",{className:"divide-y",children:xn.map(U=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-8 w-8 overflow-hidden rounded border bg-white",children:U.image_url?l.jsx("img",{src:to(U.image_url),alt:U.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{children:U.name})]})}),l.jsx("td",{className:"px-3 py-2",children:U.qty}),l.jsx("td",{className:"px-3 py-2",children:U.unit==null?"-":U.currency==="gbp"?bt(U.unit):It(U.unit)}),l.jsx("td",{className:"px-3 py-2",children:U.total==null?"-":U.currency==="gbp"?bt(U.total):It(U.total)})]},U.order_item_id))})]})}):null,l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Product"}),l.jsx("th",{className:"px-3 py-2",children:"Qty"}),l.jsx("th",{className:"px-3 py-2",children:"Purchase / Unit (GBP)"}),l.jsx("th",{className:"px-3 py-2",children:"Calculated Price (GBP)"}),l.jsx("th",{className:"px-3 py-2",children:"Calculated Price (BDT)"}),l.jsx("th",{className:"px-3 py-2",children:"Calculated Total / Unit (Final Offer)"}),l.jsx("th",{className:"px-3 py-2",children:"Offer Price (GBP)"}),l.jsx("th",{className:"px-3 py-2",children:"Offer Price (BDT)"}),l.jsx("th",{className:"px-3 py-2",children:"Profit (%)"}),l.jsx("th",{className:"px-3 py-2",children:"Action"})]})}),l.jsx("tbody",{className:"divide-y",children:Jn.map(U=>l.jsx("tr",{children:(()=>{const $=String(U.order_item_id||""),W=!!Lt[$]?.calculated_selling_price,ae=mr[$]??!W;return l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:U.image_url?l.jsx("img",{src:to(U.image_url),alt:U.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-medium",children:U.name})]})}),l.jsx("td",{className:"px-3 py-2",children:Math.round(U.qty)}),l.jsx("td",{className:"px-3 py-2",children:bt(U.buyUnit)}),l.jsx("td",{className:"px-3 py-2",children:U.calcPriceGbp==null?"-":bt(U.calcPriceGbp)}),l.jsx("td",{className:"px-3 py-2",children:U.calcPriceBdt==null?"-":It(U.calcPriceBdt)}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsx("div",{children:bt(U.finalOfferUnitGbp)}),l.jsx("div",{children:It(U.finalOfferUnitBdt)})]}),l.jsx("td",{className:"px-3 py-2",children:l.jsx("input",{className:"h-8 w-28 rounded-md border bg-background px-2",value:U.draft.offerGbp,onChange:de=>ka(U,de.target.value),inputMode:"decimal",disabled:Dt==="total"||!ae})}),l.jsx("td",{className:"px-3 py-2",children:l.jsx("input",{className:"h-8 w-28 rounded-md border bg-background px-2",value:U.draft.offerBdt,onChange:de=>lc(U,de.target.value),inputMode:"numeric",disabled:Dt==="purchase"||!ae})}),l.jsx("td",{className:"px-3 py-2",children:l.jsx("input",{className:"h-8 w-24 rounded-md border bg-background px-2",value:U.draft.profitPct,onChange:de=>hd(U,de.target.value),inputMode:"decimal",disabled:!ae})}),l.jsx("td",{className:"px-3 py-2",children:W&&!ae?l.jsx(fe,{size:"icon",variant:"outline",onClick:()=>js(de=>({...de,[$]:!0})),"aria-label":"Edit row",title:"Edit",children:l.jsx(Ch,{className:"h-4 w-4"})}):l.jsx(fe,{size:"icon",onClick:()=>Pa(U),disabled:!!Ir[$],"aria-label":"Save row",title:"Save",children:Ir[$]?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})})]})})()},U.order_item_id))})]})})]}):l.jsx("div",{className:"text-sm text-muted-foreground",children:"Select a shipment in Shipment tab first."})})]})]})}function ua(t){return String(t||"").trim()}function da(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}const tu="shipments";function x8(){return{async getById(t){const e=ua(t);if(!e)return null;const n=await Vn(Ue(be,tu,e));return n.exists()?{shipment_id:n.id,...n.data()}:null},async list(){return(await $t(_n(qt(be,tu),pi("created_at","desc")))).docs.map(e=>({shipment_id:e.id,...e.data()}))},async create(t={}){const e=ua(t.shipment_id);if(!e)throw new Error("Missing shipment_id");const n={shipment_id:e,name:ua(t.name),status:ua(t.status||"draft").toLowerCase(),cargo_cost_per_kg_gbp:da(t.cargo_cost_per_kg_gbp,0),gbp_rate_product_bdt:da(t.gbp_rate_product_bdt,0),gbp_rate_cargo_bdt:da(t.gbp_rate_cargo_bdt,0),gbp_rate_avg_bdt:da(t.gbp_rate_avg_bdt,0),order_date:t.order_date||null,arrived_date:t.arrived_date||null,total_value_gbp:da(t.total_value_gbp,0),total_weight_g:da(t.total_weight_g,0),received_weight_g:da(t.received_weight_g,0),notes:ua(t.notes),created_at:Ie(),updated_at:Ie()};return await zn(Ue(be,tu,e),n,{merge:!1}),this.getById(e)},async update(t,e={}){const n=ua(t);if(!n)throw new Error("Missing shipment_id");const i={updated_at:Ie()};return["name","status","notes"].forEach(d=>{d in e&&(i[d]=ua(e[d]))}),["cargo_cost_per_kg_gbp","gbp_rate_product_bdt","gbp_rate_cargo_bdt","gbp_rate_avg_bdt","total_value_gbp","total_weight_g","received_weight_g"].forEach(d=>{d in e&&(i[d]=da(e[d],0))}),"order_date"in e&&(i.order_date=e.order_date||null),"arrived_date"in e&&(i.arrived_date=e.arrived_date||null),await gi(Ue(be,tu,n),i),this.getById(n)},async remove(t){const e=ua(t);return e?(await dr(Ue(be,tu,e)),{success:!0}):{success:!0}}}}const w8=x8();function $r(t){return String(t||"").trim()}function Hr(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function bl(t,e=0){return Math.max(0,Math.round(Hr(t,e)))}const nu="shipment_items";function S8(){return{async getById(t){const e=$r(t);if(!e)return null;const n=await Vn(Ue(be,nu,e));return n.exists()?{shipment_item_id:n.id,...n.data()}:null},async listByShipmentId(t){const e=$r(t);return e?(await $t(_n(qt(be,nu),Jr("shipment_id","==",e),pi("item_name","asc")))).docs.map(i=>({shipment_item_id:i.id,...i.data()})):[]},async create(t={}){const e=$r(t.shipment_id),n=$r(t.product_id);if(!e||!n)throw new Error("shipment_id and product_id are required");const i=$r(t.shipment_item_id)||`${e}__${n}`,a={shipment_item_id:i,shipment_id:e,product_id:n,product_code:$r(t.product_code),barcode:$r(t.barcode),item_name:$r(t.item_name),image_url:$r(t.image_url),needed_qty:Hr(t.needed_qty,0),arrived_qty:Hr(t.arrived_qty,0),damaged_qty:Hr(t.damaged_qty,0),expired_qty:Hr(t.expired_qty,0),stolen_qty:Hr(t.stolen_qty,0),other_qty:Hr(t.other_qty,0),delivered_qty:Hr(t.delivered_qty,0),unit_product_weight_g:bl(t.unit_product_weight_g,0),unit_package_weight_g:bl(t.unit_package_weight_g,0),unit_total_weight_g:bl(t.unit_total_weight_g,bl(t.unit_product_weight_g,0)+bl(t.unit_package_weight_g,0)),received_weight_g:Hr(t.received_weight_g,0),purchase_unit_gbp:Hr(t.purchase_unit_gbp,0),total_value_gbp:Hr(t.total_value_gbp,0),order_refs:Array.isArray(t.order_refs)?t.order_refs:[],created_at:Ie(),updated_at:Ie()};return await zn(Ue(be,nu,i),a,{merge:!1}),this.getById(i)},async update(t,e={}){const n=$r(t);if(!n)throw new Error("Missing shipment_item_id");const i={updated_at:Ie()};return["product_code","barcode","item_name","image_url"].forEach(f=>{f in e&&(i[f]=$r(e[f]))}),["needed_qty","arrived_qty","damaged_qty","expired_qty","stolen_qty","other_qty","delivered_qty","received_weight_g","purchase_unit_gbp","total_value_gbp"].forEach(f=>{f in e&&(i[f]=Hr(e[f],0))}),["unit_product_weight_g","unit_package_weight_g","unit_total_weight_g"].forEach(f=>{f in e&&(i[f]=bl(e[f],0))}),"order_refs"in e&&(i.order_refs=Array.isArray(e.order_refs)?e.order_refs:[]),await gi(Ue(be,nu,n),i),this.getById(n)},async remove(t){const e=$r(t);return e?(await dr(Ue(be,nu,e)),{success:!0}):{success:!0}}}}const N8=S8();function zt(t){return String(t||"").trim()}function Ai(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}const fa="shipment_accounting";function E8(){return{async getByShipmentId(t){const e=zt(t);if(!e)return null;const n=await Vn(Ue(be,fa,e));return n.exists()?{shipment_id:n.id,...n.data()}:null},async create(t={}){const e=zt(t.shipment_id);if(!e)throw new Error("Missing shipment_id");const n={shipment_id:e,shipment_name:zt(t.shipment_name),cost_total_gbp:Ai(t.cost_total_gbp,0),cost_rate_bdt_per_gbp:Ai(t.cost_rate_bdt_per_gbp,0),cost_total_bdt:Ai(t.cost_total_bdt,0),revenue_expected_bdt:Ai(t.revenue_expected_bdt,0),revenue_collected_bdt:Ai(t.revenue_collected_bdt,0),receivable_bdt:Ai(t.receivable_bdt,0),profit_bdt:Ai(t.profit_bdt,0),status:zt(t.status||"open").toLowerCase(),closed_at:t.closed_at||null,customer_payment_summary:Array.isArray(t.customer_payment_summary)?t.customer_payment_summary:[],created_at:Ie(),updated_at:Ie()};return await zn(Ue(be,fa,e),n,{merge:!1}),this.getByShipmentId(e)},async update(t,e={}){const n=zt(t);if(!n)throw new Error("Missing shipment_id");const i={updated_at:Ie()};return["shipment_name","status"].forEach(d=>{d in e&&(i[d]=zt(e[d]))}),["cost_total_gbp","cost_rate_bdt_per_gbp","cost_total_bdt","revenue_expected_bdt","revenue_collected_bdt","receivable_bdt","profit_bdt"].forEach(d=>{d in e&&(i[d]=Ai(e[d],0))}),"closed_at"in e&&(i.closed_at=e.closed_at||null),"customer_payment_summary"in e&&(i.customer_payment_summary=Array.isArray(e.customer_payment_summary)?e.customer_payment_summary:[]),await gi(Ue(be,fa,n),i),this.getByShipmentId(n)},async remove(t){const e=zt(t);return e?(await dr(Ue(be,fa,e)),{success:!0}):{success:!0}},async listPayments(t){const e=zt(t);return e?(await $t(_n(qt(be,fa,e,"customer_payments"),pi("paid_at","desc")))).docs.map(i=>({payment_id:i.id,...i.data()})):[]},async addPayment(t,e,n={}){const i=zt(t),a=zt(e);if(!i||!a)throw new Error("shipment_id and payment_id are required");const c={customer_email:zt(n.customer_email).toLowerCase(),customer_name:zt(n.customer_name),amount_bdt:Ai(n.amount_bdt,0),method:zt(n.method||"other").toLowerCase(),note:zt(n.note),paid_at:n.paid_at||null,created_by:zt(n.created_by).toLowerCase(),created_at:Ie()};return await zn(Ue(be,fa,i,"customer_payments",a),c,{merge:!1}),{payment_id:a,...c}},async updatePayment(t,e,n={}){const i=zt(t),a=zt(e);if(!i||!a)throw new Error("shipment_id and payment_id are required");const c={};return"customer_email"in n&&(c.customer_email=zt(n.customer_email).toLowerCase()),"customer_name"in n&&(c.customer_name=zt(n.customer_name)),"amount_bdt"in n&&(c.amount_bdt=Ai(n.amount_bdt,0)),"method"in n&&(c.method=zt(n.method).toLowerCase()),"note"in n&&(c.note=zt(n.note)),"paid_at"in n&&(c.paid_at=n.paid_at||null),"created_by"in n&&(c.created_by=zt(n.created_by).toLowerCase()),await gi(Ue(be,fa,i,"customer_payments",a),c),{payment_id:a,...c}},async removePayment(t,e){const n=zt(t),i=zt(e);return!n||!i?{success:!0}:(await dr(Ue(be,fa,n,"customer_payments",i)),{success:!0})}}}const C8=E8();function no(t){return String(t||"").trim()}function j8(){return{async log(t={}){return{override_id:(await mL(qt(be,"status_overrides"),{entity_type:no(t.entity_type),entity_id:no(t.entity_id),from_status:no(t.from_status).toLowerCase(),to_status:no(t.to_status).toLowerCase(),reason:no(t.reason),actor_email:no(t.actor_email).toLowerCase(),actor_role:no(t.actor_role).toLowerCase(),created_at:Ie()})).id}}}}const T8=j8();function zh(t){return String(t||"").trim().toLowerCase()}const A8={draft:["in_transit"],in_transit:["received"],received:["closed"],closed:[],cancelled:[]};function R8(t,e){const n=zh(t),i=zh(e);return!n||!i||n===i?!1:(A8[n]||[]).includes(i)}function nc({role:t,status:e}){const n=zh(t),i=zh(e||"draft"),a=n==="admin",c=n==="ops",d=n==="sales",f=n==="investor",h=i==="closed"||i==="cancelled",g=i==="draft"||i==="in_transit"||i==="received",y=i==="received",v=!h&&g&&(a||c),b=!h&&a;return{isAdmin:a,isOps:c,isSales:d,isInvestor:f,status:i,isLocked:h,canView:a||c||d||f,canEdit:v,canEditItems:v,canChangeStatus:b,canSoftClose:b,canHardDelete:!1,canEditShipmentName:v,canEditShipmentRates:v,canEditShipmentCargoCost:v,canEditShipmentDates:v,canEditShipmentNotes:v,canEditNeededQty:v,canEditArrivedQty:v&&y,canEditDamageBreakdown:v&&y,canEditDeliveredQty:v&&y,canEditWeights:v,canEditPurchaseSnapshots:v,canEditOrderRefs:v}}function O8(t){return{needed_qty:t.canEditNeededQty,arrived_qty:t.canEditArrivedQty,damaged_qty:t.canEditDamageBreakdown,expired_qty:t.canEditDamageBreakdown,stolen_qty:t.canEditDamageBreakdown,other_qty:t.canEditDamageBreakdown,delivered_qty:t.canEditDeliveredQty,unit_product_weight_g:t.canEditWeights,unit_package_weight_g:t.canEditWeights,unit_total_weight_g:t.canEditWeights,received_weight_g:t.canEditWeights,purchase_unit_gbp:t.canEditPurchaseSnapshots,total_value_gbp:t.canEditPurchaseSnapshots,product_code:t.canEditOrderRefs,barcode:t.canEditOrderRefs,item_name:t.canEditOrderRefs,image_url:t.canEditOrderRefs,order_refs:t.canEditOrderRefs}}function I8({role:t,status:e}){if(!nc({role:t,status:e}).canEdit)throw new Error("Shipment is locked by status.")}function O_({role:t,status:e}){if(!nc({role:t,status:e}).canEditItems)throw new Error("Shipment items are locked by status.")}function M8({role:t,status:e}){if(!nc({role:t,status:e}).canSoftClose)throw new Error("Shipment cannot be closed in current state.")}function D8({role:t,status:e,fields:n=[]}){const i=nc({role:t,status:e}),a=O8(i),c=(n||[]).filter(d=>a[d]===!1);if(c.length)throw new Error(`Shipment item fields are locked by status/role: ${c.join(", ")}`)}function Le(t){return String(t||"").trim()}function Ke(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function th(t,e=0){return Math.max(0,Math.round(Ke(t,e)))}function _T(t){return Number(Ke(t,0).toFixed(2))}function k8(){const t=new Date().toISOString().replace(/[-:.TZ]/g,"").slice(0,14),e=Math.floor(Math.random()*9e5)+1e5;return`SHP_${t}_${e}`}function Vf(...t){for(const e of t){const n=Number(e);if(Number.isFinite(n)&&n>0)return n}return 0}function yT(t,e,n){const i=Ke(n,0);if(i>0)return i;const a=Ke(t,0),c=Ke(e,0);return a>0&&c>0?(a+c)/2:a>0?a:c>0?c:0}function P8(t={}){const e=Ke(t.received_weight_g,NaN);return Number.isFinite(e)?e:Ke(t.arrived_qty,0)*Ke(t.unit_total_weight_g,0)}function L8(t={}){const e=Le(t.shipment_id)||k8(),n=Le(t.status||"draft").toLowerCase(),i=Vf(t.gbp_rate_product_bdt,t.gbp_rate_product),a=Vf(t.gbp_rate_cargo_bdt,t.gbp_rate_cargo),c=yT(i,a,Vf(t.gbp_rate_avg_bdt,t.gbp_avg_rate));return{shipment_id:e,name:Le(t.name),status:n,cargo_cost_per_kg_gbp:Vf(t.cargo_cost_per_kg_gbp,t.cargo_cost_per_kg),gbp_rate_product_bdt:i,gbp_rate_cargo_bdt:a,gbp_rate_avg_bdt:c,order_date:t.order_date||null,arrived_date:t.arrived_date||null,total_value_gbp:_T(Ke(t.total_value_gbp,0)),total_weight_g:Ke(t.total_weight_g,0),received_weight_g:Ke(t.received_weight_g,0),notes:Le(t.notes)}}function gE(t={}){const e={};return["name","status","notes"].forEach(c=>{c in t&&(e[c]=Le(t[c]))}),["cargo_cost_per_kg_gbp","gbp_rate_product_bdt","gbp_rate_cargo_bdt","gbp_rate_avg_bdt","total_value_gbp","total_weight_g","received_weight_g"].forEach(c=>{c in t&&(e[c]=Ke(t[c],0))}),"cargo_cost_per_kg"in t&&(e.cargo_cost_per_kg_gbp=Ke(t.cargo_cost_per_kg,0)),"gbp_rate_product"in t&&(e.gbp_rate_product_bdt=Ke(t.gbp_rate_product,0)),"gbp_rate_cargo"in t&&(e.gbp_rate_cargo_bdt=Ke(t.gbp_rate_cargo,0)),"gbp_avg_rate"in t&&(e.gbp_rate_avg_bdt=Ke(t.gbp_avg_rate,0)),"order_date"in t&&(e.order_date=t.order_date||null),"arrived_date"in t&&(e.arrived_date=t.arrived_date||null),("gbp_rate_product_bdt"in e||"gbp_rate_cargo_bdt"in e||"gbp_rate_avg_bdt"in e)&&(e.gbp_rate_avg_bdt=yT(e.gbp_rate_product_bdt,e.gbp_rate_cargo_bdt,e.gbp_rate_avg_bdt)),e}function U8(t={}){const e=Le(t.shipment_id),n=Le(t.product_id);if(!e)throw new Error("shipment_id is required");if(!n)throw new Error("product_id is required");const i=th(t.unit_product_weight_g,0),a=th(t.unit_package_weight_g,0);return{shipment_item_id:Le(t.shipment_item_id),shipment_id:e,product_id:n,product_code:Le(t.product_code),barcode:Le(t.barcode),item_name:Le(t.item_name||t.name),image_url:Le(t.image_url),needed_qty:Ke(t.needed_qty,0),arrived_qty:Ke(t.arrived_qty,0),damaged_qty:Ke(t.damaged_qty,0),expired_qty:Ke(t.expired_qty,0),stolen_qty:Ke(t.stolen_qty,0),other_qty:Ke(t.other_qty,0),delivered_qty:Ke(t.delivered_qty,0),unit_product_weight_g:i,unit_package_weight_g:a,unit_total_weight_g:th(t.unit_total_weight_g,i+a),received_weight_g:Ke(t.received_weight_g,0),purchase_unit_gbp:Ke(t.purchase_unit_gbp,0),total_value_gbp:Ke(t.total_value_gbp,0),order_refs:Array.isArray(t.order_refs)?t.order_refs:[]}}function V8(t={}){const e={};return["product_code","barcode","item_name","image_url"].forEach(c=>{c in t&&(e[c]=Le(t[c]))}),["needed_qty","arrived_qty","damaged_qty","expired_qty","stolen_qty","other_qty","delivered_qty","received_weight_g","purchase_unit_gbp","total_value_gbp"].forEach(c=>{c in t&&(e[c]=Ke(t[c],0))}),["unit_product_weight_g","unit_package_weight_g","unit_total_weight_g"].forEach(c=>{c in t&&(e[c]=th(t[c],0))}),"order_refs"in t&&(e.order_refs=Array.isArray(t.order_refs)?t.order_refs:[]),e}function z8(t={}){const e=Le(t.shipment_id);if(!e)throw new Error("shipment_id is required");return{shipment_id:e,shipment_name:Le(t.shipment_name),cost_total_gbp:Ke(t.cost_total_gbp,0),cost_rate_bdt_per_gbp:Ke(t.cost_rate_bdt_per_gbp,0),cost_total_bdt:Ke(t.cost_total_bdt,0),revenue_expected_bdt:Ke(t.revenue_expected_bdt,0),revenue_collected_bdt:Ke(t.revenue_collected_bdt,0),receivable_bdt:Ke(t.receivable_bdt,0),profit_bdt:Ke(t.profit_bdt,0),status:Le(t.status||"open").toLowerCase(),closed_at:t.closed_at||null,customer_payment_summary:Array.isArray(t.customer_payment_summary)?t.customer_payment_summary:[]}}function B8(t={}){const e={};return["shipment_name","status"].forEach(a=>{a in t&&(e[a]=Le(t[a]))}),["cost_total_gbp","cost_rate_bdt_per_gbp","cost_total_bdt","revenue_expected_bdt","revenue_collected_bdt","receivable_bdt","profit_bdt"].forEach(a=>{a in t&&(e[a]=Ke(t[a],0))}),"closed_at"in t&&(e.closed_at=t.closed_at||null),"customer_payment_summary"in t&&(e.customer_payment_summary=Array.isArray(t.customer_payment_summary)?t.customer_payment_summary:[]),e}function F8(t={}){return{customer_email:Le(t.customer_email).toLowerCase(),customer_name:Le(t.customer_name),amount_bdt:Ke(t.amount_bdt,0),method:Le(t.method||"other").toLowerCase(),note:Le(t.note),paid_at:t.paid_at||null,created_by:Le(t.created_by).toLowerCase()}}function q8(t={}){const e={};return["customer_email","customer_name","method","note","created_by"].forEach(i=>{i in t&&(e[i]=i==="customer_email"||i==="created_by"?Le(t[i]).toLowerCase():Le(t[i]))}),"amount_bdt"in t&&(e.amount_bdt=Ke(t.amount_bdt,0)),"paid_at"in t&&(e.paid_at=t.paid_at||null),e}function $8(t=w8,e=N8,n=C8,i=T8){return{async getShipmentById(a){return t.getById(Le(a))},async listShipments(){return t.list()},async createShipment(a){return t.create(L8(a))},async updateShipment(a,c,d={role:"admin"}){const f=Le(a);if(!f)throw new Error("shipment_id is required");const h=await t.getById(f);if(!h)throw new Error("Shipment not found");return I8({role:d?.role||"admin",status:h.status}),t.update(f,gE(c))},async removeShipment(a,c={role:"admin",email:""}){const d=Le(a);if(!d)throw new Error("shipment_id is required");const f=await t.getById(d);if(!f)throw new Error("Shipment not found");return M8({role:c?.role||"admin",status:f.status}),this.updateShipmentStatus(d,"cancelled",{role:c?.role||"admin",email:c?.email||"",reason:"soft_delete",force:!0})},async getShipmentItemById(a){return e.getById(Le(a))},async listShipmentItems(a){const c=Le(a);if(!c)throw new Error("shipment_id is required");return e.listByShipmentId(c)},async createShipmentItem(a,c={role:"admin"}){const d=Le(a?.shipment_id),f=await t.getById(d);if(!f)throw new Error("Shipment not found");O_({role:c?.role||"admin",status:f.status});const h=await e.create(U8(a));return await this.recomputeShipmentTotals(d),h},async updateShipmentItem(a,c,d={role:"admin"}){const f=Le(a);if(!f)throw new Error("shipment_item_id is required");const h=await e.getById(f);if(!h)throw new Error("Shipment item not found");const g=await t.getById(Le(h.shipment_id));if(!g)throw new Error("Shipment not found");O_({role:d?.role||"admin",status:g.status});const y=V8(c);D8({role:d?.role||"admin",status:g.status,fields:Object.keys(y)});const v=await e.update(f,y);return await this.recomputeShipmentTotals(Le(h.shipment_id)),v},async removeShipmentItem(a,c={role:"admin"}){const d=Le(a);if(!d)throw new Error("shipment_item_id is required");const f=await e.getById(d);if(!f)return{success:!0};const h=await t.getById(Le(f.shipment_id));if(!h)throw new Error("Shipment not found");O_({role:c?.role||"admin",status:h.status});const g=await e.remove(d);return await this.recomputeShipmentTotals(Le(f.shipment_id)),g},async getShipmentCapabilities(a,c="admin"){const d=await t.getById(Le(a));if(!d)throw new Error("Shipment not found");return nc({role:c,status:d.status})},async recomputeShipmentTotals(a){const c=Le(a);if(!c)throw new Error("shipment_id is required");const d=await t.getById(c);if(!d)throw new Error("Shipment not found");const f=await e.listByShipmentId(c),h=_T(f.reduce((b,N)=>b+Ke(N.total_value_gbp,0),0)),g=f.reduce((b,N)=>{const T=Ke(N.needed_qty,0),E=Ke(N.unit_total_weight_g,0);return b+T*E},0),y=f.reduce((b,N)=>b+P8(N),0),v=gE({gbp_rate_product_bdt:Ke(d.gbp_rate_product_bdt,0),gbp_rate_cargo_bdt:Ke(d.gbp_rate_cargo_bdt,0),gbp_rate_avg_bdt:Ke(d.gbp_rate_avg_bdt,0)});return t.update(c,{...v,total_value_gbp:h,total_weight_g:g,received_weight_g:y})},async updateShipmentStatus(a,c,d={}){const f=Le(a),h=Le(c).toLowerCase();if(!f)throw new Error("shipment_id is required");if(!h)throw new Error("target status is required");const g=await t.getById(f);if(!g)throw new Error("Shipment not found");const y=Le(g.status||"draft").toLowerCase(),v=Le(d?.role||"admin").toLowerCase(),b=Le(d?.email).toLowerCase(),N=!!d?.force,T=Le(d?.reason);if(v!=="admin")throw new Error("Only admin can change shipment status.");if(y===h)return g;const E=R8(y,h);if(!E&&!N)throw new Error(`Invalid shipment status transition: ${y} -> ${h}`);if(!E&&N&&!T)throw new Error("Override reason is required for forced shipment status change.");const j=await t.update(f,{status:h});return!E&&N&&await i.log({entity_type:"shipment",entity_id:f,from_status:y,to_status:h,reason:T,actor_email:b,actor_role:v}),j},async getShipmentAccounting(a){return n.getByShipmentId(Le(a))},async createShipmentAccounting(a){return n.create(z8(a))},async updateShipmentAccounting(a,c){const d=Le(a);if(!d)throw new Error("shipment_id is required");return n.update(d,B8(c))},async removeShipmentAccounting(a){const c=Le(a);if(!c)throw new Error("shipment_id is required");return n.remove(c)},async listCustomerPayments(a){const c=Le(a);if(!c)throw new Error("shipment_id is required");return n.listPayments(c)},async addCustomerPayment(a,c,d){const f=Le(a),h=Le(c);if(!f||!h)throw new Error("shipment_id and payment_id are required");return n.addPayment(f,h,F8(d))},async updateCustomerPayment(a,c,d){const f=Le(a),h=Le(c);if(!f||!h)throw new Error("shipment_id and payment_id are required");return n.updatePayment(f,h,q8(d))},async removeCustomerPayment(a,c){const d=Le(a),f=Le(c);if(!d||!f)throw new Error("shipment_id and payment_id are required");return n.removePayment(d,f)}}}const Nr=$8();function H8(t){const e=Number(t);return Number.isFinite(e)?e:0}function I_(t){const e=String(t??"").trim();if(!e)return;const n=Number(e);return Number.isFinite(n)?n:void 0}function G8({open:t,mode:e="create",onClose:n,onSubmit:i,loading:a=!1,error:c="",initial:d=null}){const f=e==="edit"?"Update Shipment":"Add Shipment",h=p.useMemo(()=>{const b=d||{};return{name:String(b.name||""),gbp_avg_rate:b.gbp_avg_rate??b.gbp_rate_avg_bdt??"",gbp_rate_product:b.gbp_rate_product??b.gbp_rate_product_bdt??"",gbp_rate_cargo:b.gbp_rate_cargo??b.gbp_rate_cargo_bdt??"",cargo_cost_per_kg:b.cargo_cost_per_kg??b.cargo_cost_per_kg_gbp??"",status:String(b.status||"draft")}},[d]),[g,y]=p.useState(h);p.useEffect(()=>{t&&y(h)},[t,h]);const v=String(g.name||"").trim().length>0;return l.jsx(Vm,{open:t,onOpenChange:b=>{!a&&!b&&n?.()},children:l.jsxs(Zu,{className:"sm:max-w-xl",children:[l.jsxs(Ju,{children:[l.jsx(td,{children:f}),l.jsx(zm,{children:"Admin-only shipment setup for rates and cargo cost."})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"Name"}),l.jsx(He,{value:g.name,onChange:b=>y(N=>({...N,name:b.target.value})),placeholder:"e.g. Feb 2026 Shipment",disabled:a,autoComplete:"off"})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"GBP Avg Rate"}),l.jsx(He,{value:g.gbp_avg_rate,onChange:b=>y(N=>({...N,gbp_avg_rate:b.target.value})),inputMode:"decimal",disabled:a,autoComplete:"off",placeholder:"Optional (auto-derived)"}),l.jsx("p",{className:"mt-1 text-[11px] text-muted-foreground",children:"Leave empty to auto-calculate: one rate uses that value, two rates use their average."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"GBP Rate Product"}),l.jsx(He,{value:g.gbp_rate_product,onChange:b=>y(N=>({...N,gbp_rate_product:b.target.value})),inputMode:"decimal",disabled:a,autoComplete:"off"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"GBP Rate Cargo"}),l.jsx(He,{value:g.gbp_rate_cargo,onChange:b=>y(N=>({...N,gbp_rate_cargo:b.target.value})),inputMode:"decimal",disabled:a,autoComplete:"off"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"Cargo Cost / KG"}),l.jsx(He,{value:g.cargo_cost_per_kg,onChange:b=>y(N=>({...N,cargo_cost_per_kg:b.target.value})),inputMode:"decimal",disabled:a,autoComplete:"off"})]})]}),c?l.jsx("div",{className:"rounded-lg border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:c}):null]}),l.jsxs(ed,{children:[l.jsx(fe,{variant:"outline",onClick:n,disabled:a,children:"Cancel"}),l.jsx(fe,{onClick:()=>i?.({name:String(g.name||"").trim(),gbp_avg_rate:I_(g.gbp_avg_rate),gbp_rate_product:I_(g.gbp_rate_product),gbp_rate_cargo:I_(g.gbp_rate_cargo),cargo_cost_per_kg:H8(g.cargo_cost_per_kg)}),disabled:a||!v,children:a?"Saving...":e==="edit"?"Update":"Create"})]})]})})}function Q8({rows:t=8}){return l.jsx(Pe,{children:l.jsx(ze,{className:"p-0",children:l.jsx("div",{className:"divide-y",children:Array.from({length:t}).map((e,n)=>l.jsxs("div",{className:"flex items-center justify-between gap-4 p-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(nt,{className:"h-4 w-64"}),l.jsx(nt,{className:"h-3 w-40"})]}),l.jsx(nt,{className:"h-8 w-28"})]},n))})})})}function wy(t){if(!t)return 0;if(typeof t?.toDate=="function")return t.toDate().getTime();if(typeof t?.seconds=="number")return t.seconds*1e3;if(typeof t=="number")return t;const e=Date.parse(String(t));return Number.isFinite(e)?e:0}function W8(t){const e=wy(t);return e?new Date(e).toLocaleString():"-"}function K8(){const{user:t}=en(),e=fr(),[n,i]=p.useState([]),[a,c]=p.useState(!0),[d,f]=p.useState(""),[h,g]=p.useState(!1),[y,v]=p.useState("create"),[b,N]=p.useState(null),[T,E]=p.useState(!1),[j,L]=p.useState(""),[M,P]=p.useState(!1),[V,z]=p.useState(null),[G,C]=p.useState(!1),[w,S]=p.useState("");async function A(){if(t?.email){c(!0),f("");try{const B=await Nr.listShipments();i(Array.isArray(B)?B:[])}catch(B){f(B?.message||"Failed to load shipments")}finally{c(!1)}}}p.useEffect(()=>{A()},[t?.email]);const D=p.useMemo(()=>{const B=[...n];return B.sort((Y,Z)=>wy(Z.created_at)-wy(Y.created_at)),B},[n]);function k(){v("create"),N(null),L(""),g(!0)}function I(B){v("edit"),N(B),L(""),g(!0)}function K(B){z(B),S(""),P(!0)}async function q(B){if(t?.email){E(!0),L("");try{const Y={name:B.name,gbp_avg_rate:B.gbp_avg_rate,gbp_rate_product:B.gbp_rate_product,gbp_rate_cargo:B.gbp_rate_cargo,cargo_cost_per_kg:B.cargo_cost_per_kg};if(y==="edit"){const Z=b?.shipment_id;await Nr.updateShipment(Z,Y)}else await Nr.createShipment(Y);g(!1),N(null),await A()}catch(Y){L(Y?.message||"Failed to save shipment")}finally{E(!1)}}}async function R(){if(!(!t?.email||!V?.shipment_id)){C(!0),S("");try{await Nr.removeShipment(V.shipment_id,{role:t?.role||"admin",email:t?.email||""}),P(!1),z(null),await A()}catch(B){S(B?.message||"Failed to cancel shipment")}finally{C(!1)}}}return l.jsxs("div",{className:"mx-auto w-full max-w-6xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4 flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Shipments"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Admin-only shipment setup."})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(fe,{onClick:k,children:"Add Shipment"})})]}),d?l.jsx("div",{className:"mb-4 rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:d}):null,a?l.jsx(Q8,{}):D.length===0?l.jsx(Pe,{children:l.jsx(ze,{className:"py-10 text-center text-sm text-muted-foreground",children:"No shipments yet."})}):l.jsxs(Pe,{children:[l.jsx(ut,{className:"pb-2",children:l.jsx(dt,{className:"text-base",children:"All Shipments"})}),l.jsx(ze,{className:"px-0 pb-0",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-4 py-3 font-medium",children:"Shipment"}),l.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),l.jsx("th",{className:"px-4 py-3 font-medium",children:"Avg Rate"}),l.jsx("th",{className:"px-4 py-3 font-medium",children:"Cargo / KG"}),l.jsx("th",{className:"px-4 py-3 font-medium",children:"Updated"}),l.jsx("th",{className:"px-4 py-3 font-medium"})]})}),l.jsx("tbody",{className:"divide-y",children:D.map(B=>{const Y=nc({role:"admin",status:B.status});return l.jsxs("tr",{className:"align-top",children:[l.jsxs("td",{className:"px-4 py-3",children:[l.jsx("div",{className:"font-medium text-foreground",children:B.name||"-"}),l.jsx("div",{className:"text-xs text-muted-foreground",children:B.shipment_id})]}),l.jsx("td",{className:"px-4 py-3 text-xs",children:B.status?l.jsx(Un,{variant:"secondary",children:B.status}):l.jsx("span",{className:"text-muted-foreground",children:"-"})}),l.jsx("td",{className:"px-4 py-3 text-xs text-muted-foreground",children:Number(B.gbp_rate_avg_bdt||0)}),l.jsx("td",{className:"px-4 py-3 text-xs text-muted-foreground",children:Number(B.cargo_cost_per_kg_gbp||0)}),l.jsx("td",{className:"px-4 py-3 text-xs text-muted-foreground",children:W8(B.updated_at)}),l.jsx("td",{className:"px-4 py-3",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx(fe,{variant:"outline",size:"sm",onClick:()=>e(`/admin/shipments/${B.shipment_id}`),children:"View"}),l.jsx(fe,{variant:"outline",size:"sm",onClick:()=>I(B),disabled:!Y.canEdit,children:"Edit"}),l.jsx(fe,{variant:"outline",size:"icon",onClick:()=>K(B),title:"Cancel shipment","aria-label":"Cancel shipment",disabled:!Y.canSoftClose,children:l.jsx(sy,{className:"h-4 w-4"})})]})})]},B.shipment_id)})})]})})})]}),l.jsx(G8,{open:h,mode:y,initial:b,loading:T,error:j,onClose:()=>{T||g(!1)},onSubmit:q}),l.jsx(nd,{open:M,loading:G,error:w,title:"Cancel shipment",description:V?`Cancel "${V.name}" (${V.shipment_id})? Cancelled shipments are locked.`:"Cancel this shipment?",confirmText:l.jsx(sy,{className:"h-4 w-4"}),onClose:()=>{G||P(!1)},onConfirm:R})]})}function xt(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function ds(t){return Math.round(xt(t,0))}function _E(t){const e=Number(t);if(!Number.isFinite(e))return"";const n=e*1e3;return Number.isInteger(n)?String(n):String(Number(n.toFixed(3)))}function zf(t){const e=String(t??"").trim();if(!e)return"";const n=Number(e);return Number.isFinite(n)?n/1e3:""}function ru(t){const e=String(t||"").trim();if(!e)return"";const n=e.match(/(?:\/d\/|id=)([-\w]{20,})/i);return n?.[1]?`https://lh3.googleusercontent.com/d/${n[1]}`:e}function Y8(){return l.jsx(Pe,{children:l.jsxs(ze,{className:"space-y-3 p-4",children:[l.jsx(nt,{className:"h-5 w-64"}),l.jsx("div",{className:"grid gap-2 md:grid-cols-4",children:Array.from({length:4}).map((t,e)=>l.jsx(nt,{className:"h-16"},e))})]})})}function Sy(t){if(!t)return 0;if(typeof t?.toDate=="function")return t.toDate().getTime();if(typeof t?.seconds=="number")return t.seconds*1e3;if(typeof t=="number")return t;const e=Date.parse(String(t));return Number.isFinite(e)?e:0}function yE(t){const e=Sy(t);return e?new Date(e).toLocaleString():"-"}function X8(){const{shipmentId:t}=Yh(),{user:e}=en(),n=fr(),[i,a]=p.useState(null),[c,d]=p.useState([]),[f,h]=p.useState({}),[g,y]=p.useState([]),[v,b]=p.useState({order_id:"",order_item_id:"",needed_qty:"",arrived_qty:"0",unit_product_weight:"",unit_package_weight:""}),[N,T]=p.useState(!0),[E,j]=p.useState(""),[L,M]=p.useState(""),[P,V]=p.useState(!1),[z,G]=p.useState(!1),[C,w]=p.useState({}),[S,A]=p.useState({}),[D,k]=p.useState({}),[I,K]=p.useState({}),[q,R]=p.useState({}),[B,Y]=p.useState(!1),[Z,se]=p.useState(null),[F,re]=p.useState(!1),[he,pe]=p.useState("");async function ye(){if(!e?.email||!t)return;const[te,ce,_e]=await Promise.all([Co(t),rb(t),Vv({email:e.email,role:e.role})]),Ve=Array.isArray(ce)?ce:[],Me=Array.isArray(_e)?_e:[];a(te||null),y(Ve),d(Me);const Cn=await p8(t),Fn={};Cn.forEach(Qn=>{const Ht=String(Qn.product_id||"").trim();Ht&&(Fn[Ht]=Qn)});const vn=[...new Set(Ve.map(Qn=>String(Qn.order_id||"").trim()).filter(Boolean))];if(vn.length){const Qn=await Promise.all(vn.map(async Ht=>{try{const yt=await Ii({email:e.email,role:e.role,order_id:Ht});return[Ht,Array.isArray(yt.items)?yt.items:[]]}catch{return[Ht,[]]}}));h(Ht=>{const yt={...Ht};for(const[cn,bn]of Qn)yt[cn]=bn;return yt})}A(Qn=>{const Ht={...Qn};for(const yt of Ve){const cn=String(yt.allocation_id||"");Ht[cn]={needed_qty:String(yt.needed_qty??yt.allocated_qty??""),arrived_qty:String(yt.arrived_qty??yt.shipped_qty??""),unit_product_weight:_E(yt.unit_product_weight),unit_package_weight:_E(yt.unit_package_weight)}}return Ht}),K(Qn=>({...Qn,__saved:Fn}))}p.useEffect(()=>{let te=!0;async function ce(){if(!(!e?.email||!t)){T(!0),j(""),M("");try{await ye()}catch(_e){if(!te)return;j(_e?.message||"Failed to load shipment details")}finally{te&&T(!1)}}}return ce(),()=>{te=!1}},[e?.email,e?.role,t]);async function we(te){const ce=String(te||"").trim();if(!(!ce||f[ce]))try{const _e=await Ii({email:e.email,role:e.role,order_id:ce});h(Ve=>({...Ve,[ce]:Array.isArray(_e.items)?_e.items:[]}))}catch(_e){M(_e?.message||"Failed to load order items")}}p.useEffect(()=>{v.order_id&&we(v.order_id)},[v.order_id]);const me=p.useMemo(()=>f[v.order_id]||[],[f,v.order_id]),Fe=p.useMemo(()=>{const te={};return Object.keys(f).forEach(ce=>{(f[ce]||[]).forEach(Ve=>{const Me=String(Ve.order_item_id||"").trim();Me&&(te[Me]=Ve)})}),te},[f]),Ne=p.useMemo(()=>{const te=[...c];return te.sort((ce,_e)=>Sy(ce.created_at)-Sy(_e.created_at)),te},[c]),Be=p.useMemo(()=>{const te={};return Ne.forEach((ce,_e)=>{te[String(ce.order_id||"")]=ce.order_name||`Order ${_e+1}`}),te},[Ne]),et=p.useMemo(()=>{const te={};return Ne.forEach((ce,_e)=>{te[String(ce.order_id||"")]=ce.order_sl||_e+1}),te},[Ne]),Ze=p.useMemo(()=>g.map(te=>{const ce=Fe[String(te.order_item_id||"").trim()]||{},_e=xt(ce?.final_unit_gbp,xt(ce?.customer_unit_gbp,xt(ce?.calculated_selling_price?.selling_unit_gbp,0))),Ve=xt(ce?.final_unit_bdt,xt(ce?.customer_unit_bdt,xt(ce?.calculated_selling_price?.selling_unit_bdt,0))),Me=xt(te.needed_qty,xt(te.allocated_qty,0));return{allocation_id:String(te.allocation_id||""),order_id:String(te.order_id||""),name:ce?.name||ce?.product_id||"Product",image_url:ru(ce?.image_url||""),qty:Me,finalUnitGbp:_e,finalUnitBdt:Ve}}).sort((te,ce)=>String(te.order_id).localeCompare(String(ce.order_id))),[g,Fe]),it=p.useMemo(()=>{const te={};Object.keys(f).forEach(_e=>{(f[_e]||[]).forEach(Me=>{const Cn=String(Me.order_item_id||"").trim();Cn&&(te[Cn]=Me)})});const ce={};for(const _e of g){const Ve=String(_e.order_item_id||"").trim();if(Ve){if(!ce[Ve]){const Me=te[Ve]||{};ce[Ve]={order_item_id:Ve,order_id:String(_e.order_id||""),name:Me.name||"",image_url:Me.image_url||"",product_id:Me.product_id||_e.product_id||"",ordered_qty:xt(Me.ordered_quantity,0),needed_qty:0,arrived_qty:0,needed_weight:0,arrived_weight:0}}ce[Ve].needed_qty+=xt(_e.needed_qty,xt(_e.allocated_qty,0)),ce[Ve].arrived_qty+=xt(_e.arrived_qty,xt(_e.shipped_qty,0)),ce[Ve].needed_weight+=xt(_e.needed_weight,xt(_e.allocated_weight,0)),ce[Ve].arrived_weight+=xt(_e.arrived_weight,xt(_e.shipped_weight,0))}}return Object.values(ce).map(_e=>({..._e,remaining_qty:_e.ordered_qty-_e.arrived_qty})).sort((_e,Ve)=>String(_e.order_item_id).localeCompare(String(Ve.order_item_id)))},[g,f]),Mt=p.useMemo(()=>{const te={};for(const ce of it){const _e=String(ce.product_id||"").trim();_e&&(te[_e]||(te[_e]={product_id:_e,name:ce.name||_e,needed_base_qty:0,breakdown:[]}),te[_e].needed_base_qty+=xt(ce.remaining_qty,0),te[_e].breakdown.push({order_id:ce.order_id,order_item_id:ce.order_item_id,needed_qty:xt(ce.remaining_qty,0)}))}return Object.values(te).sort((ce,_e)=>String(ce.name).localeCompare(String(_e.name)))},[it]),Ir=I.__saved||{};function hr(te){const ce=Ir[te.product_id]||{},_e=I[te.product_id]||{},Ve=_e.needed_qty??ce.needed_qty??te.needed_base_qty,Me=_e.ordered_qty??ce.ordered_qty??"",Cn=_e.arrived_qty??ce.arrived_qty??ce.received_qty??"";return{needed_qty:Ve,ordered_qty:Me,arrived_qty:Cn}}function mr(te,ce){K(_e=>({..._e,[te]:{..._e[te]||{},...ce}}))}async function js(te){const ce=String(te.product_id||"").trim();if(!ce)return;const _e=hr(te);R(Ve=>({...Ve,[ce]:!0}));try{const Ve=await g8({shipment_id:t,product_id:ce,name:te.name,needed_qty:Number(_e.needed_qty||0),ordered_qty:_e.ordered_qty===""?"":Number(_e.ordered_qty),arrived_qty:_e.arrived_qty===""?"":Number(_e.arrived_qty),order_breakdown:te.breakdown});K(Me=>({...Me,__saved:{...Me.__saved||{},[ce]:Ve}})),M(`Saved snapshot for ${te.name}.`)}catch(Ve){M(Ve?.message||"Failed to save snapshot row.")}finally{R(Ve=>{const Me={...Ve};return delete Me[ce],Me})}}async function wi(){if(!(!v.order_item_id||!v.needed_qty)){V(!0),M("");try{await uE({shipment_id:t,order_id:v.order_id,order_item_id:v.order_item_id,needed_qty:Number(v.needed_qty),arrived_qty:Number(v.arrived_qty||0),unit_product_weight:zf(v.unit_product_weight),unit_package_weight:zf(v.unit_package_weight)}),await ye(),b(te=>({...te,order_item_id:"",needed_qty:"",arrived_qty:"0",unit_product_weight:"",unit_package_weight:""})),M("Shipment item added.")}catch(te){M(te?.message||"Failed to create shipment item")}finally{V(!1)}}}async function Si(){const te=String(v.order_id||"").trim();if(te){G(!0),M("");try{const ce=await xy(t,te);if(!ce.length)throw new Error("No remaining needed quantities for this order.");for(const _e of ce)await uE({shipment_id:t,order_id:te,order_item_id:_e.order_item_id,needed_qty:Number(_e.needed_qty??_e.allocated_qty??0),arrived_qty:Number(_e.arrived_qty??_e.shipped_qty??0),unit_product_weight:0,unit_package_weight:0});await gs(t),await ye(),M(`Added ${ce.length} item(s) from order ${te} to shipment.`)}catch(ce){M(ce?.message||"Failed to add full order")}finally{G(!1)}}}async function Ts(te){const ce=String(te.allocation_id||""),_e=S[ce]||{};w(Ve=>({...Ve,[ce]:!0})),k(Ve=>({...Ve,[ce]:""}));try{await ib(ce,{needed_qty:_e.needed_qty===""?"":Number(_e.needed_qty),arrived_qty:_e.arrived_qty===""?"":Number(_e.arrived_qty),unit_product_weight:zf(_e.unit_product_weight),unit_package_weight:zf(_e.unit_package_weight)}),await gs(t),await ye()}catch(Ve){k(Me=>({...Me,[ce]:Ve?.message||"Failed to save"}))}finally{w(Ve=>{const Me={...Ve};return delete Me[ce],Me})}}function Ao(te){se(te),pe(""),Y(!0)}async function ic(){const te=String(Z?.allocation_id||"");if(te){re(!0),pe("");try{await gT(te),await gs(t),await ye(),Y(!1),se(null)}catch(ce){pe(ce?.message||"Failed to delete allocation")}finally{re(!1)}}}return l.jsxs("div",{className:"mx-auto w-full max-w-7xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4 flex items-start justify-between gap-2",children:[l.jsxs("div",{children:[l.jsx(fe,{variant:"link",className:"h-auto p-0 text-sm",onClick:()=>n("/admin/shipments"),children:"Back to shipments"}),l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Shipment Details"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fe,{variant:"outline",onClick:()=>n(`/admin/shipments/${t}/weights`),children:"Weight Sheet"}),l.jsx(fe,{variant:"outline",onClick:()=>n("/admin/orders"),children:"Orders"})]})]}),E?l.jsx("div",{className:"mb-3 rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:E}):null,L?l.jsx("div",{className:"mb-3 rounded-lg border px-4 py-3 text-sm",children:L}):null,N?l.jsx(Y8,{}):l.jsxs(l.Fragment,{children:[l.jsxs(Pe,{className:"mb-4",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Shipment"})}),l.jsxs(ze,{className:"grid gap-3 text-sm md:grid-cols-4",children:[l.jsxs("div",{className:"rounded-lg border p-2",children:["Name: ",i?.name||"-"]}),l.jsxs("div",{className:"rounded-lg border p-2",children:["GBP Avg: ",xt(i?.gbp_avg_rate)]}),l.jsxs("div",{className:"rounded-lg border p-2",children:["Product Rate: ",xt(i?.gbp_rate_product)]}),l.jsxs("div",{className:"rounded-lg border p-2",children:["Cargo Rate: ",xt(i?.gbp_rate_cargo)]}),l.jsxs("div",{className:"rounded-lg border p-2",children:["Cargo Cost/KG: ",xt(i?.cargo_cost_per_kg)]}),l.jsxs("div",{className:"rounded-lg border p-2",children:["Status: ",i?.status||"-"]}),l.jsxs("div",{className:"rounded-lg border p-2",children:["Created: ",yE(i?.created_at)]}),l.jsxs("div",{className:"rounded-lg border p-2",children:["Updated: ",yE(i?.updated_at)]})]})]}),l.jsxs(Pe,{className:"mb-4",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Add Shipment Item"})}),l.jsxs(ze,{className:"grid gap-2 md:grid-cols-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Order"}),l.jsxs(an,{value:v.order_id,onValueChange:te=>b(ce=>({...ce,order_id:te,order_item_id:""})),children:[l.jsx(Kt,{className:"h-9 text-xs",children:l.jsx(on,{placeholder:"Select order"})}),l.jsx(Yt,{children:Ne.map((te,ce)=>l.jsxs(ot,{value:te.order_id,children:["#",te.order_sl||ce+1,"  ",te.order_name||"Untitled"]},te.order_id))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Order Item"}),l.jsxs(an,{value:v.order_item_id,onValueChange:te=>b(ce=>({...ce,order_item_id:te})),disabled:!v.order_id,children:[l.jsx(Kt,{className:"h-9 text-xs",children:l.jsx(on,{placeholder:"Select item"})}),l.jsx(Yt,{children:me.map(te=>l.jsx(ot,{value:te.order_item_id,children:te.name||"Item"},te.order_item_id))})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Needed Qty"}),l.jsx(He,{value:v.needed_qty,onChange:te=>b(ce=>({...ce,needed_qty:te.target.value})),inputMode:"decimal"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Arrived Qty"}),l.jsx(He,{value:v.arrived_qty,onChange:te=>b(ce=>({...ce,arrived_qty:te.target.value})),inputMode:"decimal"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Unit Product Wt (g)"}),l.jsx(He,{value:v.unit_product_weight,onChange:te=>b(ce=>({...ce,unit_product_weight:te.target.value})),inputMode:"decimal"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Unit Package Wt (g)"}),l.jsx(He,{value:v.unit_package_weight,onChange:te=>b(ce=>({...ce,unit_package_weight:te.target.value})),inputMode:"decimal"})]}),l.jsxs("div",{className:"md:col-span-6",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx(fe,{disabled:P||!v.order_item_id||!v.needed_qty,onClick:wi,children:P?"Adding...":"Add Selected Item"}),l.jsx(fe,{variant:"outline",disabled:z||!v.order_id,onClick:Si,children:z?"Adding Order...":"Add Full Order"})]}),l.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:"Add Full Order will create shipment rows for all remaining needed quantities in this order."})]})]})]}),l.jsxs(Pe,{children:[l.jsxs(ut,{className:"flex flex-row items-center justify-between",children:[l.jsxs(dt,{className:"text-base",children:["Shipment Items (",g.length,")"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:l.jsx(fe,{variant:"outline",onClick:async()=>{await gs(t),await ye(),M("Shipment and related orders recomputed.")},children:"Recompute Shipment"})})]}),l.jsx(ze,{children:g.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No shipment items yet."}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Item"}),l.jsx("th",{className:"px-3 py-2",children:"Order"}),l.jsx("th",{className:"px-3 py-2",children:"Needed"}),l.jsx("th",{className:"px-3 py-2",children:"Arrived"}),l.jsx("th",{className:"px-3 py-2",children:"Weights"}),l.jsx("th",{className:"px-3 py-2",children:"Costs (BDT)"}),l.jsx("th",{className:"px-3 py-2"})]})}),l.jsx("tbody",{className:"divide-y",children:g.map(te=>{const ce=String(te.allocation_id||""),_e=S[ce]||{},Ve=!!C[ce],Me=Fe[String(te.order_item_id||"").trim()]||{},Cn=ru(Me.image_url);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:Cn?l.jsx("img",{src:Cn,alt:Me.name||Me.product_id||"product",className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:"truncate font-medium",children:Me.name||Me.product_id||"Product"})})]})}),l.jsx("td",{className:"px-3 py-2",children:Be[String(te.order_id||"")]||"Order"}),l.jsx("td",{className:"px-3 py-2",children:l.jsx(He,{className:"h-8 w-24 text-xs",value:_e.needed_qty??"",onChange:Fn=>A(vn=>({...vn,[ce]:{...vn[ce],needed_qty:Fn.target.value}}))})}),l.jsx("td",{className:"px-3 py-2",children:l.jsx(He,{className:"h-8 w-24 text-xs",value:_e.arrived_qty??"",onChange:Fn=>A(vn=>({...vn,[ce]:{...vn[ce],arrived_qty:Fn.target.value}}))})}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx(He,{className:"h-8 w-20 text-xs",value:_e.unit_product_weight??"",onChange:Fn=>A(vn=>({...vn,[ce]:{...vn[ce],unit_product_weight:Fn.target.value}}))}),l.jsx(He,{className:"h-8 w-20 text-xs",value:_e.unit_package_weight??"",onChange:Fn=>A(vn=>({...vn,[ce]:{...vn[ce],unit_package_weight:Fn.target.value}}))})]}),l.jsxs("div",{className:"mt-1 text-[10px] text-muted-foreground",children:["total wt ",xt(te.unit_total_weight),"  arrived wt ",xt(te.arrived_weight??te.shipped_weight)]})]}),l.jsxs("td",{className:"px-3 py-2",children:["cost ",ds(te.total_cost_bdt),l.jsx("br",{}),"profit ",ds(te.profit_bdt)]}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx(fe,{size:"icon",variant:"outline",disabled:Ve,onClick:()=>Ts(te),title:"Save allocation","aria-label":"Save allocation",children:Ve?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})}),l.jsx(fe,{size:"icon",variant:"destructive",onClick:()=>Ao(te),title:"Delete shipment item","aria-label":"Delete shipment item",children:l.jsx(Ar,{className:"h-4 w-4"})})]}),D[ce]?l.jsx("div",{className:"mt-1 text-[10px] text-destructive",children:D[ce]}):null]})]},ce)})})]})})})]}),l.jsxs(Pe,{className:"mt-4",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Orders In This Shipment"})}),l.jsx(ze,{children:Ze.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No order rows in this shipment yet."}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Product"}),l.jsx("th",{className:"px-3 py-2",children:"Order SL"}),l.jsx("th",{className:"px-3 py-2",children:"Order"}),l.jsx("th",{className:"px-3 py-2",children:"Qty"}),l.jsx("th",{className:"px-3 py-2",children:"Final Price"})]})}),l.jsx("tbody",{className:"divide-y",children:Ze.map(te=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:te.image_url?l.jsx("img",{src:te.image_url,alt:te.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-medium",children:te.name})]})}),l.jsxs("td",{className:"px-3 py-2",children:["#",et[te.order_id]||"-"]}),l.jsx("td",{className:"px-3 py-2",children:Be[te.order_id]||"Order"}),l.jsx("td",{className:"px-3 py-2",children:ds(te.qty)}),l.jsxs("td",{className:"px-3 py-2",children:[l.jsxs("div",{children:["",xt(te.finalUnitGbp).toFixed(2)]}),l.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["",ds(te.finalUnitBdt)]})]})]},te.allocation_id))})]})})})]}),l.jsxs(Pe,{className:"mt-4",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Shipment Pick List Aggregate"})}),l.jsx(ze,{children:it.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No aggregate rows yet."}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"Product"}),l.jsx("th",{className:"px-3 py-2",children:"Order"}),l.jsx("th",{className:"px-3 py-2",children:"Ordered"}),l.jsx("th",{className:"px-3 py-2",children:"Needed"}),l.jsx("th",{className:"px-3 py-2",children:"Arrived"}),l.jsx("th",{className:"px-3 py-2",children:"Remaining"}),l.jsx("th",{className:"px-3 py-2",children:"Needed Wt"}),l.jsx("th",{className:"px-3 py-2",children:"Arrived Wt"})]})}),l.jsx("tbody",{className:"divide-y",children:it.map(te=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:ru(te.image_url)?l.jsx("img",{src:ru(te.image_url),alt:te.name||te.product_id||"product",className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"min-w-0",children:l.jsx("div",{className:"truncate font-medium",children:te.name||te.product_id||"-"})})]})}),l.jsx("td",{className:"px-3 py-2",children:Be[String(te.order_id||"")]||"Order"}),l.jsx("td",{className:"px-3 py-2",children:ds(te.ordered_qty)}),l.jsx("td",{className:"px-3 py-2",children:ds(te.needed_qty)}),l.jsx("td",{className:"px-3 py-2",children:ds(te.arrived_qty)}),l.jsx("td",{className:"px-3 py-2",children:ds(te.remaining_qty)}),l.jsx("td",{className:"px-3 py-2",children:xt(te.needed_weight).toFixed(2)}),l.jsx("td",{className:"px-3 py-2",children:xt(te.arrived_weight).toFixed(2)})]},te.order_item_id))})]})})})]}),l.jsxs(Pe,{className:"mt-4",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Product Snapshot (Needed / Ordered / Arrived)"})}),l.jsx(ze,{children:Mt.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No product snapshot rows yet."}):l.jsx("div",{className:"space-y-3",children:Mt.map(te=>{const ce=hr(te),_e=!!q[te.product_id],Ve=ru(it.find(Me=>String(Me.product_id)===String(te.product_id))?.image_url||"");return l.jsx("div",{className:"rounded-lg border p-3",children:l.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:Ve?l.jsx("img",{src:Ve,alt:te.name,className:"h-full w-full object-cover"}):null}),l.jsx("div",{className:"font-semibold",children:te.name})]}),l.jsx("div",{className:"mt-1 text-xs text-muted-foreground",children:te.breakdown.map(Me=>`${Be[String(Me.order_id)]||"Order"}: ${ds(Me.needed_qty)}`).join("  ")})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 md:flex md:items-center",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[10px] text-muted-foreground",children:"Needed Qty"}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(fe,{size:"sm",variant:"outline",className:"h-8 w-8 px-0",onClick:()=>mr(te.product_id,{needed_qty:Math.max(0,xt(ce.needed_qty)-1)}),disabled:_e,children:"-"}),l.jsx(He,{className:"h-8 w-20 text-xs",value:String(ce.needed_qty??""),inputMode:"decimal",onChange:Me=>mr(te.product_id,{needed_qty:Me.target.value}),disabled:_e}),l.jsx(fe,{size:"sm",variant:"outline",className:"h-8 w-8 px-0",onClick:()=>mr(te.product_id,{needed_qty:xt(ce.needed_qty)+1}),disabled:_e,children:"+"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[10px] text-muted-foreground",children:"Ordered Qty"}),l.jsx(He,{className:"h-8 w-24 text-xs",value:String(ce.ordered_qty??""),inputMode:"decimal",onChange:Me=>mr(te.product_id,{ordered_qty:Me.target.value}),placeholder:"",disabled:_e})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-[10px] text-muted-foreground",children:"Arrived Qty"}),l.jsx(He,{className:"h-8 w-24 text-xs",value:String(ce.arrived_qty??""),inputMode:"decimal",onChange:Me=>mr(te.product_id,{arrived_qty:Me.target.value}),placeholder:"",disabled:_e})]}),l.jsx("div",{className:"pt-4",children:l.jsx(fe,{size:"icon",onClick:()=>js(te),disabled:_e,title:"Save snapshot","aria-label":"Save snapshot",children:_e?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})})]})]})},te.product_id)})})})]})]}),l.jsx(nd,{open:B,loading:F,error:he,title:"Delete shipment item",description:Z?`Delete ${Z.allocation_id}?`:"Delete shipment item?",confirmText:l.jsx(Ar,{className:"h-4 w-4"}),onClose:()=>{F||Y(!1)},onConfirm:ic})]})}function vE(t){const e=Number(t);if(!Number.isFinite(e))return"";const n=e*1e3;return Number.isInteger(n)?String(n):String(Number(n.toFixed(3)))}function bE(t){const e=String(t??"").trim();if(!e)return"";const n=Number(e);return Number.isFinite(n)?n/1e3:""}function xE(t){const e=String(t??"").trim();if(!e)return"";const n=Number(e);return Number.isFinite(n)?String(n):""}function wE(t){const e=String(t||"").trim();if(!e)return"";const n=e.match(/(?:\/d\/|id=)([-\w]{20,})/i);return n?.[1]?`https://lh3.googleusercontent.com/d/${n[1]}`:e}function SE(t){return String(t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`).map(e=>e.trim())}function Z8(t){if(navigator.clipboard?.writeText)return navigator.clipboard.writeText(t);const e=document.createElement("textarea");return e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),Promise.resolve()}function J8(){return l.jsx(Pe,{children:l.jsxs(ze,{className:"space-y-2 p-4",children:[l.jsx(nt,{className:"h-5 w-56"}),Array.from({length:8}).map((t,e)=>l.jsx(nt,{className:"h-10 w-full"},e))]})})}function eF(){const{user:t}=en(),e=fr(),{shipmentId:n}=Yh(),[i,a]=p.useState(null),[c,d]=p.useState([]),[f,h]=p.useState({}),[g,y]=p.useState({}),[v,b]=p.useState(!0),[N,T]=p.useState(!1),[E,j]=p.useState(""),[L,M]=p.useState(""),[P,V]=p.useState(""),[z,G]=p.useState("");p.useEffect(()=>{let k=!0;async function I(){if(!(!t?.email||!n)){b(!0),j(""),M("");try{const[K,q]=await Promise.all([Co(n),rb(n)]),R=Array.isArray(q)?q:[],B=[...new Set(R.map(se=>String(se.order_id||"").trim()).filter(Boolean))],Y=await Promise.all(B.map(async se=>{try{const F=await Ii({email:t.email,role:t.role,order_id:se});return[se,Array.isArray(F.items)?F.items:[]]}catch{return[se,[]]}}));if(!k)return;a(K||null),d(R);const Z={};Y.forEach(([se,F])=>{Z[se]=F}),h(Z)}catch(K){if(!k)return;j(K?.message||"Failed to load shipment weights")}finally{k&&b(!1)}}}return I(),()=>{k=!1}},[t?.email,t?.role,n]);const C=p.useMemo(()=>{const k={};Object.keys(f).forEach(K=>{(f[K]||[]).forEach(q=>{const R=String(q.order_item_id||"").trim();R&&(k[R]=q)})});const I={};return c.forEach(K=>{const q=String(K.order_item_id||"").trim();if(q){if(!I[q]){const R=k[q]||{};I[q]={order_item_id:q,order_id:String(K.order_id||""),name:String(R.name||R.product_id||"Product"),product_id:String(R.product_id||K.product_id||""),image_url:String(R.image_url||""),allocation_ids:[],unit_product_weight:vE(K.unit_product_weight),unit_package_weight:vE(K.unit_package_weight)}}I[q].allocation_ids.push(String(K.allocation_id||""))}}),Object.values(I).sort((K,q)=>K.name.localeCompare(q.name))},[c,f]);p.useEffect(()=>{const k={};C.forEach(I=>{k[I.order_item_id]={unit_product_weight:I.unit_product_weight,unit_package_weight:I.unit_package_weight}}),y(k)},[C]);const w=p.useMemo(()=>{let k=0;return C.forEach(I=>{const K=g[I.order_item_id]||{};(String(K.unit_product_weight??"")!==String(I.unit_product_weight??"")||String(K.unit_package_weight??"")!==String(I.unit_package_weight??""))&&(k+=1)}),k},[C,g]);async function S(){const k=C.map(I=>I.name).join(`
`);await Z8(k),M(`Copied ${C.length} product name(s).`)}function A(){const k=SE(P),I=SE(z),K={...g};C.forEach((q,R)=>{const B=K[q.order_item_id]||{},Y=k[R],Z=I[R];K[q.order_item_id]={unit_product_weight:Y===void 0||Y===""?B.unit_product_weight??"":xE(Y),unit_package_weight:Z===void 0||Z===""?B.unit_package_weight??"":xE(Z)}}),y(K),M("Pasted columns applied to rows in the same order.")}async function D(){if(!t?.email||!n)return;const k=[];if(C.forEach(I=>{const K=g[I.order_item_id]||{};(String(K.unit_product_weight??"")!==String(I.unit_product_weight??"")||String(K.unit_package_weight??"")!==String(I.unit_package_weight??""))&&k.push({row:I,draft:K})}),!k.length){M("No weight changes to save.");return}T(!0),j(""),M("");try{for(let I=0;I<k.length;I++){const K=k[I].row,q=k[I].draft;for(let R=0;R<K.allocation_ids.length;R++){const B=K.allocation_ids[R];await ib(B,{unit_product_weight:bE(q.unit_product_weight),unit_package_weight:bE(q.unit_package_weight)})}}await gs(n),M(`Saved ${k.length} product weight row(s).`)}catch(I){j(I?.message||"Failed to save weights")}finally{T(!1)}}return l.jsxs("div",{className:"mx-auto w-full max-w-7xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4 flex items-start justify-between gap-3",children:[l.jsxs("div",{children:[l.jsx(fe,{variant:"link",className:"h-auto p-0 text-sm",onClick:()=>e(`/admin/shipments/${n}`),children:"Back to shipment"}),l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Shipment Weight Sheet"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:i?.name||n})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fe,{variant:"outline",onClick:S,disabled:!C.length,children:"Copy Product Names"}),l.jsx(fe,{size:"icon",onClick:D,disabled:N||w===0,title:`Save all (${w})`,"aria-label":`Save all (${w})`,children:N?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})]})]}),E?l.jsx("div",{className:"mb-3 rounded-lg border border-destructive/30 bg-destructive/10 px-4 py-3 text-sm text-destructive",children:E}):null,L?l.jsx("div",{className:"mb-3 rounded-lg border px-4 py-3 text-sm",children:L}):null,v?l.jsx(J8,{}):l.jsxs("div",{className:"grid gap-4 lg:grid-cols-3",children:[l.jsxs(Pe,{className:"lg:col-span-2",children:[l.jsx(ut,{children:l.jsxs(dt,{className:"text-base",children:["Products In Shipment (",C.length,")"]})}),l.jsx(ze,{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-3 py-2",children:"#"}),l.jsx("th",{className:"px-3 py-2",children:"Product"}),l.jsx("th",{className:"px-3 py-2",children:"Product Wt"}),l.jsx("th",{className:"px-3 py-2",children:"Package Wt"})]})}),l.jsx("tbody",{className:"divide-y",children:C.map((k,I)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-3 py-2",children:I+1}),l.jsx("td",{className:"px-3 py-2",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-9 w-9 overflow-hidden rounded border bg-white",children:wE(k.image_url)?l.jsx("img",{src:wE(k.image_url),alt:k.name,className:"h-full w-full object-cover"}):null}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"truncate font-medium",children:k.name}),l.jsx("div",{className:"text-[10px] text-muted-foreground",children:k.product_id||k.order_item_id})]})]})}),l.jsx("td",{className:"px-3 py-2",children:l.jsx(He,{className:"h-8 w-28 text-xs",inputMode:"decimal",value:g[k.order_item_id]?.unit_product_weight??"",onChange:K=>y(q=>({...q,[k.order_item_id]:{...q[k.order_item_id]||{},unit_product_weight:K.target.value}}))})}),l.jsx("td",{className:"px-3 py-2",children:l.jsx(He,{className:"h-8 w-28 text-xs",inputMode:"decimal",value:g[k.order_item_id]?.unit_package_weight??"",onChange:K=>y(q=>({...q,[k.order_item_id]:{...q[k.order_item_id]||{},unit_package_weight:K.target.value}}))})})]},k.order_item_id))})]})})]}),l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Paste From Sheet"})}),l.jsxs(ze,{className:"space-y-3",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"1. Copy names with the button. 2. Generate your sheet by name. 3. Paste each weight column in grams and apply. Saved values are converted to kg for shipment cargo costing."}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Product Weight Column (g)"}),l.jsx("textarea",{className:"min-h-[140px] w-full rounded-md border bg-background p-2 text-xs outline-none ring-offset-background focus-visible:ring-2 focus-visible:ring-ring",value:P,onChange:k=>V(k.target.value),placeholder:`0.25
0.40
0.18`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Package Weight Column (g)"}),l.jsx("textarea",{className:"min-h-[140px] w-full rounded-md border bg-background p-2 text-xs outline-none ring-offset-background focus-visible:ring-2 focus-visible:ring-ring",value:z,onChange:k=>G(k.target.value),placeholder:`0.05
0.08
0.04`})]}),l.jsx(fe,{className:"w-full",variant:"outline",onClick:A,children:"Apply Pasted Columns"})]})]})]})]})}var rc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tF={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},nF=class{#e=tF;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},so=new nF;function rF(t){setTimeout(t,0)}var vo=typeof window>"u"||"Deno"in globalThis;function Yn(){}function iF(t,e){return typeof t=="function"?t(e):t}function Ny(t){return typeof t=="number"&&t>=0&&t!==1/0}function vT(t,e){return Math.max(t+(e||0)-Date.now(),0)}function wa(t,e){return typeof t=="function"?t(e):t}function Gr(t,e){return typeof t=="function"?t(e):t}function NE(t,e){const{type:n="all",exact:i,fetchStatus:a,predicate:c,queryKey:d,stale:f}=t;if(d){if(i){if(e.queryHash!==sb(d,e.options))return!1}else if(!Au(e.queryKey,d))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof f=="boolean"&&e.isStale()!==f||a&&a!==e.state.fetchStatus||c&&!c(e))}function EE(t,e){const{exact:n,status:i,predicate:a,mutationKey:c}=t;if(c){if(!e.options.mutationKey)return!1;if(n){if(bo(e.options.mutationKey)!==bo(c))return!1}else if(!Au(e.options.mutationKey,c))return!1}return!(i&&e.state.status!==i||a&&!a(e))}function sb(t,e){return(e?.queryKeyHashFn||bo)(t)}function bo(t){return JSON.stringify(t,(e,n)=>Ey(n)?Object.keys(n).sort().reduce((i,a)=>(i[a]=n[a],i),{}):n)}function Au(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Au(t[n],e[n])):!1}var sF=Object.prototype.hasOwnProperty;function bT(t,e,n=0){if(t===e)return t;if(n>500)return e;const i=CE(t)&&CE(e);if(!i&&!(Ey(t)&&Ey(e)))return e;const c=(i?t:Object.keys(t)).length,d=i?e:Object.keys(e),f=d.length,h=i?new Array(f):{};let g=0;for(let y=0;y<f;y++){const v=i?y:d[y],b=t[v],N=e[v];if(b===N){h[v]=b,(i?y<c:sF.call(t,v))&&g++;continue}if(b===null||N===null||typeof b!="object"||typeof N!="object"){h[v]=N;continue}const T=bT(b,N,n+1);h[v]=T,T===b&&g++}return c===f&&g===c?t:h}function Bh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function CE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ey(t){if(!jE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!jE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function jE(t){return Object.prototype.toString.call(t)==="[object Object]"}function aF(t){return new Promise(e=>{so.setTimeout(e,t)})}function Cy(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?bT(t,e):e}function oF(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function lF(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var ab=Symbol();function xT(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===ab?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function ob(t,e){return typeof t=="function"?t(...e):!!t}function cF(t,e,n){let i=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??=e(),i||(i=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),t}var uF=class extends rc{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!vo&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},lb=new uF;function jy(){let t,e;const n=new Promise((a,c)=>{t=a,e=c});n.status="pending",n.catch(()=>{});function i(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{i({status:"fulfilled",value:a}),t(a)},n.reject=a=>{i({status:"rejected",reason:a}),e(a)},n}var dF=rF;function fF(){let t=[],e=0,n=f=>{f()},i=f=>{f()},a=dF;const c=f=>{e?t.push(f):a(()=>{n(f)})},d=()=>{const f=t;t=[],f.length&&a(()=>{i(()=>{f.forEach(h=>{n(h)})})})};return{batch:f=>{let h;e++;try{h=f()}finally{e--,e||d()}return h},batchCalls:f=>(...h)=>{c(()=>{f(...h)})},schedule:c,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{i=f},setScheduler:f=>{a=f}}}var En=fF(),hF=class extends rc{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!vo&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Fh=new hF;function mF(t){return Math.min(1e3*2**t,3e4)}function wT(t){return(t??"online")==="online"?Fh.isOnline():!0}var Ty=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function ST(t){let e=!1,n=0,i;const a=jy(),c=()=>a.status!=="pending",d=E=>{if(!c()){const j=new Ty(E);b(j),t.onCancel?.(j)}},f=()=>{e=!0},h=()=>{e=!1},g=()=>lb.isFocused()&&(t.networkMode==="always"||Fh.isOnline())&&t.canRun(),y=()=>wT(t.networkMode)&&t.canRun(),v=E=>{c()||(i?.(),a.resolve(E))},b=E=>{c()||(i?.(),a.reject(E))},N=()=>new Promise(E=>{i=j=>{(c()||g())&&E(j)},t.onPause?.()}).then(()=>{i=void 0,c()||t.onContinue?.()}),T=()=>{if(c())return;let E;const j=n===0?t.initialPromise:void 0;try{E=j??t.fn()}catch(L){E=Promise.reject(L)}Promise.resolve(E).then(v).catch(L=>{if(c())return;const M=t.retry??(vo?0:3),P=t.retryDelay??mF,V=typeof P=="function"?P(n,L):P,z=M===!0||typeof M=="number"&&n<M||typeof M=="function"&&M(n,L);if(e||!z){b(L);return}n++,t.onFail?.(n,L),aF(V).then(()=>g()?void 0:N()).then(()=>{e?b(L):T()})})};return{promise:a,status:()=>a.status,cancel:d,continue:()=>(i?.(),a),cancelRetry:f,continueRetry:h,canStart:y,start:()=>(y()?T():N().then(T),a)}}var NT=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ny(this.gcTime)&&(this.#e=so.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vo?1/0:300*1e3))}clearGcTimeout(){this.#e&&(so.clearTimeout(this.#e),this.#e=void 0)}},pF=class extends NT{#e;#t;#n;#i;#r;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#n=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=AE(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=AE(this.options);e.data!==void 0&&(this.setState(TE(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Cy(this.state.data,t,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(Yn).catch(Yn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Gr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ab||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>wa(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!vT(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},a=()=>{const f=xT(this.options,e),g=(()=>{const y={client:this.#i,queryKey:this.queryKey,meta:this.meta};return i(y),y})();return this.#o=!1,this.options.persister?this.options.persister(f,g,this):f(g)},d=(()=>{const f={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:a};return i(f),f})();this.options.behavior?.onFetch(d,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==d.fetchOptions?.meta)&&this.#s({type:"fetch",meta:d.fetchOptions?.meta}),this.#r=ST({initialPromise:e?.initialPromise,fn:d.fetchFn,onCancel:f=>{f instanceof Ty&&f.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(f,h)=>{this.#s({type:"failed",failureCount:f,error:h})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0});try{const f=await this.#r.start();if(f===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(f),this.#n.config.onSuccess?.(f,this),this.#n.config.onSettled?.(f,this.state.error,this),f}catch(f){if(f instanceof Ty){if(f.silent)return this.#r.promise;if(f.revert){if(this.state.data===void 0)throw f;return this.state.data}}throw this.#s({type:"error",error:f}),this.#n.config.onError?.(f,this),this.#n.config.onSettled?.(this.state.data,f,this),f}finally{this.scheduleGc()}}#s(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ET(n.data,this.options),fetchMeta:t.meta??null};case"success":const i={...n,...TE(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?i:void 0,i;case"error":const a=t.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),En.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function ET(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:wT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function TE(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function AE(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gF=class extends rc{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=jy(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#i=void 0;#r;#a;#o;#s;#p;#f;#h;#c;#u;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),RE(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ay(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ay(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#x(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Gr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),e._defaulted&&!Bh(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const i=this.hasListeners();i&&OE(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),i&&(this.#t!==n||Gr(this.options.enabled,this.#t)!==Gr(e.enabled,this.#t)||wa(this.options.staleTime,this.#t)!==wa(e.staleTime,this.#t))&&this.#g();const a=this.#_();i&&(this.#t!==n||Gr(this.options.enabled,this.#t)!==Gr(e.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return yF(this,n)&&(this.#i=n,this.#a=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(n,i)=>(this.trackProp(i),e?.(i),i==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,i))})}trackProp(t){this.#m.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#w();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(Yn)),e}#g(){this.#b();const t=wa(this.options.staleTime,this.#t);if(vo||this.#i.isStale||!Ny(t))return;const n=vT(this.#i.dataUpdatedAt,t)+1;this.#c=so.setTimeout(()=>{this.#i.isStale||this.updateResult()},n)}#_(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#x(),this.#l=t,!(vo||Gr(this.options.enabled,this.#t)===!1||!Ny(this.#l)||this.#l===0)&&(this.#u=so.setInterval(()=>{(this.options.refetchIntervalInBackground||lb.isFocused())&&this.#d()},this.#l))}#v(){this.#g(),this.#y(this.#_())}#b(){this.#c&&(so.clearTimeout(this.#c),this.#c=void 0)}#x(){this.#u&&(so.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,i=this.options,a=this.#i,c=this.#r,d=this.#a,h=t!==n?t.state:this.#n,{state:g}=t;let y={...g},v=!1,b;if(e._optimisticResults){const w=this.hasListeners(),S=!w&&RE(t,e),A=w&&OE(t,n,e,i);(S||A)&&(y={...y,...ET(g.data,t.options)}),e._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:N,errorUpdatedAt:T,status:E}=y;b=y.data;let j=!1;if(e.placeholderData!==void 0&&b===void 0&&E==="pending"){let w;a?.isPlaceholderData&&e.placeholderData===d?.placeholderData?(w=a.data,j=!0):w=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,w!==void 0&&(E="success",b=Cy(a?.data,w,e),v=!0)}if(e.select&&b!==void 0&&!j)if(a&&b===c?.data&&e.select===this.#p)b=this.#f;else try{this.#p=e.select,b=e.select(b),b=Cy(a?.data,b,e),this.#f=b,this.#s=null}catch(w){this.#s=w}this.#s&&(N=this.#s,b=this.#f,T=Date.now(),E="error");const L=y.fetchStatus==="fetching",M=E==="pending",P=E==="error",V=M&&L,z=b!==void 0,C={status:E,fetchStatus:y.fetchStatus,isPending:M,isSuccess:E==="success",isError:P,isInitialLoading:V,isLoading:V,data:b,dataUpdatedAt:y.dataUpdatedAt,error:N,errorUpdatedAt:T,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>h.dataUpdateCount||y.errorUpdateCount>h.errorUpdateCount,isFetching:L,isRefetching:L&&!M,isLoadingError:P&&!z,isPaused:y.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:P&&z,isStale:cb(t,e),refetch:this.refetch,promise:this.#o,isEnabled:Gr(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const w=C.data!==void 0,S=C.status==="error"&&!w,A=I=>{S?I.reject(C.error):w&&I.resolve(C.data)},D=()=>{const I=this.#o=C.promise=jy();A(I)},k=this.#o;switch(k.status){case"pending":t.queryHash===n.queryHash&&A(k);break;case"fulfilled":(S||C.data!==k.value)&&D();break;case"rejected":(!S||C.error!==k.reason)&&D();break}}return C}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#a=this.options,this.#r.data!==void 0&&(this.#h=this.#t),Bh(e,t))return;this.#i=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!this.#m.size)return!0;const c=new Set(a??this.#m);return this.options.throwOnError&&c.add("error"),Object.keys(this.#i).some(d=>{const f=d;return this.#i[f]!==t[f]&&c.has(f)})};this.#S({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#S(t){En.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function _F(t,e){return Gr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function RE(t,e){return _F(t,e)||t.state.data!==void 0&&Ay(t,e,e.refetchOnMount)}function Ay(t,e,n){if(Gr(e.enabled,t)!==!1&&wa(e.staleTime,t)!=="static"){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&cb(t,e)}return!1}function OE(t,e,n,i){return(t!==e||Gr(i.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&cb(t,n)}function cb(t,e){return Gr(e.enabled,t)!==!1&&t.isStaleByTime(wa(e.staleTime,t))}function yF(t,e){return!Bh(t.getCurrentResult(),e)}function IE(t){return{onFetch:(e,n)=>{const i=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,c=e.state.data?.pages||[],d=e.state.data?.pageParams||[];let f={pages:[],pageParams:[]},h=0;const g=async()=>{let y=!1;const v=T=>{cF(T,()=>e.signal,()=>y=!0)},b=xT(e.options,e.fetchOptions),N=async(T,E,j)=>{if(y)return Promise.reject();if(E==null&&T.pages.length)return Promise.resolve(T);const M=(()=>{const G={client:e.client,queryKey:e.queryKey,pageParam:E,direction:j?"backward":"forward",meta:e.options.meta};return v(G),G})(),P=await b(M),{maxPages:V}=e.options,z=j?lF:oF;return{pages:z(T.pages,P,V),pageParams:z(T.pageParams,E,V)}};if(a&&c.length){const T=a==="backward",E=T?vF:ME,j={pages:c,pageParams:d},L=E(i,j);f=await N(j,L,T)}else{const T=t??c.length;do{const E=h===0?d[0]??i.initialPageParam:ME(i,f);if(h>0&&E==null)break;f=await N(f,E),h++}while(h<T)}return f};e.options.persister?e.fetchFn=()=>e.options.persister?.(g,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=g}}}function ME(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function vF(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var bF=class extends NT{#e;#t;#n;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||CT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=ST({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(c,d)=>{this.#r({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const i=this.state.status==="pending",a=!this.#i.canStart();try{if(i)e();else{this.#r({type:"pending",variables:t,isPaused:a}),this.#n.config.onMutate&&await this.#n.config.onMutate(t,this,n);const d=await this.options.onMutate?.(t,n);d!==this.state.context&&this.#r({type:"pending",context:d,variables:t,isPaused:a})}const c=await this.#i.start();return await this.#n.config.onSuccess?.(c,t,this.state.context,this,n),await this.options.onSuccess?.(c,t,this.state.context,n),await this.#n.config.onSettled?.(c,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(c,null,t,this.state.context,n),this.#r({type:"success",data:c}),c}catch(c){try{await this.#n.config.onError?.(c,t,this.state.context,this,n)}catch(d){Promise.reject(d)}try{await this.options.onError?.(c,t,this.state.context,n)}catch(d){Promise.reject(d)}try{await this.#n.config.onSettled?.(void 0,c,this.state.variables,this.state.context,this,n)}catch(d){Promise.reject(d)}try{await this.options.onSettled?.(void 0,c,t,this.state.context,n)}catch(d){Promise.reject(d)}throw this.#r({type:"error",error:c}),c}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),En.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function CT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xF=class extends rc{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const i=new bF({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(i),i}add(t){this.#e.add(t);const e=Bf(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Bf(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Bf(t);if(typeof e=="string"){const i=this.#t.get(e)?.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){const e=Bf(t);return typeof e=="string"?this.#t.get(e)?.find(i=>i!==t&&i.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){En.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>EE(e,n))}findAll(t={}){return this.getAll().filter(e=>EE(t,e))}notify(t){En.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return En.batch(()=>Promise.all(t.map(e=>e.continue().catch(Yn))))}};function Bf(t){return t.options.scope?.id}var wF=class extends rc{#e;#t=void 0;#n;#i;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),Bh(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&bo(n.mutationKey)!==bo(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,n){return this.#i=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??CT();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){En.batch(()=>{if(this.#i&&this.hasListeners()){const n=this.#t.variables,i=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#i.onSuccess?.(e.data,n,i,a)}catch(c){Promise.reject(c)}try{this.#i.onSettled?.(e.data,null,n,i,a)}catch(c){Promise.reject(c)}}else if(e?.type==="error"){try{this.#i.onError?.(e.error,n,i,a)}catch(c){Promise.reject(c)}try{this.#i.onSettled?.(void 0,e.error,n,i,a)}catch(c){Promise.reject(c)}}}this.listeners.forEach(n=>{n(this.#t)})})}},SF=class extends rc{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const i=e.queryKey,a=e.queryHash??sb(i,e);let c=this.get(a);return c||(c=new pF({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(c)),c}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){En.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>NE(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>NE(t,n)):e}notify(t){En.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){En.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},NF=class{#e;#t;#n;#i;#r;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new SF,this.#t=t.mutationCache||new xF,this.#n=t.defaultOptions||{},this.#i=new Map,this.#r=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=lb.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Fh.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(wa(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),c=this.#e.get(i.queryHash)?.state.data,d=iF(e,c);if(d!==void 0)return this.#e.build(this,i).setData(d,{...n,manual:!0})}setQueriesData(t,e,n){return En.batch(()=>this.#e.findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;En.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return En.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=En.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(i).then(Yn).catch(Yn)}invalidateQueries(t,e={}){return En.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=En.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let c=a.fetch(void 0,n);return n.throwOnError||(c=c.catch(Yn)),a.state.fetchStatus==="paused"?Promise.resolve():c}));return Promise.all(i).then(Yn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(wa(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Yn).catch(Yn)}fetchInfiniteQuery(t){return t.behavior=IE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Yn).catch(Yn)}ensureInfiniteQueryData(t){return t.behavior=IE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Fh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(bo(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(i=>{Au(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(bo(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(i=>{Au(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=sb(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ab&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},jT=p.createContext(void 0),ub=t=>{const e=p.useContext(jT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},EF=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(jT.Provider,{value:t,children:e})),TT=p.createContext(!1),CF=()=>p.useContext(TT);TT.Provider;function jF(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var TF=p.createContext(jF()),AF=()=>p.useContext(TF),RF=(t,e,n)=>{const i=n?.state.error&&typeof t.throwOnError=="function"?ob(t.throwOnError,[n.state.error,n]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||i)&&(e.isReset()||(t.retryOnMount=!1))},OF=t=>{p.useEffect(()=>{t.clearReset()},[t])},IF=({result:t,errorResetBoundary:e,throwOnError:n,query:i,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(a&&t.data===void 0||ob(n,[t.error,i])),MF=t=>{if(t.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),i=t.staleTime;t.staleTime=typeof i=="function"?(...a)=>n(i(...a)):n(i),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},DF=(t,e)=>t.isLoading&&t.isFetching&&!e,kF=(t,e)=>t?.suspense&&e.isPending,DE=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function PF(t,e,n){const i=CF(),a=AF(),c=ub(),d=c.defaultQueryOptions(t);c.getDefaultOptions().queries?._experimental_beforeQuery?.(d);const f=c.getQueryCache().get(d.queryHash);d._optimisticResults=i?"isRestoring":"optimistic",MF(d),RF(d,a,f),OF(a);const h=!c.getQueryCache().get(d.queryHash),[g]=p.useState(()=>new e(c,d)),y=g.getOptimisticResult(d),v=!i&&t.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(b=>{const N=v?g.subscribe(En.batchCalls(b)):Yn;return g.updateResult(),N},[g,v]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),p.useEffect(()=>{g.setOptions(d)},[d,g]),kF(d,y))throw DE(d,g,a);if(IF({result:y,errorResetBoundary:a,throwOnError:d.throwOnError,query:f,suspense:d.suspense}))throw y.error;return c.getDefaultOptions().queries?._experimental_afterQuery?.(d,y),d.experimental_prefetchInRender&&!vo&&DF(y,i)&&(h?DE(d,g,a):f?.promise)?.catch(Yn).finally(()=>{g.updateResult()}),d.notifyOnChangeProps?y:g.trackResult(y)}function LF(t,e){return PF(t,gF)}function M_(t,e){const n=ub(),[i]=p.useState(()=>new wF(n,t));p.useEffect(()=>{i.setOptions(t)},[i,t]);const a=p.useSyncExternalStore(p.useCallback(d=>i.subscribe(En.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),c=p.useCallback((d,f)=>{i.mutate(d,f).catch(Yn)},[i]);if(a.error&&ob(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}const ha={auth:{all:["auth"],me:()=>["auth","me"]},users:{all:["users"],list:(t={})=>["users","list",t],detail:t=>["users","detail",String(t||"").toLowerCase()]}};function UF({rows:t=6}){return l.jsx("div",{className:"space-y-2",children:Array.from({length:t}).map((e,n)=>l.jsxs("div",{className:"rounded-xl border p-3",children:[l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(nt,{className:"h-4 w-64"}),l.jsx(nt,{className:"h-3 w-40"})]}),l.jsx(nt,{className:"h-6 w-24"})]}),l.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-5",children:Array.from({length:5}).map((i,a)=>l.jsx(nt,{className:"h-9"},a))})]},n))})}function VF(){const{user:t}=en(),e=String(t?.email||"").toLowerCase(),n=ub(),[i,a]=p.useState(""),[c,d]=p.useState(""),[f,h]=p.useState(!1),[g,y]=p.useState(""),[v,b]=p.useState({user_email:"",name:"",role:"customer",active:"1",can_see_price_gbp:"0",can_use_cart:"1"}),N=LF({queryKey:ha.users.list(),queryFn:wL,staleTime:600*1e3,gcTime:1800*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:0}),T=M_({mutationFn:SL,onSuccess:(S,A)=>{const D={email:String(A?.user_email||A?.email||"").toLowerCase(),name:String(A?.name||"").trim(),role:String(A?.role||"customer").toLowerCase(),active:Number(A?.active)===1?1:0,can_see_price_gbp:Number(A?.can_see_price_gbp)===1?1:0,can_use_cart:Number(A?.can_use_cart)===1?1:0};n.setQueryData(ha.users.list(),k=>[...(Array.isArray(k)?k:[]).filter(q=>String(q?.email||"").toLowerCase()!==D.email),D].sort((q,R)=>String(q.email||"").localeCompare(String(R.email||""))))}}),E=M_({mutationFn:({email:S,patch:A})=>NL(S,A),onSuccess:async(S,A)=>{const D=String(A?.email||"").toLowerCase();n.setQueryData(ha.users.list(),k=>(Array.isArray(k)?k:[]).map(K=>String(K?.email||"").toLowerCase()!==D?K:{...K,...A.patch})),await n.invalidateQueries({queryKey:ha.users.detail(D)}),String(A?.email||"").toLowerCase()===e&&await n.invalidateQueries({queryKey:ha.auth.me()})}}),j=M_({mutationFn:EL,onSuccess:async(S,A)=>{const D=String(A||"").toLowerCase();return n.setQueryData(ha.users.list(),k=>(Array.isArray(k)?k:[]).filter(K=>String(K?.email||"").toLowerCase()!==D)),await n.invalidateQueries({queryKey:ha.users.detail(A||"")}),String(A||"").toLowerCase()===e&&await n.invalidateQueries({queryKey:ha.auth.me()}),S}}),L=p.useMemo(()=>{const S=N.data||[],A=i.trim().toLowerCase();return A?S.filter(D=>{const k=String(D.email||"").toLowerCase(),I=String(D.name||"").toLowerCase(),K=String(D.role||"").toLowerCase();return k.includes(A)||I.includes(A)||K.includes(A)}):S},[N.data,i]);async function M(S){S.preventDefault(),d("");try{await T.mutateAsync({user_email:v.user_email,name:v.name,role:v.role,active:Number(v.active),can_see_price_gbp:Number(v.can_see_price_gbp),can_use_cart:Number(v.can_use_cart)}),b({user_email:"",name:"",role:"customer",active:"1",can_see_price_gbp:"0",can_use_cart:"1"})}catch(A){d(A?.message||"Failed to create user")}}async function P(S,A){d("");try{await E.mutateAsync({email:S,patch:A})}catch(D){d(D?.message||"Failed to update user")}}async function V(S){d("");try{await j.mutateAsync(S)}catch(A){d(A?.message||"Failed to delete user")}}function z(S){y(String(S||"")),h(!0)}const G=N.isLoading,C=c||N.error?.message||"",w=T.isPending||E.isPending||j.isPending;return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsxs("div",{className:"mx-auto max-w-7xl px-6 py-8",children:[l.jsx("div",{className:"mb-6",children:l.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Admin Users"})}),l.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[l.jsxs(Pe,{className:"lg:col-span-1",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Add User"})}),l.jsx(ze,{children:l.jsxs("form",{className:"space-y-3",onSubmit:M,children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"Email"}),l.jsx(He,{value:v.user_email,onChange:S=>b(A=>({...A,user_email:S.target.value})),placeholder:"user@example.com",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"Name"}),l.jsx(He,{value:v.name,onChange:S=>b(A=>({...A,name:S.target.value})),placeholder:"Full name"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs font-medium text-muted-foreground",children:"Role"}),l.jsxs(an,{value:v.role,onValueChange:S=>b(A=>({...A,role:S})),children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"customer",children:"customer"}),l.jsx(ot,{value:"admin",children:"admin"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"mb-1 block min-h-8 text-xs font-medium text-muted-foreground",children:"Active"}),l.jsxs(an,{value:v.active,onValueChange:S=>b(A=>({...A,active:S})),children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"1",children:"1"}),l.jsx(ot,{value:"0",children:"0"})]})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"mb-1 block min-h-8 text-xs font-medium text-muted-foreground",children:"Can See Pound Price"}),l.jsxs(an,{value:v.can_see_price_gbp,onValueChange:S=>b(A=>({...A,can_see_price_gbp:S})),children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"1",children:"1"}),l.jsx(ot,{value:"0",children:"0"})]})]})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"mb-1 block min-h-8 text-xs font-medium text-muted-foreground",children:"Can Use Cart"}),l.jsxs(an,{value:v.can_use_cart,onValueChange:S=>b(A=>({...A,can_use_cart:S})),children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"1",children:"1"}),l.jsx(ot,{value:"0",children:"0"})]})]})]})]}),l.jsx(fe,{disabled:w,type:"submit",className:"w-full",children:w?"Saving...":"Add User"})]})})]}),l.jsxs(Pe,{className:"lg:col-span-2",children:[l.jsx(ut,{children:l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs(dt,{className:"text-base",children:["Users (",L.length,")"]}),l.jsx(He,{value:i,onChange:S=>a(S.target.value),placeholder:"Search by email, name, role...",className:"sm:max-w-xs"})]})}),l.jsxs(ze,{children:[C?l.jsx("div",{className:"mb-3 rounded-lg border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:C}):null,G?l.jsx(UF,{}):L.length===0?l.jsx("div",{className:"text-sm text-muted-foreground",children:"No users found."}):l.jsx("div",{className:"space-y-2",children:L.map(S=>{const A=String(S.email||"").toLowerCase()===e;return l.jsxs("div",{className:"rounded-xl border p-3",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:S.email}),l.jsx("div",{className:"text-sm text-muted-foreground",children:S.name||""})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Un,{variant:"secondary",children:S.role}),l.jsxs(Un,{variant:Number(S.active)===1?"default":"outline",children:["active:",Number(S.active)===1?"1":"0"]}),l.jsxs(Un,{variant:"outline",children:["pound price:",Number(S.can_see_price_gbp)===1?"1":"0"]}),l.jsxs(Un,{variant:"outline",children:["cart:",Number(S.can_use_cart)===1?"1":"0"]})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-6",children:[l.jsxs(an,{value:String(S.role||"customer"),onValueChange:D=>P(S.email,{role:D}),disabled:w||A,children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"customer",children:"customer"}),l.jsx(ot,{value:"admin",children:"admin"})]})]}),l.jsxs(an,{value:Number(S.active)===1?"1":"0",onValueChange:D=>P(S.email,{active:Number(D)}),disabled:w||A,children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"1",children:"active=1"}),l.jsx(ot,{value:"0",children:"active=0"})]})]}),l.jsxs(an,{value:Number(S.can_see_price_gbp)===1?"1":"0",onValueChange:D=>P(S.email,{can_see_price_gbp:Number(D)}),disabled:w,children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"1",children:"price=1"}),l.jsx(ot,{value:"0",children:"price=0"})]})]}),l.jsxs(an,{value:Number(S.can_use_cart)===1?"1":"0",onValueChange:D=>P(S.email,{can_use_cart:Number(D)}),disabled:w,children:[l.jsx(Kt,{children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"1",children:"cart=1"}),l.jsx(ot,{value:"0",children:"cart=0"})]})]}),l.jsx(He,{defaultValue:S.name||"",onBlur:D=>{const k=String(D.target.value||"").trim();k!==String(S.name||"").trim()&&P(S.email,{name:k})},disabled:w,placeholder:"Name"}),l.jsx(fe,{variant:"destructive",size:"icon",onClick:()=>z(S.email),disabled:w||A,title:"Delete user","aria-label":"Delete user",children:l.jsx(Ar,{className:"h-4 w-4"})})]})]},S.email)})})]})]})]})]}),l.jsx(nd,{open:f,onClose:()=>h(!1),title:"Delete user?",description:`This will permanently delete ${g}.`,confirmText:l.jsx(Ar,{className:"h-4 w-4"}),loading:w,onConfirm:async()=>{await V(g),h(!1)}})]})}function ao(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function kE(t){return Number(ao(t,0).toFixed(2))}function ma(t){return Math.round(ao(t,0))}function zF(){const t=new Date().toISOString().replace(/[-:.TZ]/g,"").slice(0,14),e=Math.floor(Math.random()*9e5)+1e5;return`PAY_${t}_${e}`}function BF(t){return Math.round(ao(t,0)).toLocaleString()}function FF(){const{user:t}=en(),[e,n]=p.useState([]),[i,a]=p.useState(""),[c,d]=p.useState(null),[f,h]=p.useState([]),[g,y]=p.useState(!1),[v,b]=p.useState(!0),[N,T]=p.useState(!1),[E,j]=p.useState(""),[L,M]=p.useState(""),[P,V]=p.useState({cost_total_gbp:"",cost_rate_bdt_per_gbp:"",cost_total_bdt:"",revenue_expected_bdt:"",revenue_collected_bdt:"",receivable_bdt:"",profit_bdt:"",status:"open"}),[z,G]=p.useState({customer_email:"",customer_name:"",amount_bdt:"",method:"",note:"",paid_at:""}),C=p.useMemo(()=>f.reduce((q,R)=>q+ao(R.amount_bdt,0),0),[f]),w=p.useMemo(()=>ma(ao(P.revenue_expected_bdt,0)-C),[P.revenue_expected_bdt,C]),S=p.useMemo(()=>ma(C-ao(P.cost_total_bdt,0)),[C,P.cost_total_bdt]);async function A(){b(!0),M("");try{const q=await Nr.listShipments();n(q||[]),!i&&q?.length&&a(q[0].shipment_id)}catch(q){M(q?.message||"Failed to load shipments")}finally{b(!1)}}async function D(q){if(q){M("");try{const[R,B,Y]=await Promise.all([Nr.getShipmentAccounting(q),Nr.listCustomerPayments(q),Nr.getShipmentById(q)]);h(B||[]),d(R);const Z=R?.cost_total_gbp??Y?.total_value_gbp??0,se=R?.cost_rate_bdt_per_gbp??Y?.gbp_rate_avg_bdt??0,F=R?.cost_total_bdt??ma(Z*se);V({cost_total_gbp:Z,cost_rate_bdt_per_gbp:se,cost_total_bdt:F,revenue_expected_bdt:R?.revenue_expected_bdt??0,revenue_collected_bdt:R?.revenue_collected_bdt??0,receivable_bdt:R?.receivable_bdt??0,profit_bdt:R?.profit_bdt??0,status:R?.status||"open"})}catch(R){M(R?.message||"Failed to load shipment accounting")}}}p.useEffect(()=>{A()},[]),p.useEffect(()=>{i&&D(i)},[i]);async function k(){if(i){T(!0),M(""),j("");try{const q={shipment_id:i,shipment_name:e.find(R=>R.shipment_id===i)?.name||"",cost_total_gbp:kE(P.cost_total_gbp),cost_rate_bdt_per_gbp:kE(P.cost_rate_bdt_per_gbp),cost_total_bdt:ma(P.cost_total_bdt),revenue_expected_bdt:ma(P.revenue_expected_bdt),status:String(P.status||"open").toLowerCase(),revenue_collected_bdt:g?ma(P.revenue_collected_bdt):C,receivable_bdt:g?ma(P.receivable_bdt):w,profit_bdt:g?ma(P.profit_bdt):S};c?.shipment_id?await Nr.updateShipmentAccounting(i,q):await Nr.createShipmentAccounting(q),await D(i),j("Shipment accounting saved.")}catch(q){M(q?.message||"Failed to save shipment accounting")}finally{T(!1)}}}async function I(){if(!i)return;const q=ao(z.amount_bdt,0);if(!(q>0)){M("Payment amount must be greater than 0.");return}T(!0),M("");try{await Nr.addCustomerPayment(i,zF(),{...z,amount_bdt:q,paid_at:z.paid_at||new Date().toISOString(),created_by:t?.email||""}),G({customer_email:"",customer_name:"",amount_bdt:"",method:"",note:"",paid_at:""}),await D(i),j("Payment added.")}catch(R){M(R?.message||"Failed to add payment")}finally{T(!1)}}async function K(q){if(!(!i||!q)){T(!0),M("");try{await Nr.removeCustomerPayment(i,q),await D(i),j("Payment removed.")}catch(R){M(R?.message||"Failed to remove payment")}finally{T(!1)}}}return l.jsxs("div",{className:"mx-auto w-full max-w-7xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Shipment Accounting"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Admin only. Auto totals with optional manual override."})]}),L?l.jsx("div",{className:"mb-3 rounded-lg border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:L}):null,E?l.jsx("div",{className:"mb-3 rounded-lg border p-3 text-sm",children:E}):null,l.jsx(Pe,{className:"mb-4",children:l.jsx(ze,{className:"p-4",children:l.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Shipment"}),l.jsxs(an,{value:i,onValueChange:a,disabled:v,children:[l.jsx(Kt,{className:"h-9",children:l.jsx(on,{placeholder:"Select shipment"})}),l.jsx(Yt,{children:e.map(q=>l.jsx(ot,{value:q.shipment_id,children:q.name||q.shipment_id},q.shipment_id))})]})]}),l.jsx("div",{className:"flex items-end gap-2",children:l.jsx(fe,{variant:g?"default":"outline",onClick:()=>y(q=>!q),children:g?"Manual Override: ON":"Manual Override: OFF"})})]})})}),l.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Accounting Header"})}),l.jsxs(ze,{className:"space-y-3",children:[l.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Cost Total (GBP)"}),l.jsx(He,{value:P.cost_total_gbp,onChange:q=>V(R=>({...R,cost_total_gbp:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Rate (BDT/GBP)"}),l.jsx(He,{value:P.cost_rate_bdt_per_gbp,onChange:q=>V(R=>({...R,cost_rate_bdt_per_gbp:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Cost Total (BDT)"}),l.jsx(He,{value:P.cost_total_bdt,onChange:q=>V(R=>({...R,cost_total_bdt:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Revenue Expected (BDT)"}),l.jsx(He,{value:P.revenue_expected_bdt,onChange:q=>V(R=>({...R,revenue_expected_bdt:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Revenue Collected (BDT)"}),l.jsx(He,{disabled:!g,value:g?P.revenue_collected_bdt:C,onChange:q=>V(R=>({...R,revenue_collected_bdt:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Receivable (BDT)"}),l.jsx(He,{disabled:!g,value:g?P.receivable_bdt:w,onChange:q=>V(R=>({...R,receivable_bdt:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Profit (BDT)"}),l.jsx(He,{disabled:!g,value:g?P.profit_bdt:S,onChange:q=>V(R=>({...R,profit_bdt:q.target.value}))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"mb-1 block text-xs text-muted-foreground",children:"Status"}),l.jsxs(an,{value:P.status,onValueChange:q=>V(R=>({...R,status:q})),children:[l.jsx(Kt,{className:"h-9",children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"open",children:"open"}),l.jsx(ot,{value:"closed",children:"closed"})]})]})]})]}),l.jsx(fe,{size:"icon",onClick:k,disabled:N||!i,title:"Save accounting","aria-label":"Save accounting",children:N?l.jsx(Ft,{className:"h-4 w-4 animate-spin"}):l.jsx(ui,{className:"h-4 w-4"})})]})]}),l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Customer Payments"})}),l.jsxs(ze,{className:"space-y-3",children:[l.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[l.jsx(He,{placeholder:"Customer Email",value:z.customer_email,onChange:q=>G(R=>({...R,customer_email:q.target.value}))}),l.jsx(He,{placeholder:"Customer Name",value:z.customer_name,onChange:q=>G(R=>({...R,customer_name:q.target.value}))}),l.jsx(He,{placeholder:"Amount BDT",inputMode:"decimal",value:z.amount_bdt,onChange:q=>G(R=>({...R,amount_bdt:q.target.value}))}),l.jsx(He,{placeholder:"Method (free text)",value:z.method,onChange:q=>G(R=>({...R,method:q.target.value}))}),l.jsx(He,{placeholder:"Paid At ISO (optional)",value:z.paid_at,onChange:q=>G(R=>({...R,paid_at:q.target.value}))}),l.jsx(He,{placeholder:"Note",value:z.note,onChange:q=>G(R=>({...R,note:q.target.value}))})]}),l.jsx(fe,{onClick:I,disabled:N||!i,children:N?"Saving...":"Add Payment"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-2 py-2",children:"Customer"}),l.jsx("th",{className:"px-2 py-2",children:"Method"}),l.jsx("th",{className:"px-2 py-2",children:"Amount"}),l.jsx("th",{className:"px-2 py-2",children:"Action"})]})}),l.jsxs("tbody",{className:"divide-y",children:[f.map(q=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-2 py-2",children:[l.jsx("div",{children:q.customer_name||"-"}),l.jsx("div",{className:"text-[10px] text-muted-foreground",children:q.customer_email||"-"})]}),l.jsx("td",{className:"px-2 py-2",children:q.method||"-"}),l.jsxs("td",{className:"px-2 py-2",children:["",BF(q.amount_bdt)]}),l.jsx("td",{className:"px-2 py-2",children:l.jsx(fe,{size:"icon",variant:"destructive",onClick:()=>K(q.payment_id),disabled:N,children:l.jsx(Ar,{className:"h-4 w-4"})})})]},q.payment_id)),f.length?null:l.jsx("tr",{children:l.jsx("td",{className:"px-2 py-3 text-muted-foreground",colSpan:4,children:"No payments yet."})})]})]})})]})]})]})]})}function ai(t){return String(t||"").trim()}function Ff(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}const iu="investors";function qF(){return{async getById(t){const e=ai(t);if(!e)return null;const n=await Vn(Ue(be,iu,e));return n.exists()?{investor_id:n.id,...n.data()}:null},async list(){return(await $t(_n(qt(be,iu),pi("name","asc")))).docs.map(e=>({investor_id:e.id,...e.data()}))},async create(t={}){const e=ai(t.investor_id);if(!e)throw new Error("Missing investor_id");const n={investor_id:e,name:ai(t.name),phone:ai(t.phone),email:ai(t.email).toLowerCase(),status:ai(t.status||"active").toLowerCase(),default_share_pct:Ff(t.default_share_pct,0),opening_balance_bdt:Ff(t.opening_balance_bdt,0),current_balance_bdt:Ff(t.current_balance_bdt,0),notes:ai(t.notes),created_at:Ie(),updated_at:Ie()};return await zn(Ue(be,iu,e),n,{merge:!1}),this.getById(e)},async update(t,e={}){const n=ai(t);if(!n)throw new Error("Missing investor_id");const i={updated_at:Ie()};return["name","phone","email","status","notes"].forEach(d=>{d in e&&(i[d]=d==="email"?ai(e[d]).toLowerCase():ai(e[d]))}),["default_share_pct","opening_balance_bdt","current_balance_bdt"].forEach(d=>{d in e&&(i[d]=Ff(e[d],0))}),await gi(Ue(be,iu,n),i),this.getById(n)},async remove(t){const e=ai(t);return e?(await dr(Ue(be,iu,e)),{success:!0}):{success:!0}}}}const $F=qF();function li(t){return String(t||"").trim()}function nh(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function HF(t={}){const e=li(t.investor_id);if(!e)throw new Error("investor_id is required");return{investor_id:e,name:li(t.name),phone:li(t.phone),email:li(t.email).toLowerCase(),status:li(t.status||"active").toLowerCase(),default_share_pct:nh(t.default_share_pct,0),opening_balance_bdt:nh(t.opening_balance_bdt,0),current_balance_bdt:nh(t.current_balance_bdt,0),notes:li(t.notes)}}function GF(t={}){const e={};return["name","phone","email","status","notes"].forEach(a=>{a in t&&(e[a]=a==="email"?li(t[a]).toLowerCase():li(t[a]))}),["default_share_pct","opening_balance_bdt","current_balance_bdt"].forEach(a=>{a in t&&(e[a]=nh(t[a],0))}),e}function QF(t=$F){return{async getInvestorById(e){return t.getById(li(e))},async listInvestors(){return t.list()},async createInvestor(e){return t.create(HF(e))},async updateInvestor(e,n){const i=li(e);if(!i)throw new Error("investor_id is required");return t.update(i,GF(n))},async removeInvestor(e){const n=li(e);if(!n)throw new Error("investor_id is required");return t.remove(n)}}}const D_=QF();function An(t){return String(t||"").trim()}function uu(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function qf(t,e=0){return Math.max(0,Math.round(uu(t,e)))}function PE(t,e=0){const n=Number(t);if(Number.isFinite(n))return n===1?1:0;if(typeof t=="boolean")return t?1:0;const i=An(t).toLowerCase();return i==="1"||i==="true"||i==="yes"?1:i==="0"||i==="false"||i==="no"?0:e}const xl="investor_transactions";function WF(){return{async getById(t){const e=An(t);if(!e)return null;const n=await Vn(Ue(be,xl,e));return n.exists()?{txn_id:n.id,...n.data()}:null},async listByInvestorId(t){const e=An(t);return e?(await $t(_n(qt(be,xl),Jr("investor_id","==",e),pi("txn_at","desc")))).docs.map(i=>({txn_id:i.id,...i.data()})):[]},async listByPeriod(t){const e=An(t);return e?(await $t(_n(qt(be,xl),Jr("period_key","==",e),pi("txn_at","desc")))).docs.map(i=>({txn_id:i.id,...i.data()})):[]},async create(t={}){const e=An(t.txn_id);if(!e)throw new Error("Missing txn_id");const n={txn_id:e,investor_id:An(t.investor_id),type:An(t.type),direction:An(t.direction),amount_bdt:uu(t.amount_bdt,0),running_balance_bdt:uu(t.running_balance_bdt,0),is_shipment_linked:PE(t.is_shipment_linked,0),shipment_id:An(t.shipment_id),shipment_accounting_id:An(t.shipment_accounting_id),fiscal_year:qf(t.fiscal_year,0),fiscal_month:Math.min(12,Math.max(1,qf(t.fiscal_month,1))),period_key:An(t.period_key),ref_no:An(t.ref_no),note:An(t.note),txn_at:t.txn_at||null,created_by:An(t.created_by).toLowerCase(),created_at:Ie(),updated_at:Ie()};return await zn(Ue(be,xl,e),n,{merge:!1}),this.getById(e)},async update(t,e={}){const n=An(t);if(!n)throw new Error("Missing txn_id");const i={updated_at:Ie()};return["investor_id","type","direction","shipment_id","shipment_accounting_id","period_key","ref_no","note"].forEach(c=>{c in e&&(i[c]=An(e[c]))}),"amount_bdt"in e&&(i.amount_bdt=uu(e.amount_bdt,0)),"running_balance_bdt"in e&&(i.running_balance_bdt=uu(e.running_balance_bdt,0)),"is_shipment_linked"in e&&(i.is_shipment_linked=PE(e.is_shipment_linked,0)),"fiscal_year"in e&&(i.fiscal_year=qf(e.fiscal_year,0)),"fiscal_month"in e&&(i.fiscal_month=Math.min(12,Math.max(1,qf(e.fiscal_month,1)))),"txn_at"in e&&(i.txn_at=e.txn_at||null),"created_by"in e&&(i.created_by=An(e.created_by).toLowerCase()),await gi(Ue(be,xl,n),i),this.getById(n)},async remove(t){const e=An(t);return e?(await dr(Ue(be,xl,e)),{success:!0}):{success:!0}}}}const KF=WF();function mn(t){return String(t||"").trim()}function xo(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function qh(t,e=0){return Math.max(0,Math.round(xo(t,e)))}function AT(t,e=0){const n=Number(t);if(Number.isFinite(n))return n===1?1:0;if(typeof t=="boolean")return t?1:0;const i=mn(t).toLowerCase();return i==="1"||i==="true"||i==="yes"?1:i==="0"||i==="false"||i==="no"?0:e}function YF(){const t=new Date().toISOString().replace(/[-:.TZ]/g,"").slice(0,14),e=Math.floor(Math.random()*9e5)+1e5;return`ITX_${t}_${e}`}function XF(t){const e=t?new Date(t):new Date;if(Number.isNaN(e.getTime())){const n=new Date;return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`}return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`}function ZF(t,e){const n=mn(t).toLowerCase(),i=Math.abs(xo(e,0));return n==="out"||n==="debit"?-i:i}function JF(t={}){const e=mn(t.txn_id)||YF(),n=t.txn_at||new Date().toISOString(),i=mn(t.period_key)||XF(n),a=Number(i.slice(0,4)),c=Number(i.slice(5,7));return{txn_id:e,investor_id:mn(t.investor_id),type:mn(t.type),direction:mn(t.direction),amount_bdt:xo(t.amount_bdt,0),running_balance_bdt:xo(t.running_balance_bdt,0),is_shipment_linked:AT(t.is_shipment_linked,0),shipment_id:mn(t.shipment_id),shipment_accounting_id:mn(t.shipment_accounting_id),fiscal_year:Number.isFinite(a)?a:qh(t.fiscal_year,0),fiscal_month:Number.isFinite(c)?Math.min(12,Math.max(1,c)):Math.min(12,Math.max(1,qh(t.fiscal_month,1))),period_key:i,ref_no:mn(t.ref_no),note:mn(t.note),txn_at:n,created_by:mn(t.created_by).toLowerCase()}}function eq(t={}){const e={};return["investor_id","type","direction","shipment_id","shipment_accounting_id","period_key","ref_no","note","created_by"].forEach(i=>{i in t&&(e[i]=i==="created_by"?mn(t[i]).toLowerCase():mn(t[i]))}),"amount_bdt"in t&&(e.amount_bdt=xo(t.amount_bdt,0)),"running_balance_bdt"in t&&(e.running_balance_bdt=xo(t.running_balance_bdt,0)),"is_shipment_linked"in t&&(e.is_shipment_linked=AT(t.is_shipment_linked,0)),"fiscal_year"in t&&(e.fiscal_year=qh(t.fiscal_year,0)),"fiscal_month"in t&&(e.fiscal_month=Math.min(12,Math.max(1,qh(t.fiscal_month,1)))),"txn_at"in t&&(e.txn_at=t.txn_at||null),e}function tq(t=KF){return{async getTransactionById(e){return t.getById(mn(e))},async listByInvestorId(e){return t.listByInvestorId(mn(e))},async listByPeriod(e){return t.listByPeriod(mn(e))},async createTransaction(e){const n=JF(e),i=mn(n.investor_id);if(!i)throw new Error("investor_id is required");const a=await t.listByInvestorId(i),c=a.length?xo(a[0].running_balance_bdt,0):0,d=ZF(n.direction,n.amount_bdt);return n.running_balance_bdt=c+d,t.create(n)},async updateTransaction(e,n){const i=mn(e);if(!i)throw new Error("txn_id is required");return t.update(i,eq(n))},async removeTransaction(e){const n=mn(e);if(!n)throw new Error("txn_id is required");return t.remove(n)}}}const su=tq();function Cl(t,e=0){const n=Number(t);return Number.isFinite(n)?n:e}function k_(t){return Math.round(Cl(t,0)).toLocaleString()}function nq(t){const e=String(t||"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"");return e?`INV_${e}`:""}function rq(){const{user:t}=en(),[e,n]=p.useState([]),[i,a]=p.useState([]),[c,d]=p.useState(""),[f,h]=p.useState([]),[g,y]=p.useState(""),[v,b]=p.useState(!1),[N,T]=p.useState(!0),[E,j]=p.useState(""),[L,M]=p.useState(""),[P,V]=p.useState({name:"",email:"",phone:"",default_share_pct:"",opening_balance_bdt:"",notes:""}),[z,G]=p.useState({type:"profit_share",direction:"in",amount_bdt:"",note:"",txn_at:"",shipment_id:""}),C=p.useMemo(()=>e.find(K=>K.investor_id===c)||null,[e,c]);async function w(){const K=await D_.listInvestors();n(K||[]),!c&&K?.length&&d(K[0].investor_id)}async function S(K){if(!K)return h([]);if(g){const R=await su.listByPeriod(g);h((R||[]).filter(B=>String(B.investor_id||"")===K));return}const q=await su.listByInvestorId(K);h(q||[])}async function A(){T(!0),M("");try{await Promise.all([w(),Nr.listShipments().then(K=>a(K||[]))])}catch(K){M(K?.message||"Failed to load investors")}finally{T(!1)}}p.useEffect(()=>{A()},[]),p.useEffect(()=>{S(c).catch(K=>M(K?.message||"Failed to load transactions"))},[c,g]);async function D(){const K=String(P.name||"").trim(),q=nq(K);if(!q){M("Investor name is required.");return}b(!0),M(""),j("");try{await D_.createInvestor({investor_id:q,name:K,email:P.email,phone:P.phone,default_share_pct:Cl(P.default_share_pct,0),opening_balance_bdt:Cl(P.opening_balance_bdt,0),current_balance_bdt:Cl(P.opening_balance_bdt,0),status:"active",notes:P.notes}),V({name:"",email:"",phone:"",default_share_pct:"",opening_balance_bdt:"",notes:""}),await w(),j("Investor created.")}catch(R){M(R?.message||"Failed to create investor")}finally{b(!1)}}async function k(){if(!c){M("Select an investor first.");return}const K=Cl(z.amount_bdt,0);if(!(K>0)){M("Amount must be greater than 0.");return}b(!0),M(""),j("");try{await su.createTransaction({investor_id:c,type:z.type,direction:z.direction,amount_bdt:K,note:z.note,txn_at:z.txn_at||new Date().toISOString(),shipment_id:z.shipment_id||"",shipment_accounting_id:z.shipment_id||"",is_shipment_linked:z.shipment_id?1:0,created_by:t?.email||""}),G({type:"profit_share",direction:"in",amount_bdt:"",note:"",txn_at:"",shipment_id:""}),await S(c);const q=await su.listByInvestorId(c);q?.length&&(await D_.updateInvestor(c,{current_balance_bdt:Cl(q[0].running_balance_bdt,0)}),await w()),j("Transaction added.")}catch(q){M(q?.message||"Failed to add transaction")}finally{b(!1)}}async function I(K){if(!(!K||!c)){b(!0),M("");try{await su.removeTransaction(K),await S(c),j("Transaction removed.")}catch(q){M(q?.message||"Failed to remove transaction")}finally{b(!1)}}}return l.jsxs("div",{className:"mx-auto w-full max-w-7xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Investors"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Admin only. Running balance is auto-calculated from ledger."})]}),L?l.jsx("div",{className:"mb-3 rounded-lg border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:L}):null,E?l.jsx("div",{className:"mb-3 rounded-lg border p-3 text-sm",children:E}):null,l.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Create Investor"})}),l.jsxs(ze,{className:"grid gap-2 md:grid-cols-2",children:[l.jsx(He,{placeholder:"Name",value:P.name,onChange:K=>V(q=>({...q,name:K.target.value}))}),l.jsx(He,{placeholder:"Email",value:P.email,onChange:K=>V(q=>({...q,email:K.target.value}))}),l.jsx(He,{placeholder:"Phone",value:P.phone,onChange:K=>V(q=>({...q,phone:K.target.value}))}),l.jsx(He,{placeholder:"Default Share %",value:P.default_share_pct,onChange:K=>V(q=>({...q,default_share_pct:K.target.value}))}),l.jsx(He,{placeholder:"Opening Balance (BDT)",value:P.opening_balance_bdt,onChange:K=>V(q=>({...q,opening_balance_bdt:K.target.value}))}),l.jsx(He,{placeholder:"Notes",value:P.notes,onChange:K=>V(q=>({...q,notes:K.target.value}))}),l.jsx("div",{className:"md:col-span-2",children:l.jsx(fe,{onClick:D,disabled:v||N,children:v?"Saving...":"Create Investor"})})]})]}),l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Investors"})}),l.jsxs(ze,{className:"space-y-2",children:[l.jsxs(an,{value:c,onValueChange:d,disabled:N,children:[l.jsx(Kt,{className:"h-9",children:l.jsx(on,{placeholder:"Select investor"})}),l.jsx(Yt,{children:e.map(K=>l.jsx(ot,{value:K.investor_id,children:K.name||K.investor_id},K.investor_id))})]}),C?l.jsxs("div",{className:"rounded-lg border p-3 text-sm",children:[l.jsx("div",{className:"font-medium",children:C.name}),l.jsx("div",{className:"text-muted-foreground",children:C.email||"-"}),l.jsxs("div",{className:"mt-1",children:["Current Balance: ",k_(C.current_balance_bdt)]})]}):null]})]})]}),l.jsxs(Pe,{className:"mt-4",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Investor Transactions"})}),l.jsxs(ze,{className:"space-y-3",children:[l.jsxs("div",{className:"grid gap-2 md:grid-cols-3",children:[l.jsx(He,{placeholder:"Period filter YYYY-MM (optional)",value:g,onChange:K=>y(K.target.value)}),l.jsxs(an,{value:z.type,onValueChange:K=>G(q=>({...q,type:K})),children:[l.jsx(Kt,{className:"h-9",children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"profit_share",children:"profit_share"}),l.jsx(ot,{value:"capital_add",children:"capital_add"}),l.jsx(ot,{value:"capital_withdraw",children:"capital_withdraw"}),l.jsx(ot,{value:"expense",children:"expense"}),l.jsx(ot,{value:"adjustment",children:"adjustment"})]})]}),l.jsxs(an,{value:z.direction,onValueChange:K=>G(q=>({...q,direction:K})),children:[l.jsx(Kt,{className:"h-9",children:l.jsx(on,{})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"in",children:"in"}),l.jsx(ot,{value:"out",children:"out"})]})]}),l.jsx(He,{placeholder:"Amount BDT",value:z.amount_bdt,onChange:K=>G(q=>({...q,amount_bdt:K.target.value}))}),l.jsx(He,{placeholder:"Txn at ISO (optional)",value:z.txn_at,onChange:K=>G(q=>({...q,txn_at:K.target.value}))}),l.jsxs(an,{value:z.shipment_id||"__none__",onValueChange:K=>G(q=>({...q,shipment_id:K==="__none__"?"":K})),children:[l.jsx(Kt,{className:"h-9",children:l.jsx(on,{placeholder:"Link shipment (optional)"})}),l.jsxs(Yt,{children:[l.jsx(ot,{value:"__none__",children:"No shipment link"}),i.map(K=>l.jsx(ot,{value:K.shipment_id,children:K.name||K.shipment_id},K.shipment_id))]})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx(He,{placeholder:"Note",value:z.note,onChange:K=>G(q=>({...q,note:K.target.value}))})}),l.jsx("div",{children:l.jsx(fe,{onClick:k,disabled:v||!c,children:v?"Saving...":"Add Transaction"})})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full text-xs",children:[l.jsx("thead",{className:"bg-muted/40 text-muted-foreground",children:l.jsxs("tr",{className:"text-left",children:[l.jsx("th",{className:"px-2 py-2",children:"Type"}),l.jsx("th",{className:"px-2 py-2",children:"Direction"}),l.jsx("th",{className:"px-2 py-2",children:"Amount"}),l.jsx("th",{className:"px-2 py-2",children:"Running Balance"}),l.jsx("th",{className:"px-2 py-2",children:"Period"}),l.jsx("th",{className:"px-2 py-2",children:"Shipment"}),l.jsx("th",{className:"px-2 py-2",children:"Action"})]})}),l.jsxs("tbody",{className:"divide-y",children:[f.map(K=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-2 py-2",children:K.type||"-"}),l.jsx("td",{className:"px-2 py-2",children:K.direction||"-"}),l.jsxs("td",{className:"px-2 py-2",children:["",k_(K.amount_bdt)]}),l.jsxs("td",{className:"px-2 py-2",children:["",k_(K.running_balance_bdt)]}),l.jsx("td",{className:"px-2 py-2",children:K.period_key||"-"}),l.jsx("td",{className:"px-2 py-2",children:K.shipment_id||"-"}),l.jsx("td",{className:"px-2 py-2",children:l.jsx(fe,{size:"icon",variant:"destructive",onClick:()=>I(K.txn_id),disabled:v,children:l.jsx(Ar,{className:"h-4 w-4"})})})]},K.txn_id)),f.length?null:l.jsx("tr",{children:l.jsx("td",{className:"px-2 py-3 text-muted-foreground",colSpan:7,children:"No transactions."})})]})]})})]})]})]})}function iq(){const t=[{icon:aU,title:"1. Submitted",status:"submitted",text:"Customer places an order. Admin starts review."},{icon:q6,title:"2. Price",status:"priced",text:"Admin calculates and saves offer prices."},{icon:wU,title:"3. Negotiate",status:"under_review",text:"Customer sends counters. Admin reviews and updates."},{icon:H6,title:"4. Finalize",status:"finalized",text:"Admin locks final quantity and final price."},{icon:kv,title:"5. Process Shipment",status:"processing",text:"Assign shipment, update weights, and track arrived qty."},{icon:dj,title:"6. Deliver",status:"partially_delivered / delivered",text:"Order auto-moves based on received quantities."}];return l.jsxs("div",{className:"mx-auto w-full max-w-6xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Admin Guide"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Status-first workflow for pricing, negotiation, and shipment processing."})]}),l.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Before Processing Checklist"})}),l.jsxs(ze,{className:"space-y-2 text-sm text-muted-foreground",children:[l.jsx("p",{children:"1. User access is correct (`role`, `active`, `can_use_cart`, price visibility)."}),l.jsx("p",{children:"2. Shipment has valid rates and cargo per kg."}),l.jsx("p",{children:"3. Order pricing is done and saved (`priced`/`under_review` to `finalized`)."}),l.jsx("p",{children:"4. Shipment allocation rows exist for all order items."}),l.jsx("p",{children:"5. Weights are updated in allocation before receiving starts."})]})]}),l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Status Rules"})}),l.jsxs(ze,{className:"space-y-2 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Un,{variant:"secondary",children:"delivered"}),l.jsx("span",{children:"is read-only for everyone."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Un,{variant:"secondary",children:"cancelled"}),l.jsx("span",{children:"can be permanently deleted by admin only."})]}),l.jsxs("p",{children:["Customer pricing actions happen at ",l.jsx("code",{children:"priced"}),"."]}),l.jsxs("p",{children:["Shipment/receiving actions happen after ",l.jsx("code",{children:"finalized"}),"."]})]})]}),l.jsxs(Pe,{className:"md:col-span-2",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Order Status Flow"})}),l.jsxs(ze,{className:"grid gap-3 md:grid-cols-2",children:[t.map(e=>{const n=e.icon;return l.jsxs("div",{className:"rounded-lg border p-3",children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(n,{className:"h-4 w-4 text-primary"}),l.jsx("div",{className:"text-sm font-semibold",children:e.title})]}),l.jsx("div",{className:"mb-1 text-xs text-muted-foreground",children:l.jsx("code",{children:e.status})}),l.jsx("div",{className:"text-sm text-muted-foreground",children:e.text})]},e.title)}),l.jsxs("div",{className:"rounded-lg border p-3 md:col-span-2",children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(sy,{className:"h-4 w-4 text-destructive"}),l.jsx("div",{className:"text-sm font-semibold",children:"Cancel Path"})]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["Admin can set ",l.jsx("code",{children:"cancelled"})," from non-delivered states. Cancelled orders can be permanently deleted with typed confirmation."]})]}),l.jsxs("div",{className:"rounded-lg border p-3 md:col-span-2",children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(AU,{className:"h-4 w-4 text-primary"}),l.jsx("div",{className:"text-sm font-semibold",children:"Permission Principle"})]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Status controls what each role can edit. Keep status transitions strict to prevent accidental changes."})]})]})]})]})]})}function sq(){const t=[{icon:Wu,title:"1. Place Order",status:"submitted",text:"Add products and place order. You can then track it from Orders."},{icon:IU,title:"2. Wait For Price",status:"priced",text:"Admin sets offer prices. You can review item-level offers."},{icon:bU,title:"3. Send Counter",status:"under_review",text:"You can submit your item-level counter offer while order is priced."},{icon:tU,title:"4. Finalized",status:"finalized",text:"Admin confirms final quantity and final price."},{icon:kv,title:"5. Processing",status:"processing / partially_delivered",text:"Shipment and receiving are in progress; delivery can be partial."},{icon:dj,title:"6. Delivered",status:"delivered",text:"Order is completed and becomes read-only."}];return l.jsxs("div",{className:"mx-auto w-full max-w-5xl p-4 md:p-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Customer Guide"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"How order status changes from submit to delivery."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs(Pe,{className:"md:col-span-2",children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Order Flow"})}),l.jsx(ze,{className:"grid gap-3 md:grid-cols-2",children:t.map(e=>{const n=e.icon;return l.jsxs("div",{className:"rounded-lg border p-3",children:[l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx(n,{className:"h-4 w-4 text-primary"}),l.jsx("div",{className:"text-sm font-semibold",children:e.title})]}),l.jsx("div",{className:"mb-1 text-xs text-muted-foreground",children:l.jsx("code",{children:e.status})}),l.jsx("div",{className:"text-sm text-muted-foreground",children:e.text})]},e.title)})})]}),l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"What You Can Edit"})}),l.jsxs(ze,{className:"space-y-2 text-sm text-muted-foreground",children:[l.jsxs("p",{children:["At ",l.jsx("code",{children:"priced"}),": you can set customer counter price (and quantity if enabled)."]}),l.jsxs("p",{children:["At ",l.jsx("code",{children:"under_review"})," and later: values are locked for customer edit."]}),l.jsxs("p",{children:["At ",l.jsx("code",{children:"delivered"})," / ",l.jsx("code",{children:"cancelled"}),": read-only."]})]})]}),l.jsxs(Pe,{children:[l.jsx(ut,{children:l.jsx(dt,{className:"text-base",children:"Price Visibility"})}),l.jsxs(ze,{className:"space-y-2 text-sm text-muted-foreground",children:[l.jsxs("p",{children:["If ",l.jsx("code",{children:"can_see_price_gbp = 1"}),", GBP price fields are visible."]}),l.jsxs("p",{children:["If ",l.jsx("code",{children:"can_see_price_gbp = 0"}),", GBP fields are hidden and BDT-facing values are shown."]}),l.jsxs("p",{children:["Customer pricing appears from ",l.jsx(Un,{variant:"secondary",children:"priced"})," status onward."]})]})]})]})]})}function aq(){const{user:t}=en(),e=String(t?.role||"customer").toLowerCase();return l.jsx(Ql,{to:e==="admin"?"/admin/orders":"/customer/orders",replace:!0})}function oq(){const{user:t}=en(),e=String(t?.role||"customer").toLowerCase();return l.jsx(Ql,{to:e==="admin"?"/about/admin":"/about/customer",replace:!0})}function lq({children:t}){const{user:e}=en(),n=String(e?.role||"customer").toLowerCase();return!e?.can_use_cart||n==="customer"?l.jsx(Ql,{to:"/permission-denied",replace:!0}):t}function fs({children:t}){const{user:e}=en();return String(e?.role||"customer").toLowerCase()!=="admin"?l.jsx(Ql,{to:"/permission-denied",replace:!0}):t}function cq(){return l.jsxs(_M,{children:[l.jsx(sn,{path:"/",element:l.jsx(Ql,{to:"/products",replace:!0})}),l.jsx(sn,{path:"/login",element:l.jsx(UU,{})}),l.jsx(sn,{path:"/permission-denied",element:l.jsx(t8,{})}),l.jsx(sn,{path:"/products",element:l.jsx(Gn,{children:l.jsx(QB,{})})}),l.jsx(sn,{path:"/orders",element:l.jsx(Gn,{children:l.jsx(aq,{})})}),l.jsx(sn,{path:"/about",element:l.jsx(Gn,{children:l.jsx(oq,{})})}),l.jsx(sn,{path:"/customer/orders",element:l.jsx(Gn,{children:l.jsx(r8,{})})}),l.jsx(sn,{path:"/customer/orders/:orderId",element:l.jsx(Gn,{children:l.jsx(s8,{})})}),l.jsx(sn,{path:"/about/customer",element:l.jsx(Gn,{children:l.jsx(sq,{})})}),l.jsx(sn,{path:"/admin/orders",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(l8,{})})})}),l.jsx(sn,{path:"/admin/orders/:orderId",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(b8,{})})})}),l.jsx(sn,{path:"/admin/shipments",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(K8,{})})})}),l.jsx(sn,{path:"/admin/shipments/:shipmentId",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(X8,{})})})}),l.jsx(sn,{path:"/admin/shipments/:shipmentId/weights",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(eF,{})})})}),l.jsx(sn,{path:"/admin/users",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(VF,{})})})}),l.jsx(sn,{path:"/admin/finance/shipment-accounting",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(FF,{})})})}),l.jsx(sn,{path:"/admin/finance/investors",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(rq,{})})})}),l.jsx(sn,{path:"/about/admin",element:l.jsx(Gn,{children:l.jsx(fs,{children:l.jsx(iq,{})})})}),l.jsx(sn,{path:"/cart",element:l.jsx(Gn,{children:l.jsx(lq,{children:l.jsx(JB,{})})})}),l.jsx(sn,{path:"*",element:l.jsx(e8,{})})]})}function uq(){const{toggleCart:t,distinctCount:e}=mm();return l.jsx(fe,{onClick:t,className:"fixed bottom-6 right-6 z-40 rounded-full px-5 py-6 shadow-lg",size:"lg","aria-label":"Open cart",children:l.jsxs("div",{className:"relative flex items-center gap-2",children:[l.jsx(Wu,{className:"h-5 w-5"}),e>0&&l.jsx(Un,{variant:"secondary",className:"absolute -right-3 -top-3 h-5 min-w-[20px] justify-center rounded-full px-1 text-xs font-bold",children:e}),l.jsx("span",{className:"text-sm font-medium",children:"Cart"})]})})}function dq(t){const e=fq(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(mq);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function fq(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=gq(a),f=pq(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var hq=Symbol("radix.slottable");function mq(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===hq}function pq(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function gq(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _q=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ad=_q.reduce((t,e)=>{const n=dq(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function yq(t,e){return p.useReducer((n,i)=>e[n][i]??n,t)}var db="ScrollArea",[RT]=Oa(db),[vq,ti]=RT(db),OT=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:i="hover",dir:a,scrollHideDelay:c=600,...d}=t,[f,h]=p.useState(null),[g,y]=p.useState(null),[v,b]=p.useState(null),[N,T]=p.useState(null),[E,j]=p.useState(null),[L,M]=p.useState(0),[P,V]=p.useState(0),[z,G]=p.useState(!1),[C,w]=p.useState(!1),S=pt(e,D=>h(D)),A=_m(a);return l.jsx(vq,{scope:n,type:i,dir:A,scrollHideDelay:c,scrollArea:f,viewport:g,onViewportChange:y,content:v,onContentChange:b,scrollbarX:N,onScrollbarXChange:T,scrollbarXEnabled:z,onScrollbarXEnabledChange:G,scrollbarY:E,onScrollbarYChange:j,scrollbarYEnabled:C,onScrollbarYEnabledChange:w,onCornerWidthChange:M,onCornerHeightChange:V,children:l.jsx(ad.div,{dir:A,...d,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":L+"px","--radix-scroll-area-corner-height":P+"px",...t.style}})})});OT.displayName=db;var IT="ScrollAreaViewport",MT=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:i,nonce:a,...c}=t,d=ti(IT,n),f=p.useRef(null),h=pt(e,f,d.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),l.jsx(ad.div,{"data-radix-scroll-area-viewport":"",...c,ref:h,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...t.style},children:l.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});MT.displayName=IT;var $i="ScrollAreaScrollbar",fb=p.forwardRef((t,e)=>{const{forceMount:n,...i}=t,a=ti($i,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:d}=a,f=t.orientation==="horizontal";return p.useEffect(()=>(f?c(!0):d(!0),()=>{f?c(!1):d(!1)}),[f,c,d]),a.type==="hover"?l.jsx(bq,{...i,ref:e,forceMount:n}):a.type==="scroll"?l.jsx(xq,{...i,ref:e,forceMount:n}):a.type==="auto"?l.jsx(DT,{...i,ref:e,forceMount:n}):a.type==="always"?l.jsx(hb,{...i,ref:e}):null});fb.displayName=$i;var bq=p.forwardRef((t,e)=>{const{forceMount:n,...i}=t,a=ti($i,t.__scopeScrollArea),[c,d]=p.useState(!1);return p.useEffect(()=>{const f=a.scrollArea;let h=0;if(f){const g=()=>{window.clearTimeout(h),d(!0)},y=()=>{h=window.setTimeout(()=>d(!1),a.scrollHideDelay)};return f.addEventListener("pointerenter",g),f.addEventListener("pointerleave",y),()=>{window.clearTimeout(h),f.removeEventListener("pointerenter",g),f.removeEventListener("pointerleave",y)}}},[a.scrollArea,a.scrollHideDelay]),l.jsx(ei,{present:n||c,children:l.jsx(DT,{"data-state":c?"visible":"hidden",...i,ref:e})})}),xq=p.forwardRef((t,e)=>{const{forceMount:n,...i}=t,a=ti($i,t.__scopeScrollArea),c=t.orientation==="horizontal",d=Fm(()=>h("SCROLL_END"),100),[f,h]=yq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(f==="idle"){const g=window.setTimeout(()=>h("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(g)}},[f,a.scrollHideDelay,h]),p.useEffect(()=>{const g=a.viewport,y=c?"scrollLeft":"scrollTop";if(g){let v=g[y];const b=()=>{const N=g[y];v!==N&&(h("SCROLL"),d()),v=N};return g.addEventListener("scroll",b),()=>g.removeEventListener("scroll",b)}},[a.viewport,c,h,d]),l.jsx(ei,{present:n||f!=="hidden",children:l.jsx(hb,{"data-state":f==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:Te(t.onPointerEnter,()=>h("POINTER_ENTER")),onPointerLeave:Te(t.onPointerLeave,()=>h("POINTER_LEAVE"))})})}),DT=p.forwardRef((t,e)=>{const n=ti($i,t.__scopeScrollArea),{forceMount:i,...a}=t,[c,d]=p.useState(!1),f=t.orientation==="horizontal",h=Fm(()=>{if(n.viewport){const g=n.viewport.offsetWidth<n.viewport.scrollWidth,y=n.viewport.offsetHeight<n.viewport.scrollHeight;d(f?g:y)}},10);return $l(n.viewport,h),$l(n.content,h),l.jsx(ei,{present:i||c,children:l.jsx(hb,{"data-state":c?"visible":"hidden",...a,ref:e})})}),hb=p.forwardRef((t,e)=>{const{orientation:n="vertical",...i}=t,a=ti($i,t.__scopeScrollArea),c=p.useRef(null),d=p.useRef(0),[f,h]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),g=VT(f.viewport,f.content),y={...i,sizes:f,onSizesChange:h,hasThumb:g>0&&g<1,onThumbChange:b=>c.current=b,onThumbPointerUp:()=>d.current=0,onThumbPointerDown:b=>d.current=b};function v(b,N){return jq(b,d.current,f,N)}return n==="horizontal"?l.jsx(wq,{...y,ref:e,onThumbPositionChange:()=>{if(a.viewport&&c.current){const b=a.viewport.scrollLeft,N=LE(b,f,a.dir);c.current.style.transform=`translate3d(${N}px, 0, 0)`}},onWheelScroll:b=>{a.viewport&&(a.viewport.scrollLeft=b)},onDragScroll:b=>{a.viewport&&(a.viewport.scrollLeft=v(b,a.dir))}}):n==="vertical"?l.jsx(Sq,{...y,ref:e,onThumbPositionChange:()=>{if(a.viewport&&c.current){const b=a.viewport.scrollTop,N=LE(b,f);c.current.style.transform=`translate3d(0, ${N}px, 0)`}},onWheelScroll:b=>{a.viewport&&(a.viewport.scrollTop=b)},onDragScroll:b=>{a.viewport&&(a.viewport.scrollTop=v(b))}}):null}),wq=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:i,...a}=t,c=ti($i,t.__scopeScrollArea),[d,f]=p.useState(),h=p.useRef(null),g=pt(e,h,c.onScrollbarXChange);return p.useEffect(()=>{h.current&&f(getComputedStyle(h.current))},[h]),l.jsx(PT,{"data-orientation":"horizontal",...a,ref:g,sizes:n,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Bm(n)+"px",...t.style},onThumbPointerDown:y=>t.onThumbPointerDown(y.x),onDragScroll:y=>t.onDragScroll(y.x),onWheelScroll:(y,v)=>{if(c.viewport){const b=c.viewport.scrollLeft+y.deltaX;t.onWheelScroll(b),BT(b,v)&&y.preventDefault()}},onResize:()=>{h.current&&c.viewport&&d&&i({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:h.current.clientWidth,paddingStart:Hh(d.paddingLeft),paddingEnd:Hh(d.paddingRight)}})}})}),Sq=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:i,...a}=t,c=ti($i,t.__scopeScrollArea),[d,f]=p.useState(),h=p.useRef(null),g=pt(e,h,c.onScrollbarYChange);return p.useEffect(()=>{h.current&&f(getComputedStyle(h.current))},[h]),l.jsx(PT,{"data-orientation":"vertical",...a,ref:g,sizes:n,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Bm(n)+"px",...t.style},onThumbPointerDown:y=>t.onThumbPointerDown(y.y),onDragScroll:y=>t.onDragScroll(y.y),onWheelScroll:(y,v)=>{if(c.viewport){const b=c.viewport.scrollTop+y.deltaY;t.onWheelScroll(b),BT(b,v)&&y.preventDefault()}},onResize:()=>{h.current&&c.viewport&&d&&i({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:h.current.clientHeight,paddingStart:Hh(d.paddingTop),paddingEnd:Hh(d.paddingBottom)}})}})}),[Nq,kT]=RT($i),PT=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:i,hasThumb:a,onThumbChange:c,onThumbPointerUp:d,onThumbPointerDown:f,onThumbPositionChange:h,onDragScroll:g,onWheelScroll:y,onResize:v,...b}=t,N=ti($i,n),[T,E]=p.useState(null),j=pt(e,S=>E(S)),L=p.useRef(null),M=p.useRef(""),P=N.viewport,V=i.content-i.viewport,z=Rn(y),G=Rn(h),C=Fm(v,10);function w(S){if(L.current){const A=S.clientX-L.current.left,D=S.clientY-L.current.top;g({x:A,y:D})}}return p.useEffect(()=>{const S=A=>{const D=A.target;T?.contains(D)&&z(A,V)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[P,T,V,z]),p.useEffect(G,[i,G]),$l(T,C),$l(N.content,C),l.jsx(Nq,{scope:n,scrollbar:T,hasThumb:a,onThumbChange:Rn(c),onThumbPointerUp:Rn(d),onThumbPositionChange:G,onThumbPointerDown:Rn(f),children:l.jsx(ad.div,{...b,ref:j,style:{position:"absolute",...b.style},onPointerDown:Te(t.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),L.current=T.getBoundingClientRect(),M.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",N.viewport&&(N.viewport.style.scrollBehavior="auto"),w(S))}),onPointerMove:Te(t.onPointerMove,w),onPointerUp:Te(t.onPointerUp,S=>{const A=S.target;A.hasPointerCapture(S.pointerId)&&A.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=M.current,N.viewport&&(N.viewport.style.scrollBehavior=""),L.current=null})})})}),$h="ScrollAreaThumb",LT=p.forwardRef((t,e)=>{const{forceMount:n,...i}=t,a=kT($h,t.__scopeScrollArea);return l.jsx(ei,{present:n||a.hasThumb,children:l.jsx(Eq,{ref:e,...i})})}),Eq=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:i,...a}=t,c=ti($h,n),d=kT($h,n),{onThumbPositionChange:f}=d,h=pt(e,v=>d.onThumbChange(v)),g=p.useRef(void 0),y=Fm(()=>{g.current&&(g.current(),g.current=void 0)},100);return p.useEffect(()=>{const v=c.viewport;if(v){const b=()=>{if(y(),!g.current){const N=Tq(v,f);g.current=N,f()}};return f(),v.addEventListener("scroll",b),()=>v.removeEventListener("scroll",b)}},[c.viewport,y,f]),l.jsx(ad.div,{"data-state":d.hasThumb?"visible":"hidden",...a,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Te(t.onPointerDownCapture,v=>{const N=v.target.getBoundingClientRect(),T=v.clientX-N.left,E=v.clientY-N.top;d.onThumbPointerDown({x:T,y:E})}),onPointerUp:Te(t.onPointerUp,d.onThumbPointerUp)})});LT.displayName=$h;var mb="ScrollAreaCorner",UT=p.forwardRef((t,e)=>{const n=ti(mb,t.__scopeScrollArea),i=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&i?l.jsx(Cq,{...t,ref:e}):null});UT.displayName=mb;var Cq=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...i}=t,a=ti(mb,n),[c,d]=p.useState(0),[f,h]=p.useState(0),g=!!(c&&f);return $l(a.scrollbarX,()=>{const y=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(y),h(y)}),$l(a.scrollbarY,()=>{const y=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(y),d(y)}),g?l.jsx(ad.div,{...i,ref:e,style:{width:c,height:f,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Hh(t){return t?parseInt(t,10):0}function VT(t,e){const n=t/e;return isNaN(n)?0:n}function Bm(t){const e=VT(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-n)*e;return Math.max(i,18)}function jq(t,e,n,i="ltr"){const a=Bm(n),c=a/2,d=e||c,f=a-d,h=n.scrollbar.paddingStart+d,g=n.scrollbar.size-n.scrollbar.paddingEnd-f,y=n.content-n.viewport,v=i==="ltr"?[0,y]:[y*-1,0];return zT([h,g],v)(t)}function LE(t,e,n="ltr"){const i=Bm(e),a=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,c=e.scrollbar.size-a,d=e.content-e.viewport,f=c-i,h=n==="ltr"?[0,d]:[d*-1,0],g=cy(t,h);return zT([0,d],[0,f])(g)}function zT(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function BT(t,e){return t>0&&t<e}var Tq=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},i=0;return(function a(){const c={left:t.scrollLeft,top:t.scrollTop},d=n.left!==c.left,f=n.top!==c.top;(d||f)&&e(),n=c,i=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(i)};function Fm(t,e){const n=Rn(t),i=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(i.current),[]),p.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(n,e)},[n,e])}function $l(t,e){const n=Rn(e);yn(()=>{let i=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(n)});return a.observe(t),()=>{window.cancelAnimationFrame(i),a.unobserve(t)}}},[t,n])}var FT=OT,Aq=MT,Rq=UT;const qT=p.forwardRef(({className:t,children:e,...n},i)=>l.jsxs(FT,{ref:i,className:Ge("relative overflow-hidden",t),...n,children:[l.jsx(Aq,{className:Ge("h-full w-full rounded-[inherit] overflow-x-hidden min-w-0","[scrollbar-gutter:stable]"),children:e}),l.jsx($T,{}),l.jsx(Rq,{})]}));qT.displayName=FT.displayName;const $T=p.forwardRef(({className:t,orientation:e="vertical",...n},i)=>l.jsx(fb,{ref:i,orientation:e,className:Ge("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:l.jsx(LT,{className:"relative flex-1 rounded-full bg-border"})}));$T.displayName=fb.displayName;function Oq(t){if(!t)return"";const e=t.match(/[?&]id=([^&]+)/),n=t.match(/\/file\/d\/([^/]+)/),i=e?.[1]||n?.[1];return i?`https://lh3.googleusercontent.com/d/${i}`:t}function Iq(){const t=fr(),{user:e}=en(),n=!!e?.can_see_price_gbp,{open:i,closeCart:a,items:c,inc:d,dec:f,remove:h,clear:g,isItemLoading:y,loading:v}=mm(),b=p.useMemo(()=>{let j=0,L=0;for(const M of c)j+=M.qty,L+=Number(M.product?.price??0)*M.qty;return{totalQty:j,totalPrice:L}},[c]),[N,T]=p.useState(!1);async function E(){await g(),T(!1)}return l.jsx(nb,{open:i,onOpenChange:j=>j?null:a(),children:l.jsxs(Pm,{side:"right",className:"w-full max-w-md overflow-x-hidden p-0 overflow-hidden [&>button]:hidden",children:[l.jsxs("div",{className:"flex h-full flex-col",children:[l.jsx(Lm,{className:"border-b border-border p-4",children:l.jsxs("div",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsxs(Um,{className:"flex items-center gap-2 text-base",children:[l.jsx(Wu,{className:"h-4 w-4"}),l.jsx("span",{children:"Your Cart"})]}),l.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[c.length," item",c.length===1?"":"s"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[c.length>0&&l.jsx(fe,{variant:"outline",size:"sm",onClick:()=>T(!0),disabled:v,className:"rounded-xl",children:v?l.jsxs(l.Fragment,{children:[l.jsx(Ft,{className:"mr-2 h-4 w-4 animate-spin"}),"Clearing"]}):"Clear"}),l.jsx(fe,{variant:"default",size:"icon",onClick:a,className:"rounded-xl","aria-label":"Close cart",children:l.jsx(dm,{className:"h-4 w-4"})})]})]})}),l.jsx("div",{className:"flex-1 min-h-0",children:c.length===0?l.jsx("div",{className:"p-4",children:l.jsx(Pe,{className:"rounded-2xl border border-border bg-muted p-6 text-center text-muted-foreground",children:"Your cart is empty."})}):l.jsx(qT,{className:"h-full min-w-0",children:l.jsx("div",{className:"w-full min-w-0 space-y-2 p-3",children:c.map(j=>{const L=j.product,M=di(L),P=Oq(L.imageUrl),V=!!y?.(j.key);return l.jsx(Pe,{className:["w-full max-w-full overflow-hidden rounded-xl border border-border bg-card mx-0 px-3 py-2 shadow-sm",V?"opacity-70":""].join(" "),children:l.jsxs("div",{className:"flex w-full min-w-0 gap-2",children:[l.jsx("div",{className:"h-14 w-14 flex-shrink-0 overflow-hidden rounded-lg bg-white",children:P?l.jsx("img",{src:P,alt:L.name,className:"h-14 w-14 object-contain",loading:"lazy",referrerPolicy:"no-referrer",onError:z=>{z.currentTarget.src=L.imageUrl}}):null}),l.jsxs("div",{className:"min-w-0 flex-1",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"text-[10px] font-medium uppercase tracking-wide text-muted-foreground",children:L.brand}),l.jsx("div",{className:"text-xs font-semibold leading-4 text-foreground break-words",children:L.name})]}),n?l.jsxs("div",{className:"shrink-0 text-xs font-semibold text-foreground",children:["",Number(L.price??0).toFixed(2)]}):l.jsx("div",{className:"shrink-0 text-[11px] font-medium text-muted-foreground",children:"Login"})]}),l.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Case"," ",l.jsx("span",{className:"font-medium text-foreground",children:M})]}),n&&l.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Line"," ",l.jsxs("span",{className:"font-medium text-foreground",children:["",(Number(L.price??0)*j.qty).toFixed(2)]})]})]}),l.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-1.5",children:[l.jsx(fe,{variant:"outline",size:"icon",className:"h-7 w-7 rounded-md",onClick:()=>f(j.key),disabled:V||v,"aria-label":`Decrease by ${M}`,title:`- ${M}`,children:l.jsx(Mv,{className:"h-3.5 w-3.5"})}),l.jsxs("div",{className:"w-11 text-center",children:[l.jsx("div",{className:"text-xs font-semibold leading-4 text-foreground",children:j.qty}),l.jsx("div",{className:"text-[10px] leading-4 text-muted-foreground",children:"qty"})]}),l.jsx(fe,{variant:"outline",size:"icon",className:"h-7 w-7 rounded-md",onClick:()=>d(j.key),disabled:V||v,"aria-label":`Increase by ${M}`,title:`+ ${M}`,children:l.jsx(Dv,{className:"h-3.5 w-3.5"})}),l.jsx(fe,{variant:"destructive",size:"icon",className:"h-7 w-7 rounded-md",onClick:()=>h(j.key),disabled:V||v,"aria-label":"Remove item",title:"Remove",children:V?l.jsx(Ft,{className:"h-3.5 w-3.5 animate-spin"}):l.jsx(Ar,{className:"h-3.5 w-3.5"})})]})]})]})},j.key)})})})}),l.jsxs("div",{className:"border-t border-border p-4",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:"Total quantity"}),l.jsx("span",{className:"font-semibold text-foreground",children:b.totalQty})]}),n&&l.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:"Estimated total"}),l.jsxs("span",{className:"text-sm font-bold text-foreground",children:["",b.totalPrice.toFixed(2)]})]}),l.jsxs(fe,{className:"mt-4 w-full rounded-2xl gap-2",disabled:c.length===0||v,onClick:()=>t("/cart"),children:["Checkout",l.jsx(P6,{className:"h-4 w-4"})]}),l.jsx("p",{className:"mt-2 text-center text-xs text-muted-foreground",children:"Quantity changes by case size (min 6)."})]})]}),l.jsx(nd,{open:N,onClose:()=>T(!1),onConfirm:E,title:"Clear cart?",description:"This will remove all items from your cart.",confirmText:"Clear",loading:v})]})})}const Mq=[{label:"Products",to:"/products",roles:["admin","customer"]},{label:"Orders",to:"/orders",roles:["admin","customer"]},{label:"Cart",to:"/cart",roles:["admin","customer"]},{label:"Shipments",to:"/admin/shipments",roles:["admin"]},{label:"Users",to:"/admin/users",roles:["admin"]},{label:"Accounting",to:"/admin/finance/shipment-accounting",roles:["admin"]},{label:"Investors",to:"/admin/finance/investors",roles:["admin"]},{label:"About",to:"/about",roles:["admin","customer"]}],Dq={links:Mq};function kq(t,e=[]){let n=[];function i(c,d){const f=p.createContext(d);f.displayName=c+"Context";const h=n.length;n=[...n,d];const g=v=>{const{scope:b,children:N,...T}=v,E=b?.[t]?.[h]||f,j=p.useMemo(()=>T,Object.values(T));return l.jsx(E.Provider,{value:j,children:N})};g.displayName=c+"Provider";function y(v,b){const N=b?.[t]?.[h]||f,T=p.useContext(N);if(T)return T;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[g,y]}const a=()=>{const c=n.map(d=>p.createContext(d));return function(f){const h=f?.[t]||c;return p.useMemo(()=>({[`__scope${t}`]:{...f,[t]:h}}),[f,h])}};return a.scopeName=t,[i,Pq(a,...e)]}function Pq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(c){const d=i.reduce((f,{useScope:h,scopeName:g})=>{const v=h(c)[`__scope${g}`];return{...f,...v}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}var P_={exports:{}},L_={};var UE;function Lq(){if(UE)return L_;UE=1;var t=Wh();function e(v,b){return v===b&&(v!==0||1/v===1/b)||v!==v&&b!==b}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,a=t.useEffect,c=t.useLayoutEffect,d=t.useDebugValue;function f(v,b){var N=b(),T=i({inst:{value:N,getSnapshot:b}}),E=T[0].inst,j=T[1];return c(function(){E.value=N,E.getSnapshot=b,h(E)&&j({inst:E})},[v,N,b]),a(function(){return h(E)&&j({inst:E}),v(function(){h(E)&&j({inst:E})})},[v]),d(N),N}function h(v){var b=v.getSnapshot;v=v.value;try{var N=b();return!n(v,N)}catch{return!0}}function g(v,b){return b()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:f;return L_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,L_}var VE;function Uq(){return VE||(VE=1,P_.exports=Lq()),P_.exports}var Vq=Uq();function zq(){return Vq.useSyncExternalStore(Bq,()=>!0,()=>!1)}function Bq(){return()=>{}}var pb="Avatar",[Fq]=kq(pb),[qq,HT]=Fq(pb),GT=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...i}=t,[a,c]=p.useState("idle");return l.jsx(qq,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:c,children:l.jsx(pm.span,{...i,ref:e})})});GT.displayName=pb;var QT="AvatarImage",WT=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:i,onLoadingStatusChange:a=()=>{},...c}=t,d=HT(QT,n),f=$q(i,c),h=Rn(g=>{a(g),d.onImageLoadingStatusChange(g)});return yn(()=>{f!=="idle"&&h(f)},[f,h]),f==="loaded"?l.jsx(pm.img,{...c,ref:e,src:i}):null});WT.displayName=QT;var KT="AvatarFallback",YT=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:i,...a}=t,c=HT(KT,n),[d,f]=p.useState(i===void 0);return p.useEffect(()=>{if(i!==void 0){const h=window.setTimeout(()=>f(!0),i);return()=>window.clearTimeout(h)}},[i]),d&&c.imageLoadingStatus!=="loaded"?l.jsx(pm.span,{...a,ref:e}):null});YT.displayName=KT;function zE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function $q(t,{referrerPolicy:e,crossOrigin:n}){const i=zq(),a=p.useRef(null),c=i?(a.current||(a.current=new window.Image),a.current):null,[d,f]=p.useState(()=>zE(c,t));return yn(()=>{f(zE(c,t))},[c,t]),yn(()=>{const h=v=>()=>{f(v)};if(!c)return;const g=h("loaded"),y=h("error");return c.addEventListener("load",g),c.addEventListener("error",y),e&&(c.referrerPolicy=e),typeof n=="string"&&(c.crossOrigin=n),()=>{c.removeEventListener("load",g),c.removeEventListener("error",y)}},[c,n,e]),d}var XT=GT,ZT=WT,JT=YT;const Ry=p.forwardRef(({className:t,...e},n)=>l.jsx(XT,{ref:n,className:Ge("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Ry.displayName=XT.displayName;const Oy=p.forwardRef(({className:t,...e},n)=>l.jsx(ZT,{ref:n,className:Ge("aspect-square h-full w-full",t),...e}));Oy.displayName=ZT.displayName;const Iy=p.forwardRef(({className:t,...e},n)=>l.jsx(JT,{ref:n,className:Ge("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Iy.displayName=JT.displayName;function Hq(t){const e=Gq(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(Wq);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function Gq(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=Yq(a),f=Kq(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Qq=Symbol("radix.slottable");function Wq(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Qq}function Kq(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function Yq(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Zq=Xq.reduce((t,e)=>{const n=Hq(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function eA(t){const e=Jq(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(t7);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function Jq(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=r7(a),f=n7(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var e7=Symbol("radix.slottable");function t7(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===e7}function n7(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function r7(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var i7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],od=i7.reduce((t,e)=>{const n=eA(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function s7(t,e){t&&Wl.flushSync(()=>t.dispatchEvent(e))}function a7(t){const e=o7(t),n=p.forwardRef((i,a)=>{const{children:c,...d}=i,f=p.Children.toArray(c),h=f.find(c7);if(h){const g=h.props.children,y=f.map(v=>v===h?p.Children.count(g)>1?p.Children.only(null):p.isValidElement(g)?g.props.children:null:v);return l.jsx(e,{...d,ref:a,children:p.isValidElement(g)?p.cloneElement(g,void 0,y):null})}return l.jsx(e,{...d,ref:a,children:c})});return n.displayName=`${t}.Slot`,n}function o7(t){const e=p.forwardRef((n,i)=>{const{children:a,...c}=n;if(p.isValidElement(a)){const d=d7(a),f=u7(c,a.props);return a.type!==p.Fragment&&(f.ref=i?Bn(i,d):d),p.cloneElement(a,f)}return p.Children.count(a)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var l7=Symbol("radix.slottable");function c7(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===l7}function u7(t,e){const n={...e};for(const i in e){const a=t[i],c=e[i];/^on[A-Z]/.test(i)?a&&c?n[i]=(...f)=>{const h=c(...f);return a(...f),h}:a&&(n[i]=a):i==="style"?n[i]={...a,...c}:i==="className"&&(n[i]=[a,c].filter(Boolean).join(" "))}return{...t,...n}}function d7(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var f7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tA=f7.reduce((t,e)=>{const n=a7(`Primitive.${e}`),i=p.forwardRef((a,c)=>{const{asChild:d,...f}=a,h=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(h,{...f,ref:c})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),U_="rovingFocusGroup.onEntryFocus",h7={bubbles:!1,cancelable:!0},ld="RovingFocusGroup",[My,nA,m7]=Bv(ld),[p7,rA]=Oa(ld,[m7]),[g7,_7]=p7(ld),iA=p.forwardRef((t,e)=>l.jsx(My.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(My.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(y7,{...t,ref:e})})}));iA.displayName=ld;var y7=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:a=!1,dir:c,currentTabStopId:d,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:h,onEntryFocus:g,preventScrollOnEntryFocus:y=!1,...v}=t,b=p.useRef(null),N=pt(e,b),T=_m(c),[E,j]=ju({prop:d,defaultProp:f??null,onChange:h,caller:ld}),[L,M]=p.useState(!1),P=Rn(g),V=nA(n),z=p.useRef(!1),[G,C]=p.useState(0);return p.useEffect(()=>{const w=b.current;if(w)return w.addEventListener(U_,P),()=>w.removeEventListener(U_,P)},[P]),l.jsx(g7,{scope:n,orientation:i,dir:T,loop:a,currentTabStopId:E,onItemFocus:p.useCallback(w=>j(w),[j]),onItemShiftTab:p.useCallback(()=>M(!0),[]),onFocusableItemAdd:p.useCallback(()=>C(w=>w+1),[]),onFocusableItemRemove:p.useCallback(()=>C(w=>w-1),[]),children:l.jsx(tA.div,{tabIndex:L||G===0?-1:0,"data-orientation":i,...v,ref:N,style:{outline:"none",...t.style},onMouseDown:Te(t.onMouseDown,()=>{z.current=!0}),onFocus:Te(t.onFocus,w=>{const S=!z.current;if(w.target===w.currentTarget&&S&&!L){const A=new CustomEvent(U_,h7);if(w.currentTarget.dispatchEvent(A),!A.defaultPrevented){const D=V().filter(R=>R.focusable),k=D.find(R=>R.active),I=D.find(R=>R.id===E),q=[k,I,...D].filter(Boolean).map(R=>R.ref.current);oA(q,y)}}z.current=!1}),onBlur:Te(t.onBlur,()=>M(!1))})})}),sA="RovingFocusGroupItem",aA=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:a=!1,tabStopId:c,children:d,...f}=t,h=vs(),g=c||h,y=_7(sA,n),v=y.currentTabStopId===g,b=nA(n),{onFocusableItemAdd:N,onFocusableItemRemove:T,currentTabStopId:E}=y;return p.useEffect(()=>{if(i)return N(),()=>T()},[i,N,T]),l.jsx(My.ItemSlot,{scope:n,id:g,focusable:i,active:a,children:l.jsx(tA.span,{tabIndex:v?0:-1,"data-orientation":y.orientation,...f,ref:e,onMouseDown:Te(t.onMouseDown,j=>{i?y.onItemFocus(g):j.preventDefault()}),onFocus:Te(t.onFocus,()=>y.onItemFocus(g)),onKeyDown:Te(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){y.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const L=x7(j,y.orientation,y.dir);if(L!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let P=b().filter(V=>V.focusable).map(V=>V.ref.current);if(L==="last")P.reverse();else if(L==="prev"||L==="next"){L==="prev"&&P.reverse();const V=P.indexOf(j.currentTarget);P=y.loop?w7(P,V+1):P.slice(V+1)}setTimeout(()=>oA(P))}}),children:typeof d=="function"?d({isCurrentTabStop:v,hasTabStop:E!=null}):d})})});aA.displayName=sA;var v7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function b7(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function x7(t,e,n){const i=b7(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return v7[i]}function oA(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function w7(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var S7=iA,N7=aA,Dy=["Enter"," "],E7=["ArrowDown","PageUp","Home"],lA=["ArrowUp","PageDown","End"],C7=[...E7,...lA],j7={ltr:[...Dy,"ArrowRight"],rtl:[...Dy,"ArrowLeft"]},T7={ltr:["ArrowLeft"],rtl:["ArrowRight"]},cd="Menu",[Ru,A7,R7]=Bv(cd),[jo,cA]=Oa(cd,[R7,Nm,rA]),qm=Nm(),uA=rA(),[O7,To]=jo(cd),[I7,ud]=jo(cd),dA=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:a,onOpenChange:c,modal:d=!0}=t,f=qm(e),[h,g]=p.useState(null),y=p.useRef(!1),v=Rn(c),b=_m(a);return p.useEffect(()=>{const N=()=>{y.current=!0,document.addEventListener("pointerdown",T,{capture:!0,once:!0}),document.addEventListener("pointermove",T,{capture:!0,once:!0})},T=()=>y.current=!1;return document.addEventListener("keydown",N,{capture:!0}),()=>{document.removeEventListener("keydown",N,{capture:!0}),document.removeEventListener("pointerdown",T,{capture:!0}),document.removeEventListener("pointermove",T,{capture:!0})}},[]),l.jsx(Wj,{...f,children:l.jsx(O7,{scope:e,open:n,onOpenChange:v,content:h,onContentChange:g,children:l.jsx(I7,{scope:e,onClose:p.useCallback(()=>v(!1),[v]),isUsingKeyboardRef:y,dir:b,modal:d,children:i})})})};dA.displayName=cd;var M7="MenuAnchor",gb=p.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,a=qm(n);return l.jsx(Kj,{...a,...i,ref:e})});gb.displayName=M7;var _b="MenuPortal",[D7,fA]=jo(_b,{forceMount:void 0}),hA=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:a}=t,c=To(_b,e);return l.jsx(D7,{scope:e,forceMount:n,children:l.jsx(ei,{present:n||c.open,children:l.jsx(Em,{asChild:!0,container:a,children:i})})})};hA.displayName=_b;var Xr="MenuContent",[k7,yb]=jo(Xr),mA=p.forwardRef((t,e)=>{const n=fA(Xr,t.__scopeMenu),{forceMount:i=n.forceMount,...a}=t,c=To(Xr,t.__scopeMenu),d=ud(Xr,t.__scopeMenu);return l.jsx(Ru.Provider,{scope:t.__scopeMenu,children:l.jsx(ei,{present:i||c.open,children:l.jsx(Ru.Slot,{scope:t.__scopeMenu,children:d.modal?l.jsx(P7,{...a,ref:e}):l.jsx(L7,{...a,ref:e})})})})}),P7=p.forwardRef((t,e)=>{const n=To(Xr,t.__scopeMenu),i=p.useRef(null),a=pt(e,i);return p.useEffect(()=>{const c=i.current;if(c)return Xv(c)},[]),l.jsx(vb,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Te(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),L7=p.forwardRef((t,e)=>{const n=To(Xr,t.__scopeMenu);return l.jsx(vb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),U7=eA("MenuContent.ScrollLock"),vb=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:d,disableOutsidePointerEvents:f,onEntryFocus:h,onEscapeKeyDown:g,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:b,onDismiss:N,disableOutsideScroll:T,...E}=t,j=To(Xr,n),L=ud(Xr,n),M=qm(n),P=uA(n),V=A7(n),[z,G]=p.useState(null),C=p.useRef(null),w=pt(e,C,j.onContentChange),S=p.useRef(0),A=p.useRef(""),D=p.useRef(0),k=p.useRef(null),I=p.useRef("right"),K=p.useRef(0),q=T?jm:p.Fragment,R=T?{as:U7,allowPinchZoom:!0}:void 0,B=Z=>{const se=A.current+Z,F=V().filter(me=>!me.disabled),re=document.activeElement,he=F.find(me=>me.ref.current===re)?.textValue,pe=F.map(me=>me.textValue),ye=Y7(pe,se,he),we=F.find(me=>me.textValue===ye)?.ref.current;(function me(Fe){A.current=Fe,window.clearTimeout(S.current),Fe!==""&&(S.current=window.setTimeout(()=>me(""),1e3))})(se),we&&setTimeout(()=>we.focus())};p.useEffect(()=>()=>window.clearTimeout(S.current),[]),Fv();const Y=p.useCallback(Z=>I.current===k.current?.side&&Z7(Z,k.current?.area),[]);return l.jsx(k7,{scope:n,searchRef:A,onItemEnter:p.useCallback(Z=>{Y(Z)&&Z.preventDefault()},[Y]),onItemLeave:p.useCallback(Z=>{Y(Z)||(C.current?.focus(),G(null))},[Y]),onTriggerLeave:p.useCallback(Z=>{Y(Z)&&Z.preventDefault()},[Y]),pointerGraceTimerRef:D,onPointerGraceIntentChange:p.useCallback(Z=>{k.current=Z},[]),children:l.jsx(q,{...R,children:l.jsx(vm,{asChild:!0,trapped:a,onMountAutoFocus:Te(c,Z=>{Z.preventDefault(),C.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:l.jsx(ym,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:g,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:b,onDismiss:N,children:l.jsx(S7,{asChild:!0,...P,dir:L.dir,orientation:"vertical",loop:i,currentTabStopId:z,onCurrentTabStopIdChange:G,onEntryFocus:Te(h,Z=>{L.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(Yj,{role:"menu","aria-orientation":"vertical","data-state":RA(j.open),"data-radix-menu-content":"",dir:L.dir,...M,...E,ref:w,style:{outline:"none",...E.style},onKeyDown:Te(E.onKeyDown,Z=>{const F=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,re=Z.ctrlKey||Z.altKey||Z.metaKey,he=Z.key.length===1;F&&(Z.key==="Tab"&&Z.preventDefault(),!re&&he&&B(Z.key));const pe=C.current;if(Z.target!==pe||!C7.includes(Z.key))return;Z.preventDefault();const we=V().filter(me=>!me.disabled).map(me=>me.ref.current);lA.includes(Z.key)&&we.reverse(),W7(we)}),onBlur:Te(t.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(S.current),A.current="")}),onPointerMove:Te(t.onPointerMove,Ou(Z=>{const se=Z.target,F=K.current!==Z.clientX;if(Z.currentTarget.contains(se)&&F){const re=Z.clientX>K.current?"right":"left";I.current=re,K.current=Z.clientX}}))})})})})})})});mA.displayName=Xr;var V7="MenuGroup",bb=p.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return l.jsx(od.div,{role:"group",...i,ref:e})});bb.displayName=V7;var z7="MenuLabel",pA=p.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return l.jsx(od.div,{...i,ref:e})});pA.displayName=z7;var Gh="MenuItem",BE="menu.itemSelect",$m=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...a}=t,c=p.useRef(null),d=ud(Gh,t.__scopeMenu),f=yb(Gh,t.__scopeMenu),h=pt(e,c),g=p.useRef(!1),y=()=>{const v=c.current;if(!n&&v){const b=new CustomEvent(BE,{bubbles:!0,cancelable:!0});v.addEventListener(BE,N=>i?.(N),{once:!0}),s7(v,b),b.defaultPrevented?g.current=!1:d.onClose()}};return l.jsx(gA,{...a,ref:h,disabled:n,onClick:Te(t.onClick,y),onPointerDown:v=>{t.onPointerDown?.(v),g.current=!0},onPointerUp:Te(t.onPointerUp,v=>{g.current||v.currentTarget?.click()}),onKeyDown:Te(t.onKeyDown,v=>{const b=f.searchRef.current!=="";n||b&&v.key===" "||Dy.includes(v.key)&&(v.currentTarget.click(),v.preventDefault())})})});$m.displayName=Gh;var gA=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:a,...c}=t,d=yb(Gh,n),f=uA(n),h=p.useRef(null),g=pt(e,h),[y,v]=p.useState(!1),[b,N]=p.useState("");return p.useEffect(()=>{const T=h.current;T&&N((T.textContent??"").trim())},[c.children]),l.jsx(Ru.ItemSlot,{scope:n,disabled:i,textValue:a??b,children:l.jsx(N7,{asChild:!0,...f,focusable:!i,children:l.jsx(od.div,{role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...c,ref:g,onPointerMove:Te(t.onPointerMove,Ou(T=>{i?d.onItemLeave(T):(d.onItemEnter(T),T.defaultPrevented||T.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Te(t.onPointerLeave,Ou(T=>d.onItemLeave(T))),onFocus:Te(t.onFocus,()=>v(!0)),onBlur:Te(t.onBlur,()=>v(!1))})})})}),B7="MenuCheckboxItem",_A=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...a}=t;return l.jsx(wA,{scope:t.__scopeMenu,checked:n,children:l.jsx($m,{role:"menuitemcheckbox","aria-checked":Qh(n)?"mixed":n,...a,ref:e,"data-state":wb(n),onSelect:Te(a.onSelect,()=>i?.(Qh(n)?!0:!n),{checkForDefaultPrevented:!1})})})});_A.displayName=B7;var yA="MenuRadioGroup",[F7,q7]=jo(yA,{value:void 0,onValueChange:()=>{}}),vA=p.forwardRef((t,e)=>{const{value:n,onValueChange:i,...a}=t,c=Rn(i);return l.jsx(F7,{scope:t.__scopeMenu,value:n,onValueChange:c,children:l.jsx(bb,{...a,ref:e})})});vA.displayName=yA;var bA="MenuRadioItem",xA=p.forwardRef((t,e)=>{const{value:n,...i}=t,a=q7(bA,t.__scopeMenu),c=n===a.value;return l.jsx(wA,{scope:t.__scopeMenu,checked:c,children:l.jsx($m,{role:"menuitemradio","aria-checked":c,...i,ref:e,"data-state":wb(c),onSelect:Te(i.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});xA.displayName=bA;var xb="MenuItemIndicator",[wA,$7]=jo(xb,{checked:!1}),SA=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...a}=t,c=$7(xb,n);return l.jsx(ei,{present:i||Qh(c.checked)||c.checked===!0,children:l.jsx(od.span,{...a,ref:e,"data-state":wb(c.checked)})})});SA.displayName=xb;var H7="MenuSeparator",NA=p.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return l.jsx(od.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});NA.displayName=H7;var G7="MenuArrow",EA=p.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,a=qm(n);return l.jsx(Xj,{...a,...i,ref:e})});EA.displayName=G7;var Q7="MenuSub",[eH,CA]=jo(Q7),du="MenuSubTrigger",jA=p.forwardRef((t,e)=>{const n=To(du,t.__scopeMenu),i=ud(du,t.__scopeMenu),a=CA(du,t.__scopeMenu),c=yb(du,t.__scopeMenu),d=p.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:h}=c,g={__scopeMenu:t.__scopeMenu},y=p.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return p.useEffect(()=>y,[y]),p.useEffect(()=>{const v=f.current;return()=>{window.clearTimeout(v),h(null)}},[f,h]),l.jsx(gb,{asChild:!0,...g,children:l.jsx(gA,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":RA(n.open),...t,ref:Bn(e,a.onTriggerChange),onClick:v=>{t.onClick?.(v),!(t.disabled||v.defaultPrevented)&&(v.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Te(t.onPointerMove,Ou(v=>{c.onItemEnter(v),!v.defaultPrevented&&!t.disabled&&!n.open&&!d.current&&(c.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),y()},100))})),onPointerLeave:Te(t.onPointerLeave,Ou(v=>{y();const b=n.content?.getBoundingClientRect();if(b){const N=n.content?.dataset.side,T=N==="right",E=T?-5:5,j=b[T?"left":"right"],L=b[T?"right":"left"];c.onPointerGraceIntentChange({area:[{x:v.clientX+E,y:v.clientY},{x:j,y:b.top},{x:L,y:b.top},{x:L,y:b.bottom},{x:j,y:b.bottom}],side:N}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(v),v.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:Te(t.onKeyDown,v=>{const b=c.searchRef.current!=="";t.disabled||b&&v.key===" "||j7[i.dir].includes(v.key)&&(n.onOpenChange(!0),n.content?.focus(),v.preventDefault())})})})});jA.displayName=du;var TA="MenuSubContent",AA=p.forwardRef((t,e)=>{const n=fA(Xr,t.__scopeMenu),{forceMount:i=n.forceMount,...a}=t,c=To(Xr,t.__scopeMenu),d=ud(Xr,t.__scopeMenu),f=CA(TA,t.__scopeMenu),h=p.useRef(null),g=pt(e,h);return l.jsx(Ru.Provider,{scope:t.__scopeMenu,children:l.jsx(ei,{present:i||c.open,children:l.jsx(Ru.Slot,{scope:t.__scopeMenu,children:l.jsx(vb,{id:f.contentId,"aria-labelledby":f.triggerId,...a,ref:g,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:y=>{d.isUsingKeyboardRef.current&&h.current?.focus(),y.preventDefault()},onCloseAutoFocus:y=>y.preventDefault(),onFocusOutside:Te(t.onFocusOutside,y=>{y.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:Te(t.onEscapeKeyDown,y=>{d.onClose(),y.preventDefault()}),onKeyDown:Te(t.onKeyDown,y=>{const v=y.currentTarget.contains(y.target),b=T7[d.dir].includes(y.key);v&&b&&(c.onOpenChange(!1),f.trigger?.focus(),y.preventDefault())})})})})})});AA.displayName=TA;function RA(t){return t?"open":"closed"}function Qh(t){return t==="indeterminate"}function wb(t){return Qh(t)?"indeterminate":t?"checked":"unchecked"}function W7(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function K7(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Y7(t,e,n){const a=e.length>1&&Array.from(e).every(g=>g===e[0])?e[0]:e,c=n?t.indexOf(n):-1;let d=K7(t,Math.max(c,0));a.length===1&&(d=d.filter(g=>g!==n));const h=d.find(g=>g.toLowerCase().startsWith(a.toLowerCase()));return h!==n?h:void 0}function X7(t,e){const{x:n,y:i}=t;let a=!1;for(let c=0,d=e.length-1;c<e.length;d=c++){const f=e[c],h=e[d],g=f.x,y=f.y,v=h.x,b=h.y;y>i!=b>i&&n<(v-g)*(i-y)/(b-y)+g&&(a=!a)}return a}function Z7(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return X7(n,e)}function Ou(t){return e=>e.pointerType==="mouse"?t(e):void 0}var J7=dA,e$=gb,t$=hA,n$=mA,r$=bb,i$=pA,s$=$m,a$=_A,o$=vA,l$=xA,c$=SA,u$=NA,d$=EA,f$=jA,h$=AA,Hm="DropdownMenu",[m$]=Oa(Hm,[cA]),Zn=cA(),[p$,OA]=m$(Hm),IA=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:a,defaultOpen:c,onOpenChange:d,modal:f=!0}=t,h=Zn(e),g=p.useRef(null),[y,v]=ju({prop:a,defaultProp:c??!1,onChange:d,caller:Hm});return l.jsx(p$,{scope:e,triggerId:vs(),triggerRef:g,contentId:vs(),open:y,onOpenChange:v,onOpenToggle:p.useCallback(()=>v(b=>!b),[v]),modal:f,children:l.jsx(J7,{...h,open:y,onOpenChange:v,dir:i,modal:f,children:n})})};IA.displayName=Hm;var MA="DropdownMenuTrigger",DA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...a}=t,c=OA(MA,n),d=Zn(n);return l.jsx(e$,{asChild:!0,...d,children:l.jsx(Zq.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...a,ref:Bn(e,c.triggerRef),onPointerDown:Te(t.onPointerDown,f=>{!i&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:Te(t.onKeyDown,f=>{i||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});DA.displayName=MA;var g$="DropdownMenuPortal",kA=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Zn(e);return l.jsx(t$,{...i,...n})};kA.displayName=g$;var PA="DropdownMenuContent",LA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=OA(PA,n),c=Zn(n),d=p.useRef(!1);return l.jsx(n$,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...i,ref:e,onCloseAutoFocus:Te(t.onCloseAutoFocus,f=>{d.current||a.triggerRef.current?.focus(),d.current=!1,f.preventDefault()}),onInteractOutside:Te(t.onInteractOutside,f=>{const h=f.detail.originalEvent,g=h.button===0&&h.ctrlKey===!0,y=h.button===2||g;(!a.modal||y)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});LA.displayName=PA;var _$="DropdownMenuGroup",y$=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(r$,{...a,...i,ref:e})});y$.displayName=_$;var v$="DropdownMenuLabel",UA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(i$,{...a,...i,ref:e})});UA.displayName=v$;var b$="DropdownMenuItem",VA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(s$,{...a,...i,ref:e})});VA.displayName=b$;var x$="DropdownMenuCheckboxItem",zA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(a$,{...a,...i,ref:e})});zA.displayName=x$;var w$="DropdownMenuRadioGroup",S$=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(o$,{...a,...i,ref:e})});S$.displayName=w$;var N$="DropdownMenuRadioItem",BA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(l$,{...a,...i,ref:e})});BA.displayName=N$;var E$="DropdownMenuItemIndicator",FA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(c$,{...a,...i,ref:e})});FA.displayName=E$;var C$="DropdownMenuSeparator",qA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(u$,{...a,...i,ref:e})});qA.displayName=C$;var j$="DropdownMenuArrow",T$=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(d$,{...a,...i,ref:e})});T$.displayName=j$;var A$="DropdownMenuSubTrigger",$A=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(f$,{...a,...i,ref:e})});$A.displayName=A$;var R$="DropdownMenuSubContent",HA=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,a=Zn(n);return l.jsx(h$,{...a,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HA.displayName=R$;var O$=IA,I$=DA,M$=kA,GA=LA,QA=UA,WA=VA,KA=zA,YA=BA,XA=FA,ZA=qA,JA=$A,eR=HA;const D$=O$,k$=I$,P$=p.forwardRef(({className:t,inset:e,children:n,...i},a)=>l.jsxs(JA,{ref:a,className:Ge("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...i,children:[n,l.jsx(K6,{className:"ml-auto"})]}));P$.displayName=JA.displayName;const L$=p.forwardRef(({className:t,...e},n)=>l.jsx(eR,{ref:n,className:Ge("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));L$.displayName=eR.displayName;const tR=p.forwardRef(({className:t,sideOffset:e=4,...n},i)=>l.jsx(M$,{children:l.jsx(GA,{ref:i,sideOffset:e,className:Ge("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));tR.displayName=GA.displayName;const nR=p.forwardRef(({className:t,inset:e,...n},i)=>l.jsx(WA,{ref:i,className:Ge("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e&&"pl-8",t),...n}));nR.displayName=WA.displayName;const U$=p.forwardRef(({className:t,children:e,checked:n,...i},a)=>l.jsxs(KA,{ref:a,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(XA,{children:l.jsx(uj,{className:"h-4 w-4"})})}),e]}));U$.displayName=KA.displayName;const V$=p.forwardRef(({className:t,children:e,...n},i)=>l.jsxs(YA,{ref:i,className:Ge("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(XA,{children:l.jsx(rU,{className:"h-2 w-2 fill-current"})})}),e]}));V$.displayName=YA.displayName;const rR=p.forwardRef(({className:t,inset:e,...n},i)=>l.jsx(QA,{ref:i,className:Ge("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));rR.displayName=QA.displayName;const ky=p.forwardRef(({className:t,...e},n)=>l.jsx(ZA,{ref:n,className:Ge("-mx-1 my-1 h-px bg-muted",t),...e}));ky.displayName=ZA.displayName;function FE(...t){return t.filter(Boolean).join(" ")}function qE(t){const e=String(t||"").toLowerCase();return e.includes("product")?B6:e.includes("cart")?Wu:e.includes("order")?IN:e.includes("shipment")?kv:e.includes("user")?PU:e.includes("account")?U6:e.includes("investor")?mU:e.includes("about")?fU:IN}function z$(){const{user:t,logout:e}=en(),n=Bi(),[i,a]=p.useState(!1),c=String(t?.role||"customer").toLowerCase(),d=!!t?.can_use_cart&&c!=="customer",f=p.useMemo(()=>(Dq?.links||[]).filter(T=>{if(String(T?.to||"")==="/cart"&&!d)return!1;const E=Array.isArray(T.roles)?T.roles.map(j=>String(j).toLowerCase()):null;return!E||E.length===0?!0:E.includes(c)}),[d,c]);p.useEffect(()=>{a(!1)},[n.pathname]);const h=t?.email||"",g=t?.name||"",y=t?.photo_url||"",v=(g||h||"U").trim().slice(0,1).toUpperCase(),b="/brand-wala-uk/logo/BW%20logo%20full.png";return l.jsx("div",{className:"sticky top-0 z-50",children:l.jsx("div",{className:"mx-auto max-w-7xl px-4 pt-4 sm:px-6",children:l.jsx("nav",{className:"rounded-2xl border border-border/70 bg-card/95 shadow-lg backdrop-blur-xl",children:l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-5",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("div",{className:"rounded-xl border border-border bg-muted px-2 py-2",children:l.jsx("img",{src:b,alt:"BW full",className:"h-8 w-auto object-contain"})})}),l.jsx("div",{className:"hidden flex-1 items-center justify-center lg:flex",children:l.jsx("div",{className:"flex items-center gap-1 rounded-2xl border border-border bg-muted/70 p-1",children:f.map(N=>l.jsxs(B_,{to:N.to,className:({isActive:T})=>FE("flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition",T?"bg-background text-foreground shadow-sm ring-1 ring-border":"text-muted-foreground hover:bg-background/60 hover:text-foreground"),children:[(()=>{const T=qE(N.label);return l.jsx(T,{className:"h-4 w-4"})})(),N.label]},N.to))})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(D$,{children:[l.jsx(k$,{asChild:!0,children:l.jsxs(fe,{variant:"outline",className:"h-10 rounded-xl gap-2 px-2.5",children:[l.jsxs(Ry,{className:"h-6 w-6",children:[l.jsx(Oy,{src:y,alt:g||h||"User",referrerPolicy:"no-referrer"}),l.jsx(Iy,{className:"text-[10px]",children:v})]}),l.jsx(Iv,{className:"h-4 w-4 text-muted-foreground"})]})}),l.jsxs(tR,{align:"end",className:"w-[320px] rounded-2xl",children:[l.jsxs(rR,{className:"space-y-1",children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsxs(Ry,{className:"h-8 w-8",children:[l.jsx(Oy,{src:y,alt:g||h||"User",referrerPolicy:"no-referrer"}),l.jsx(Iy,{children:v})]}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"truncate text-sm font-bold text-foreground",children:g||"User"}),l.jsx("div",{className:"truncate text-xs text-muted-foreground",children:h||""})]})]}),l.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Logged in"})]}),l.jsx(ky,{}),l.jsx("div",{className:"px-2 py-1.5 text-sm",children:l.jsxs("div",{className:"flex items-center justify-between px-2 py-1",children:[l.jsx("span",{className:"text-muted-foreground",children:"Role"}),l.jsx(Un,{variant:"secondary",className:"rounded-full",children:c})]})}),l.jsx(ky,{}),l.jsxs(nR,{onClick:e,className:"cursor-pointer gap-2 text-destructive focus:text-destructive",children:[l.jsx(MN,{className:"h-4 w-4"}),"Logout"]})]})]}),l.jsxs(nb,{open:i,onOpenChange:a,children:[l.jsx(dT,{asChild:!0,children:l.jsx(fe,{variant:"outline",size:"icon",className:"rounded-xl lg:hidden","aria-label":"Open menu",children:l.jsx(yU,{className:"h-5 w-5"})})}),l.jsxs(Pm,{side:"right",className:"w-[86%] max-w-sm p-0 [&>button]:hidden",children:[l.jsx(Lm,{className:"border-b border-border px-4 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"rounded-xl border border-border bg-muted px-2 py-2",children:l.jsx("img",{src:b,alt:"BW full",className:"h-7 w-auto object-contain"})}),l.jsx(Um,{className:"text-sm font-semibold text-foreground",children:"Menu"})]}),l.jsx(fe,{variant:"default",size:"icon",className:"rounded-xl","aria-label":"Close menu",onClick:()=>a(!1),children:l.jsx(dm,{className:"h-4 w-4"})})]})}),l.jsx("div",{className:"flex h-full flex-col",children:l.jsxs("div",{className:"flex-1 overflow-auto px-4 py-4",children:[l.jsx("div",{className:"space-y-2",children:f.map(N=>l.jsxs(B_,{to:N.to,className:({isActive:T})=>FE("flex items-center gap-2 rounded-2xl px-4 py-3 text-sm font-semibold transition",T?"bg-primary text-primary-foreground":"bg-muted text-foreground hover:bg-muted/80"),children:[(()=>{const T=qE(N.label);return l.jsx(T,{className:"h-4 w-4"})})(),N.label]},N.to))}),l.jsx(gm,{className:"my-6"}),l.jsxs("div",{className:"rounded-2xl border border-border bg-card p-4",children:[l.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"Account"}),l.jsx("div",{className:"mt-2 truncate text-sm font-bold text-foreground",children:h||""}),l.jsx("div",{className:"mt-2 flex items-center gap-2",children:l.jsx(Un,{variant:"secondary",className:"rounded-full",children:c})}),l.jsxs(fe,{variant:"destructive",className:"mt-4 w-full rounded-xl gap-2",onClick:e,children:[l.jsx(MN,{className:"h-4 w-4"}),"Logout"]})]})]})})]})]})]})]})})})})}let wo=0,$E=!1;const Py=new Set;function iR(){const t=wo>0;Py.forEach(e=>{try{e(t,wo)}catch{}})}function HE(){wo+=1,iR()}function GE(){wo=Math.max(0,wo-1),iR()}function QE(t){const e=String(t||"");return!!(e.includes("/Listen/channel")&&e.includes("TYPE=terminate"))}function B$(t){return Py.add(t),t(wo>0,wo),()=>Py.delete(t)}function F$(){if($E||typeof window>"u")return;$E=!0;const t=window.fetch?.bind(window);t&&(window.fetch=async(...n)=>{const i=n?.[0]instanceof Request?n[0].url:n?.[0],a=QE(i);a||HE();try{return await t(...n)}finally{a||GE()}});const e=window.XMLHttpRequest;e&&(window.XMLHttpRequest=function(){const i=new e;let a=!1,c=!1;const d=i.open;i.open=function(y,v,...b){return a=!QE(v),d.call(this,y,v,...b)};const f=()=>{!a||c||(c=!0,GE())};i.addEventListener("loadend",f),i.addEventListener("error",f),i.addEventListener("abort",f),i.addEventListener("timeout",f);const h=i.send;return i.send=function(...y){return a&&HE(),h.call(this,...y)},i})}function q$(){const[t,e]=p.useState(!1),[n,i]=p.useState(0),a=p.useRef(null);return p.useEffect(()=>B$(c=>{a.current&&clearInterval(a.current),c?(e(!0),i(18),a.current=setInterval(()=>{i(d=>Math.min(90,d+(100-d)*.08))},120)):(i(100),setTimeout(()=>{e(!1),i(0)},180))}),[]),!t&&n===0?null:l.jsx("div",{className:"pointer-events-none fixed left-0 top-0 z-[100] h-[3px] w-full",children:l.jsx("div",{className:"h-full bg-primary transition-[width,opacity] duration-200 ease-out",style:{width:`${n}%`,opacity:t||n>0?1:0}})})}function $$(){const[t,e]=p.useState(!1);return p.useEffect(()=>{const n=()=>{e(window.scrollY>280)};return n(),window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[]),t?l.jsx(fe,{type:"button",size:"icon",className:"fixed bottom-4 left-4 z-50 h-10 w-10 rounded-full shadow-lg sm:bottom-5 sm:left-5",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),"aria-label":"Scroll to top",title:"Scroll to top",children:l.jsx(J6,{className:"h-5 w-5"})}):null}function H$(t){return["/products"].some(n=>t===n||t.startsWith(n+"/"))}function G$(t){const e=String(t||"").toLowerCase();return!(e==="/login"||e.startsWith("/login/")||e.endsWith("/login")||e.includes("/login/"))}function Q$(){const{pathname:t}=Bi(),{user:e}=en(),n=H$(t),i=G$(t),a=String(e?.role||"customer").toLowerCase(),c=!!e?.can_use_cart&&a!=="customer";return l.jsxs(l.Fragment,{children:[l.jsx(q$,{}),i&&l.jsx(z$,{}),l.jsx(cq,{}),n&&c&&l.jsx(Iq,{}),n&&c&&l.jsx(uq,{}),i&&l.jsx($$,{})]})}const W$=new NF({defaultOptions:{queries:{staleTime:600*1e3,gcTime:1800*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:0,networkMode:"online"},mutations:{retry:0,networkMode:"online"}}});function K$({children:t}){return l.jsxs(EF,{client:W$,children:[l.jsx(AL,{children:l.jsx(r5,{children:t})}),null]})}F$();bI.createRoot(document.getElementById("root")).render(l.jsx(BM,{children:l.jsx(K$,{children:l.jsx(Q$,{})})}));
